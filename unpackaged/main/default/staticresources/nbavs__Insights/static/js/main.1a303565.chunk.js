(this.webpackJsonpinsight=this.webpackJsonpinsight||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports={mask:"NoteModal_mask__1sUur",NoteModal:"NoteModal_NoteModal__1CEpf",modalHeader:"NoteModal_modalHeader__G3xba",title:"NoteModal_title__W7Jhu",modalBody:"NoteModal_modalBody__3C9UD",modalBodyDisabled:"NoteModal_modalBodyDisabled__3Q1R5",noteDetailsContainer:"NoteModal_noteDetailsContainer__2Uque",threadContainer:"NoteModal_threadContainer__2rgPO",detailColumn:"NoteModal_detailColumn__3j5i8",timeDetailColumn:"NoteModal_timeDetailColumn__3oSOl",userDetailColumn:"NoteModal_userDetailColumn__3873S",relatingToDetailColumn:"NoteModal_relatingToDetailColumn__1pydu",polarityDetailColumn:"NoteModal_polarityDetailColumn__S5HQY",timeInput:"NoteModal_timeInput__A0BE8",dropdown:"NoteModal_dropdown__190h9",timeDropdown:"NoteModal_timeDropdown__34kHu",dropdownButton:"NoteModal_dropdownButton__3vsAb",dropdownButtonWithIcon:"NoteModal_dropdownButtonWithIcon__14PCC",dropdownButtonIcon:"NoteModal_dropdownButtonIcon__1UAVK",typeToggle:"NoteModal_typeToggle__10u6g",dropdownContent:"NoteModal_dropdownContent__Qsz7N",timeToggle:"NoteModal_timeToggle__1-Dbp",dropdownItem:"NoteModal_dropdownItem__o06A4",dropdownItemWithIcon:"NoteModal_dropdownItemWithIcon__11Y9K",dropdownItemIcon:"NoteModal_dropdownItemIcon__2lT0D",dropdownBackground:"NoteModal_dropdownBackground__VLJmq",noteTextContainer:"NoteModal_noteTextContainer__2Q5uZ",noteDetails:"NoteModal_noteDetails__2QRGe",shareContainer:"NoteModal_shareContainer__1YoJG",modalFooter:"NoteModal_modalFooter__1gKrE",closeButton:"NoteModal_closeButton__3LD5c",cancelButton:"NoteModal_cancelButton__KgG6g",addButton:"NoteModal_addButton__EWZrV",deleteButton:"NoteModal_deleteButton__3Y1ib",timePicker:"NoteModal_timePicker__1pzBZ",numberPicker:"NoteModal_numberPicker__22GIX",numberInput:"NoteModal_numberInput__1Y-YM",upButton:"NoteModal_upButton__2eVrI",downButton:"NoteModal_downButton__NNB7z",checkboxContainer:"NoteModal_checkboxContainer__3ZLxn",checkboxLabel:"NoteModal_checkboxLabel__24vPa",checkbox:"NoteModal_checkbox__7QcMD",checkbox2:"NoteModal_checkbox2__2xXfi"}},,function(e,t,n){e.exports={EventTimeline:"EventTimeline_EventTimeline__33wCA",ControlLayer:"EventTimeline_ControlLayer__3I9iP",EventLayer:"EventTimeline_EventLayer__2vguG",LayerContent:"EventTimeline_LayerContent__755Wd",overlayMargin:"EventTimeline_overlayMargin__3Y6ok",gradientLayer:"EventTimeline_gradientLayer__2bcZi",gradientStart:"EventTimeline_gradientStart__fe28T",gradientEnd:"EventTimeline_gradientEnd__1FIgX",sentenceMarker:"EventTimeline_sentenceMarker__210VZ",focusSwitcherTop:"EventTimeline_focusSwitcherTop__1LiA0",focusSwitcherBottom:"EventTimeline_focusSwitcherBottom__1loOO",sentenceMarkerAvatarTop:"EventTimeline_sentenceMarkerAvatarTop__1O-ia",sentenceMarkerAvatarBottom:"EventTimeline_sentenceMarkerAvatarBottom__3Ph4J",sentence:"EventTimeline_sentence__jg4lB",conference:"EventTimeline_conference__2Eby2",top:"EventTimeline_top__2Wmfw",bottom:"EventTimeline_bottom__1jFB9",playhead:"EventTimeline_playhead__AyxS7",playheadTop:"EventTimeline_playheadTop__3Q8LR",playheadBottom:"EventTimeline_playheadBottom__2Vz-9",playheadTime:"EventTimeline_playheadTime__3MIEW",timeStamp:"EventTimeline_timeStamp__2ot5c",timeStampLine:"EventTimeline_timeStampLine__hoyPZ",timeStampText:"EventTimeline_timeStampText__3KcwP",overlay:"EventTimeline_overlay__2aUBd","transport-container":"EventTimeline_transport-container__1JTo3","transport-button":"EventTimeline_transport-button__1qMlf",start:"EventTimeline_start__18fGt",restart:"EventTimeline_restart__1SD5f",overlayContentFlex:"EventTimeline_overlayContentFlex__25gAH","info-box":"EventTimeline_info-box__2tBxX","info-displaying-text":"EventTimeline_info-displaying-text__3zglK",channelLines:"EventTimeline_channelLines__2PYg_",channelLabel:"EventTimeline_channelLabel__17jRE",tinyNumber:"EventTimeline_tinyNumber__298XW",hideEventTimeline:"EventTimeline_hideEventTimeline__1Ts_P",showEventTimeline:"EventTimeline_showEventTimeline__6kP7r",showEventTimelineContent:"EventTimeline_showEventTimelineContent__OyRJo",showIcon:"EventTimeline_showIcon__3LR3W",pauseSkipIcon:"EventTimeline_pauseSkipIcon__1Z7lW",progressBarContainer:"EventTimeline_progressBarContainer__me3sx",progressBarOuter:"EventTimeline_progressBarOuter__2amQO",progressBar:"EventTimeline_progressBar__6AoIF",closeButton:"EventTimeline_closeButton__w6MsB",unreadNotes:"EventTimeline_unreadNotes__2oRWZ",notificationBell:"EventTimeline_notificationBell__3J2q2",notificationCount:"EventTimeline_notificationCount__336nT",reviewButton:"EventTimeline_reviewButton__3hWjI"}},function(e,t,n){e.exports={header:"CallSummary_header__1BrBi",summaryBar:"CallSummary_summaryBar__29dIH",summaryLines:"CallSummary_summaryLines__1o5UL",summaryLabels:"CallSummary_summaryLabels__O3NWb",label:"CallSummary_label__1Ad0x",line:"CallSummary_line__1ABtQ",group:"CallSummary_group__2Snbk",flip:"CallSummary_flip__nesyS",section:"CallSummary_section__1TjqM",sectionColumns:"CallSummary_sectionColumns__2exPN",talking:"CallSummary_talking__1fO-y",listening:"CallSummary_listening__2mQKD",overtalk:"CallSummary_overtalk__Ez4YV",silent:"CallSummary_silent__22eJS",holding:"CallSummary_holding__10Wlo",queuing:"CallSummary_queuing__3noF0",routing:"CallSummary_routing__2xLTH",ringing:"CallSummary_ringing__3dJg9",agent:"CallSummary_agent__HcXtE",customer:"CallSummary_customer__M0Ach",headerItem:"CallSummary_headerItem__3Kfka",buttonShowLess:"CallSummary_buttonShowLess__2u-v-",buttonShowMore:"CallSummary_buttonShowMore__q9TAD",metricsSection:"CallSummary_metricsSection__Bmdci",metricsTable:"CallSummary_metricsTable__3tBLo",totals:"CallSummary_totals__3S669",figure:"CallSummary_figure__2TdLL",rowTitle:"CallSummary_rowTitle__1Lho5",bigDigits:"CallSummary_bigDigits__2s6yo"}},,function(e,t,n){e.exports={onTop:"TranscriptionConversation_onTop__H7ZcM",TranscriptionConversation:"TranscriptionConversation_TranscriptionConversation__Hm7sm",transcriptionEventContainer:"TranscriptionConversation_transcriptionEventContainer__3j7RN",container:"TranscriptionConversation_container__d2bFK",playHead:"TranscriptionConversation_playHead__10vuv",start:"TranscriptionConversation_start__28y7S",conversation:"TranscriptionConversation_conversation__9LZ36",conversationContainer:"TranscriptionConversation_conversationContainer__3GZbJ",conversationRow:"TranscriptionConversation_conversationRow__3FWdD",conversationRowLinked:"TranscriptionConversation_conversationRowLinked__YmrvP",conversationRowRight:"TranscriptionConversation_conversationRowRight__1hJHF",spacer:"TranscriptionConversation_spacer__1P6IX",sentence:"TranscriptionConversation_sentence__3Yd0S",primary:"TranscriptionConversation_primary__3s7C6",playheadMarker:"TranscriptionConversation_playheadMarker__2IF7x",sentenceBody:"TranscriptionConversation_sentenceBody__2qhuW",person:"TranscriptionConversation_person__1lwBb",blanking:"TranscriptionConversation_blanking__2y-h2",secondary:"TranscriptionConversation_secondary__2k82J",initials:"TranscriptionConversation_initials__11w8E",playHeadLine:"TranscriptionConversation_playHeadLine__1ir2G",playHeadStartText:"TranscriptionConversation_playHeadStartText__2Bhe6",confidence:"TranscriptionConversation_confidence__3QVNg",matchFill:"TranscriptionConversation_matchFill__3n50E",matchFillAnimate:"TranscriptionConversation_matchFillAnimate__1KxgR"}},,,,function(e,t,n){e.exports={mask:"CallRating_mask__2Zwb0",CallRating:"CallRating_CallRating__1tqJB",modalHeader:"CallRating_modalHeader__NQG1W",title:"CallRating_title__2Icpr",modalBody:"CallRating_modalBody__xjR-2",ratingRow:"CallRating_ratingRow__2z4ST",ratingContainer:"CallRating_ratingContainer__3toSc",ratingTitle:"CallRating_ratingTitle__2cE1f",noteDetails:"CallRating_noteDetails__2XJ4E",pipRating:"CallRating_pipRating__15oOm",rating:"CallRating_rating__ClyMx",pip:"CallRating_pip__1RnoO",pip5:"CallRating_pip5__3tMFu",active:"CallRating_active__wbvz3",radio5:"CallRating_radio5__yIA_p",pip4:"CallRating_pip4__2th7s",radio4:"CallRating_radio4__3KLED",pip3:"CallRating_pip3__vIrFG",radio3:"CallRating_radio3__2OTA4",pip2:"CallRating_pip2__1he_W",radio2:"CallRating_radio2__LLg-u",pip1:"CallRating_pip1__3fhyr",radio1:"CallRating_radio1__1kD5j",modalFooter:"CallRating_modalFooter__3hk2T",closeButton:"CallRating_closeButton__ENewE",cancelButton:"CallRating_cancelButton__2tfav",finishButton:"CallRating_finishButton__2XxMi"}},function(e,t,n){e.exports={small:"StandardChannelEventsLayer_small__1cz35",startIcon:"StandardChannelEventsLayer_startIcon__saU_x",endIcon:"StandardChannelEventsLayer_endIcon__uu9yc",eventContainer:"StandardChannelEventsLayer_eventContainer__C4qVC",event:"StandardChannelEventsLayer_event__3V-VD",LayerContent:"StandardChannelEventsLayer_LayerContent__1PL5F",transfer:"StandardChannelEventsLayer_transfer__1lZVx",scrubber:"StandardChannelEventsLayer_scrubber__1D3au",pause:"StandardChannelEventsLayer_pause__1RSEJ",start:"StandardChannelEventsLayer_start__3RgZE",ring:"StandardChannelEventsLayer_ring__1sQ7b",bridge:"StandardChannelEventsLayer_bridge__k8UYG",wholeTimeline:"StandardChannelEventsLayer_wholeTimeline__1pwqa",hold:"StandardChannelEventsLayer_hold__2xXdl",microClusteredEndIconContainer:"StandardChannelEventsLayer_microClusteredEndIconContainer__inN4v",microClusteredEndIcon:"StandardChannelEventsLayer_microClusteredEndIcon__3RFBa",markerLines:"StandardChannelEventsLayer_markerLines__Gu0Eq",leftLine:"StandardChannelEventsLayer_leftLine__yYz6W",rightLine:"StandardChannelEventsLayer_rightLine__1BGwr",routingOverlay:"StandardChannelEventsLayer_routingOverlay__InWyN",routing:"StandardChannelEventsLayer_routing__3eXD8",primary:"StandardChannelEventsLayer_primary__2UeZx",secondary:"StandardChannelEventsLayer_secondary__33HtG",iconLevel:"StandardChannelEventsLayer_iconLevel__12BAC",unrecordedTimeLabel:"StandardChannelEventsLayer_unrecordedTimeLabel__1Q3g4"}},,function(e,t,n){e.exports={SearchFilters:"SearchFilters_SearchFilters__357Sq",tabs:"SearchFilters_tabs__2YMo0",button:"SearchFilters_button__cLFyv",active:"SearchFilters_active__173Mt",inuse:"SearchFilters_inuse__2hUDP",spacer:"SearchFilters_spacer__1zssF",search:"SearchFilters_search__Drw9T",callSummary:"SearchFilters_callSummary__2My5R",knowledge:"SearchFilters_knowledge__2vUtq",insights:"SearchFilters_insights__2Et2o",chevron:"SearchFilters_chevron__2PbAp"}},function(e,t,n){e.exports={mask:"KnowledgeClassifications_mask__1WKQO",modal:"KnowledgeClassifications_modal__1QIuP",modalHeader:"KnowledgeClassifications_modalHeader__2w6Aq",title:"KnowledgeClassifications_title__1iCPt",modalFooter:"KnowledgeClassifications_modalFooter__NR1DA",categoriesContainer:"KnowledgeClassifications_categoriesContainer__Stq-p",categoriesHeader:"KnowledgeClassifications_categoriesHeader__LFc_1",categoriesBody:"KnowledgeClassifications_categoriesBody__2J2G9",headerTitle:"KnowledgeClassifications_headerTitle__flmR3",pillContainer:"KnowledgeClassifications_pillContainer__2PJxO",pillContainerKeywords:"KnowledgeClassifications_pillContainerKeywords__ElOMm",selectedItemName:"KnowledgeClassifications_selectedItemName__2s8Fe",triggers:"KnowledgeClassifications_triggers__1IY6a",closeButton:"KnowledgeClassifications_closeButton__3BDhi",cancelButton:"KnowledgeClassifications_cancelButton__3dCyB"}},,function(e,t,n){e.exports={callListContainer:"Header_callListContainer__3V3Yf",callListItem:"Header_callListItem__3ZYY-",uuid:"Header_uuid__29XWB",itemIndex:"Header_itemIndex__6xdhU",Header:"Header_Header__1CTzX",HeaderContainer:"Header_HeaderContainer__1lPul",Branding:"Header_Branding__3-ssE",logo:"Header_logo__3T0lc",Player:"Header_Player__3mMx8",LayoutOptions:"Header_LayoutOptions__uuRgn",Exit:"Header_Exit__3Zmim",visibilityButton:"Header_visibilityButton__2fe1C",dropdownContent:"Header_dropdownContent__1iGTI",regularCheckbox:"Header_regularCheckbox__3Mc9e",dropdownItem:"Header_dropdownItem__1lTVZ",finish:"Header_finish__2O8pu"}},function(e,t,n){e.exports={content:"Knowledge_content__SqQhv",column:"Knowledge_column__Ozm__",title:"Knowledge_title__2OvnU",topics:"Knowledge_topics__2vmDc",spacer:"Knowledge_spacer__3sa6z",pillContainer:"Knowledge_pillContainer__2fixs",classificationContainer:"Knowledge_classificationContainer__3epfS",classificationsExceptionHeader:"Knowledge_classificationsExceptionHeader__1nYgL",classificationsExceptionColumn:"Knowledge_classificationsExceptionColumn__2OBgk",classificationsEmpty:"Knowledge_classificationsEmpty__343P2",noPointerEvents:"Knowledge_noPointerEvents__2uKBo",searchNavigation:"Knowledge_searchNavigation__UuGYG",showAll:"Knowledge_showAll__mBv5l",progressBarContainer:"Knowledge_progressBarContainer__ng3g5",progressBarOuter:"Knowledge_progressBarOuter__31YuM",progressBar:"Knowledge_progressBar__iUN4Q"}},function(e,t,n){e.exports={actionButton:"TranscriptionNote_actionButton__269-z",overflowMenu:"TranscriptionNote_overflowMenu__3ybh5",acknowledged:"TranscriptionNote_acknowledged__2GXoK",toggleThreadButton:"TranscriptionNote_toggleThreadButton__27ZFe",edited:"TranscriptionNote_edited__2fkGM",locked:"TranscriptionNote_locked__1Oel1",note:"TranscriptionNote_note__3SnEO",comment:"TranscriptionNote_comment__2_9kK",closed:"TranscriptionNote_closed__2wrrn",heading:"TranscriptionNote_heading__24j7C",subject:"TranscriptionNote_subject__2VwZG",author:"TranscriptionNote_author__3_4Rr",time:"TranscriptionNote_time__1-g5E",noteText:"TranscriptionNote_noteText__1B-l1",unread:"TranscriptionNote_unread__25WDG"}},function(e,t,n){e.exports={transcriptionContainer:"Transcription_transcriptionContainer__OfTBP",Transcription:"Transcription_Transcription__5sUXw",sections:"Transcription_sections__3y7Hr",LayerContent:"Transcription_LayerContent__3-m_O",playScrub:"Transcription_playScrub__1RgEc",playScrubLine:"Transcription_playScrubLine__1XA-7",playButton:"Transcription_playButton__939mV",playHead:"Transcription_playHead__3ktpg",notes:"Transcription_notes__28nDa",conversation:"Transcription_conversation__3Vogj",confidenceContainer:"Transcription_confidenceContainer__IUiZE",confidenceHighlight:"Transcription_confidenceHighlight__H7Vyc",confidenceText:"Transcription_confidenceText__1iM-r",slider:"Transcription_slider__3gJr4"}},function(e,t,n){e.exports={TranscriptionNotes:"TranscriptionNotes_TranscriptionNotes__2SeRv",NewNoteSection:"TranscriptionNotes_NewNoteSection__ra53G",newNoteContainer:"TranscriptionNotes_newNoteContainer__K0dDS",newNoteText:"TranscriptionNotes_newNoteText__2rKR2",newNoteIcon:"TranscriptionNotes_newNoteIcon__WGBma",checkboxContainer:"TranscriptionNotes_checkboxContainer__3c2aO",checkboxLabel:"TranscriptionNotes_checkboxLabel__1rHpr",checkbox:"TranscriptionNotes_checkbox__1IkkD",note:"TranscriptionNotes_note__nH8_D",heading:"TranscriptionNotes_heading__3oU5F",time:"TranscriptionNotes_time__1pqGi",noteText:"TranscriptionNotes_noteText__3eHkg",editButton:"TranscriptionNotes_editButton__SiSVX",bottomMenuSpacer:"TranscriptionNotes_bottomMenuSpacer__1nUEP"}},function(e,t,n){e.exports={mask:"KnowledgeKeywordsTopics_mask__3tGa-",modal:"KnowledgeKeywordsTopics_modal__2Zeaj",modalHeader:"KnowledgeKeywordsTopics_modalHeader__12uxf",title:"KnowledgeKeywordsTopics_title__Z41_g",subtitle:"KnowledgeKeywordsTopics_subtitle__2ed4A",modalFooter:"KnowledgeKeywordsTopics_modalFooter__1BRyY",columnContainer:"KnowledgeKeywordsTopics_columnContainer__1uO-U",pillContainer:"KnowledgeKeywordsTopics_pillContainer__1yuPX",classificationPill:"KnowledgeKeywordsTopics_classificationPill__73Y_w",light:"KnowledgeKeywordsTopics_light__2nTR6",dark:"KnowledgeKeywordsTopics_dark__1kTN4",pillText:"KnowledgeKeywordsTopics_pillText__3u4JU",classificationIndicator:"KnowledgeKeywordsTopics_classificationIndicator__3SXfQ",red:"KnowledgeKeywordsTopics_red__3gxmE",orange:"KnowledgeKeywordsTopics_orange__rJbPG",green:"KnowledgeKeywordsTopics_green__a3zG0",grey:"KnowledgeKeywordsTopics_grey__3Ep5x",closeButton:"KnowledgeKeywordsTopics_closeButton__2zTH8",cancelButton:"KnowledgeKeywordsTopics_cancelButton__22Ydx"}},function(e,t,n){e.exports={Player:"Player_Player__2Y5lJ",skipBack:"Player_skipBack__2B606",playback:"Player_playback__1QNHd",skipForward:"Player_skipForward__3mvfF",play:"Player_play__3iaw4",playDisabled:"Player_playDisabled__261XM",pause:"Player_pause__3i8vL",changeSpeed:"Player_changeSpeed__1nV3t",spinerLoading:"Player_spinerLoading__1f8p_",progress:"Player_progress__3fJ6S"}},function(e,t,n){e.exports={container:"Insights_container__tixkw",title:"Insights_title__2p7eg",subtitle:"Insights_subtitle__2cDow",formCheck:"Insights_formCheck__3v1Y9",indicator:"Insights_indicator__3ot-J",separator:"Insights_separator__G8ClD",thirdWidth:"Insights_thirdWidth__yWkcT",halfWidth:"Insights_halfWidth__28ltv"}},function(e,t,n){e.exports={dropdown:"Dropdown_dropdown__2ms-9",dropdownToggle:"Dropdown_dropdownToggle__2e8Ib",dropdownBackground:"Dropdown_dropdownBackground__284-1",dropdownContent:"Dropdown_dropdownContent__3v-qe",fadeIn:"Dropdown_fadeIn__3EmcY",dropdownButton:"Dropdown_dropdownButton__3eMEJ",dropdownItem:"Dropdown_dropdownItem__2IaVy",selected:"Dropdown_selected__2KC1A",viewName:"Dropdown_viewName__fPHuV"}},function(e,t,n){e.exports={mask:"ErrorModal_mask__1iinA",modal:"ErrorModal_modal__3DSmd",modalHeader:"ErrorModal_modalHeader__3noKu",title:"ErrorModal_title__20LRH",message:"ErrorModal_message__1siCE",modalFooter:"ErrorModal_modalFooter__6Vgf2",secondaryButton:"ErrorModal_secondaryButton__2ATbd",primaryButton:"ErrorModal_primaryButton__1KUs3"}},,function(e,t,n){e.exports={classificationPill:"KnowledgeClassificationPill_classificationPill__3r7bf",dark:"KnowledgeClassificationPill_dark__1u4sR",classificationIndicator:"KnowledgeClassificationPill_classificationIndicator__10E2O",positive:"KnowledgeClassificationPill_positive__3NkmP",negative:"KnowledgeClassificationPill_negative__1T4AJ",warning:"KnowledgeClassificationPill_warning__2yPbF",info:"KnowledgeClassificationPill_info__sVvVr",pillText:"KnowledgeClassificationPill_pillText__2PbXm"}},function(e,t,n){e.exports={Search:"Search_Search__2wNw2",searchTextBox:"Search_searchTextBox__1XTgg",searchNavigation:"Search_searchNavigation__gvy74",chevron:"Search_chevron__2pcu0",spacer:"Search_spacer__OM0E8",clearButton:"Search_clearButton__18xL2"}},,function(e,t,n){e.exports={button:"OverflowMenu_button__2JaCa",locked:"OverflowMenu_locked__oj3aS",popover:"OverflowMenu_popover__178h3",menu:"OverflowMenu_menu__Li1f5",item:"OverflowMenu_item__1xBO4"}},function(e,t,n){e.exports={"info-box":"MetricsTimelineLayer_info-box__2mv6g","key-info-box":"MetricsTimelineLayer_key-info-box__1qu8Z","transcription-confidence":"MetricsTimelineLayer_transcription-confidence__2_7Us","background-noise-level":"MetricsTimelineLayer_background-noise-level__pMkDu",LayerContent:"MetricsTimelineLayer_LayerContent__2dmql",plotline:"MetricsTimelineLayer_plotline__CEqVm",confidence:"MetricsTimelineLayer_confidence__2Fesv",caller:"MetricsTimelineLayer_caller__9_6-d",agent:"MetricsTimelineLayer_agent__2uZ2h",noise:"MetricsTimelineLayer_noise__XMWu5","noise-primary":"MetricsTimelineLayer_noise-primary__2FFQq","noise-secondary":"MetricsTimelineLayer_noise-secondary__30XHG"}},function(e,t,n){e.exports={pill:"KnowledgeKeywordTopicPill_pill__3gVG5",pillModal:"KnowledgeKeywordTopicPill_pillModal__3mstZ",pillCategoryModal:"KnowledgeKeywordTopicPill_pillCategoryModal__27JUc",pillText:"KnowledgeKeywordTopicPill_pillText__3hCWf",pillColourContainer:"KnowledgeKeywordTopicPill_pillColourContainer__jQNrN"}},function(e,t,n){e.exports={resultNavigator:"ResultNavigator_resultNavigator__2de3B",button:"ResultNavigator_button__3LA5-",searchItemContainer:"ResultNavigator_searchItemContainer__3Lcb1"}},,,,function(e,t,n){e.exports={filter:"NotesFilterSelector_filter__39c6L",popover:"NotesFilterSelector_popover__6Ahbx",item:"NotesFilterSelector_item__27MiK",highlighted:"NotesFilterSelector_highlighted__3IDw-"}},function(e,t,n){e.exports={LayerContent:"AudioEventLayer_LayerContent__1wCHN",LayerContentVertical:"AudioEventLayer_LayerContentVertical__1_LDe",eventContainer:"AudioEventLayer_eventContainer__61Q3N",ClashLine:"AudioEventLayer_ClashLine__3aXBK",ClashLineHorizontal:"AudioEventLayer_ClashLineHorizontal__1PnCw",ClashIcon:"AudioEventLayer_ClashIcon__jIbuW",Primary:"AudioEventLayer_Primary__pimRL",Secondary:"AudioEventLayer_Secondary__3wL-C",Cluster:"AudioEventLayer_Cluster__14ML6"}},,,,,,,,,function(e,t,n){e.exports={container:"LayoutOptions_container__SnRJV",button:"LayoutOptions_button__2hfc6",popover:"LayoutOptions_popover__12o3_",item:"LayoutOptions_item__ih14T",regularCheckbox:"LayoutOptions_regularCheckbox__1NGBi"}},function(e,t,n){e.exports={avatar:"Avatar_avatar__33rUO",svgIcon:"Avatar_svgIcon__1m2Hf"}},,,,,,,,,,,,,,,,,,function(e,t){},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(2),i=n.n(a),r=n(47),o=n.n(r),s=n(10),c=n(34),l=n(60),u=n(1),d="SET_PRIMARY_UUID";var h=n(15),p=n.n(h),m=n(23),f=n(4),v=n(6),b=n(7),y=n(8),g=n(61),j=n.n(g),O="https://sapien.stage.redmatter.com",_="https://callflow.redmatter-stage.pub",x="https://gatekeeper.redmatter-stage.pub",C="Employee",k="Customer",w=function e(t,n,a){Object(f.a)(this,e),this.accessToken=t,this.userId=n,this.organisationId=a},S=function(){function e(t){Object(f.a)(this,e),this.BASE_URL=t,this.auth=new j.a({clientId:"",clientSecret:"",accessTokenUri:"".concat(e.tokenBaseUrl,"/auth/token")})}return Object(y.a)(e,[{key:"getToken",value:function(){var t=Object(m.a)(p.a.mark((function t(){var n,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"===typeof this.token){t.next=2;break}return t.abrupt("return",this.token);case 2:return t.next=4,this.auth.owner.getToken("","");case 4:return n=t.sent,t.next=7,fetch("".concat(e.tokenBaseUrl,"/v1/user/me"),{headers:{Accept:"application/json",Authorization:"Bearer ".concat(n.accessToken)}}).then((function(e){return e.json()}));case 7:return a=t.sent,this.token=new w(n.accessToken,a.userId,a.organisationId),t.abrupt("return",this.token);case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"doGet",value:function(){var e=Object(m.a)(p.a.mark((function e(t,n){var a,i,r,o=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=o.length>2&&void 0!==o[2]?o[2]:{},(i=a.Accept||"application/json").includes("application/json")||(i="".concat(a.Accept,", application/json")),r=null,!n){e.next=8;break}r={accessToken:n},e.next=11;break;case 8:return e.next=10,this.getToken();case 10:r=e.sent;case 11:return e.abrupt("return",fetch("".concat(this.BASE_URL,"/").concat(t),{headers:Object(u.a)(Object(u.a)({},a),{},{Accept:i,Authorization:"Bearer ".concat(r.accessToken)})}));case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"tokenBaseUrl",get:function(){return O}}]),e}(),T=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){Object(f.a)(this,n);var e=JSON.parse(localStorage.getItem("ENV_URLS")),a=_;return e&&e.callflowUrl&&(a=e.callflowUrl),t.call(this,a)}return n}(S),N=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){Object(f.a)(this,n);var e=JSON.parse(localStorage.getItem("ENV_URLS")),a=O;return e&&e.sapienUrl&&(a=e.sapienUrl),t.call(this,a)}return n}(S),E="mp3";function I(e,t){var n=100/t.range;return"".concat(n*(e-t.start),"%")}function P(e,t){var n=e+(t.transcriptionStart-t.start),a=100/t.range;return"".concat(a*(n-t.start),"%")}function L(e,t,n){var a=100/n.range;return"".concat(a*(t-e),"%")}function A(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e)return Object(u.a)(Object(u.a)({},n),{},{width:"100%",marginLeft:"0%"});var a=100/(t.end-t.start)*100,i=a/100*t.start;return Object(u.a)(Object(u.a)({},n),{},{width:"".concat(a,"%"),marginLeft:"".concat(-i,"%")})}function R(e){return[0,0,Math.floor(e.range/1e3),100].join(" ")}function M(e,t,n,a,i){return(e-t)*(i-a)/(n-t)+a}function D(e){var t=e.event,n={isCsStateChange:!0};switch(t){case"CHANNEL_START":return{isChannelStart:!0};case"CHANNEL_RING":return{isChannelRing:!0};case"CHANNEL_ANSWER":return{isChannelAnswer:!0};case"CHANNEL_END":return{isChannelEnd:!0};case"CHANNEL_COMPLETE":return{isChannelComplete:!0};case"CS_BRIDGE":return Object(u.a)(Object(u.a)({},n),{},{isBridge:!0});case"CS_PARKED_TRANSFER":return Object(u.a)(Object(u.a)({},n),{},{isParkedTransfer:!0});case"CS_QUEUING":return Object(u.a)(Object(u.a)({},n),{},{isQueuing:!0});case"CS_ROUTING":return Object(u.a)(Object(u.a)({},n),{},{isRouting:!0});case"PARK_OTHER_FOR_TRANSFER":return Object(u.a)(Object(u.a)({},n),{},{isParkedTransfer:!0,isSecondary:!0});case"UNBRIDGE":return Object(u.a)(Object(u.a)({},n),{},{isUnBridge:!0});case"CONFERENCE_IN":return{isConferenceIn:!0};case"CONFERENCE_OUT":return{isConferenceOut:!0};case"RECORD_START":return{isRecordStart:!0};case"RECORD_STOP":return{isRecordStop:!0};case"HOLD":return{isHold:!0};case"UN_HOLD":return{isUnHold:!0};case"REQUEST_HOLD":return{isHold:!0,isSecondary:!0};case"REQUEST_UN_HOLD":return{isUnHold:!0,isSecondary:!0};case"LISTEN_IN":return{isListenIn:!0};case"LISTEN_IN_WHISPER":return{isListenInWhisper:!0};case"LISTEN_IN_BARGE":return{isListenInBarge:!0};case"LISTEN_IN_DISCONNECT":return{isListenInDisconnect:!0};default:return console.log("New event found: ".concat(t.event)),{}}}function U(e){return Object.keys(e).join(" ")}var B=n(57),F=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object(f.a)(this,n),(e=t.call(this,a)).status=i,e.displayMessage=r,e}return n}(Object(B.a)(Error)),K=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Object(f.a)(this,n),(e=t.call(this,a)).response=i,e}return n}(Object(B.a)(Error)),H=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(f.a)(this,e),this.status=t,this.statusMessage=n,this.blockingMessage=a};function W(e){return V.apply(this,arguments)}function V(){return(V=Object(m.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new N,a=null,!t){e.next=6;break}a=t,e.next=9;break;case 6:return e.next=8,n.getToken();case 8:a=e.sent;case 9:return e.abrupt("return",n.doGet("v1/organisation/".concat(a.organisationId,"/log/call"),t?t.token:null).then((function(e){return e.ok?e.json():[]})));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e,t){return Y.apply(this,arguments)}function Y(){return(Y=Object(m.a)(p.a.mark((function e(t,n){var a,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=new N,i=null,!n){e.next=6;break}i=n,e.next=9;break;case 6:return e.next=8,a.getToken();case 8:i=e.sent;case 9:return e.abrupt("return",a.doGet("v1/organisation/".concat(i.organisationId,"/log/call?uuid=").concat(t),n?n.token:null).then((function(e){return e.ok?e.json():[]})));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){var t=function(){var e=[];return function(t){return!e.includes(t.timeStart)&&(e.push(t.timeStart),!0)}}();return e.flat().filter(t).sort((function(e,t){return new Date(e.timeStart).getTime()-new Date(t.timeStart).getTime()}))}function J(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:G;return new Promise((function(a){var i=[];e.forEach((function(r){n(r,t).then((function(t){i.push(t.data),i.length===e.length&&a(X(i))}))}))}))}function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===t||!Array.isArray(e)||0===e.length)return e;var n=Number.MAX_SAFE_INTEGER,a=t,i=Number.MAX_SAFE_INTEGER;return e.forEach((function(e){(!0===e.flags.isRecordStart||!0===e.flags.isSecondary&&!0===e.flags.isUnHold)&&e.timestamp<n&&(n=e.timestamp),(!0===e.flags.isRecordStop||!0===e.flags.isSecondary&&!0===e.flags.isHold)&&(a-=e.timestamp-n,n=Number.MAX_SAFE_INTEGER,a<0&&i===Number.MAX_SAFE_INTEGER&&(i=e.timestamp+a))})),e.map((function(e){return!0===e.flags.isRecordStop||!0===e.flags.isSecondary&&!0===e.flags.isHold?Object(u.a)(Object(u.a)({},e),{},{timestamp:Math.min(i,e.timestamp)}):e}))}function z(e){var t=e.events,n=t;if(0===t.filter((function(e){return"CHANNEL_START"===e.event})).length){var a=t.sort((function(e,t){return e.timestamp-t.timestamp}))[0];n=n.concat({event:"CHANNEL_START",timestamp:a.timestamp})}if(0===t.filter((function(e){return"CHANNEL_END"===e.event})).length){var i=t.sort((function(e,t){return t.timestamp-e.timestamp}))[0];n=n.concat({event:"CHANNEL_END",timestamp:i.timestamp})}return Object(u.a)(Object(u.a)({},e),{},{events:n})}function Q(e,t){var n=e.events;return Object(u.a)(Object(u.a)({},e),{},{events:q(n.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{flags:D(e)})})),t)})}function Z(e,t,n){return $.apply(this,arguments)}function $(){return($=Object(m.a)(p.a.mark((function e(t,n,a){var i,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=3;break}return alert("UUID cannot be null"),e.abrupt("return",[]);case 3:if(i=new T,r=null,!a){e.next=9;break}r=a,e.next=12;break;case 9:return e.next=11,i.getToken();case 11:r=e.sent;case 12:return e.abrupt("return",i.doGet("organisation/".concat(r.organisationId,"/callflow/").concat(t),a?a.token:null).then((function(e){if(!e.ok)throw Error("Request failed");return e.json().then((function(e){return z(e)})).then((function(e){return Q(e,n)}))})));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e,t){return te.apply(this,arguments)}function te(){return(te=Object(m.a)(p.a.mark((function e(t,n){var a,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=3;break}return alert("UUID cannot be null"),e.abrupt("return",[]);case 3:if(a=new N,i=null,!n){e.next=9;break}i=n,e.next=12;break;case 9:return e.next=11,a.getToken();case 11:i=e.sent;case 12:return e.abrupt("return",a.doGet("v1/organisation/".concat(i.organisationId,"/archive/recording/").concat(t,"/analytics/transcription"),n?n.token:null).then((function(e){return e.ok?e.json():[]})));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e,t){return ae.apply(this,arguments)}function ae(){return(ae=Object(m.a)(p.a.mark((function e(t,n){var a,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=3;break}return alert("UUID cannot be null"),e.abrupt("return",[]);case 3:if(a=new N,i=null,!n){e.next=9;break}i=n,e.next=12;break;case 9:return e.next=11,a.getToken();case 11:i=e.sent;case 12:return e.abrupt("return",a.doGet("v1/organisation/".concat(i.organisationId,"/archive/recording/").concat(t,"/analytics/talkTime"),n?n.token:null).then((function(e){return e.ok?e.json():[]})));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(e,t){return re.apply(this,arguments)}function re(){return(re=Object(m.a)(p.a.mark((function e(t,n){var a,i,r,o,s,c,l,u,d,h,m,f,v,b=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=b.length>2&&void 0!==b[2]?b[2]:function(){},null!==t){e.next=4;break}return alert("UUID cannot be null"),e.abrupt("return",[]);case 4:if(i=new N,r=null,!n){e.next=10;break}r=n,e.next=13;break;case 10:return e.next=12,i.getToken();case 12:r=e.sent;case 13:return e.next=15,i.doGet("v1/organisation/".concat(r.organisationId,"/archive/recording/").concat(t),n?n.token:null,{Accept:"audio/".concat(E)});case 15:if((o=e.sent).ok){e.next=18;break}throw new K("Request failed",o);case 18:s=o.body.getReader(),o.headers&&(c=o.headers.get("X-Audio-duration"),l=o.headers.get("Content-Length")),c||(c=1e3),l||(l=c*4388),u=0,d=[];case 24:return e.next=27,s.read();case 27:if(h=e.sent,m=h.done,f=h.value,!m){e.next=32;break}return e.abrupt("break",38);case 32:d.push(f),u+=f.length,a(u/l*100),e.next=24;break;case 38:return v=new Blob(d),e.abrupt("return",{duration:Math.round(1e6*Number(c)),blob:v});case 40:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var oe=n(20);function se(e){return e.map((function(e){var t=e.data,n=t?{data:t}:null;if("string"===typeof t)try{n={data:JSON.parse(t)}}catch(a){console.warn("Unable to parse the data")}return Object(u.a)(Object(u.a)({},e),n)}))}function ce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=se(e).filter((function(e){return e.data&&e.data.uuid})).map((function(e){return e.data.uuid}));return"string"===typeof t&&t.length>0&&(n=[t].concat(Object(oe.a)(n))),n.filter((function(e,t,n){return n.indexOf(e)===t}))}var le=function(e,t){return e.find((function(e){return e.uuid===t}))},ue=function(e){return e.primaryUuid},de=function(e){return e.participants},he=function(e){return e.events},pe=function(e){return he(e).uuid},me=function(e){return he(e).events},fe=function(e){return he(e).eventsByParticipants},ve=function(e){return e.calls},be=function(e){return ve(e).calls},ye=function(e){return e.status.status},ge=function(e){return e.status.progress},je=function(e){return e.audio},Oe=function(e){return je(e).duration},_e=function(e){return e.transcription},xe=function(e){return _e(e).rawData},Ce=function(e){return _e(e).uuid},ke=function(e){return _e(e).sentences},we=function(e){return e.data},Se=function(e){return we(e).channels},Te=function(e){return e.scrub.isVisible},Ne=function(e){return e.eventTimeline.eventTimelineVisible},Ee=function(e){return e.tabs.activeTab},Ie=function(e){return e.experienceOptions},Pe=function(e){return e.search},Le=function(e){return e.status},Ae=function(e){return function(e){return Le(e).isDisplaying}(e).routing},Re=function(e){return function(e){return e.callSummary}(e).keyCallers},Me=function(e){return e.errorModal},De=function(e){return Me(e).show},Ue=n(16),Be=Object(Ue.a)([function(e){return je(e).events}],(function(e){return function(t){var n=e.filter((function(e){return t<e.timelineStop})).shift();return n||(n=e.filter((function(e){return t>e.timelineStart})).pop())?t+n.offset:t}})),Fe=n(17);function Ke(e){var t=parseInt(Math.floor(e/3600),10),n=parseInt(Math.floor(e%3600/60),10),a=parseInt(e%60,10);return[t,0===t?n.toString():n.toString().padStart(2,"0"),a.toString().padStart(2,"0")].filter((function(e){return e})).join(":")}function He(e){var t=new Date(e/1e3),n=t.getMonth()+1,a=t.getDate(),i=t.getHours(),r=t.getMinutes(),o=[(i>9?"":"0")+i,(r>9?"":"0")+r].join(":");return[[(a>9?"":"0")+a,(n>9?"":"0")+n,t.getFullYear()].join("/"),o].join(" ")}function We(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))}var Ve=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(t)}))},Ge=function(e){if(!e)return{time:"--:--",date:"--/--/--/"};var t=He(1e3*new Date(Date.parse(e.replace(" ","T")))).split(" "),n=Object(Fe.a)(t,2),a=n[0];return{time:n[1],date:a}};var Ye=function(e){if("string"!==typeof e)return e;var t;try{t=JSON.parse(function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}(e))}catch(n){console.warn("Could not parse JSON (".concat(n.localDescription,")"))}return t},Xe=Object(Ue.a)([je,he,Be,Ae],(function(e,t,n,a){var i={timestampAtPlayhead:function(e){return this.start+this.range/100*e},sentenceTimestampAtPlayhead:function(e){var t=this.transcriptionStart;return n(this.timestampAtPlayhead(e)-t)/1e3},playheadAtTimestamp:function(e){return 100/this.range*e},formattedTimeAtPlayhead:function(e){var t=this.range*e/1e8,n=this.routingOffset/1e6,a=n-t>0,i=new Date(Math.abs(n-t));return"".concat(a?"-":"").concat(Ke(i))},pausedPropertiesAtPlayhead:function(e,t){var n={isPaused:!1,timeAtPauseEnd:null,playheadAtPauseEnd:null};if(t&&t.events){var a=this.timestampAtPlayhead(e),i=t.events.filter((function(e){return e.startFlags&&!0===e.startFlags.isRecordStop&&a>=e.start&&a<=e.end})).shift();void 0!==i&&(n.isPaused=!0,n.timeAtPauseEnd=i.end,n.playheadAtPauseEnd=this.playheadAtTimestamp(i.end-this.start))}return n},transcriptionOffsetPercentage:function(){var e=this.transcriptionStart-this.start;return 100/this.range*e}};if(null===t.events)return Object(u.a)(Object(u.a)({},i),{},{start:0,end:0,range:0});var r=0===t.events.filter((function(e){return!0===e.flags.isRecordStart})).length,o=t.events.filter((function(e){return r?e.flags.isChannelAnswer:!0===e.flags.isRecordStart})).shift().timestamp,s=t.events.filter((function(e){return e.flags.isChannelStart})).shift().timestamp,c=a?s:o,l=o-s,d=o-c,h=t.events.filter((function(e){return r?e.flags.isChannelComplete:!0===e.flags.isRecordStop})).sort((function(e,t){return e.timestamp-t.timestamp})).pop().timestamp;return Object(u.a)(Object(u.a)({},i),{},{start:c,end:h,range:h-c,transcriptionStart:o,routingOffset:d,unrecordedTime:l})})),Je="REQUEST_CALLS";function qe(e){return{type:Je,payload:{isLoading:!0,uuids:e}}}var ze="INVALIDATE_CALLS";function Qe(){return{type:ze,payload:{calls:null}}}var Ze="RECEIVE_CALLS";function $e(e,t,n){return{type:Ze,payload:{isLoading:!1,uuids:e,calls:t,isRecorded:n}}}function et(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!1;return e.forEach((function(e){var n=Array.isArray(e.aFlags)?e.aFlags:[],a=Array.isArray(e.bFlags)?e.bFlags:[];(n.includes("RECORDED")||a.includes("RECORDED"))&&(t=!0)})),t}function tt(e,t){return e.sort((function(e,t){return e.timeStart<t.timeStart?-1:e.timeStart>t.timeStart?1:0})).map((function(e,n,a){var i={start:1e3*new Date(e.timeStart).getTime(),end:1e3*t.end};return n===a.length-1||(i.end=1e3*new Date(a[n+1].timeStart).getTime()-1),Object(u.a)(Object(u.a)({},e),{},{time:i,index:n})}))}var nt="STATUS_LOADING",at="STATUS_OK",it="STATUS_EMPTY",rt="REQUEST_EVENTS";function ot(e){return{type:rt,payload:{isLoading:!0,uuid:e}}}var st="INVALIDATE_EVENTS";function ct(){return{type:st,payload:{events:null}}}var lt="RECEIVE_EVENTS";function ut(e,t){return{type:lt,payload:{isLoading:!1,uuid:e,events:t}}}function dt(e){return e.sort((function(e,t){return e.start<t.start?-1:e.start>t.start?1:0}))}var ht="PROCESS_EVENTS";function pt(e){var t={},n={},a=[],i={addGroup:function(r,o,s){return n[r]=null,a.push((function(a){var i,c,l;"function"===typeof o&&"function"===typeof s&&(!0!==o(a.flags)||n[r]||(i=e,c=t,l=n,function(e,t){var n=t.flags,a=t.timestamp;e.forEach((function(e){var t={event:U(n),group:e,start:a,startFlags:n};l[e]=t,"undefined"===typeof c[i]&&(c[i]={},c[i].events=[]),c[i].events.push(t)}))})([r],a),!0===s(a.flags)&&n[r]&&function(e){return function(t,n){var a=n.flags,i=n.timestamp;t.forEach((function(t){if(e[t]){var n=e[t];n.end=i,n.endFlags=a,n.duration=n.end-n.start,n.timeline={start:new Date(n.start/1e3),end:new Date(n.end/1e3),duration:Ke(n.duration/1e6)},e[t]=null}}))}}(n)([r],a))})),i},processEvents:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return n.forEach((function(e){return a.forEach((function(t){return t(e)}))})),{events:t[e].events.filter((function(e){return void 0!==e.endFlags}))}}};return i}var mt="INITIAL_LOAD",ft="PLAY",vt="PLAY_FROM_START",bt="PAUSE",yt="SKIP_BACK",gt="SKIP_FORWARD",jt="MOVE_SCRUBBER",Ot="MOVE_PLAY_HEAD",_t="SET_PLAYBACK_SPEED",xt="TOGGLE_METRICS_LAYER",Ct="SET_METRICS_LAYER",kt="HIDE_METRICS_LAYER",wt="SET_AUDIO",St="MOVE_TRANSCRIPTION_PLAY_SCRUB",Tt="UPDATE_TRANSCRIPTION_VIEWPORT",Nt="UPDATE_TRANSCRIPTION_CONFIDENCE",Et="SET_NOTE_VISIBILITY",It="IMPORT_NOTES",Pt="OPEN_RATE_CALL",Lt="CANCEL_RATE_CALL",At="RATE_CALL",Rt="SET_EVENT_TYPES",Mt="SET_JWT_TOKEN",Dt="SET_PARTICIPANT_NAMES",Ut="SET_CAN_SHARE",Bt=n.p+"static/media/icon-account.f2b6ece7.svg",Ft=n.p+"static/media/icon-contact.e3ec6d62.svg",Kt=n.p+"static/media/icon-user.33a39f8c.svg",Ht=function(e){return e.auth},Wt=Object(Ue.a)([Ht],(function(e){return e&&e.jwtToken?e.jwtToken.userId:""})),Vt=Object(Ue.a)([Ht],(function(e){return e&&e.displayName?e.displayName:e&&e.jwtToken?e.jwtToken.userName:""})),Gt=function(e){return e.notes},Yt=function(e){return Gt(e).unread},Xt=Object(Ue.a)([Gt],(function(e){return function(t){return e.notes.find((function(e){return e.noteId===t}))}})),Jt=Object(Ue.a)([Gt],(function(e){return function(t){return(e||{notes:[]}).notes.reduce((function(e,n){var a=n.noteId,i=n.thread,r=n.userActivity,o=n.noteModified,s=(r||[]).find((function(e){return Number(e.user)===Number(t)}));return[].concat(Object(oe.a)(e),Object(oe.a)(!s||new Date(s.lastRead)<new Date(o)?[a]:[]),Object(oe.a)(i.reduce((function(e,t){return[].concat(Object(oe.a)(e),Object(oe.a)(!s||new Date(s.lastRead)<new Date(t.modified)?[t.uuid]:[]))}),[])))}),[])}})),qt={all:"Show All",onlyUnread:"Only unread notes",onlyAcknowledged:"Only acknowledged notes",onlyUnAcknowledged:"Only un-acknowledged notes",onlyMyNotes:"Only my notes",onlyOpenNotes:"Only open notes",closedNotes:"Only closed notes"},zt=Object(Ue.a)([Gt,Wt],(function(e,t){var n=e.notes,a=e.filter,i=e.unread;switch(a){case qt.closedNotes:return n.filter((function(e){return e.isClosed}));case qt.onlyOpenNotes:return n.filter((function(e){return!e.isClosed}));case qt.onlyAcknowledged:return n.filter((function(e){return e.isAcknowledged}));case qt.onlyUnAcknowledged:return n.filter((function(e){return!e.isAcknowledged}));case qt.onlyUnread:return n.filter((function(e){return i.includes(e.noteId)||e.thread.reduce((function(e,t){return i.includes(t.uuid)}),!1)}));case qt.onlyMyNotes:return n.filter((function(e){return Number(e.author)===Number(t)}));default:return n}})),Qt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return[].concat(Object(oe.a)((e||[]).filter((function(e){return Number(e.user)!==Number(t)}))),[{user:t,lastRead:n||(new Date).toISOString()}])},Zt=function(e,t){return function(n){return n.reduce((function(n,a){return n&&e[a]===t[a]}),!0)}},$t="DELETE_NOTE",en=function(e){return{type:$t,payload:{noteId:e}}},tn="REFRESH_UNREAD_NOTES";function nn(){return function(e,t){var n=t(),a=Wt(n),i=Jt(n)(a);e({type:tn,payload:{ids:i}})}}var an="SET_NOTES",rn="UPDATE_NOTE";function on(e){return function(t){t({type:rn,payload:{note:Object(u.a)(Object(u.a)({},e),{},{thread:Ye(e.thread)||[],userActivity:Ye(e.userActivity)||[]})}}),t(nn())}}var sn=function(e,t,n){if(window.parent.getVisualforce){var a=window.parent.getVisualforce(),i=window.parent.getAction(e),r={escape:!0};n?a.invokeAction(i,n,t,r):a.invokeAction(i,t,r)}else console.log("Warning: no salesforce parent")},cn=function(){window.alert("Sorry, your session has timed out. Please refresh your page to try again")},ln=function(){return function(e){sn("getEventTypes",(function(t,n){n.status?e({type:Rt,payload:{eventTypes:t}}):n.xhr.responseText?cn():window.alert("Problem loading event types!")}))}},un="SET_PARTICIPANT_IMAGE",dn=function(e){return function(t){e&&sn("getNotes",(function(e,n){var a;n.status?t((a=e,function(e){var t=a.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{timestamp:Number(e.timestamp),eventType:Number(e.eventType),thread:Ye(e.thread)||[],userActivity:Ye(e.userActivity)||[]})}));e({type:an,payload:{notes:t}}),e(nn())})):n.xhr.responseText?cn():window.alert("Problem loading notes!")}),e)}},hn=function(e,t){return!t||!Zt(e,t)(["timestamp","text","channelUuid","polarity","eventType"])},pn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,a){var i=a(),r=Wt(i),o="createNewNote",s=Xt(i)(e.noteId),c=parseInt(e.timestamp,10)/1e6,l=Math.floor(c/3600),d=Math.floor(c%3600/60),h=Math.floor(c%60),p=e.timestamp?"".concat(String(l).padStart(2,0),":").concat(String(d).padStart(2,0),":").concat(String(h).padStart(2,0)):null,m=t||(new Date).toISOString(),f={author:e.author,authorName:e.authorName,eventType:parseInt(e.eventType,10).toString(),text:Ve(e.text),timestamp:parseInt(e.timestamp,10).toString(),eventTime:p,uuid:e.uuid,channelUuid:e.channelUuid,isShared:e.isShared,isAcknowledged:e.isAcknowledged,isClosed:e.isClosed,canShare:e.canShare,noteCreated:s?s.noteCreated:m,noteModified:hn(e,s)?m:s.noteModified,thread:JSON.stringify(e.thread||[]),polarity:e.polarity,userActivity:JSON.stringify(r?Qt(e.userActivity||[],r,m):e.userActivity||[]),version:e.version};s&&(o="EditNote",f.noteId=e.noteId),sn(o,(function(t,a){a.status?("createNewNote"===a.method&&(f.noteId=t),n(on(Object(u.a)(Object(u.a)({},f),{},{timestamp:parseInt(f.timestamp,10),eventType:parseInt(f.eventType,10),eventTime:p,uuid:e.uuid}))),dn(ue(i))):a.xhr.responseText?cn():window.alert("Problem saving note!")}),JSON.stringify(f)),window.parent.getVisualforce||n(on(Object(u.a)(Object(u.a)({},f),{},{noteId:e.noteId,timestamp:parseInt(f.timestamp,10),eventType:parseInt(f.eventType,10),eventTime:p,uuid:e.uuid})))}},mn=function(e){return function(t){window.confirm("Delete this note?")&&(sn("DeleteNote",(function(n,a){a.status?n.includes(e)&&t(en(e)):a.xhr.responseText?cn():window.alert("Problem deleting note!")}),e),window.parent.getVisualforce||t(en(e)))}},fn="SET_EXPERIENCE_OPTIONS";function vn(e,t){e.relatedUuids.includes(t)||e.relatedUuids.push(t)}function bn(e){return Object.keys(e).filter((function(t){return e[t].isAgent})).length}function yn(e){return 0===bn(e)?"#00A9CE":"#64CCC9"}function gn(e){return 0===function(e){return Object.keys(e).filter((function(t){return!e[t].isAgent})).length}(e)?"#FFC72C":"#FFA12C"}function jn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3?arguments[3]:void 0;return{isPrimary:e,isAgent:t,userId:n,image:Kt,relatedUuids:[],start:Number.MAX_SAFE_INTEGER,end:0,initials:null,title:"",agentNumber:t?bn(a)+1:null,agents:0,classes:t?"local-caller":"remote-caller",color:t?yn(a):gn(a),call:{isInternalOnly:!1},type:null}}var On="SET_PARTICIPANTS";function _n(e,t,n,a){var i={};return t.forEach((function(t){var n=1e3*new Date(t.timeStart).getTime(),r=1e3*(new Date(t.timeStart).getTime()+1e3*t.timeTalking);if(!i[t.fromNumber]){i[t.fromNumber]=function(e,t,n){return jn(t.aUuid===e,null!==t.fromSipDeviceId||null!==t.fromUserId,t.fromUserId,n)}(e,t,i);var o=a&&a.find((function(e){return t.fromNumber===e.phoneNum}));o&&(i[t.fromNumber].name=o.name||null,i[t.fromNumber].initials=o.initials||null,i[t.fromNumber].photoUrl=o.photoUrl||null,i[t.fromNumber].type=o.type||null)}if(!i[t.toNumber]){i[t.toNumber]=function(e,t,n){return jn(t.bUuid===e,null!==t.toSipDeviceId||null!==t.toUserId,t.toUserId,n)}(e,t,i);var s=a&&a.find((function(e){return t.toNumber===e.phoneNum}));s&&(i[t.toNumber].name=s.name||null,i[t.toNumber].initials=s.initials||null,i[t.toNumber].photoUrl=s.photoUrl||null,i[t.toNumber].type=s.type||null)}vn(i[t.fromNumber],t.aUuid),vn(i[t.toNumber],t.bUuid),i[t.toNumber].start=Math.min(i[t.toNumber].start,n),i[t.fromNumber].start=Math.min(i[t.fromNumber].start,n),i[t.toNumber].end=r||0,i[t.fromNumber].end=r||0})),function(e){var t=e,n=bn(e);return Object.keys(e).forEach((function(a){var i=e[a],r=i.isAgent,o=i.agentNumber;t[a].agents=n,t[a].number=a,t[a].call.isInternalOnly=n===Object.keys(t).length;var s="";r?n>1?(t[a].title="".concat(C," ").concat(o),t[a].classes="local-caller-".concat(1===o?"a":"b")):t[a].title=C:(s="+",t[a].title=k);var c=t[a],l=c.title,u=c.number;t[a].fullNumber="".concat(s).concat(u);var d=t[a].fullNumber;t[a].fullTitle="".concat(l," (").concat(d,")")})),t}(i)}function xn(e,t,n,a){var i=_n(e,t,0,a);return function(e){e({type:On,payload:i}),e(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a={};return Object.keys(e).forEach((function(i){a[i]={events:[]};var r=e[i],o=t[Object.keys(t)[0]].events;if(r.isPrimary){var s=pt(i).addGroup("bridge",(function(e){return!0===e.isBridge}),(function(e){return!0!==e.isBridge&&!0===e.isCsStateChange})).addGroup("start",(function(e){return!0===e.isChannelStart}),(function(e){return!0===e.isChannelRing})).addGroup("ring",(function(e){return!0===e.isChannelRing}),(function(e){return!0===e.isChannelAnswer})).addGroup("recording",(function(e){return!0===e.isRecordStart}),(function(e){return!0===e.isRecordStop})).addGroup("conference",(function(e){return!0===e.isConferenceIn}),(function(e){return!0===e.isConferenceOut})).addGroup("transfer",(function(e){return!0===e.isParkedTransfer}),(function(e){return!0===e.isBridge})).addGroup("pause",(function(e){return!0===e.isRecordStop}),(function(e){return!0===e.isRecordStart})).addGroup("hold",(function(e){return!0===e.isHold}),(function(e){return!0===e.isUnHold})).addGroup("routing",(function(e){return!0===e.isRouting}),(function(e){return!0!==e.isRouting&&!0===e.isCsStateChange})).addGroup("queuing",(function(e){return!0===e.isQueuing}),(function(e){return!0!==e.isQueuing&&!0===e.isCsStateChange})).processEvents(o);s={events:s.events.concat(n.map((function(e,t){return{event:"CALL",style:"call".concat(t),group:"call",start:e.time.start,end:e.time.end/1e3,startFlags:{isCallStart:!0},endFlags:{isCallEnd:!0}}})))},a[i]=s}})),Object.keys(a).forEach((function(e){dt(a[e].events)})),{type:ht,payload:{eventsByParticipants:a}}}(i,n,t)),e(function(e){if(Object.keys(e).length>0){var t={},n=1;return Object.keys(e).forEach((function(a){var i=e[a],r=Object(Fe.a)(i.relatedUuids,1)[0];if(i.isAgent){var o=i.name?"".concat(i.name.toUpperCase(),"'S"):"".concat(C," ").concat(n);t[r]={type:C,viewName:"".concat(o," View"),icon:i.image,color:i.color,avatar:i.photoUrl},n+=1}else{var s=i.name?"".concat(i.name.toUpperCase(),"'S"):k;t[r]={type:k,viewName:"".concat(s," Experience"),icon:i.image,color:i.color,avatar:i.photoUrl}}})),{type:fn,payload:t}}return{type:fn,payload:{}}}(i)),Object.keys(i).forEach((function(t){var n;e((n=i[t],function(e){var t,a=n.number,i=n.relatedUuids,r=n.type,o=n.userId,s=Object(Fe.a)(i,1)[0];return t=o?Kt:"string"===typeof r&&"ACCOUNT"===r.toUpperCase()?Bt:Ft,new Promise((function(n){n(e({type:un,payload:{number:a,image:t,uuid:s}}))}))}))}))}}var Cn="TOGGLE_ROUTING",kn="LOAD_PROGRESS",wn="LOAD_PROGRESS_AUDIO";function Sn(e){return{type:wn,payload:e}}var Tn="SET_STATUS";function Nn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:Tn,payload:{status:e,description:t}}}var En="SET_NOTES_WIDTH",In="REQUEST_AUDIO";function Pn(){return{type:In,payload:{isLoading:!0}}}var Ln="INVALIDATE_AUDIO";function An(){return{type:Ln,payload:{source:null,duration:null}}}var Rn="RECEIVE_AUDIO";function Mn(e,t){return{type:Rn,payload:{isLoading:!1,source:e,duration:t}}}var Dn="NO_AUDIO";function Un(e){return{type:Dn,payload:{error:e}}}function Bn(){return function(e,t){var n=t(),a=ue(n),i=Se(n),r=Xe(n),o=r.start,s=r.end,c=i[a];if(c){var l={flags:{isRecordStop:!0},timestamp:o},d={flags:{isRecordStop:!0},timestamp:s},h=d.timestamp-l.timestamp,p=[l,c.events.filter((function(e){return!0===e.flags.isRecordStart||!0===e.flags.isRecordStop||e.flags.isSecondary&&(e.flags.isHold||e.flags.isUnHold)})),d].flat().map((function(e){return Object(u.a)(Object(u.a)({},e),{},{position:100/h*(e.timestamp-l.timestamp)})})),m=0,f=l,v=null,b=[],y=0;p.forEach((function(e){var t=e.flags,n=e.position;!v&&(!0===t.isRecordStart||t.isSecondary&&t.isUnHold)?(y+=e.timestamp-f.timestamp,v={audioStart:m,start:e.position,timelineStart:e.timestamp,offset:y}):v&&(!0===t.isRecordStop||t.isSecondary&&t.isHold)&&(m+=n-f.position,v.stop=n,v.audioStop=m,v.timelineStop=e.timestamp,b.push(v),v=null),f=e})),b=(b=b.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{audioStart:100/m*e.audioStart,audioStop:100/m*e.audioStop})})).map((function(e){return Object(u.a)(Object(u.a)({},e),{},{timeline:{start:new Date(e.timelineStart/1e3),stop:new Date(e.timelineStop/1e3)}})}))).map((function(e){return Object(u.a)(Object(u.a)({},e),{},{playheadAtMediaPosition:function(t){var n=e.stop,a=e.audioStart,i=e.audioStop;return M(100/t.duration*t.currentTime,a,i,e.start,n)},mediaPositionAtPlayhead:function(t,n){var a=e.stop,i=e.audioStart,r=e.audioStop;return n.duration/100*M(t,e.start,a,i,r)}})})),e({type:wt,payload:{events:b}})}}}function Fn(){var e=window.location.search.substring(1);if(0===e.length)return{};var t={};return e.split("&").forEach((function(e){var n=e.split("="),a=Object(Fe.a)(n,2),i=a[0],r=a[1];t[i]=r})),t}var Kn=Object(Ue.a)([de],(function(e){return function(t){return e&&Object.keys(e).length&&Object.keys(e).filter((function(n){return e[n].relatedUuids.includes(t)})).map((function(t){return e[t]})).shift()||null}})),Hn=Object(Ue.a)([be],(function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Array.isArray(e)&&e.length?e.map((function(e){return e})).sort((function(e,t){return e.time.start-t.time.start})).filter((function(e,a,i){return n?e.toNumber===n.number:t>=e.time.start&&t<e.time.end||(0===a?t<e.time.start:a<i.length-1&&(t>=e.time.end&&t<i[a+1].time.start))})).pop()||e.map((function(e){return e})).pop():null}})),Wn=Object(Ue.a)([de],(function(e){return Object.keys(e||{}).filter((function(t){return e[t].isPrimary})).shift()})),Vn=Object(Ue.a)([Wn,fe],(function(e,t){return e&&t[e]?t[e].events:[]}));function Gn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.filter((function(t){return t.group===e}))}function Yn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Gn(e,t).map((function(e){return e.end-e.start}));return 0===n.length?0:n.reduce((function(e,t){return t+e}))/1e6}function Xn(e){var t=0,n=Number.MAX_SAFE_INTEGER;return e.forEach((function(e){!0===e.startFlags.isCallStart&&(t=e.start),!0===e.startFlags.isCsStateChange&&(n=Math.min(n,e.start))})),n===Number.MAX_SAFE_INTEGER&&(n=t),Math.max(0,n-t)/1e6}function Jn(e){var t=Vn(e);return Object(u.a)(Object(u.a)({},function(e){var t=Wn(e),n=Vn(e),a=ke(e),i=Gn("bridge",n),r={talking:0,listening:0,overtalk:0,silent:0};i.forEach((function(e){var n=e.start,i=e.end;Object.keys(a).forEach((function(e){var o=e===t,s=a[e],c=o?"talking":"listening",l=[];o&&(l=Object.keys(a).filter((function(e){return e!==t})).map((function(e){return a[e]})).flat()),s.forEach((function(e){var t=Math.max(n,Math.min(i,e.timelineEnd)),a=Math.min(i,Math.max(n,e.timelineStart));o&&l.forEach((function(e){if(e.timelineStart<t&&e.timelineEnd>a){var n=Math.max(a,e.timelineStart),i=Math.min(t,e.timelineEnd);r.overtalk+=(i-n)/1e6}}));var s=(t-a)/1e6;r[c]+=s}))}))}));var o=Yn("bridge",n);return r.talking-=r.overtalk,r.listening-=r.overtalk,r.silent=o-r.talking-r.listening-r.overtalk,r}(e)),{},{holding:Yn("hold",t),queuing:Yn("queuing",t),routing:Yn("routing",t),ringing:Xn(t)})}var qn="SET_CALL_SUMMARY";function zn(){return function(e,t){var n=t(),a=de(n);return e({type:qn,payload:{calls:be(n),timeline:Xe(n),channels:Se(n),transcription:xe(n),participants:a,summary:Jn(n)}})}}var Qn="ERROR_MODAL_SHOW",Zn="ERROR_MODAL_CLEAR";function $n(e){return function(t){t(Nn(e.status,e.statusMessage||e.blockingMessage)),t(function(e,t){return{type:Qn,payload:{title:e,message:t,onPrimaryClicked:arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){}}}}("Error",e.blockingMessage||e.statusMessage))}}function ea(e){return function(t){e instanceof H?t($n(e)):e instanceof F&&e.status?(console.warn(e.message),t(Nn(e.status,e.displayMessage))):(window.alert(e.message),t({type:"SHOW_FETCH_ERROR",payload:{error:e}}))}}var ta="REQUEST_TRANSCRIPTION";function na(e){return{type:ta,payload:{isLoading:!0,uuid:e}}}var aa="RECEIVE_TRANSCRIPTION";function ia(e,t,n){return{type:aa,payload:{isLoading:!1,uuid:e,data:t.data.analysis.normalised.data,sentences:n}}}function ra(e){return e.Mentions.map((function(e){return e.Pos.map((function(t){return{channel:parseInt(e.Channel,10),start:t,end:null}}))})).flat()}function oa(e){var t,n,a,i=e.Keywords||[],r=e.Phrases||[];return Object(u.a)(Object(u.a)({},e),{},{Keywords:i,Phrases:r,Positions:(t=[(a=i,a.map(ra).flat()),(n=r,n.map((function(e){return{channel:parseInt(e.Channel,10),start:e.Start,end:e.End}})))],t.flat().sort((function(e,t){return e.start-t.start})))})}function sa(e){var t=JSON.parse(e);return Object(u.a)(Object(u.a)({},t),{},{Categories:(t.Categories||[]).map(oa)})}function ca(e,t,n,a){var i,r,o=e.data.analysis.normalised.data,s=e.data.recordingId,c={},l=Fn().showAll,d=Number.MAX_SAFE_INTEGER,h=0;return Object.keys(n).forEach((function(e){var t=n[e].end-n[e].start;h<t&&!n[e].isAgent?(h=t,i=e):n[e].isAgent&&(r=e)})),Object.keys(n).forEach((function(e){var i=n[e],h=function(e,t,n,a,i){var r=a.split("/").pop(),o=Kn(e),s=Hn(e),c=o(r),l=[],d=Be(e);return[1,2].forEach((function(e){1===e&&c!==t||2===e&&c===t||n[e].Sentences.forEach((function(n){var a,r=d(1e3*n.Start+t.start),c=d(1e3*n.End+t.start),h=(r-t.start)/1e3,p=(c-t.start)/1e3;if(t.start<=r&&t.end>r&&!i?a=s(r,t):i&&(a=s(r)),void 0!==a&&null!==a){var m=c>a.time.end,f=a,v=f.aUuid,b=f.bUuid,y=o(v),g=o(b),j={};if(y===t)j.callIndex=a.index,j.uuid=v,j.number=y.number,j.opposing={uuid:b,number:g.number};else if(g===t)j.callIndex=a.index,j.uuid=b,j.number=g.number,j.opposing={uuid:v,number:y.number};else{if(!m)return;var O=s(c),_=O.aUuid,x=O.bUuid,C=o(_),k=o(x);j.callIndex=O.index,j.uuid=_,j.number=C.number,j.opposing={uuid:x,number:k.number}}l.push(Object(u.a)(Object(u.a)({},j),{},{channel:e,Start:n.Start,End:n.End,startWithOffset:h,endWithOffset:p,timelineStart:r,timelineEnd:c,Sentence:n.Sentence,timeline:{start:new Date(r/1e3),end:new Date(c/1e3)}}))}}))})),function(e){return e.sort((function(e,t){return e.Start<t.Start?-1:e.Start>t.Start?1:0}))}(l)}(a,i,o,s,r===e).filter((function(e){return!!i.relatedUuids.includes(t)||(!!n[e.opposing.number].isPrimary||l)}));Array.isArray(h)&&h.length>0&&(d=Math.min(h.map((function(e){return e.callIndex})).reduce((function(e,t){return Math.min(e,t)})),d)),c[e]=h})),Object.keys(c).forEach((function(e){c[e]=c[e].map((function(e){return Object(u.a)(Object(u.a)({},e),{},{isInEarliestCall:e.callIndex===d})}))})),Object.keys(c).forEach((function(e){if(e!==r&&e!==i&&c[i])for(var t=0;t<c[i].length;t++)for(var n=0;n<c[e].length;n++)if(c[i][t].timelineStart===c[e][n].timelineStart){c[i].splice(t,1),t-=1;break}})),c}function la(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ee;return function(t,n){var i=n(),r=Ce(i),o=ke(i),s=de(i);return r===e&&Array.isArray(o)&&0!==o.length?(t(zn()),Promise.resolve()):(t(na(e)),a(e,i.auth.jwtToken).then((function(n){if("undefined"!==typeof n.data){var a=n.data.analysis.normalised;a.data=sa(a.data);var r=ca(n,e,s,i);t(ia(e,n,r)),t(zn())}else{var o=new H(it,"There is no transcription for this caller experience","There is no transcription for this caller experience.");t(ea(o))}})))}}function ua(e,t){var n={};t.events.forEach((function(e){var t=n[e.uuid]||{};t.events=e.events,n[e.uuid]=t})),t.talkTime.forEach((function(e){var t=e.data.recordingId.split("/"),a=Object(Fe.a)(t,2)[1],i=n[a]||{};i.talkTime=e.data.analysis.data,n[a]=i})),Object.keys(n).forEach((function(t){n[t].isPrimary=t===e;var a=n[t].events.filter((function(e){return!0===e.flags.isRecordStart})).sort((function(e,t){return e.timestamp-t.timestamp})).shift();void 0!==a&&(n[t].start=a.timestamp),n[t].end=n[t].events.filter((function(e){return!0===e.flags.isRecordStop})).sort((function(e,t){return e.timestamp-t.timestamp})).pop().timestamp}));var a=Object.keys(n).map((function(e){return n[e]})).filter((function(e){return!0===e.isPrimary})).reduce((function(e,t){return Math.min(e,t.start)}),Number.MAX_SAFE_INTEGER),i=Object.keys(n).map((function(e){return n[e]})).filter((function(e){return!0===e.isPrimary})).reduce((function(e,t){return Math.max(e,t.end)}),0);return{timelineRange:i-a,timelineStart:a,timelineEnd:i,channels:n}}function da(e){var t=Object.keys(e).map((function(t){return e[t]})).filter((function(e){return!0===e.isPrimary})).reduce((function(e,t){return Math.min(e,t.start)}),Number.MAX_SAFE_INTEGER),n=Object.keys(e).map((function(t){return e[t]})).filter((function(e){return!0===e.isPrimary})).reduce((function(e,t){return Math.max(e,t.end)}),0)-t;return{1:[{event:"CLASH_WIN",timestamp:t+.2*n},{event:"CLASH_WIN",timestamp:t+.3*n},{event:"STEAL",timestamp:t+.4*n},{event:"INTERRUPTION",timestamp:t+.5*n}],2:[{event:"CLASH_WIN",timestamp:t+.8*n},{event:"AFFIRMATION",timestamp:t+.7*n},{event:"INTERRUPTION",timestamp:t+.6*n}]}}function ha(e,t){return{type:mt,payload:{channels:e,talkTime:t}}}var pa="REQUEST_DATA",ma="RECEIVE_DATA";function fa(){return{type:ft}}function va(){return{type:bt}}function ba(e){return{type:jt,payload:{scrub:e}}}function ya(e){return{type:_t,payload:{speed:e}}}function ga(e,t){return function(n,a){var i=function(e){return e.playback}(a()).speed;t&&1!==i&&n(ya(1)),n({type:Ot,payload:{position:e}})}}function ja(e){return{type:xt,payload:{layer:e}}}function Oa(e){return{type:St,payload:{transcriptionPlayScrub:e}}}function _a(e){return{type:Tt,payload:{viewport:e}}}var xa="SET_COMPLETED_NOTES_VISIBILITY";function Ca(e){return function(t,n){var a=n(),i=a.scrub,r=a.transcription.viewport,o=r.span,s=Xe(n()),c=100*(Be(n())(1e3*e+s.start)-s.start)/s.range,l=i.end-i.start,u=c-(i.start+l/2),d=Math.min(Math.max(0,i.start+u),100-l),h=d+l,p=c-(r.start+o/2),m=Math.min(Math.max(0,r.start+p),100-o);t(ga(c,!0)),t(ba({start:d,end:h})),t(_a({start:m,span:o}))}}var ka="RESET_STATE";function wa(){return function(e,t){var n=t(),a=je(n).error,i=ve(n).isRecorded;if(a){if(i)return Promise.reject(function(e){var t=e instanceof K?e.response.status:0,n="Unable to load recording. The recording is not yet available or may have been purged.";return 403===t?n="Unable to load recording. You may not have permission to access this file.":t>=500&&(n="We were unable to fetch the audio file at this time. Please try again later."),new H(it,"Unable to load recording.",n)}(a));var r=new H(it,"No recording was made.","A recording was not made for this experience.");return Promise.reject(r)}return Promise.resolve()}}var Sa=function(e,t){var n=1,a=setInterval((function(){var i,r=t();ge(r)>99?clearInterval(a):(e((i=Math.min(100,n+1),{type:kn,payload:i})),n+=1)}),25)};function Ta(e){return"string"!==typeof e||0===e.length?function(e){var t;return e((t="Invalid PrimaryUUID",function(e){t instanceof F&&t.status&&e(Nn(t.status,t.displayMessage)),console.warn(t.message),e({type:"LOG_SILENT_ERROR",payload:{error:t}})})),Promise.reject()}:function(t,n){if(e===ue(n()))return null;return t({type:ka,payload:null}),t(function(e){return{type:d,payload:{uuid:e}}}(e)),Sa(t,n),t(va()),t(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z;return function(t,n){var a=n(),i=ue(a);t(ot(i));var r=pe(a),o=me(a);if(r!==i||!Array.isArray(o)||0===o.length){t(ct());var s=Oe(n());return e(i,s,a.auth.jwtToken).then((function(e){var n=e.events;return t(ut(i,n))}),(function(){return Promise.reject(new H(it,"Unable to load call flow for this call.","Unable to load call flow for this call. Please ensure you are accessing via the correct account, and that the call has not been deleted."))}))}return t(ut(i,o)),Promise.resolve()}}()).then((function(){return t(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J;return function(t,n){var a=n(),i=ce(me(a),ue(a)),r=Xe(a);return t(qe(i)),t(Qe()),e(i,a.auth.jwtToken).then((function(e){t($e(i,tt(e,r),et(e)))}))}}())})).then((function(){var e=n(),a=ue(e),i=be(e);t(function(e){return function(t){e&&sn("canShareRecording",(function(e,n){n.status?t({type:Ut,payload:e}):n.xhr.responseText?cn():window.alert("Problem loading notes!")}),e)}}(a)),t(function(e){return function(t){e&&sn("getRatingDetails",(function(e,n){if(n.status){var a=e.data;e.data&&!e.data[0].salesforceId&&(a=e.data.map((function(e,t){return Object(u.a)(Object(u.a)({},e),{},{salesforceId:e.salesforceId?e.salesforceId:"tempID-".concat(t),note:""})}))),t({type:At,payload:{rating:a}})}else n.xhr.responseText?cn():window.alert("Problem loading ratings!")}),e)}}(a)),t(function(e){return function(t){var n=[];return e.forEach((function(e){n.push({userId:e.fromUserId,phoneNum:e.fromNumber}),n.push({userId:e.toUserId,phoneNum:e.toNumber})})),new Promise((function(e,a){sn("getParticipantsInfo",(function(n,i){i.status?e(t({type:Dt,payload:n})):i.xhr.responseText?cn():(window.alert("Problem loading Participants Info!"),a(new Error("Problem loading Participants Info!")))}),n),window.parent.getVisualforce||e()}))}}(i)).then((function(){return t(function(e,t){return function(){var n=Object(m.a)(p.a.mark((function n(a,i){var r,o,s,c,l;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:pa,payload:{isLoading:!0}}),r={events:[{uuid:e,events:me(i())}],channelData:[],talkTime:[]},n.prev=2,n.next=5,ne(e,i().auth.jwtToken);case 5:(o=n.sent).data.analysis.data=JSON.parse(o.data.analysis.data),r.talkTime.push(o),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),console.log(n.t0);case 13:s=ua(e,r),c=s.channels,l=da(c),a(xn(e,t,c,(u=i(),we(u).participantNames))),a(ha(c,l)),a(Bn()),a(la(e,t,r)),a({type:ma,payload:{isLoading:!1}});case 20:case"end":return n.stop()}var u}),n,null,[[2,10]])})));return function(e,t){return n.apply(this,arguments)}}()}(a,i)),t(ln()),t(dn(a)),t(nn())}))})).then((function(){return t(ga(0))})).then((function(){return t(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.URL.createObjectURL;return function(){var n=Object(m.a)(p.a.mark((function n(a,i){var r,o,s,c,l,u;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(Pn()),a(An()),r=ue(i()),n.prev=3,o=function(e){var t=Math.round(e),n=Math.min(99,t);a(Sn(n))},n.next=7,e(r,i().auth.jwtToken,o);case 7:return s=n.sent,c=s.blob,l=s.duration,n.t0=t,n.next=13,c;case 13:n.t1=n.sent,u=(0,n.t0)(n.t1),a(Mn(u,l)),n.next=21;break;case 18:n.prev=18,n.t2=n.catch(3),a(Un(n.t2));case 21:return n.abrupt("return",Promise.resolve());case 22:case"end":return n.stop()}}),n,null,[[3,18]])})));return function(e,t){return n.apply(this,arguments)}}()}())})).then((function(){return t(wa())})).catch((function(e){return t(ea(e))}))}}var Na={status:nt,description:null,isDisplaying:{routing:!1},isLoading:{calls:!1,events:!1,data:!1,audio:!1},isAudioLoaded:!1,progressAudio:0,progress:0,notesWidth:25,audioFailed:!1};function Ea(e){var t=e.isLoading;return Object.keys(t).filter((function(e){return t[e]})).length?nt:at}var Ia={isLoading:!1,uuid:null,events:null,eventsByParticipants:null};var Pa={isLoading:!1,uuids:null,calls:null,isRecorded:!1};var La="background-noise-level",Aa="transcription-confidence",Ra="show-notes",Ma="clash-wins",Da="affirmations",Ua="interruptions",Ba="steals",Fa="FILTER_HOLD_UNHOLD",Ka="FILTER_TRANSFER",Ha="FILTER_LISTEN_IN",Wa="FILTER_CALL_QUEUING",Va="FILTER_NEW_PARTY",Ga=[Fa,Ka,Ra];var Ya={source:null,events:[],error:null};var Xa={channels:{},talkTime:null,participantNames:[]};var Ja={isPlaying:!1,speed:1,availableSpeeds:[.5,1,1.5,2,3],playhead:0};var qa="SET_SCRUBBER_VISIBILITY";function za(e){return{type:qa,payload:{isVisible:e}}}var Qa={start:0,end:30,isUserModified:!1,isVisible:!1};var Za={startTime:0,duration:0,direction:null,from:"",to:"",images:[],metrics:[],summary:{},keyCallers:{colors:[],titles:[],numbers:[],fullNumbers:[],fullTitles:[],names:[],fullNameNumbers:[]}};var $a={transcriptionPlayScrub:{position:0,offsetPosition:0},viewport:{start:0,span:100},confidence:0,isLoading:!1,uuid:null,rawData:{1:null,2:null},sentences:null};var ei=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n,a){var i=a(),r=Xt(i)(e);r&&n(pn(Object(u.a)(Object(u.a)({},r),"function"===typeof t?t(r):t)))}},ti=function(e){return function(t){return t(ei(e,{isAcknowledged:!0}))}},ni=function(e){return function(t){return t(ei(e,{isClosed:!0}))}},ai=function(e,t){return function(n){window.confirm("Delete this reply?")&&n(ei(e,(function(e){return{isAcknowledged:!1,thread:e.thread.filter((function(e){return e.uuid!==t}))}})))}},ii="OPEN_NOTE_EDITOR",ri={newNote:"newNote",existingNote:"existingNote",newComment:"newComment",existingComment:"existingComment",isExistingItem:function(e){return e===ri.existingNote||e===ri.existingComment},isNote:function(e){return e===ri.newNote||e===ri.existingNote},isComment:function(e){return e===ri.newComment||e===ri.existingComment},isNew:function(e){return e===ri.newNote||e===ri.newComment}};var oi="CLOSE_NOTE_EDITOR";function si(){return{type:oi}}var ci="MARK_NOTE_AS_READ";var li="SET_NOTES_FILTER";function ui(e){return{type:li,payload:{filter:e}}}var di={author:0,authorName:"",canShare:!0,channelUuid:"",isClosed:!1,eventTime:"",eventType:"",isAcknowledged:!1,noteId:"",noteCreated:null,noteModified:null,polarity:"Neutral",relatedToTitle:"",text:"",timestamp:0,uuid:"",userActivity:[],thread:[],version:1},hi={showOnTimeline:!0,showCompletedNotes:!0,filter:qt.all,showEditModal:!1,editMode:null,noteToEdit:null,commentToEdit:null,canShare:!1,unread:[],notes:[],eventTypes:[{icon:"",id:0,text:"General Note"},{icon:"",id:1,text:"Offensive Behaviour"},{icon:"",id:2,text:"Excellent Behaviour"},{icon:"",id:3,text:"Neutral"}],polarityTypes:[{icon:"",id:"Negative",text:"Negative"},{icon:"",id:"Neutral",text:"Neutral"},{icon:"",id:"Positive",text:"Positive"}]};var pi={showCallRatingDialog:!1,rating:[]};var mi="SET_CURRENT_MATCH_POSITION_INDEX";function fi(e){return function(t,n){t({type:mi,payload:{index:e}});var a,i=(a=n(),Pe(a).currentPosition);i&&t(Ca(i.start))}}var vi="SET_MATCH_POSITIONS";function bi(e){return function(t){t({type:vi,payload:{positions:e}}),t(fi(0))}}function yi(){return function(e,t){var n=t();e(bi(function(e,t){if("string"!==typeof e||0===e.length)return[];var n=[];return Object.keys(t).filter((function(e){return parseInt(e,10)>0})).forEach((function(a){var i=t[a];if(null!==i&&Array.isArray(i.Words)){var r=i.Words,o=e.split(" "),s=o.shift(),c=null,l=0;r.forEach((function(t,i){var r,d,h=o.filter((function(e){return 0===e.length})).length,p=o.length;r=s,d=t.w,(p===h&&r.length>0&&r.length<d.length?r.toUpperCase()===d.toUpperCase().substr(0,r.length):r.toUpperCase()===d.toUpperCase())&&(null===c?c={channel:parseInt(a,10),start:t.s}:l<i-1&&(c=null,l=null,o=e.split(" ")),l=i,null!==c&&p===h&&(c=Object(u.a)(Object(u.a)({},c),{},{end:t.s}),n.push(c),c=null,o=e.split(" ")),s=o.shift())}))}})),n.sort((function(e,t){return e.start-t.start}))}(function(e){return Pe(e).searchPhrase}(n),xe(n))))}}var gi="SET_SEARCH_PHRASE";function ji(e){return{type:"SET_CURRENT_MATCH",payload:{currentMatch:e}}}function Oi(e){return{type:"SET_MATCHES",payload:{matches:e}}}var _i={searchPhrase:null,matches:[],matchCount:20,currentMatch:0,positions:[],positionCount:0,currentPosition:null,currentPositionIndex:0};var xi={};var Ci="SET_EVENTTIMELINE_VISIBILITY";function ki(e){return{type:Ci,payload:{eventTimelineVisible:e}}}var wi={eventTimelineVisible:!1};var Si={};var Ti="classification",Ni="keyword",Ei="topic",Ii="OPEN_CLASSIFICATIONS_DIALOG";var Pi="CLOSE_CLASSIFICATIONS_DIALOG";function Li(e,t,n){return t.filter((function(e){return e.Keyword===n})).map((function(t){return t.Pos.map((function(t){return{channel:e,start:t,end:null}}))})).flat()}function Ai(e,t,n){return t.filter((function(e){return e.Topic===n})).map((function(t){return t.Keywords.map((function(t){return t.Pos.map((function(t){return{channel:e,start:t,end:null}}))})).flat()})).flat()}function Ri(){return function(e,t){var n=function(e){return e.knowledge}(t()).selectedItem,a=n.identifier,i=n.type,r=n.category;if("string"===typeof a&&a.length>0){var o,s=xe(t());switch(i){case"classification":o=r.Positions;break;case"topic":o=function(e,t){var n=e[1].Topics,a=e[2].Topics;return[Ai(1,n,t),Ai(2,a,t)].flat()}(s,a);break;case"keyword":o=function(e,t){var n=e[1].Keywords,a=e[2].Keywords;return[Li(1,n,t),Li(2,a,t)].flat()}(s,a);break;default:return}e(bi(o))}}}var Mi="SELECT_KNOWLEDGE_CLASSIFICATION";function Di(e){return function(t,n){var a=xe(n()).Categories.filter((function(t){return t.Name===e})),i=Object(Fe.a)(a,1)[0];t({type:Mi,payload:{identifier:e,category:i}}),t(Ri())}}var Ui="SELECT_KNOWLEDGE_KEYWORD";function Bi(e){return function(t){t({type:Ui,payload:{identifier:e}}),t(Ri())}}var Fi="SELECT_KNOWLEDGE_TOPIC";function Ki(e){return function(t){t({type:Fi,payload:{identifier:e}}),t(Ri())}}var Hi="CLEAR_SELECTED_KNOWLEDGE_ITEM";var Wi="OPEN_KEYWORDS_TOPICS_DIALOG";var Vi="CLOSE_KEYWORDS_TOPICS_DIALOG";var Gi={currentMatch:0,selectedItem:{identifier:null,type:null,category:null},showClassificationsDialog:!1,showKeywordsTopicsDialog:!1};var Yi,Xi=n(62),Ji=null,qi="SET_AUTH_DISPLAY_NAME",zi=function(e){return function(t){var n=JSON.parse(localStorage.getItem("ENV_URLS")),a=n.gatekeeperUrl,i=n.namespace,r=n?a:x,o=i?"&namespace=".concat(i):"",s=new Headers({Accept:"application/json","content-type":"application/json",authorization:"Bearer ".concat(e)});fetch("".concat(r,"/token/salesforce?scope=insights:basic&hastoken=true").concat(o),{method:"get",headers:s}).then((function(e){return e.json()})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.jwt){var n=e.jwt.split("."),a=Xi.Base64.decode(n[1]),i=JSON.parse(a),r=i["https://natterbox.com/claim/orgId"],o=i["https://natterbox.com/claim/userId"],s=i["https://natterbox.com/claim/username"],c=i.scope,l=i.exp,u=i.iat,d=i.nbf,h={token:e.jwt,organisationId:r,userName:s,userId:o,scope:c,exp:l,iat:u,nbf:d};return localStorage.setItem("jwtToken",JSON.stringify(h)),t(Yi(h)),t({type:Mt,payload:h}),t(Ta(Fn().uuid)),o}window.alert("Sorry, your session has timed out. Please refresh your page to try again")})).then((function(e){e&&function(e){return new Promise((function(t,n){sn("getUserName",(function(e,a){a.status?t(e):a.xhr.responseText?cn():n(new Error("Unable to fetch display name for user!"))}),e)}))}(e).then((function(e){return t({type:qi,payload:e})})).catch((function(e){return console.log("Error fetching display name: ".concat(e))}))})).catch((function(e){t(Nn(it,"Unable to load recording. You may not have permission to access this file")),console.log("ERROR GETTING JWT:",e),window.alert("Sorry, your session has timed out. Please refresh your page to try again")}))}},Qi=function(){return function(){var e=Object(m.a)(p.a.mark((function e(t){var n,a,i,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.parent.getSessionId){e.next=18;break}return e.prev=1,e.next=4,new Promise((function(e,t){sn("getNamespace",(function(n,a){a.status?e(n):a.xhr.responseText?cn():t(new Error("".concat(a.message)))}))}));case 4:return n=e.sent,e.next=7,new Promise((function(e,t){sn("getOrgUrl",(function(n,a){a.status?e(n):a.xhr.responseText?cn():t(new Error("".concat(a.message)))})),window.parent.getVisualforce||e()}));case 7:(a=e.sent)&&(i={isSalesforce:!0,isProd:a.isProd,sapienUrl:a.SapienHostUrl,gatekeeperUrl:a.GatekeeperHostUrl,callflowUrl:a.callFlowHostUrl,namespace:n},localStorage.setItem("ENV_URLS",JSON.stringify(i))),console.log("Auth expired getting new SF session ID"),t(zi(window.parent.getSessionId())),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),window.alert(e.t0);case 16:e.next=21;break;case 18:"",!0,"".length>0?(console.log("Warning: no salesforce parent, running in linked standalone mode using token: '".concat("","'")),"","",r={isSalesforce:!0,isProd:true,sapienUrl:O,gatekeeperUrl:x,callflowUrl:_,namespace:""},localStorage.setItem("ENV_URLS",JSON.stringify(r)),t(zi(""))):(console.log("Warning: no salesforce parent, running in full standalone mode"),t(Ta(Fn().uuid)));case 21:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}()};Yi=function(e){return function(t){Ji&&clearTimeout(Ji);var n=(Number(e.exp)-Number(e.iat))/2;Ji=setTimeout((function(){t(Qi())}),1e3*n)}};var Zi=Qi,$i={jwtToken:null,displayName:null},er="TOGGLE_TAB";var tr={activeTab:"tab-knowledge"};var nr={show:!1,title:"Error",message:"An error occurred.",primaryButtonText:"Ok",secondaryButtonText:void 0,onPrimaryClicked:function(){}};var ar=Object(c.c)({primaryUuid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===d?t.payload.uuid:e},status:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Na,t=arguments.length>1?arguments[1]:void 0,n=e;switch(t.type){case Je:case Ze:n=Object(u.a)(Object(u.a)({},e),{},{isLoading:Object(u.a)(Object(u.a)({},e.isLoading),{},{calls:t.payload.isLoading})});break;case rt:case lt:n=Object(u.a)(Object(u.a)({},e),{},{isLoading:Object(u.a)(Object(u.a)({},Na.isLoading),{},{events:t.payload.isLoading})});break;case pa:case ma:n=Object(u.a)(Object(u.a)({},e),{},{isLoading:Object(u.a)(Object(u.a)({},Na.isLoading),{},{data:t.payload.isLoading})});break;case In:n=Object(u.a)(Object(u.a)({},e),{},{isLoading:Object(u.a)(Object(u.a)({},Na.isLoading),{},{audio:t.payload.isLoading})});break;case Rn:n=Object(u.a)(Object(u.a)({},e),{},{isLoading:Object(u.a)(Object(u.a)({},Na.isLoading),{},{audio:t.payload.isLoading}),isAudioLoaded:!0});break;case Dn:n=Object(u.a)(Object(u.a)({},e),{},{isLoading:Object(u.a)(Object(u.a)({},Na.isLoading),{},{audio:!1}),audioFailed:!0});break;case Cn:n=Object(u.a)(Object(u.a)({},e),{},{isDisplaying:Object(u.a)(Object(u.a)({},e.isDisplaying),{},{routing:!e.isDisplaying.routing})});break;case kn:n=Object(u.a)(Object(u.a)({},e),{},{progress:t.payload});break;case wn:n=Object(u.a)(Object(u.a)({},e),{},{progressAudio:t.payload});break;case Tn:return Object(u.a)(Object(u.a)({},e),{},{status:t.payload.status,description:t.payload.description});case En:return Object(u.a)(Object(u.a)({},e),{},{notesWidth:t.payload});default:return e}return Object(u.a)(Object(u.a)({},n),{},{status:Ea(n)})},events:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ia,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case rt:case lt:case st:case ht:return Object(u.a)(Object(u.a)({},e),t.payload);default:return e}},eventTimeline:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wi,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ci:return{eventTimelineVisible:t.payload.eventTimelineVisible};default:return e}},experienceOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Si,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case fn:return t.payload;case un:var n=t.payload,a=n.image,i=n.uuid;return Object(u.a)(Object(u.a)({},e),{},{[i]:Object(u.a)(Object(u.a)({},e[i]),{},{icon:a})});default:return e}},calls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Je:case ze:case Ze:return Object(u.a)(Object(u.a)({},e),t.payload);default:return e}},activeLayers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ga,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case xt:var n=t.payload.layer;return e.includes(n)?e.filter((function(e){return e!==n})):e.concat([n]);case Ct:var a=t.payload.layer;return e.includes(a)?e:e.concat([a]);case kt:var i=t.payload.layer;return e.filter((function(e){return e!==i}));default:return e}},audio:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ya,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Rn:var n=t.payload,a=n.source,i=n.duration;return Object(u.a)(Object(u.a)({},e),{},{source:a,duration:i,error:null});case Ln:var r=t.payload,o=r.source,s=r.duration;return Object(u.a)(Object(u.a)({},e),{},{source:o,duration:s,error:null});case wt:var c=t.payload.events;return Object(u.a)(Object(u.a)({},e),{},{events:c});case Dn:var l=t.payload.error;return Object(u.a)(Object(u.a)({},e),{},{source:null,duration:0,events:[],error:l});default:return e}},data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Dt:return Object(u.a)(Object(u.a)({},e),{},{participantNames:t.payload});case mt:var n=t.payload,a=n.channels,i=n.talkTime;return Object(u.a)(Object(u.a)({},e),{},{channels:Object(u.a)(Object(u.a)({},e.channels),a),talkTime:i});default:return e}},playback:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ja,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ft:return Object(u.a)(Object(u.a)({},e),{},{isPlaying:!0});case vt:return Object(u.a)(Object(u.a)({},e),{},{isPlaying:!0,playhead:0});case bt:return Object(u.a)(Object(u.a)({},e),{},{isPlaying:!1});case yt:return Object(u.a)(Object(u.a)({},e),{},{playhead:Math.max(.01,e.playhead-t.payload.adjustment)});case gt:return Object(u.a)(Object(u.a)({},e),{},{playhead:Math.min(100,e.playhead+t.payload.adjustment)});case Ot:return Object(u.a)(Object(u.a)({},e),{},{playhead:t.payload.position});case _t:return Object(u.a)(Object(u.a)({},e),{},{speed:t.payload.speed});default:return e}},scrub:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case jt:return Object(u.a)(Object(u.a)({},e),{},{start:t.payload.scrub.start,end:t.payload.scrub.end});case qa:return Object(u.a)(Object(u.a)({},e),{},{isVisible:t.payload.isVisible});default:return e}},callSummary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Za,t=arguments.length>1?arguments[1]:void 0;function n(e){return Object.keys(e).filter((function(t){return e[t].isAgent})).length}function a(e,t){var a=Object(Fe.a)(t,1)[0].direction,i=n(e)<Object.keys(e).length?"":"Internal ";return"".concat(i).concat("OUTBOUND"===a?"Outbound":"Inbound")}function i(e){var t=Object.keys(e).sort((function(t){return e[t].isPrimary?-1:0})).map((function(t){return e[t]}));return{images:t.map((function(e){return e.image})),avatar:t.map((function(e){return e.photoUrl})),colors:t.map((function(e){return e.color})),titles:t.map((function(e){return e.title})),numbers:t.map((function(e){return e.number})),fullNumbers:t.map((function(e){return e.fullNumber})),fullTitles:t.map((function(e){return e.fullTitle})),names:t.map((function(e){return e.name})),fullNameNumbers:t.map((function(e){return e.name?"".concat(e.name," (").concat(e.fullNumber,")"):e.fullTitle}))}}function r(e,t,n,a){return Object.keys(e).filter((function(e){return parseInt(e,10)>0})).map((function(i,r){var o=t.numbers[r],s=n[o],c=s.isAgent,l=s.relatedUuids,u={holdEvents:0,pauseEvents:0,uuid:null},d=Object(Fe.a)(l,1);u.uuid=d[0];var h=Object.keys(a)[0],p=a[h];return a[h].events.forEach((function(e){var t=e.flags,n=t.isHold;t.isRecordStop&&e.timestamp<p.end&&(u.pauseEvents+=1),n&&(u.holdEvents+=1)})),e[i].Metrics.forEach((function(e){var t=Object.keys(e),n=Object(Fe.a)(t,1)[0];u[n]=e[n]})),{title:c?C:k,color:c?"#00A9CE":"#FFC72C",isAgent:c,data:u}}))}switch(t.type){case qn:var o=t.payload,s=o.calls,c=o.timeline,l=o.channels,d=o.transcription,h=o.participants,p=o.summary,m=c.start,f=c.range;if(!s)return Za;var v=i(h),b=Object.keys(h).length<1?null:r(d,v,h,l),y=Object.keys(h).length<1?null:a(h,s);return Object(u.a)(Object(u.a)({},e),{},{startTime:m,duration:f,direction:y,metrics:b,summary:p,keyCallers:v});default:return e}},participants:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xi,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case On:return t.payload;case un:var n=t.payload,a=n.number,i=n.image;return Object(u.a)(Object(u.a)({},e),{},{[a]:Object(u.a)(Object(u.a)({},e[a]),{},{image:i})});default:return e}},transcription:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$a,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case St:return Object(u.a)(Object(u.a)({},e),{},{transcriptionPlayScrub:t.payload.transcriptionPlayScrub});case Tt:return Object(u.a)(Object(u.a)({},e),{},{viewport:t.payload.viewport});case Nt:return Object(u.a)(Object(u.a)({},e),{},{confidence:t.payload.confidence});case ta:return Object(u.a)(Object(u.a)({},e),{},{isLoading:t.payload.isLoading,uuid:t.payload.uuid});case aa:return Object(u.a)(Object(u.a)({},e),{},{isLoading:t.payload.isLoading,uuid:t.payload.uuid,rawData:t.payload.data,sentences:t.payload.sentences});default:return e}},notes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hi,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case Ut:return Object(u.a)(Object(u.a)({},e),{},{canShare:a});case Rt:return Object(u.a)(Object(u.a)({},e),{},{eventTypes:a.eventTypes});case Et:return Object(u.a)(Object(u.a)({},e),{},{showOnTimeline:a.visible});case xa:return Object(u.a)(Object(u.a)({},e),{},{showCompletedNotes:a.visible});case $t:return Object(u.a)(Object(u.a)({},e),{},{notes:e.notes.filter((function(e){return e.noteId!==a.noteId}))});case an:return Object(u.a)(Object(u.a)({},e),{},{notes:a.notes,unread:[]});case rn:return e.notes.some((function(e){return e.noteId===a.note.noteId}))?Object(u.a)(Object(u.a)({},e),{},{notes:e.notes.map((function(e){return e.noteId===a.note.noteId?Object(u.a)(Object(u.a)({},e),a.note):e}))}):Object(u.a)(Object(u.a)({},e),{},{notes:[].concat(Object(oe.a)(e.notes),[Object(u.a)(Object(u.a)({},di),a.note)])});case ii:return Object(u.a)(Object(u.a)({},e),{},{showEditModal:!0,editMode:a.editMode,noteToEdit:a.noteToEdit,commentToEdit:a.commentToEdit});case oi:return Object(u.a)(Object(u.a)({},e),{},{showEditModal:!1,editMode:null,noteToEdit:null,commentToEdit:null});case It:return Object(u.a)(Object(u.a)({},e),{},{notes:a.notes});case tn:return Object(u.a)(Object(u.a)({},e),{},{unread:a.ids});case ci:return Object(u.a)(Object(u.a)({},e),{},{unread:e.unread.filter((function(e){return e!==a.id}))});case li:return Object(u.a)(Object(u.a)({},e),{},{filter:a.filter});default:return e}},callRating:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pi,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case Pt:case Lt:return Object(u.a)(Object(u.a)({},e),{},{showCallRatingDialog:a.showCallRatingDialog});case At:return Object(u.a)(Object(u.a)({},e),{},{showCallRatingDialog:a.showCallRatingDialog,rating:a.rating});default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case gi:return Object(u.a)(Object(u.a)({},e),{},{searchPhrase:t.payload.searchPhrase});case vi:return Object(u.a)(Object(u.a)({},e),{},{positions:t.payload.positions,positionCount:(t.payload.positions||[]).length,currentPosition:(t.payload.positions||[])[0],currentPositionIndex:0});case mi:return Object(u.a)(Object(u.a)({},e),{},{currentPosition:e.positions[t.payload.index],currentPositionIndex:t.payload.index});default:return e}},knowledge:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gi,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ii:return Object(u.a)(Object(u.a)({},e),{},{showClassificationsDialog:!0});case Pi:return Object(u.a)(Object(u.a)({},e),{},{showClassificationsDialog:!1});case Mi:return Object(u.a)(Object(u.a)({},e),{},{selectedItem:{identifier:t.payload.identifier,type:Ti,category:t.payload.category}});case Ui:return Object(u.a)(Object(u.a)({},e),{},{selectedItem:{identifier:t.payload.identifier,type:Ni,category:null}});case Fi:return Object(u.a)(Object(u.a)({},e),{},{selectedItem:{identifier:t.payload.identifier,type:Ei,category:null}});case Hi:return Object(u.a)(Object(u.a)({},e),{},{currentMatch:0,selectedItem:{identifier:null,type:null,category:null}});case Wi:return Object(u.a)(Object(u.a)({},e),{},{showKeywordsTopicsDialog:!0});case Vi:return Object(u.a)(Object(u.a)({},e),{},{showKeywordsTopicsDialog:!1});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Mt:return Object(u.a)(Object(u.a)({},e),{},{jwtToken:t.payload});case qi:return Object(u.a)(Object(u.a)({},e),{},{displayName:t.payload});default:return e}},tabs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case er:var n=t.payload;return n===e.activeTab&&(n="none"),Object(u.a)(Object(u.a)({},e),{},{activeTab:n});default:return e}},errorModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Qn:var n=t.payload,a=n.title,i=n.message,r=n.primaryButtonText,o=n.secondaryButtonText,s=n.onPrimaryClicked;return{show:!0,title:a||nr.title,message:i||nr.message,primaryButtonText:r||nr.primaryButtonText,secondaryButtonText:o,onPrimaryClicked:s};case Zn:return Object(u.a)({},nr);default:return e}}}),ir=(n(79),n(80),n(81),n(63)),rr=n(5),or=n.p+"static/media/logo-linear.f69f4348.svg",sr=n(3),cr=n.n(sr),lr=cr.a.arrayOf(cr.a.string),ur=(cr.a.shape({primaryUuid:cr.a.string,channels:cr.a.object,transcription:cr.a.object,talkTime:cr.a.object}),cr.a.shape({1:cr.a.object,2:cr.a.object}),cr.a.shape({start:cr.a.number,end:cr.a.number}),cr.a.shape({start:cr.a.number,end:cr.a.number,range:cr.a.number,routingOffset:cr.a.number,unrecordedTime:cr.a.number}),cr.a.object,cr.a.object,cr.a.array,cr.a.array,cr.a.object,cr.a.object,cr.a.object,cr.a.object,cr.a.object,cr.a.object,cr.a.object,cr.a.object,cr.a.shape({isPrimary:cr.a.bool,isAgent:cr.a.bool,userId:cr.a.bool,image:cr.a.string,relatedUuids:cr.a.array,start:cr.a.number,end:cr.a.number,title:cr.a.string,agentNumber:cr.a.number,agents:cr.a.number,classes:cr.a.string,color:cr.a.string,sentences:cr.a.array,events:cr.a.array,call:cr.a.object}),cr.a.shape({source:cr.a.string,events:cr.a.array}),cr.a.shape({notes:cr.a.string,transcription:cr.a.string}),cr.a.shape({start:cr.a.func,stop:cr.a.func,duration:cr.a.func,eventAtPlayhead:cr.a.func,eventAtMediaPosition:cr.a.func,playheadAtMediaPosition:cr.a.func}),cr.a.shape({startTime:cr.a.number,duration:cr.a.number,calls:cr.a.array,direction:cr.a.string,from:cr.a.string,to:cr.a.string,images:cr.a.array,channels:cr.a.array,participants:cr.a.object,callers:cr.a.object,metrics:cr.a.array,keyCallers:cr.a.object}),cr.a.shape({start:cr.a.number,span:cr.a.number}),cr.a.shape({position:cr.a.number,offsetPosition:cr.a.number}),cr.a.shape({user:cr.a.string,lastRead:cr.a.string})),dr=cr.a.shape({uuid:cr.a.string,comment:cr.a.string,created:cr.a.string,modified:cr.a.string,author:cr.a.string}),hr=cr.a.shape({noteId:cr.a.string,uuid:cr.a.string,timestamp:cr.a.number,eventType:cr.a.number,author:cr.a.string,text:cr.a.string,channelUuid:cr.a.string,isAcknowledged:cr.a.bool,isClosed:cr.a.bool,noteCreated:cr.a.string,noteModified:cr.a.string,polarity:cr.a.string,userActivity:cr.a.arrayOf(ur),thread:cr.a.arrayOf(dr)}),pr=cr.a.arrayOf(hr),mr=(cr.a.shape({showOnTimeline:cr.a.bool,showCompletedNotes:cr.a.bool,showEditModal:cr.a.bool,editMode:cr.a.string,noteToEdit:cr.a.string,commentToEdit:cr.a.string,notes:pr}),cr.a.arrayOf(cr.a.shape({direction:cr.a.string,start:cr.a.number,end:cr.a.number,data:cr.a.array})),cr.a.shape({quality:cr.a.number,qualityNote:cr.a.string,politeness:cr.a.number,politenessNote:cr.a.string,customerExperience:cr.a.number,customerExperienceNote:cr.a.string,agentKnowledge:cr.a.number,agentKnowledgeNote:cr.a.string}),cr.a.shape({searchPhrase:cr.a.string,matches:cr.a.array,matchCount:cr.a.number,currentMatch:cr.a.number,positions:cr.a.array,positionCount:cr.a.number,currentPosition:cr.a.object,currentPositionIndex:cr.a.number}),cr.a.shape({isPlaying:cr.a.bool,speed:cr.a.number,availableSpeeds:cr.a.array,playhead:cr.a.number}),cr.a.shape({identifier:cr.a.string,type:cr.a.string}),n(54)),fr=n(30),vr=n.n(fr),br=n(0),yr=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).state={clock:.1,start:null},a.clockHandler=null,a.mediaPlayer=null,a}return Object(y.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.speed,n=e.onMovePlayhead;this.updatePlaybackSpeed(t),this.startUpdatingPlayhead(n)}},{key:"componentDidUpdate",value:function(e,t){var a=e,i=this.props,r=i.audio,o=i.isPlaying,s=i.playhead,c=i.speed;o!==a.isPlaying&&this.updatePlayerState(s),s!==a.playhead&&this.updatePlayerState(s),c!==a.speed&&this.updatePlaybackSpeed(c),r!==a.audio&&(this.mediaPlayer=n.createMediaPlayer(r))}},{key:"componentWillUnmount",value:function(){this.stopUpdatingPlayhead()}},{key:"updatePlaybackSpeed",value:function(e){this.mediaPlayer&&(this.mediaPlayer.playbackRate=e)}},{key:"startUpdatingPlayhead",value:function(e){var t=this,n=this.props,a=n.isPlaying,i=n.clock;if(setTimeout((function(){t.startUpdatingPlayhead(e)}),i.interval),a){var r=this.props,o=r.playhead,s=r.speed,c=r.audioTransport.eventAtPlayhead(o);if(c){if(!this.mediaPlayer)return;e(c.playheadAtMediaPosition(this.mediaPlayer))}else e(o+i.speed*s)}}},{key:"stopUpdatingPlayhead",value:function(){null!==this.clockHandler&&clearTimeout(this.clockHandler),this.clockHandler=null}},{key:"updatePlayerState",value:function(e){if(this.mediaPlayer){var t=this.props,n=t.isPlaying,a=t.onMovePlayhead,i=t.onPauseClick,r=t.audioTransport;if(99.9===Math.min(e,99.9)&&(a(100),i()),n){var o=r.eventAtPlayhead(e);if(o){var s=o.playheadAtMediaPosition(this.mediaPlayer);(e>s+.5||e<s-.5)&&(this.mediaPlayer.currentTime=o.mediaPositionAtPlayhead(e,this.mediaPlayer)),this.mediaPlayer.paused&&this.mediaPlayer.play()}else this.mediaPlayer.paused||this.mediaPlayer.pause()}else this.mediaPlayer.paused||this.mediaPlayer.pause()}}},{key:"render",value:function(){var e=this.props,t=e.isPlaying,n=e.onPauseClick,a=e.onPlayClick,i=e.onSkipBackClick,r=e.onSkipForwardClick,o=e.onRestartPlayHeadClick,s=e.availableSpeeds,c=e.speed,l=e.onSetPlaybackSpeed,u=e.playhead,d=e.showTransport,h=e.status.status,p=e.progressAudio,m=e.isAudioLoaded,f=e.audioFailed,v=t?vr.a.pause:vr.a.play;(d&&100===u||f)&&(v=vr.a.playDisabled);var b=t?n:a,y=h!==at||!m||f;return Object(br.jsxs)("div",{className:vr.a.Player,children:[Object(br.jsx)("button",{tabIndex:0,type:"button",className:vr.a.playback,onClick:o,disabled:y}),Object(br.jsx)("button",{tabIndex:0,type:"button",className:vr.a.skipBack,onClick:i,disabled:y}),m||f?Object(br.jsx)("button",{tabIndex:0,type:"button",className:v,onClick:b,disabled:y}):Object(br.jsxs)("div",{className:vr.a.spinerLoading,children:[Object(br.jsx)("div",{}),Object(br.jsx)("div",{}),Object(br.jsx)("div",{}),Object(br.jsx)("div",{}),Object(br.jsx)("span",{className:vr.a.progress,children:"".concat(p,"%")})]}),Object(br.jsx)("button",{tabIndex:0,type:"button",className:vr.a.skipForward,onClick:r,disabled:y}),Object(br.jsx)("select",{tabIndex:0,type:"button",className:vr.a.changeSpeed,value:c,onChange:function(e){return l(parseFloat(e.target.value,10))},disabled:y,children:s.map((function(e){return Object(br.jsxs)("option",{value:e,children:[e,"x"]},e)}))})]})}}],[{key:"createMediaPlayer",value:function(e){var t=e.source,n=e.duration,a=new mr.Howl({src:[t],html5:!1,format:E}),i=new mr.Howl({src:[t],html5:!0,format:E}),r=a,o=null,s=0,c=0,l=1,u=null;return{pause:function(){this.paused||(clearTimeout(u),u=null,o=null,this.paused=!0,r.pause())},play:function(){var e=this;(this.paused||c!==this.currentTime||l!==this.playbackRate)&&(r.pause(),o=(new Date).getTime(),s=this.currentTime,l=this.playbackRate,r=1===this.playbackRate?a:i,this.paused=!1,r.rate(this.playbackRate),r.seek(this.currentTime),r.play());var t=(new Date).getTime();this.currentTime=s+(t-o)/1e3*this.playbackRate,c=this.currentTime,u=setTimeout((function(){e.play()}),10)},duration:n/1e6,currentTime:0,paused:!0,playbackRate:1}}}]),n}(a.Component),gr=Object(Ue.a)([je],(function(e){var t=function(){return(e.events[0]||{start:0}).start},n=function(){return(e.events[e.events.length-1]||{stop:100}).stop},a=function(t){var n=t.currentTime,a=100/t.duration*n;return e.events.filter((function(e){return a>=e.audioStart&&a<=e.audioStop}))[0]||null};return{start:t,stop:n,duration:function(){var a=e.events;return Array.isArray(a)&&0!==a.length?e.events.map((function(e){return e.stop-e.start})).reduce((function(e,t){return t+e})):n()-t()},eventAtPlayhead:function(t){return e.events.filter((function(e){return t>=e.start&&t<=e.stop}))[0]||null},eventAtMediaPosition:a,playheadAtMediaPosition:function(e){var t=a(e);return t?t.playheadAtMediaPosition(e):0}}})),jr=Object(Ue.a)([Xe],(function(e){return e.range?{speed:100/(e.range/1e6)/47.5,interval:20}:{speed:0,interval:20}}));var Or=Object(s.b)((function(e){var t=e.audio,n=e.status,a=e.playback,i=a.isPlaying,r=a.availableSpeeds,o=a.speed,s=a.playhead,c=e.status,l=c.isAudioLoaded,u=c.progressAudio,d=c.audioFailed;return{isPlaying:i,availableSpeeds:r,speed:o,playhead:s,audio:t,audioTransport:gr(e),status:n,clock:jr(e),isAudioLoaded:l,progressAudio:u,audioFailed:d}}),(function(e){return{onSkipBackClick:function(){e((function(e,t){var n=1e7/Xe(t()).range*100;e({type:yt,payload:{adjustment:n}})}))},onPlayClick:function(){e(fa())},onPauseClick:function(){e(va())},onSkipForwardClick:function(){e((function(e,t){var n=3e7/Xe(t()).range*100;e({type:gt,payload:{adjustment:n}})}))},onRestartPlayHeadClick:function(){e(Oa({position:0,offsetPosition:0})),e(ga(.01))},onSetPlaybackSpeed:function(t){e(ya(t))},onMovePlayhead:function(t){e(ga(t))}}}))((function(e){var t=e.isPlaying,n=e.playhead,a=e.onSkipBackClick,i=e.onPlayClick,r=e.onPauseClick,o=e.onSkipForwardClick,s=e.onRestartPlayHeadClick,c=e.availableSpeeds,l=e.speed,u=e.onSetPlaybackSpeed,d=e.onMovePlayhead,h=e.audio,p=e.audioTransport,m=e.showTransport,f=e.status,v=e.clock,b=e.isAudioLoaded,y=e.progressAudio,g=e.audioFailed;return Object(br.jsx)(yr,{isPlaying:t,playhead:n,onSkipBackClick:a,onPlayClick:i,onPauseClick:r,onSkipForwardClick:o,onRestartPlayHeadClick:s,availableSpeeds:c,speed:l,onSetPlaybackSpeed:u,onMovePlayhead:d,audio:h,audioTransport:p,showTransport:m,status:f,clock:v,isAudioLoaded:b,progressAudio:y,audioFailed:g})})),_r=n(24),xr=n.n(_r),Cr=n(55),kr=n.n(Cr),wr=function(e){var t=function(e){var t=e.isScrubVisible,n=e.isTimelineVisible,i=e.onSetScrubVisibility,r=e.onSetTimelineVisibility,o=Object(a.useState)(!1),s=Object(Fe.a)(o,2),c=s[0],l=s[1];return{label:c?"Hide timeline":"Show timeline",handleToggleOpen:function(){i(!t),r(!n),l(!c)}}}(e),n=t.label,i=t.handleToggleOpen;return Object(br.jsx)("div",{className:kr.a.container,children:Object(br.jsx)("div",{className:kr.a.button,role:"button",onMouseDown:i,children:n})})},Sr=Object(s.b)((function(e){return{isScrubVisible:Te(e),isTimelineVisible:Ne(e)}}),(function(e){return{onSetScrubVisibility:function(t){e(za(t))},onSetTimelineVisibility:function(t){e(ki(t))}}}))((function(e){return Object(br.jsx)(wr,Object(u.a)({},e))})),Tr=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).callList=i.a.createRef(),a.state={calls:null},a.onCallListClicked=a.onCallListClicked.bind(Object(rr.a)(a)),a.showCallList=a.showCallList.bind(Object(rr.a)(a)),a.hideCallList=a.hideCallList.bind(Object(rr.a)(a)),a}return Object(y.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutsideDropdown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutsideDropdown)}},{key:"onCallListClicked",value:function(){var e=Object(m.a)(p.a.mark((function e(){var t,n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.calls,n=this.props.jwtToken,!t){e.next=5;break}return this.showCallList(),e.abrupt("return");case 5:return e.next=7,W(n);case 7:(a=e.sent)&&(this.setState({calls:a.data.map((function(e,t){return Object(br.jsxs)("div",{className:xr.a.callListItem,children:[Object(br.jsx)("div",{className:xr.a.itemIndex,children:t+1}),Object(br.jsxs)("div",{className:xr.a.uuid,children:[e.fromNumber,Object(br.jsx)("br",{}),Object(br.jsx)("a",{href:"?uuid=".concat(e.aUuid),children:e.aUuid||"unavailable"})]}),Object(br.jsx)("div",{className:xr.a.description,children:new Date(e.timeStart).toLocaleString()}),Object(br.jsxs)("div",{className:xr.a.uuid,children:[e.toNumber||e.toNumberDialled,Object(br.jsx)("br",{}),e.bUuid&&Object(br.jsx)("a",{href:"?uuid=".concat(e.bUuid),children:e.bUuid})]})]},"".concat(e.aUuid,"-").concat(t))}))}),this.showCallList());case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"showCallList",value:function(){this.callList.current.style.display="block"}},{key:"hideCallList",value:function(){this.callList.current.style.display="none"}},{key:"render",value:function(){var e=this.state.calls,t=this.props,n=t.onFinishAndRateClicked,a=t.showRatingButton,i=t.isRated;return Object(br.jsxs)("header",{className:xr.a.Header,children:[Object(br.jsxs)("div",{className:"container ".concat(xr.a.HeaderContainer),children:[Object(br.jsx)("div",{className:xr.a.Branding,children:Object(br.jsx)("img",{src:or,className:xr.a.logo,alt:"natterbox"})}),Object(br.jsx)("div",{className:"spacer"}),Object(br.jsx)("div",{className:xr.a.Player,children:Object(br.jsx)(Or,{showTransport:!0})}),Object(br.jsx)("div",{className:xr.a.LayoutOptions,children:Object(br.jsx)(Sr,{})}),Object(br.jsxs)("div",{className:xr.a.Exit,children:[!window.parent.getSessionId&&Object(br.jsx)("button",{id:"call-list",type:"button",className:"button button--state-primary",onClick:this.onCallListClicked,children:"Call List"}),a&&Object(br.jsx)("button",{type:"button",className:"button button--state-primary ".concat(xr.a.finish),onClick:n,children:i?"Review Rating":"Finish & Rate"})]})]}),Object(br.jsxs)("div",{ref:this.callList,"data-testid":"divCallList",className:"container",style:{display:"none",color:"#FFFFFF"},children:[Object(br.jsx)("button",{type:"button",onClick:this.hideCallList,children:"Close"}),Object(br.jsxs)("div",{className:xr.a.callListContainer,children:[Object(br.jsxs)("div",{className:xr.a.callListItem,children:[Object(br.jsx)("div",{className:xr.a.itemIndex}),Object(br.jsx)("div",{className:xr.a.uuid,children:"Primary"}),Object(br.jsx)("div",{children:"Date and Time"}),Object(br.jsx)("div",{className:xr.a.uuid,children:"Secondary"})]}),e]})]})]})}}]),n}(a.Component);Tr.defaultProps={jwtToken:null,isRated:!1};var Nr,Er=Object(s.b)(null,(function(e){return{onSetScrubberVisibility:function(t){e(za(t))},onSetEventTimelineVisibility:function(t){e(ki(t))}}}))(Tr),Ir=n(27),Pr=n.n(Ir),Lr=n(13),Ar=n.n(Lr);function Rr(){return(Rr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Mr(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Dr(e,t){var n=e.title,i=e.titleId,r=Mr(e,["title","titleId"]);return a.createElement("svg",Rr({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:24,height:24,viewBox:"0 0 24 24",fill:"#49535C",ref:t,"aria-labelledby":i},r),n?a.createElement("title",{id:i},n):null,Nr||(Nr=a.createElement("path",{fill:"fill",id:"a",d:"M21 18.36v.84c0 .99-.81 1.8-1.8 1.8H4.8c-.99 0-1.8-.81-1.8-1.8v-.84c0-2.19 2.55-3.51 4.95-4.56.09-.03.15-.06.24-.12.18-.09.39-.09.57.03.96.63 2.07.99 3.24.99 1.17 0 2.28-.36 3.24-.96.18-.12.39-.12.57-.03.09.03.15.06.24.12 2.4 1.02 4.95 2.34 4.95 4.53zm-9-5.46c-2.469 0-4.47-2.216-4.47-4.95S9.531 3 12 3s4.47 2.216 4.47 4.95S14.469 12.9 12 12.9z"})))}var Ur=a.forwardRef(Dr),Br=(n.p,n(14)),Fr=n.n(Br),Kr=n.p+"static/media/timeline.ac675505.svg";function Hr(e,t){return e.Start<t.Start?-1:e.Start>t.Start?1:0}function Wr(e,t){return e.s<t.s?-1:e.s>t.s?1:0}function Vr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["#000","#fff"],n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(!n)return t[1];var a=parseInt(n[1],16),i=parseInt(n[2],16),r=parseInt(n[3],16),o=(299*a+587*i+114*r)/255e3;return o>=.5?t[0]:t[1]}var Gr=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).conversationRef=i.a.createRef(),a.scrollTimeoutHandler=null,a.handleMouseDown=a.handleMouseDown.bind(Object(rr.a)(a)),a.handleScrollWheel=a.handleScrollWheel.bind(Object(rr.a)(a)),a}return Object(y.a)(n,[{key:"componentDidUpdate",value:function(){var e=this.props.playback.isPlaying;this.updateViewport(e)}},{key:"getConversationViewportScalingFactor",value:function(){var e=this.props,t=e.transcription,n=e.timeline;if("undefined"===typeof t||null==t)return 0;var a=t[1].Sentences,i=t[2].Sentences,r=Number.MAX_SAFE_INTEGER;r=a.reduce((function(e,t){return Math.min(e,t.End-t.Start)}),r),r=i.reduce((function(e,t){return Math.min(e,t.End-t.Start)}),r);var o=n.range/4e6;return r<Number.MAX_SAFE_INTEGER?Math.max(o,r/26):Math.max(o,8)}},{key:"styleSentence",value:function(e,t,a){var i=this.props,r=i.confidence,o=i.search,s=o.positions,c=o.currentPosition,l=s.filter((function(t){return t.channel===e.channel})).map((function(e){return Object(u.a)(Object(u.a)({},e),{},{end:e.end?e.end:e.start})})).filter((function(t){return t.start<=e.End&&t.end>=e.Start})),d=t.filter((function(t){return t.s>=e.Start&&t.e<=e.End}));if(d.sort(Wr),0===r&&0===l.length)return e.Sentence;var h=d.filter((function(e){return l.filter((function(t){return n.isWordIntersectingPosition(e,t)})).length>0})),p=a?Vr(a,["#5c6770","#ffffff"]):"#5c6770";return d.map((function(e,t,i){var o=h.indexOf(e)>-1,s=t<i.length-1?i[t+1]:null,l=!!s&&h.indexOf(s)>-1,u=Ar()({[Fr.a.confidence]:e.c<r/100});if(o){var d=n.isWordIntersectingPosition(e,c),m=d?{color:p,background:"linear-gradient(to right, rgba(247,247,247,0) 50%, ".concat(a," 50%)"),backgroundSize:"200%"}:{backgroundColor:a,color:p,borderRadius:"2px"},f=Ar()({[Fr.a.matchFill]:d,[Fr.a.matchFillAnimate]:d});return Object(br.jsxs)("span",{className:u,children:[Object(br.jsx)("span",{className:f,style:m,children:"".concat(e.w).concat(l?" ":"")}),!l&&" "]},"".concat(t,"-").concat(e))}return Object(br.jsx)("span",{className:u,children:"".concat(e.w," ")},"".concat(t,"-").concat(e))}))}},{key:"updateViewport",value:function(e){if(!this.isScrolling()){var t=document.getElementsByClassName(Fr.a.playHead);if(0!==t.length){var n=t[0],a=this.conversationRef.current,i=a.getBoundingClientRect(),r=a.scrollTop,o=n.getBoundingClientRect().top+Math.abs(r),s=i.top+i.height/2;if(e){var c=o-s-this.conversationRef.current.scrollTop;this.conversationRef.current.scrollTop+=c/10}else 0===this.props.transcriptionPlayScrub.position&&(this.conversationRef.current.scrollTop=o-s)}}}},{key:"mergedConversation",value:function(){var e=this.props.transcription;if("undefined"===typeof e)return[];var t=[];e[1].Sentences.forEach((function(e){var n={person:1};Object.assign(n,e),t.push(n)}));var n=[];e[2].Sentences.forEach((function(e){var t={person:2};Object.assign(t,e),n.push(t)}));var a=t.concat(n);return a.sort(Hr),a}},{key:"getConversation",value:function(e){var t=this,a=this.props,i=a.transcription,r=a.sentences,o=a.playback.playhead,s=a.timeline,c=s.routingOffset,l=[],d=[],h=null,p=1;if(null!==r)return Object.keys(e).map((function(n){var a=e[n],o=[];return null!==i[1]&&(o=a.isPrimary?i[1].Words:i[2].Words),r[n].map((function(e){return Object(u.a)(Object(u.a)({},e),{},{startWithOffset:e.startWithOffset+c/1e3,endWithOffset:e.endWithOffset+c/1e3})})).map((function(e){return Object(u.a)(Object(u.a)({},e),{},{isPrimary:a.isPrimary,color:a.color,styledSentence:t.styleSentence(e,o,a.color)})}))})).flat().sort((function(e,t){return e.startWithOffset-t.startWithOffset})).forEach((function(t){var n={borderBottom:"4px solid ".concat(t.color)},a={fill:"".concat(t.color),width:"18px",height:"18px"},i={color:"".concat(t.color)},r=null===e[t.number].initials?Object(br.jsx)(Ur,{style:a}):Object(br.jsxs)("span",{style:i,children:[" ",e[t.number].initials," "]}),o=null===h||t.startWithOffset>h.end;p=o?1:p+1;var s={className:t.isPrimary?Fr.a.primary:Fr.a.secondary,initialHtml:r,tabStyle:n};o?(d=[Object(u.a)(Object(u.a)({},t),s)],h={start:t.startWithOffset,end:t.endWithOffset},l.push({range:h,sentences:d})):(h.end=Math.max(t.endWithOffset,h.end),d.push(Object(u.a)(Object(u.a)({},t),s)))})),l.map((function(e,t,a){var i=e.range,r=e.sentences,c=t>0?a[t-1]:null,l=s.sentenceTimestampAtPlayhead(o),u=l>=i.start&&l<i.end,d={start:null!==c?c.range.end:0,end:i.start-1},h=l>=d.start&&l<=d.end,p=h?Fr.a.playheadLocation:"",m=u?Fr.a.playheadLocation:"";return[Object(br.jsx)("div",{className:"".concat(Fr.a.conversationRow," ").concat(p," ").concat(Fr.a.spacer),"data-timestamp-start":d.start||0,"data-timestamp-end":d.end||0,children:h&&n.playHeadMarker(l,d,s)},"spacer-".concat(i.start||0,"-").concat(i.end||0)),Object(br.jsxs)("div",{className:"\n                            ".concat(Fr.a.conversationRow," \n                            ").concat(m," \n                            ").concat(r&&r.length>1?Fr.a.conversationRowLinked:"","\n                            ").concat(r&&1===r.length&&2===r[0].channel?Fr.a.conversationRowRight:"","\n                            ").concat(r&&r.length>1&&r.every((function(e){return 2===e.channel}))?Fr.a.conversationRowRight:"","\n                        "),"data-timestamp-start":i.start||0,"data-timestamp-end":i.end||0,children:[u&&n.playHeadMarker(l,i,s),1===r.length?r.map((function(e){var t=Object(br.jsx)("div",{className:Fr.a.initials,style:e.tabStyle,children:e.initialHtml},"icon"),n=Object(br.jsx)("div",{className:Fr.a.sentenceBody,children:e.styledSentence},"sentence"),a=Object(br.jsx)("div",{className:Fr.a.blanking},"blanking"),i=e.isPrimary?[t,a,n]:[n,a,t];return Object(br.jsx)("div",{className:"".concat(Fr.a.sentence," ").concat(e.className),style:e.style,children:i},"".concat(e.Start,"-").concat(e.End,"-").concat(e.Sentence))})):r.reduce((function(e,t){return e[+!t.isPrimary]?(e[+!t.isPrimary].End=t.End,e[+!t.isPrimary].endWithOffset=t.endWithOffset,e[+!t.isPrimary].timelineEnd=t.timelineEnd,e[+!t.isPrimary].timeline.end=t.timeline.end,e[+!t.isPrimary].styledSentence.push(t.styledSentence)):(e[+!t.isPrimary]=t,e[+!t.isPrimary].styledSentence=[e[+!t.isPrimary].styledSentence]),e}),[]).map((function(e){var t=Object(br.jsx)("div",{className:Fr.a.initials,style:e.tabStyle,children:e.initialHtml},"icon"),n=Object(br.jsx)("div",{className:Fr.a.sentenceBody,children:e.styledSentence.map((function(e){return Object(br.jsx)("div",{children:e})}))},"sentence"),a=Object(br.jsx)("div",{className:Fr.a.blanking},"blanking"),i=e.isPrimary?[t,a,n]:[n,a,t];return Object(br.jsx)("div",{className:"".concat(Fr.a.sentence," ").concat(e.className," ").concat(2===e.channel?Fr.a.secondaryLinked:""),children:i},"".concat(e.Start,"-").concat(e.End,"-").concat(e.Sentence))}))]},"row-".concat(i.start||0,"-").concat(i.end||0))]}))}},{key:"handleMouseDown",value:function(e){var t=e.target;if(void 0!==t.dataset.timestampStart){var n=parseInt(t.dataset.timestampStart,10),a=parseInt(t.dataset.timestampEnd,10),i=e.target.getBoundingClientRect(),r=e.clientX-i.left,o=r>18&&r<42,s=e.clientY-i.top,c=parseInt((a-n)/i.height*s+n,10),l=this.props,u=l.timeline,d=l.onSetPlayHeadPosition,h=l.setPaused,p=l.onClickPlay,m=l.playback.isPlaying,f=l.isAudioLoaded,v=u.playheadAtTimestamp(1e3*c);o&&!m&&f?(d(v,!0),p()):(o&&m||d(v,!0),h())}}},{key:"isScrolling",value:function(){return null!==this.scrollTimeoutHandler}},{key:"handleScrollWheel",value:function(){var e=this;this.isScrolling()&&clearTimeout(this.scrollTimeoutHandler),this.scrollTimeoutHandler=setTimeout((function(){e.scrollTimeoutHandler=null}),1e3)}},{key:"render",value:function(){var e=this.props,t=e.status,a=e.children,i=e.participants,r=e.emptyText,o=this.getConversation(i);if(t===it){return Object(br.jsx)("div",{ref:this.conversationRef,style:{backgroundImage:"url(".concat(Kr,")"),backgroundRepeat:"repeat-y",backgroundPosition:"14px top",position:"absolute",left:0,right:0,top:0,bottom:0},children:Object(br.jsxs)("div",{style:{height:"100%",marginTop:"0px"},children:[n.noAgentDataOverlay(),n.noAgentDataText(r)]})})}return Object(br.jsxs)("div",{ref:this.conversationRef,className:Fr.a.TranscriptionConversation,style:{backgroundImage:"url(".concat(Kr,")"),backgroundRepeat:"repeat-y",backgroundPosition:"14px top"},onWheel:this.handleScrollWheel,children:[Object(br.jsxs)("div",{className:Fr.a.transcriptionEventContainer,children:[a,Object(br.jsxs)("div",{className:"".concat(Fr.a.container," ").concat(Fr.a.start),children:[Object(br.jsx)("span",{className:Fr.a.playHeadLine}),Object(br.jsx)("span",{className:Fr.a.playHeadStartText,children:"Call Begins"}),Object(br.jsx)("span",{className:Fr.a.playHeadLine})]})]}),Object(br.jsx)("div",{className:Fr.a.conversationContainer,onClick:this.handleMouseDown,children:o}),n.loadingScreen(t===nt)]})}}],[{key:"loadingScreen",value:function(e){var t="".concat(Fr.a.onTop," loading-overlay ").concat(e?"":"fade-out");return Object(br.jsxs)("svg",{className:t,width:"100%",height:"100%",viewBox:"0 0 300 300",preserveAspectRatio:"none",children:[Object(br.jsx)("defs",{children:Object(br.jsxs)("linearGradient",{id:"bottom-top-gradient",x1:"0%",y1:"100%",x2:"0%",y2:"0%",spreadMethod:"pad",children:[Object(br.jsx)("stop",{stopColor:"#fff",stopOpacity:"1",offset:"0%"}),Object(br.jsx)("stop",{stopColor:"#fff",stopOpacity:"0",offset:"100%"})]})}),Object(br.jsxs)("g",{opacity:"0.033",children:[Object(br.jsx)("rect",{x:"20",y:"10",width:"30",height:"20",radius:"4"}),Object(br.jsx)("rect",{x:"35",y:"10",width:"100",height:"40",radius:"4"}),Object(br.jsx)("rect",{x:"170",y:"60",width:"30",height:"20",radius:"4"}),Object(br.jsx)("rect",{x:"185",y:"60",width:"100",height:"30",radius:"4"}),Object(br.jsx)("rect",{x:"20",y:"100",width:"30",height:"20",radius:"4"}),Object(br.jsx)("rect",{x:"35",y:"100",width:"100",height:"80",radius:"4"}),Object(br.jsx)("rect",{x:"170",y:"200",width:"30",height:"20",radius:"4"}),Object(br.jsx)("rect",{x:"185",y:"200",width:"100",height:"180",radius:"4"})]}),Object(br.jsx)("rect",{x:"0",y:"150",width:"300",height:"150",fill:"url(#bottom-top-gradient)"}),Object(br.jsx)("line",{x1:"0",x2:"0",y1:"0",y2:"300",strokeWidth:"1",stroke:"#000",opacity:"0.5"}),Object(br.jsx)("line",{x1:"15",x2:"15",y1:"0",y2:"300",strokeWidth:"1",stroke:"#000",opacity:"0.125",strokeDasharray:"4 4"})]})}},{key:"noAgentDataText",value:function(e){return Object(br.jsx)("div",{className:"noAgentDataText",children:e})}},{key:"noAgentDataOverlay",value:function(){return Object(br.jsxs)("svg",{className:"loading-overlay",width:"100%",height:"100%",viewBox:"0 0 300 300",preserveAspectRatio:"none",children:[Object(br.jsx)("defs",{children:Object(br.jsxs)("linearGradient",{id:"bottom-top-gradient",x1:"0%",y1:"100%",x2:"0%",y2:"0%",spreadMethod:"pad",children:[Object(br.jsx)("stop",{stopColor:"#fff",stopOpacity:"1",offset:"0%"}),Object(br.jsx)("stop",{stopColor:"#fff",stopOpacity:"0",offset:"100%"})]})}),Object(br.jsxs)("g",{opacity:"0.033",children:[Object(br.jsx)("rect",{x:"20",y:"10",width:"30",height:"20",radius:"4"}),Object(br.jsx)("rect",{x:"35",y:"10",width:"100",height:"40",radius:"4"}),Object(br.jsx)("rect",{x:"170",y:"60",width:"30",height:"20",radius:"4"}),Object(br.jsx)("rect",{x:"185",y:"60",width:"100",height:"30",radius:"4"}),Object(br.jsx)("rect",{x:"20",y:"100",width:"30",height:"20",radius:"4"}),Object(br.jsx)("rect",{x:"35",y:"100",width:"100",height:"80",radius:"4"}),Object(br.jsx)("rect",{x:"170",y:"200",width:"30",height:"20",radius:"4"}),Object(br.jsx)("rect",{x:"185",y:"200",width:"100",height:"180",radius:"4"})]}),Object(br.jsx)("rect",{x:"0",y:"150",width:"300",height:"150",fill:"url(#bottom-top-gradient)"}),Object(br.jsx)("line",{x1:"0",x2:"0",y1:"0",y2:"300",strokeWidth:"1",stroke:"#000",opacity:"0.5"}),Object(br.jsx)("line",{x1:"15",x2:"15",y1:"0",y2:"300",strokeWidth:"1",stroke:"#000",opacity:"0.125",strokeDasharray:"4 4"})]})}},{key:"isWordIntersectingPosition",value:function(e,t){return e.e>=t.start&&e.s<=t.end}},{key:"playHeadMarker",value:function(e,t,n){var a=100/n.range*(1e3*e),i=n.formattedTimeAtPlayhead(a),r=Math.max(0,e-t.start),o=t.end-t.start,s={top:"".concat(100/o*r,"%")};return Object(br.jsxs)("div",{className:"".concat(Fr.a.container," ").concat(Fr.a.playHead),style:s,children:[Object(br.jsx)("div",{style:{backgroundColor:"#F7F7F7"},children:i}),Object(br.jsx)("div",{className:Fr.a.playHeadLine})]})}}]),n}(a.Component);Gr.defaultProps={viewport:{start:0,span:100},onSetTranscriptionViewport:function(){},children:null,sentences:null};var Yr=Gr,Xr=Object(Ue.a)([Ie,ue],(function(e,t){return e[t]})),Jr=Object(Ue.a)([Le,Xr],(function(e,t){var n=e.description;if("string"===typeof n&&n.length>0)return n;var a=t?"this ".concat(t.type.toLowerCase(),"'s perspective of the"):"this";return"There is no data for ".concat(a," call.")}));function qr(e){var t=e.status,n=e.viewport,a=e.onSetTranscriptionViewport,i=e.timeline,r=e.playback,o=e.callSummary,s=e.confidence,c=e.children,l=e.search,u=e.setPaused,d=e.transcriptionPlayScrub,h=e.onSetPlayHeadPosition,p=e.onClickPlay,m=e.participants,f=e.transcription,v=e.sentences,b=e.emptyText,y=e.isAudioLoaded;return Object(br.jsx)(Yr,{status:t,onClickPlay:p,viewport:n,onSetTranscriptionViewport:a,timeline:i,playback:r,callSummary:o,confidence:s,search:l,setPaused:u,transcriptionPlayScrub:d,onSetPlayHeadPosition:h,participants:m,transcription:f,sentences:v,emptyText:b,isAudioLoaded:y,children:c})}qr.defaultProps={children:null,sentences:null,emptyText:null};var zr=Object(s.b)((function(e){var t=e.callSummary,n=e.search,a=e.playback,i=e.transcription,r=i.transcriptionPlayScrub,o=i.viewport,s=i.confidence,c=e.status.isAudioLoaded;return{viewport:o,timeline:Xe(e),playback:a,callSummary:t,confidence:s,search:n,transcriptionPlayScrub:r,isAudioLoaded:c,participants:de(e),status:ye(e),transcription:xe(e),sentences:ke(e),emptyText:Jr(e)}}),(function(e){return{onSetTranscriptionViewport:function(t){e(_a(t))},setPaused:function(){e(va())},onSetPlayHeadPosition:function(t,n){e(ga(t,n))},onClickPlay:function(){e(fa())}}}))(qr),Qr=n(28),Zr=n.n(Qr),$r=n.p+"static/media/icon-plus.c0aef066.svg",eo=n(26),to=n.n(eo),no=function(e){var t=e.onSelectOption,n=Object(a.useState)({top:0,left:0}),i=Object(Fe.a)(n,2),r=i[0],o=i[1],s=Object(a.useRef)(),c=function e(){if(s.current&&document.activeElement===s.current){var t=s.current.getBoundingClientRect(),n=t.top,a=t.left;r.left===a&&r.top===n?window.requestAnimationFrame(e):document.activeElement.blur()}};return{ref:s,handleOptionSelected:function(e){return function(){document.activeElement.blur(),t(e)}},handleMouseDown:function(){if(s.current){var e=s.current.getBoundingClientRect(),t=e.top,n=e.left;o({left:n,top:t})}},handleOnFocus:function(){c()},position:{top:"".concat(r.top,"px"),left:"".concat(r.left,"px")}}},ao=n(38),io=n.n(ao),ro=function(e){var t=e.className,n=e.options,a=e.isLocked,i=no(e),r=i.handleOptionSelected,o=i.handleMouseDown,s=i.position,c=i.handleOnFocus,l=i.ref;return Object(br.jsx)("div",{className:"".concat(t," ").concat(io.a.button," ").concat(a&&io.a.locked),role:"button",tabIndex:1,ref:l,onMouseDown:o,onFocus:c,children:Object(br.jsx)("div",{className:io.a.popover,style:s,"data-overflow-menu-popover":!0,children:Object(br.jsx)("div",{className:io.a.menu,children:n.map((function(e){return Object(br.jsx)("div",{role:"button",className:io.a.item,onClick:r(e),children:e},e)}))})})})},oo="general",so="Mark as acknowledged",co="Close this note",lo={edit:"Edit note",reply:"Reply to note",delete:"Delete note"},uo={edit:"Edit reply",reply:"Add reply",delete:"Delete reply"},ho="NOTE_AND_COMMENT_THREAD",po="COMMENT_ONLY",mo=function(e){var t=e.commentId,n=e.viewingUserId,a=e.callerWithUuid,i=e.note,r=i.author,o=i.uuid,s=i.thread,c=t?le(s,t):null,l=Number(r)===Number(n),d=o===oo,h=function(e,t){return Object(u.a)(Object(u.a)({},e),e.userId===t?{name:"You"}:{})}(d?{title:"General",userId:oo}:a(o)||{title:"",userId:""},n),p=h.userId,m=h.name?h.name:h.title;return{isNoteAuthor:l,isCommentAuthor:!!c&&Number(n)===Number(c.author),isRelatingToUser:!l&&(d||Number(p)===Number(n)),relatingToTitle:m}},fo=function(e){var t=e.displayMode,n=e.note,i=e.event,r=e.interactive,o=n.authorName,s=n.thread,c=n.isAcknowledged,l=n.isClosed,d=Object(a.useState)(!0),h=Object(Fe.a)(d,2),p=h[0],m=h[1],f=mo(e),v=f.isNoteAuthor,b=f.isCommentAuthor,y=f.isRelatingToUser,g=f.relatingToTitle,j=function(e){var t=e.displayMode,n=e.unread,a=e.commentId,i=e.viewingUserId,r=e.note,o=r.noteId,s=r.thread,c=r.noteCreated,l=r.noteModified,u=r.author,d=a?le(s,a):null,h=t===po?s.indexOf(d)===s.length-1:0===s.length,p=t===po?n.includes(d.uuid):n.includes(o);return{comment:d,isEmptyThread:!s||Array.isArray(s)&&!s.length,isUnread:u!==i&&p,isEdited:t===po?d.created!==d.modified:c!==l,isLastItem:h}}(e),O=j.isEmptyThread,_=j.comment,x=j.isUnread,C=j.isEdited,k=j.isLastItem,w=function(e){var t=e.id,n=e.onAcknowledge,a=e.onEditNote,i=e.onEditComment,r=e.onDeleteNote,o=e.onDeleteComment,s=e.onCloseNote,c=e.onNoteClick,l=e.onUpdateUserActivity,u=e.commentId,d=e.note.isAcknowledged,h=function(e){switch(e){case so:d||n(t);break;case lo.edit:a(t);break;case lo.reply:case uo.reply:i(t);break;case lo.delete:r(t);break;case uo.edit:i(t,u);break;case uo.delete:o(t,u);break;case co:s(t)}};return{handleNoteClicked:function(){l(t),c()},handleDefaultAction:function(){return h(so)},handleOptionSelected:h}}(e),S=w.handleNoteClicked,T=w.handleDefaultAction,N=w.handleOptionSelected,E=function(e){var t=e.displayMode,n=e.isClosed,a=e.isNoteAuthor,i=e.isCommentAuthor,r=[];return!n&&a&&t!==po&&r.push(co),n||(r.push(t===po?uo.reply:lo.reply),a&&t!==po&&r.push(lo.edit,lo.delete),i&&t===po&&r.push(uo.edit,uo.delete)),r}({displayMode:t,isAcknowledged:c,isClosed:l,isNoteAuthor:v,isCommentAuthor:b,isRelatingToUser:y,isLastItem:k}),I=t===ho&&!O;return Object(u.a)({handleNoteClicked:S,handleOptionSelected:N,handleDefaultAction:y?T:null,isEmptyThread:O,isUnread:x,isEdited:C,showThread:p&&t===ho,thread:t===ho?s:[],toggleShowThread:function(){return m(!p)},author:t===po?_.authorName:o,relatingTo:"".concat(g," (").concat(i.text,")"),isAcknowledged:c,isClosed:l,showDefaultAction:!l&&r&&(k||!p)&&(c||y),showRelatingTo:t===ho,showThreadSection:I,overflowOptions:E,showOverflowMenu:r&&E.length>0},t===po?{text:_.comment,noteCreated:Ge(_.created)}:{text:n.text,noteCreated:Ge(n.noteCreated)})},vo=function e(t){var n=t.id,a=t.displayMode,i=t.color,r=t.time,o=t.interactive,s=fo(t),c=s.overflowOptions,l=s.handleNoteClicked,d=s.handleOptionSelected,h=s.handleDefaultAction,p=s.noteCreated,m=s.author,f=s.relatingTo,v=s.isAcknowledged,b=s.isClosed,y=s.text,g=s.showThread,j=s.thread,O=s.toggleShowThread,_=s.showDefaultAction,x=s.showRelatingTo,C=s.showThreadSection,k=s.showOverflowMenu,w=s.isEdited,S=s.isUnread,T={borderLeft:"4px solid",borderLeftColor:i};return Object(br.jsxs)("div",{children:[Object(br.jsxs)("div",{role:"button",tabIndex:0,className:"".concat(to.a.note," ").concat(a===po?to.a.comment:null),style:T,onMouseUp:o?l:void 0,children:[Object(br.jsxs)("div",{className:to.a.heading,children:[Object(br.jsx)("div",{className:to.a.author,children:m}),Object(br.jsx)("div",{className:to.a.time,children:p.time}),Object(br.jsx)("div",{className:to.a.date,children:p.date})]}),x&&Object(br.jsxs)("div",{className:to.a.subject,children:[!!r&&Object(br.jsx)("div",{className:to.a.time,children:r}),Object(br.jsx)("div",{children:f})]}),Object(br.jsxs)("div",{className:to.a.noteText,children:[Ve(y||""),w&&Object(br.jsx)("div",{className:to.a.edited,children:"(EDITED)"})]}),k&&Object(br.jsx)(ro,{className:to.a.overflowMenu,options:c,isLocked:b,onSelectOption:d}),_&&Object(br.jsx)("div",{role:"button",tabIndex:2,className:"".concat(to.a.actionButton," ").concat(v&&to.a.acknowledged),onClick:h}),S&&Object(br.jsx)("div",{className:to.a.unread}),b&&a!==po&&Object(br.jsx)("div",{className:to.a.closed,children:"NOTE CLOSED"})]},n),C&&Object(br.jsxs)("div",{children:[g&&j.map((function(n){var a=n.uuid;return Object(br.jsx)(e,Object(u.a)(Object(u.a)({},t),{},{displayMode:po,commentId:a}),a)})),o&&Object(br.jsx)("div",{className:to.a.toggleThreadButton,onClick:O,children:g?"HIDE REPLIES":"SHOW REPLIES"})]})]})};vo.defaultProps={displayMode:ho,commentId:null,interactive:!0,viewingUserId:"",unread:[],time:"",onNoteClick:function(){},onEditNote:function(){},onEditComment:function(){}};var bo=vo,yo=function(e){return Object(br.jsx)(bo,Object(u.a)({},e))};yo.defaultProps={displayMode:ho,commentId:null,interactive:!0,viewingUserId:"",unread:[],time:"",onNoteClick:function(){},onEditNote:function(){},onEditComment:function(){}};var go=Object(s.b)((function(e){return{unread:Yt(e),viewingUserId:Wt(e),callerWithUuid:Kn(e)}}),(function(e){return{onAcknowledge:function(t){e(ti(t))},onDeleteNote:function(t){e(mn(t))},onDeleteComment:function(t,n){e(ai(t,n))},onCloseNote:function(t){e(ni(t))},onUpdateUserActivity:function(t){e(function(e){return function(t){return t(ei(e))}}(t))}}}))(yo),jo=n(45),Oo=n.n(jo),_o=function(e){var t=function(e){var t=e.notes.filter,n=e.onSelectFilter,a=t!==qt.all;return{handleOptionSelected:function(e){return function(){document.activeElement.blur(),n(qt[e])}},handleClickButton:function(e){document.activeElement===e.target.parentElement&&(document.activeElement.blur(),e.preventDefault())},label:a?"Showing ".concat(t.toLowerCase()):"Showing all notes",isFiltering:a}}(e),n=t.label,a=t.handleOptionSelected,i=t.handleClickButton,r=t.isFiltering;return Object(br.jsxs)("div",{className:Oo.a.filter,role:"button",tabIndex:1,onMouseDown:i,children:[Object(br.jsx)("div",{className:r?Oo.a.highlighted:"",children:n}),Object(br.jsx)("div",{className:Oo.a.popover,children:Object.keys(qt).map((function(e){return Object(br.jsx)("div",{className:Oo.a.item,onClick:a(e),children:qt[e]},e)}))})]})},xo=Object(s.b)((function(e){return{notes:Gt(e)}}),(function(e){return{onSelectFilter:function(t){return e(ui(t))}}}))((function(e){return Object(br.jsx)(_o,Object(u.a)({},e))})),Co=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).state={cachedNoteIds:a.props.filteredNotes.map((function(e){return e.noteId}))},a}return Object(y.a)(n,[{key:"shouldComponentUpdate",value:function(e,t,n){return e.notes.filter!==this.props.notes.filter&&this.setState({cachedNoteIds:e.filteredNotes.map((function(e){return e.noteId}))}),!0}},{key:"getNotes",value:function(){var e=this,t=this.props,n=t.participants,a=t.notes,i=[];Object.keys(n).forEach((function(e){var t=n[e];i.push({uuid:t.relatedUuids[0],title:t.title,color:t.color})}));var r,o=this.state.cachedNoteIds;r=0===o.length?this.props.filteredNotes:a.notes.filter((function(e){return o.includes(e.noteId)}));for(var s=[],c=function(t){var n=r[t],o=null===n.timestamp||Number.isNaN(n.timestamp)?null:Ke(Math.floor(n.timestamp/1e6)),c=a.eventTypes.find((function(e){return e.id===n.eventType})),l=i.find((function(e){return e.uuid===n.uuid}));s.push(Object(br.jsx)(go,{id:n.noteId,color:l?l.color:"#adb3b7",onNoteClick:e.handleNoteClick.bind(e,n.noteId),onEditNote:e.handleEditNote.bind(e),onEditComment:e.handleEditComment.bind(e),time:o,note:n,event:c},n.noteId))},l=0;l<r.length;l++)c(l);return s}},{key:"setPlayHeadPosition",value:function(e){var t=this.props,n=t.onNoteClicked,a=t.scrub,i=t.viewport,r=i.span,o=a.end-a.start,s=e-(a.start+o/2),c=Math.min(Math.max(0,a.start+s),100-o),l=c+o,u=e-(i.start+r/2);n(e,{start:c,end:l},{start:Math.min(Math.max(0,i.start+u),100-r),span:r})}},{key:"handleEditNote",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.props.onOpenNoteEditor,n=null!==e?ri.existingNote:ri.newNote;t(n,e)}},{key:"handleEditComment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.props.onOpenNoteEditor,a=null!==t?ri.existingComment:ri.newComment;n(a,e,t)}},{key:"handleNoteClick",value:function(e){var t=this.props,n=t.getNoteWithId,a=t.timeline,i=n(e);if(i){var r=i.timestamp/a.range*100;(null===i.timestamp||Number.isNaN(i.timestamp))&&(r=0),this.setPlayHeadPosition(r)}}},{key:"handleNewNote",value:function(){(0,this.props.onOpenNoteEditor)(ri.newNote)}},{key:"showNotes",value:function(){var e=this.getNotes();return Object(br.jsx)("div",{children:e})}},{key:"addNewNoteDiv",value:function(){var e=this.props.notes;return Object(br.jsxs)("div",{className:Zr.a.NewNoteSection,children:[Object(br.jsxs)("div",{children:[Object(br.jsxs)("div",{role:"button",tabIndex:0,className:Zr.a.newNoteContainer,onMouseDown:this.handleNewNote.bind(this),children:[Object(br.jsx)("img",{className:Zr.a.newNoteIcon,src:$r,alt:"plus icon"}),Object(br.jsx)("div",{className:Zr.a.newNoteText,children:"Add New Note"})]}),Object(br.jsx)("div",{className:Zr.a.checkboxContainer,children:Object(br.jsx)(xo,{})})]}),Object(br.jsxs)("div",{className:Zr.a.checkboxContainer,children:[Object(br.jsx)("input",{className:Zr.a.checkbox,type:"checkbox",id:"showNotesCheckbox",onChange:this.handleShowNotesChecked.bind(this),checked:e.showOnTimeline}),Object(br.jsx)("label",{className:Zr.a.checkboxLabel,htmlFor:"showNotesCheckbox",children:"Show notes on timeline"})]})]})}},{key:"handleShowNotesChecked",value:function(e){var t=this.props,n=t.onSetNoteVisibility;(0,t.onToggleLayer)(Ra),n(e.target.checked)}},{key:"handleShowCompletedNotes",value:function(e){(0,this.props.onSetCompletedNotesVisibility)(e.target.checked)}},{key:"render",value:function(){var e=this.props,t=e.status,a=e.emptyText;return t===it?Object(br.jsxs)("div",{className:Zr.a.TranscriptionNotes,children:[n.noAgentDataOverlay(),n.noAgentDataText(a)]}):Object(br.jsxs)("div",{className:Zr.a.TranscriptionNotes,children:[this.addNewNoteDiv(),this.showNotes(),Object(br.jsx)("div",{className:Zr.a.bottomMenuSpacer}),n.loadingScreen(t===nt)]})}}],[{key:"loadingScreen",value:function(e){var t="loading-overlay ".concat(e?"":"fade-out");return Object(br.jsxs)("svg",{className:t,width:"100%",height:"100%",viewBox:"0 0 100 300",preserveAspectRatio:"none",children:[Object(br.jsx)("defs",{children:Object(br.jsxs)("g",{id:"note-shape",opacity:"0.4",children:[Object(br.jsx)("rect",{x:"5",y:"5",width:"90",height:"35",opacity:"0.5"}),Object(br.jsx)("rect",{x:"5",y:"5",width:"5",height:"35"})]})}),Object(br.jsx)("use",{href:"#note-shape",x:"0",y:"0",opacity:"0.4"}),Object(br.jsx)("use",{href:"#note-shape",x:"0",y:"40",opacity:"0.2"}),Object(br.jsx)("use",{href:"#note-shape",x:"0",y:"80",opacity:"0.1"})]})}},{key:"noAgentDataOverlay",value:function(){return Object(br.jsxs)("svg",{className:"loading-overlay",width:"100%",height:"100%",viewBox:"0 0 100 300",preserveAspectRatio:"none",children:[Object(br.jsx)("defs",{children:Object(br.jsxs)("g",{id:"note-shape",opacity:"0.4",children:[Object(br.jsx)("rect",{x:"5",y:"5",width:"90",height:"35",opacity:"0.5"}),Object(br.jsx)("rect",{x:"5",y:"5",width:"5",height:"35"})]})}),Object(br.jsx)("use",{href:"#note-shape",x:"0",y:"0",opacity:"0.4"}),Object(br.jsx)("use",{href:"#note-shape",x:"0",y:"40",opacity:"0.2"}),Object(br.jsx)("use",{href:"#note-shape",x:"0",y:"80",opacity:"0.1"})]})}},{key:"noAgentDataText",value:function(e){return Object(br.jsx)("div",{className:"noAgentDataText notes",children:e})}}]),n}(a.Component),ko=function(e){return Object(br.jsx)(Co,Object(u.a)({},e))};ko.defaultProps={emptyText:null};var wo,So=Object(s.b)((function(e){var t=e.scrub,n=e.callSummary,a=e.notes,i=e.transcription.viewport;return{notes:a,filteredNotes:zt(e),timeline:Xe(e),scrub:t,viewport:i,callSummary:n,participants:de(e),status:ye(e),emptyText:Jr(e),getNoteWithId:Xt(e)}}),(function(e){return{onSetNoteVisibility:function(t){e(function(e){return{type:Et,payload:{visible:e}}}(t))},onSetCompletedNotesVisibility:function(t){e({type:xa,payload:{visible:t}})},onOpenNoteEditor:function(t,n,a){e(va()),e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ri.newNote;return{type:ii,payload:{editMode:e,noteToEdit:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,commentToEdit:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null}}}(t,n,a))},onNoteClicked:function(t,n,a){e(ga(t,!0)),e(ba(n)),e(_a(a)),e(Oa({position:0,offsetPosition:0}))},onToggleLayer:function(t){e(ja(t))}}}))(ko),To=n.p+"static/media/icon-playback.53bc9210.svg",No=n.p+"static/media/icon-pause-white.1c5f5b33.svg";function Eo(){return(Eo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Io(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Po(e,t){var n=e.title,i=e.titleId,r=Io(e,["title","titleId"]);return a.createElement("svg",Eo({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:24,height:24,viewBox:"0 0 24 24",fill:"#000",ref:t,"aria-labelledby":i},r),n?a.createElement("title",{id:i},n):null,wo||(wo=a.createElement("path",{fill:"fill",id:"a",d:"M7.29 11.368L3.706 14.95a1 1 0 1 1-1.414-1.414l4.243-4.243A.997.997 0 0 1 7.289 9a.997.997 0 0 1 .754.292l3.591 3.591 3.592-3.591c.202-.203.47-.3.735-.293a.997.997 0 0 1 .736.293l4.243 4.243a1 1 0 0 1-1.414 1.414l-3.565-3.564-3.564 3.564a.998.998 0 0 1-.763.291.998.998 0 0 1-.763-.291L7.29 11.368z"})))}var Lo=a.forwardRef(Po),Ao=(n.p,function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).sliderRef=i.a.createRef(),a}return Object(y.a)(n,[{key:"componentDidMount",value:function(){this.sliderRef.current.value=0}},{key:"playHeadLayer",value:function(e,t){var n,a=this.props,i=a.transcriptionPlayScrub,r=a.isPlaying?No:To;i.position>0&&(n=Object(br.jsxs)("div",{className:Pr.a.playScrub,style:{top:"".concat(i.position,"%"),marginTop:"-12px"},children:[Object(br.jsxs)("svg",{className:Pr.a.playButton,children:[Object(br.jsx)("circle",{fill:t?"#C4D600":"grey",cx:"12",cy:"12",r:"12"}),Object(br.jsx)("image",{x:"3",y:"3",width:"18",height:"18",xlinkHref:r})]}),Object(br.jsx)("div",{className:Pr.a.playScrubLine,style:{backgroundColor:t?"#C4D600":"grey"}})]}));var o={visibility:e?"hidden":"visible",marginLeft:"18px",boxSizing:"border-box"};return Object(br.jsx)("div",{role:"button",tabIndex:-1,className:Pr.a.LayerContent,style:o,children:n})}},{key:"confidenceGauge",value:function(e){var t=this.props.onSetConfidence,n={fill:"#979797",width:"24px",height:"24px",hidden:"".concat(e)};return Object(br.jsxs)("div",{className:Pr.a.confidenceContainer,style:{visibility:e?"hidden":"visible"},children:[Object(br.jsx)(Lo,{style:n}),Object(br.jsx)("span",{className:Pr.a.confidenceText,children:"Confidence Level"}),Object(br.jsx)("input",{ref:this.sliderRef,type:"range",min:"0",max:"100",className:Pr.a.slider,id:"confidenceSlider",onChange:function(e){t(e.target.valueAsNumber)}})]})}},{key:"handleTranscriptionPlayHeadLayerMouseMove",value:function(){var e=this.props.onSetTranscriptionPlayScrub;return function(t){var n=t.clientY-t.currentTarget.getBoundingClientRect().y,a=100*n/t.currentTarget.clientHeight,i=Math.max(0,100*(n-50)/t.currentTarget.clientHeight);e({position:a,offsetPosition:i})}}},{key:"handleHideTranscriptionPlayHeadLayerOnMouseLeave",value:function(){var e=this.props.onSetTranscriptionPlayScrub;return function(){e({position:0,offsetPosition:0})}}},{key:"render",value:function(){var e=this.props,t=e.status.status,n=e.isAudioLoaded;return Object(br.jsx)("div",{className:Pr.a.transcriptionContainer,onMouseLeave:this.handleHideTranscriptionPlayHeadLayerOnMouseLeave(),children:Object(br.jsxs)("section",{className:Pr.a.Transcription,children:[Object(br.jsx)("div",{className:Pr.a.sections,children:Object(br.jsx)(So,{})}),Object(br.jsxs)("div",{className:"".concat(Pr.a.conversation," ").concat(Pr.a.sections),onMouseMove:this.handleTranscriptionPlayHeadLayerMouseMove(),children:[Object(br.jsx)(zr,{colors:{channelColors:{1:"#FFC72C",2:"#00A9CE"}}}),this.playHeadLayer(t===nt||t===it,n)]}),this.confidenceGauge(t===nt||t===it)]})})}}]),n}(a.Component));Ao.defaultProps={onSetTranscriptionPlayScrub:function(){},onSetConfidence:function(){},plotWholeTimeline:!1,isVertical:!0,width:""};var Ro=Ao,Mo=function(e){return Object(br.jsx)(Ro,Object(u.a)({},e))};Mo.defaultProps={plotWholeTimeline:!1};var Do=Object(s.b)((function(e){var t=e.status,n=e.data,a=e.search,i=e.transcription;return{status:t,data:n,transcriptionPlayScrub:i.transcriptionPlayScrub,viewport:i.viewport,search:a,isPlaying:e.playback.isPlaying,isAudioLoaded:e.status.isAudioLoaded}}),(function(e){return{onSetTranscriptionPlayScrub:function(t){e(Oa(t))},onSetConfidence:function(t){e(function(e){return{type:Nt,payload:{confidence:e}}}(t))}}}))(Mo),Uo=n(50),Bo=n(46),Fo=n.n(Bo),Ko=(n(84),n.p+"static/media/icon-customer-service.539a0d46.svg"),Ho=n.p+"static/media/icon-urgent.0ad51d65.svg",Wo=n.p+"static/media/icon-multiple.34923021.svg",Vo=n.p+"static/media/icon-note-unknown.c44385e0.svg",Go=n.p+"static/media/icon-search-black.1502e3ca.svg",Yo=(n.p,n.p,n.p+"static/media/icon-on-hold.3d2f5cb3.svg"),Xo=n.p+"static/media/icon-conference.c9fecb4f.svg",Jo=n.p+"static/media/icon-pause.f93c9c02.svg",qo=n.p+"static/media/icon-transfer.4180c05e.svg",zo=n.p+"static/media/icon-user-event.1314a75e.svg",Qo="CLASH_WIN",Zo="AFFIRMATION",$o="INTERRUPTION",es="STEAL",ts="MULTIPLE_EVENTS",ns="NOTE_EVENT",as="SEARCH_EVENT",is="CALL_EVENT",rs=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).preRenderedEventsKey=null,a.preRenderedEvents=null,a}return Object(y.a)(n,[{key:"getNoteIcon",value:function(e){var t=this.props.notes.eventTypes.find((function(t){return t.id===e}));return t?t.icon:Vo}},{key:"iconForEventType",value:function(e,t){switch(e){case Ti:case Ni:case Ei:return Ho;case ts:return Wo;case ns:return this.getNoteIcon(t);case as:return Go;case is:return n.getCallEventIcon(t);default:return Ko}}},{key:"generateOrUsePreRenderedEvents",value:function(){var e=this.props,t=e.data.talkTime,n=e.activeLayers,a=e.timeline,i=e.notes,r=e.callersAtTimestamp,o=e.callerWithUuid,s=e.search,c=e.participants,l=e.sentences,d=e.transcription,h=e.knowledgeSelectedItem,p=e.eventsByParticipants,m=e.scrub,f=e.plotWholeTimeline,v={talkTime:t,activeLayers:n,timeline:a,notes:i,callersAtTimestamp:r,callerWithUuid:o,search:s,participants:c,sentences:l,transcription:d,knowledgeSelectedItem:h,eventsByParticipants:p,plotWholeTimeline:f};return f||(v=Object(u.a)(Object(u.a)({},v),{},{scrub:m})),null!=this.preRenderedEvents&&Object(Uo.isEqual)(v,this.preRenderedEventsKey)||(this.preRenderedEvents=this.generateEvents(),this.preRenderedEventsKey=v),this.preRenderedEvents}},{key:"generateEvents",value:function(){var e=this.props,t=e.data,n=e.activeLayers,a=t.talkTime,i=[];n.length>0&&a&&(i.push.apply(i,Object(oe.a)(a[1].map((function(e){return Object(u.a)(Object(u.a)({},e),{},{channel:1})})))),i.push.apply(i,Object(oe.a)(a[2].map((function(e){return Object(u.a)(Object(u.a)({},e),{},{channel:2})})))),i.push.apply(i,Object(oe.a)(this.generateNoteEvents())),i.push.apply(i,Object(oe.a)(this.generateSearchEvents()))),i.push.apply(i,Object(oe.a)(this.generateClassificationEvents())),i.push.apply(i,Object(oe.a)(this.generateKeywordEvents())),i.push.apply(i,Object(oe.a)(this.generateTopicEvents()));var r=this.generateCallEvents();i.push.apply(i,Object(oe.a)(r.filter((function(e){return 1===e.channel}))));var o=r.filter((function(e){return 2===e.channel})),s=[];return s.push.apply(s,Object(oe.a)(this.generateEventList(i,!0))),s.push.apply(s,Object(oe.a)(this.generateEventList(o,!1))),s}},{key:"consolidateEvents",value:function(){var e=this.props.callersAtTimestamp;return function(t,a){return Object(u.a)(Object(u.a)({},t),{},{timestamp:a.map((function(e){return e.timestamp})).reduce((function(e,t){return e+t}))/a.length,label:a.map((function(t){var i=1===t.channel?0:1;if(void 0!==e(t.timestamp)){var r=e(t.timestamp)[i],o=t.label||n.labelForEventType(t.event);return 1===a.length?o:"".concat(r.title,": ").concat(o)}return"caller"})).join("<br>"),groupSize:a.length||0,groupedEvents:a})}}},{key:"clusterEvents",value:function(){var e=this.props.callersAtTimestamp;return function(t,a){return{event:a.length>1?ts:t.event,timestamp:a.map((function(e){return e.timestamp})).reduce((function(e,t){return e+t}))/a.length,label:a.map((function(t){if(t.groupSize>1)return t.label;var a=1===t.channel?0:1;if(void 0!==e(t.timestamp)){var i=e(t.timestamp)[a],r=t.label||n.labelForEventType(t.event);return"".concat(i.title,": ").concat(r)}return"caller"})).join("<br>"),channel:t.channel,color:t.color||"#ADB3B7",subType:t.subType,groupSize:a.length,groupedEvents:a}}}},{key:"groupEvents",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.consolidateEvents(),a=[],i=[];return e.forEach((function(e,r,o){a.push(e);var s=r===o.length-1,c=!0;r<o.length-1&&(o[r+1].timestamp-e.timestamp<=t&&(c=!1));if(s||c){var l=n(e,a);i.push(l),a=[]}})),i}},{key:"generateEventList",value:function(e,t){var a=this,i=this.props,r=i.scrub,o=i.activeLayers,s=i.timeline,c=i.plotWholeTimeline,l=i.callersAtTimestamp,d=[],h=e.filter((function(e){return n.isEventTypeInActiveLayers(e.event,o)})).filter(n.filterInvisibleEvents).sort((function(e,t){return e.timestamp-t.timestamp}));if(c)h.forEach((function(e,t,n){var a="".concat(e.channel).concat(e.event).concat(e.timestamp);if(e.event!==is){var i="#ADB3B7",r=l(e.timestamp);if(e.channel&&void 0!==r)i=r[1===e.channel?0:1].color;var o={left:P(e.timestamp,s),backgroundColor:i};d.push(Object(br.jsx)("span",{style:o,className:Fo.a.ClashLine},a))}}));else{var p=this.groupEvents(h,1,this.consolidateEvents()),m={start:s.start+s.range*r.start/100,end:s.start+s.range*r.end/100},f=.02*(m.end-m.start);this.groupEvents(p,f,this.clusterEvents()).forEach((function(e){var n="".concat(e.channel).concat(e.event).concat(e.timestamp),i={left:P(e.timestamp,s),top:t?"0px":"55%"},r=a.iconForEventType(e.event,e.subType);if(null!==r){var o="",c=e.color,h=c,p=l(e.timestamp);if(e.channel&&void 0!==p){var m=p[1===e.channel?0:1];o=m.classes,h=e.groupSize>1?"#888888":m.color}var f=Object(u.a)(Object(u.a)({},i),{},{backgroundColor:h}),v=Ar()({"translate-50":!0,[Fo.a.ClashIcon]:!0,[o]:!0}),b=Fo.a.ClashLine;if(e.groupedEvents.some((function(e){return e.event!==is}))&&d.push(Object(br.jsx)("span",{style:f,className:b},n)),e.event===is)d.push(Object(br.jsx)("img",{src:r,style:i,className:v,"data-tooltip":e.label,alt:e.label},"".concat(n,"icon")));else{var y=e.groupSize>1?e.groupSize:"";d.push(Object(br.jsxs)("svg",{style:i,className:v,"data-tooltip":"".concat(e.label),children:[Object(br.jsx)("circle",{strokeWidth:"4",cx:"12",cy:"12",r:"10",stroke:c}),Object(br.jsx)("circle",{fill:"#F7F7F7",cx:"12",cy:"12",r:"10"}),Object(br.jsx)("image",{x:"5",y:"5",width:"14",height:"14",xlinkHref:r}),Object(br.jsx)("text",{x:"12",y:"16",width:"14",height:"14",textAnchor:"middle",children:y})]},"".concat(n,"icon")))}}}))}return d}},{key:"generateNoteEvents",value:function(){var e=this.props,t=e.timeline,n=e.activeLayers,a=e.notes,i=e.callersAtTimestamp,r=e.callerWithUuid,o=[];if(!n.includes(Ra))return o;var s=a.eventTypes;return a.notes.forEach((function(e){var n=e.eventType,a=e.timestamp,c=e.uuid,l=s.find((function(e){return e.id===n}));if(null!==a){var u=t.start+a,d=i(u).findIndex((function(e){return e.relatedUuids[0]===c})),h=d>=0?d+1:null,p=(c&&r(c)?r(c):{color:"#000"}).color;o.push({event:ns,timestamp:t.start+a,label:l?l.text:"Unknown note type",color:p,channel:h,subType:n})}})),o}},{key:"generateSearchEvents",value:function(){var e=this.props,t=e.search,n=e.timeline,a=[];return t.matches.forEach((function(e){var t=e.caller,i=e.wordList,r=t.isPrimary?1:2;a.push({event:as,timestamp:n.start+1e3*i[0].s,label:"Search match",channel:r})})),a}},{key:"generateClassificationEvents",value:function(){var e=this.props,t=e.timeline,n=e.transcription;return this.generateKnowledgeEvents(Ti,(function(e,a){var i=n.Categories.filter((function(t){return t.Name.toUpperCase()===e.toUpperCase()}))[0];"undefined"!==typeof i&&("undefined"!==typeof i.Keywords?i.Keywords.forEach((function(e){e.Mentions.forEach((function(e){e.Pos.forEach((function(n){var r=t.start+1e3*n;a.push({event:Ti,timestamp:r,label:i.DisplayName,channel:e.Channel})}))}))})):i.Keywords=[])}))}},{key:"generateKeywordEvents",value:function(){var e=this.props,t=e.timeline,n=e.transcription;return this.generateKnowledgeEvents(Ni,(function(e,a){[1,2].forEach((function(i){var r=n[i].Keywords.filter((function(t){return t.Keyword===e}))[0];"undefined"!==typeof r&&r.Pos.forEach((function(n){var r=t.start+1e3*n;a.push({event:Ni,timestamp:r,label:e,channel:i})}))}))}))}},{key:"generateTopicEvents",value:function(){var e=this.props,t=e.timeline,n=e.transcription;return this.generateKnowledgeEvents(Ei,(function(e,a){[1,2].forEach((function(i){var r=n[i].Topics.filter((function(t){return t.Topic===e}))[0];"undefined"!==typeof r&&r.Keywords.forEach((function(n){n.Pos.forEach((function(n){var r=t.start+1e3*n;a.push({event:Ei,timestamp:r,label:e,channel:i})}))}))}))}))}},{key:"generateKnowledgeEvents",value:function(e,t){var n=this.props.knowledgeSelectedItem;if(n.type!==e)return[];var a=[];return t(n.identifier,a),a}},{key:"generateCallEvents",value:function(){var e=this.props,t=e.participants,a=e.eventsByParticipants,i=[];return null==a||Object.keys(t).forEach((function(e){var r=t[e];a[e].events.forEach((function(e){var t=e.startFlags,a=t.isBridge,o=t.isUnBridge;a||o||(i.push({event:is,timestamp:e.start,label:n.callEventIconLabel(e.startFlags),color:r.color,channel:r.isPrimary?1:2,subType:{event:e,isStart:!0}}),i.push({event:is,timestamp:e.end,label:n.callEventIconLabel(e.endFlags),color:r.color,channel:r.isPrimary?1:2,subType:{event:e,isStart:!1}}))}))})),i}},{key:"render",value:function(){var e=this,t=this.props,n=t.plotWholeTimeline,a=t.scrub,i=Ar()({[Fo.a.LayerContent]:!0}),r=this.generateOrUsePreRenderedEvents();return Object(br.jsx)("div",{ref:function(t){e.node=t},className:i,style:A(n,a),children:r})}}],[{key:"labelForEventType",value:function(e){switch(e){case Qo:return"Clash Event";case Zo:return"Affirmation Event";case $o:return"Interruption Event";case es:return"Steal Event";case Ra:return"Note";default:return null}}},{key:"isLayerMatchingEventType",value:function(e,t){switch(t){case Qo:return e===Ma;case Zo:return e===Da;case $o:return e===Ua;case es:return e===Ba;case ns:return e===Ra;case as:return"show-search-results"===e;default:return null}}},{key:"isEventTypeInActiveLayers",value:function(e,t){return e===is||e===Ti||e===Ni||e===Ei||0!==t.length&&t.filter((function(t){return n.isLayerMatchingEventType(t,e)})).length>0}},{key:"callEventIconImage",value:function(e){var t=e.isHold,n=e.isParkedTransfer,a=e.isConferenceIn,i=e.isRecordStart,r=e.isRecordStop,o=e.isChannelAnswer,s=e.isChannelRing;switch(!0){case n:case t:return Yo;case a:return Xo;case r:return Jo;case s:return zo;case i:case o:return null;default:return qo}}},{key:"callEventIconLabel",value:function(e){var t=e.isBridge,n=e.isChannelStart,a=e.isChannelRing,i=e.isChannelAnswer,r=e.isChannelEnd,o=e.isChannelComplete,s=e.isConferenceIn,c=e.isConferenceOut,l=e.isHold,u=e.isListenIn,d=e.isListenInBarge,h=e.isListenInDisconnect,p=e.isListenInWhisper,m=e.isParkedTransfer,f=e.isQueuing,v=e.isRecordStart,b=e.isRecordStop,y=e.isRouting,g=e.isUnBridge,j=e.isUnHold;switch(!0){case n:return"Channel start";case a:return"Channel ring";case i:return"Channel answer";case r:return"Channel end";case o:return"Channel complete";case s:return"Conference";case c:return"Conference end";case l:return"On Hold";case j:return"Un-hold";case v:return"Un-pause";case b:return"Pause";case m:return"Start transfer";case t:return"Transfer";case u:return"Listen in";case d:return"Barge";case h:return"Listen in end";case p:return"Whisper";case f:return"Queueing";case y:return"Routing";case g:return"Disconnect";default:return Object.keys(e).join(" ")}}},{key:"getCallEventIcon",value:function(e){var t=e.event,a=e.isStart?t.startFlags:t.endFlags;return n.callEventIconImage(a)}},{key:"filterInvisibleEvents",value:function(e){if(e&&e.subType&&e.subType.event){var t=e.subType.event.startFlags;switch(!0){case!0===t.isConferenceIn:case!0===t.isRecordStart:case!0===t.isParkedTransfer:case!0===t.isRouting:case!0===t.isHold:case!0===t.isUnHold:case!0===t.isRecordStop:case!0===t.isChannelRing:case!0===t.isChannelStart:return!1}}return!0}}]),n}(a.Component);rs.defaultProps={eventsByParticipants:null,plotWholeTimeline:!1,sentences:null};var os=rs,ss=Object(Ue.a)([be,Kn,Hn],(function(e,t,n){return function(e){var a=n(e);if(void 0!==a&&null!==a){var i=t(a.aUuid),r=t(a.bUuid);return r.isPrimary?[r,i]:[i,r]}}}));function cs(e){var t=e.activeLayers,n=e.data,a=e.scrub,i=e.plotWholeTimeline,r=e.timeline,o=e.callSummary,s=e.notes,c=e.search,l=e.callersAtTimestamp,u=e.callerWithUuid,d=e.participants,h=e.sentences,p=e.eventsByParticipants,m=e.transcription,f=e.knowledgeSelectedItem;return Object(br.jsx)(os,{activeLayers:t,data:n,scrub:a,plotWholeTimeline:i,timeline:r,callSummary:o,notes:s,search:c,callersAtTimestamp:l,callerWithUuid:u,participants:d,sentences:h,eventsByParticipants:p,transcription:m,knowledgeSelectedItem:f})}cs.defaultProps={plotWholeTimeline:!1,sentences:null,eventsByParticipants:null};var ls=Object(s.b)((function(e){var t=e.activeLayers,n=e.data,a=e.scrub,i=e.callSummary,r=e.knowledge,o=e.notes,s=e.search;return{activeLayers:t,data:n,scrub:a,callSummary:i,knowledgeSelectedItem:r.selectedItem,participants:de(e),timeline:Xe(e),notes:o,search:s,callersAtTimestamp:ss(e),callerWithUuid:Kn(e),sentences:ke(e),eventsByParticipants:fe(e),transcription:xe(e)}}))(cs),us=n(11),ds=n.n(us),hs=n.p+"static/media/icon-pause-skip.208b7558.svg",ps=n(56),ms=n.n(ps),fs="medium",vs="large",bs=function(e){var t,n=e.isAvatar,a=e.url,i=e.color,r=e.size,o=e.svgStyle,s=e.imgStyle,c=e.className;switch(r){case fs:t={svg:32,r:"15",icon:"24px",iconx:"4px",icony:"3px",img:"30px"};break;case vs:t={svg:36,r:"15",icon:"24px",iconx:"6px",icony:"4px",img:"30px"};break;default:t={svg:24,r:"10",icon:"16px",iconx:"4px",icony:"3px",img:"20px"}}return Object(br.jsx)(br.Fragment,{children:n?Object(br.jsx)("img",{style:s,width:"".concat(t.img),height:"".concat(t.img),alt:"Avatar",src:a,className:[ms.a.avatar,c].join(" ")}):Object(br.jsxs)("svg",{role:"img","aria-label":"no avatar",style:o,className:[ms.a.svgIcon,c].join(" "),width:"".concat(t.svg,"px"),height:"".concat(t.svg,"px"),viewBox:"0 0 ".concat(t.svg," ").concat(t.svg),children:[Object(br.jsx)("circle",{fill:i,cx:"".concat(t.svg/2),cy:"".concat(t.svg/2),r:"".concat(t.r)}),Object(br.jsx)("image",{width:"".concat(t.icon),height:"".concat(t.icon),x:"".concat(t.iconx),y:"".concat(t.icony),href:a})]})})};bs.defaultProps={isAvatar:!1,color:"white",url:"",size:"small",svgStyle:{},imgStyle:{},className:""};var ys=bs,gs=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).state={isEntryExitLayerDismissed:!1},a.preRenderedSentencesKey=null,a.preRenderedSentences=null,a.hideEntryExitLayerHandler=a.hideEntryExitLayerHandler.bind(Object(rr.a)(a)),a.handleClickReviewNotes=a.handleClickReviewNotes.bind(Object(rr.a)(a)),a}return Object(y.a)(n,[{key:"componentDidUpdate",value:function(e,t,n){var a=this.props.isPlaying,i=this.state.isEntryExitLayerDismissed;a&&i&&this.setState({isEntryExitLayerDismissed:!1})}},{key:"callerStyle",value:function(e,t,n,a,i){var r=n?8:16,o=n?33:24,s=e.isPrimary?"top":"bottom";return function(c){var l=t[c.opposing.number].isAgent&&e.agentNumber>1,u=c.timelineStart,d=c.timelineEnd-u,h=100/i.range*Math.max(0,u-i.start),p=100/i.range*Math.min(i.range,u+d-i.start),m=Math.max(.5,p-h),f="top"===s?ds.a.top:ds.a.bottom;return{style:{borderRadius:"4px",backgroundColor:a||e.color,left:"".concat(h,"%"),width:"".concat(m,"%"),height:"".concat(r*(l&&!n?.5:1),"%"),[s]:"".concat(o*(l&&!n?1.95:1),"%")},markerPosition:f}}}},{key:"createSentences",value:function(e,t,a,i,r,o){var s=this,c=[];return Object.keys(t).map((function(n){var i=t[n],c=s.callerStyle(i,t,e,r,o);return a[n].map((function(e){return{key:n,style:c,caller:i,sentence:e}}))})).flat().sort((function(e,t){return e.sentence.Start-t.sentence.Start})).map((function(t){var a=t.key,r=t.style,o=t.caller,s=t.sentence,l=n.eventsForSentence(s,i[a].events),d=r(s),h=null,p=l.filter((function(e){return e.startFlags.isConferenceIn})).length,m=!e&&p,f=m?ds.a.conference:null,v=m?Object(u.a)(Object(u.a)({},d.style),{},{backgroundColor:null,backgroundImage:n.conferencePattern(o.color)}):d.style,b=o.name?"".concat(o.name," (").concat(o.fullNumber,")"):o.fullTitle,y=p?"Multiple people. Hover for details":b,g="".concat(p?"conference:":"").concat(o.number);if(!e&&!c.includes(g)){var j=Object(Fe.a)(o.relatedUuids,1)[0];c.push(g);var O=o.isPrimary?ds.a.sentenceMarkerAvatarTop:ds.a.sentenceMarkerAvatarBottom,_=o.isPrimary?ds.a.focusSwitcherTop:ds.a.focusSwitcherBottom;h=Object(br.jsxs)(br.Fragment,{children:[Object(br.jsx)("span",{className:ds.a.sentenceMarker,"data-marker-title":y,children:Object(br.jsx)("span",{className:_,"data-set-focus":j})}),!!o.photoUrl&&Object(br.jsx)(ys,{isAvatar:!!o.photoUrl,url:o.photoUrl||o.image,color:o.color,className:O,size:vs})]})}return Object(br.jsx)("div",{className:"".concat([ds.a.sentence,r(s).markerPosition,f].join(" ")),style:v,"data-tooltip":"".concat(s.number,': "').concat(s.Sentence,'"'),"data-tooltip-fixed-width":!0,children:h},"".concat(a).concat(s.timelineStart))}))}},{key:"sentenceLayer",value:function(){var e=this.props,t=e.plotWholeTimeline,n=e.participants,a=e.sentences,i=e.eventsByParticipants,r=e.scrub,o=e.singleColor,s=e.timeline,c={plotWholeTimeline:t,participants:n,sentences:a,eventsByParticipants:i,singleColor:o,timeline:s};return null!=this.preRenderedSentences&&Object(Uo.isEqual)(c,this.preRenderedSentencesKey)||(this.preRenderedSentences=this.createSentences(t,n,a,i,o,s),this.preRenderedSentencesKey=c),Object(br.jsx)("div",{className:ds.a.LayerContent,style:A(t,r),children:this.preRenderedSentences})}},{key:"avatarLayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.props,n=t.participants,a=t.sentences,i=t.audioTransport,r=t.timeline,o=t.scrub,s=t.plotWholeTimeline,c=t.playhead;return null!==a?Object(br.jsx)("div",{className:ds.a.LayerContent,style:A(s,o),children:Object.keys(n).map((function(t){if(a[t].length>0){var l=a[t][0],d=a[t][a[t].length-1],h=i.start()/100*r.range,p=l.isInEarliestCall?0:l.timelineStart-r.start,m=100/(r.range-h)*p,f=d.timelineStart+(d.timelineEnd-d.timelineStart)-r.start,v=100/r.range*f,b=Math.min(Math.max(o.start,m-.5),v),y=n[t].isPrimary?"top":"bottom",g=n[l.opposing.number].isAgent&&n[t].agentNumber>1,j=s?33:24,O=1;if(b>o.start){var _=.2*(o.end-o.start);if(b>o.start+_)O=0;else{var x=b-o.start;O=1-Math.max(0,x)}}var C={style:{opacity:O,left:"".concat(b,"%"),marginLeft:-e,zIndex:c>0&&c<100?9:0,[y]:"".concat(j*(g&&!s?1.75:.96),"%"),paddingLeft:"4px"}};return Object(br.jsx)(ys,{isAvatar:!!n[t].photoUrl,url:n[t].photoUrl||n[t].image,color:n[t].color,size:vs,svgStyle:C.style,imgStyle:Object(u.a)(Object(u.a)({},C.style),{},{paddingLeft:"6px"})},"avatar-".concat(t))}return null})).flat()}):null}},{key:"playheadLayer",value:function(){var e=this.props,t=e.canSetPlayhead,n=e.playhead,a=e.plotWholeTimeline,i=e.scrub,r=e.timeline,o=e.participants,s=e.eventsByParticipants,c=r.formattedTimeAtPlayhead(n),l={isPaused:!1,timeAtPauseEnd:null,playheadAtPauseEnd:null};if(!a){var u=null;s&&Object.keys(o).forEach((function(e){!0===o[e].isPrimary&&(u=s[e])})),u&&u.events&&(l=r.pausedPropertiesAtPlayhead(n,u))}return Object(br.jsx)("div",{role:"button",tabIndex:0,className:ds.a.LayerContent,style:A(a,i),onMouseDown:this.handlePlayheadLayerMouseMove(t),children:Object(br.jsxs)("div",{className:ds.a.playhead,style:{left:"".concat(n,"%")},children:[Object(br.jsx)("div",{className:ds.a.playheadTop}),!a&&Object(br.jsx)("div",{className:ds.a.playheadTime,children:Object(br.jsx)("div",{children:c})}),Object(br.jsx)("div",{className:ds.a.playheadBottom,children:!a&&l.isPaused&&Object(br.jsx)("div",{role:"button",onMouseDown:this.createSkipPauseHandler(l),children:Object(br.jsx)("img",{className:ds.a.pauseSkipIcon,src:hs,alt:"Skip Pause"})})})]})})}},{key:"timestampsLayer",value:function(){for(var e=this.props,t=e.plotWholeTimeline,n=e.scrub,a=e.timeline,i=n.end-n.start,r=i>10?6:3,o=i/100*a.range/r,s=a.range/o,c=[],l=0;l<s;l++){var u=a.formattedTimeAtPlayhead(l/s*100),d=100/a.range*(o*l),h={left:"".concat(d,"%")},p=Object(br.jsxs)("div",{className:ds.a.timeStamp,style:h,children:[Object(br.jsx)("div",{className:ds.a.timeStampLine}),Object(br.jsx)("div",{className:ds.a.timeStampText,children:Object(br.jsx)("div",{children:u})})]},l);c.push(p)}return Object(br.jsx)("div",{className:ds.a.LayerContent,style:A(t,n),children:c.flat()})}},{key:"showEntryExitLayer",value:function(){var e=this.props,t=e.showTransport,n=e.playhead,a=e.isPlaying,i=this.state.isEntryExitLayerDismissed;return!a&&!i&&t&&(0===n||100===n)}},{key:"hideEntryExitLayerHandler",value:function(){this.setState({isEntryExitLayerDismissed:!0})}},{key:"handleClickReviewNotes",value:function(){(0,this.props.onHideScrubAndTimeline)()}},{key:"entryExitLayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.props,a=t.callSummary,i=t.playhead,r=t.onStartPlaying,o=t.onRestartPlaying,s=t.displayedExperienceOption,c=t.unread;if(!this.showEntryExitLayer())return null;var l=0===i,u=l?"Begin ":"Restart ",d=l?ds.a.start:ds.a.restart,h=l?r:o,p=l?e:0,m=a.keyCallers,f=m.colors,v=m.fullNameNumbers,b=m.images,y=m.avatar;return Array.isArray(f)&&f.length?Object(br.jsxs)("section",{className:"ignore-nodestack",children:[Object(br.jsx)("div",{className:ds.a.overlay,style:{marginLeft:-e},onClick:this.hideEntryExitLayerHandler,children:Object(br.jsxs)("svg",{width:"100%",height:"100%",viewBox:"0 0 100 100",preserveAspectRatio:"none",style:{marginLeft:p},children:[Object(br.jsx)("line",{x1:"0",y1:"32",x2:"100",y2:"32",strokeWidth:"1",stroke:f[0]}),Object(br.jsx)("line",{x1:"0",y1:"68",x2:"100",y2:"68",strokeWidth:"1",stroke:f[1]})]})}),Object(br.jsxs)("div",{className:ds.a["transport-container"],style:{marginLeft:-e},children:[Object(br.jsxs)("div",{className:ds.a.overlayContentFlex,children:[n.channelLabel("".concat(v[0]),f[0],b[0],y[0]),Object(br.jsxs)("div",{className:ds.a["info-displaying-text"],children:["Viewing:",Object(br.jsx)("br",{}),s.viewName]})]}),Object(br.jsxs)("div",{className:ds.a.overlayContentFlex,children:[n.channelLabel("".concat(v[1]),f[1],b[1],y[1]),Object(br.jsx)("button",{className:"".concat(ds.a["transport-button"]," ").concat(d),type:"button",tabIndex:0,onClick:h,children:"".concat(u," Playback")})]}),c.length>0&&Object(br.jsxs)("div",{className:ds.a.unreadNotes,children:[Object(br.jsx)("div",{className:ds.a.notificationBell}),Object(br.jsxs)("div",{className:ds.a.notificationCount,children:["You have ",c.length," unread Note",1!==c.length?"s":""]}),Object(br.jsx)("button",{className:ds.a.reviewButton,onClick:this.handleClickReviewNotes,children:"REVIEW NOTES"})]}),Object(br.jsx)("button",{className:ds.a.closeButton,onClick:this.hideEntryExitLayerHandler})]})]}):Object(br.jsx)("section",{})}},{key:"createSkipPauseHandler",value:function(e){var t=this.props.onSetPlayhead;return function(n){e.playheadAtPauseEnd&&(n.stopPropagation(),t(e.playheadAtPauseEnd,!0))}}},{key:"handlePlayheadLayerMouseMove",value:function(e){if(!e)return null;var t=this.props.onSetPlayhead;return function(e){var n=e.target.getBoundingClientRect(),a=100/n.width*(e.pageX-n.x);t(a,!0)}}},{key:"render",value:function(){var e=this.props,t=e.status,a=e.children,i=e.hideSentenceLayer,r=e.plotWholeTimeline,o=e.scrub,s=e.sentences,c=e.eventTimelineVisible,l=e.leftMargin,u=e.emptyText,d=t===at,h=t===nt,p=i||null===s?null:this.sentenceLayer(),m=!r&&!this.showEntryExitLayer(),f=Ar()({[ds.a.EventLayer]:!0});if(t===it)return Object(br.jsx)("div",{className:"Timeline",children:Object(br.jsxs)("div",{className:f,children:[n.noAgentDataOverlay(),n.noAgentDataText(u)]})});if(!c&&!r)return null;var v=h?null:this.avatarLayer(l);return!r&&c?Object(br.jsx)("section",{className:"Timeline",children:Object(br.jsxs)("div",{className:f,style:{marginLeft:l},children:[this.timestampsLayer(),d&&p,m&&n.gradientLayer(o,l),a,v,Object(br.jsx)(ls,{plotWholeTimeline:r}),this.playheadLayer(),this.entryExitLayer(l),n.loadingOverlay(h,l)]})}):Object(br.jsxs)("div",{className:f,children:[d&&p,a,Object(br.jsx)(ls,{plotWholeTimeline:r}),this.playheadLayer(),this.entryExitLayer(l),n.loadingOverlay(h,l)]})}}],[{key:"loadingOverlay",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n="loading-overlay ".concat(e?"":"fade-out");return Object(br.jsxs)("svg",{className:n,width:"100%",height:"100%",viewBox:"0 0 400 100",preserveAspectRatio:"none",style:{marginLeft:-t},children:[Object(br.jsxs)("defs",{children:[Object(br.jsxs)("linearGradient",{id:"left-right-gradient",children:[Object(br.jsx)("stop",{stopColor:"#fff",offset:"0%"}),Object(br.jsx)("stop",{stopColor:"#fff",stopOpacity:"0",offset:"100%"})]}),Object(br.jsxs)("linearGradient",{id:"right-left-gradient",children:[Object(br.jsx)("stop",{stopColor:"#fff",stopOpacity:"0",offset:"0%"}),Object(br.jsx)("stop",{stopColor:"#fff",offset:"100%"})]})]}),Object(br.jsx)("rect",{x:"0",width:"40",y:"24",height:"16",opacity:"0.075",rx:"2"}),Object(br.jsx)("rect",{x:"40",width:"48",y:"60",height:"16",opacity:"0.075",rx:"2"}),Object(br.jsx)("rect",{x:"88",width:"36",y:"24",height:"16",opacity:"0.075",rx:"2"}),Object(br.jsx)("rect",{x:"120",width:"48",y:"60",height:"16",opacity:"0.075",rx:"2"}),Object(br.jsx)("rect",{x:"168",width:"40",y:"24",height:"16",opacity:"0.075",rx:"2"}),Object(br.jsx)("rect",{x:"208",width:"40",y:"60",height:"16",opacity:"0.075",rx:"2"}),Object(br.jsx)("rect",{x:"240",width:"36",y:"24",height:"16",opacity:"0.075",rx:"2"}),Object(br.jsx)("rect",{x:"280",width:"40",y:"60",height:"16",opacity:"0.075",rx:"2"}),Object(br.jsx)("rect",{x:"320",width:"40",y:"24",height:"16",opacity:"0.075",rx:"2"}),Object(br.jsx)("rect",{x:"360",width:"40",y:"60",height:"16",opacity:"0.075",rx:"2"}),Object(br.jsx)("rect",{x:"0",y:"0",height:"100",width:"40",fill:"url(#left-right-gradient)"}),Object(br.jsx)("rect",{x:"360",y:"0",height:"100",width:"40",fill:"url(#right-left-gradient)"})]})}},{key:"gradientLayer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Ar()({[ds.a.gradientLayer]:!0,[ds.a.gradientStart]:0!==e.start,[ds.a.gradientEnd]:100!==e.end}),a={marginLeft:-t,left:"".concat(Math.min(e.start,7)-7,"%"),right:"".concat(Math.min(100-e.end,7)-7,"%")};return Object(br.jsx)("div",{className:n,style:a})}},{key:"noAgentDataOverlay",value:function(){var e=Ar()({[ds.a.overlayMargin]:!0,"loading-overlay":!0});return Object(br.jsxs)("svg",{className:e,width:"100%",height:"100%",viewBox:"0 0 400 100",preserveAspectRatio:"none",children:[Object(br.jsxs)("defs",{children:[Object(br.jsxs)("linearGradient",{id:"left-right-gradient",children:[Object(br.jsx)("stop",{stopColor:"#fff",offset:"0%"}),Object(br.jsx)("stop",{stopColor:"#fff",stopOpacity:"0",offset:"100%"})]}),Object(br.jsxs)("linearGradient",{id:"right-left-gradient",children:[Object(br.jsx)("stop",{stopColor:"#fff",stopOpacity:"0",offset:"0%"}),Object(br.jsx)("stop",{stopColor:"#fff",offset:"100%"})]})]}),Object(br.jsx)("rect",{x:"0",width:"40",y:"24",height:"16",opacity:"0.075",rx:"2"}),Object(br.jsx)("rect",{x:"40",width:"48",y:"60",height:"16",opacity:"0.075",rx:"2"}),Object(br.jsx)("rect",{x:"88",width:"36",y:"24",height:"16",opacity:"0.075",rx:"2"}),Object(br.jsx)("rect",{x:"120",width:"48",y:"60",height:"16",opacity:"0.075",rx:"2"}),Object(br.jsx)("rect",{x:"168",width:"40",y:"24",height:"16",opacity:"0.075",rx:"2"}),Object(br.jsx)("rect",{x:"208",width:"40",y:"60",height:"16",opacity:"0.075",rx:"2"}),Object(br.jsx)("rect",{x:"240",width:"36",y:"24",height:"16",opacity:"0.075",rx:"2"}),Object(br.jsx)("rect",{x:"280",width:"40",y:"60",height:"16",opacity:"0.075",rx:"2"}),Object(br.jsx)("rect",{x:"320",width:"40",y:"24",height:"16",opacity:"0.075",rx:"2"}),Object(br.jsx)("rect",{x:"360",width:"40",y:"60",height:"16",opacity:"0.075",rx:"2"}),Object(br.jsx)("rect",{x:"0",y:"0",height:"100",width:"40",fill:"url(#left-right-gradient)"}),Object(br.jsx)("rect",{x:"360",y:"0",height:"100",width:"40",fill:"url(#right-left-gradient)"})]})}},{key:"noAgentDataText",value:function(e){return Object(br.jsx)("div",{className:"noAgentDataText",children:e})}},{key:"scrubLegend",value:function(e){return[Object(br.jsxs)("div",{className:ds.a["info-box"],children:[Object(br.jsx)("div",{children:e[0]||"--"}),Object(br.jsx)("div",{children:e[1]||"--"})]},0)]}},{key:"channelLabel",value:function(e,t,n,a){return Object(br.jsxs)("div",{className:ds.a.channelLabel,children:[Object(br.jsx)(ys,{isAvatar:!!a,url:a||n,color:t,size:fs}),Object(br.jsx)("div",{children:e})]})}},{key:"conferencePattern",value:function(e){var t=e.replace("#","%23");return["url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='10' height='32' viewBox='0 0 10 32'>","<rect fill='".concat(t,"' x='0' y='0' width='10' height='8' />"),"<circle fill='".concat(t,"' cx='5' cy='16' r='3.5' />"),"<rect fill='".concat(t,"' x='0' y='24' width='10' height='8' />"),'</svg>")'].join("")}},{key:"eventsForSentence",value:function(e,t){return Array.isArray(t)&&0!==t.length?t.filter((function(t){return e.timelineStart>=t.start&&e.timelineStart<t.end})):[]}}]),n}(a.Component);gs.defaultProps={canSetPlayhead:!1,onSetPlayhead:function(){},onStartPlaying:function(){},onRestartPlaying:function(){},plotWholeTimeline:!1,showTransport:!1,singleColor:null,children:null,hideSentenceLayer:!1,sentences:null,eventsByParticipants:null,status:void 0,displayedExperienceOption:null,leftMargin:0,isPlaying:!1,unread:[]};var js=gs,Os=function(e){return Object(br.jsx)(js,Object(u.a)({},e))};Os.defaultProps={canSetPlayhead:!0,plotWholeTimeline:!1,showTransport:!1,singleColor:null,colors:[],children:null,hideSentenceLayer:!1,sentences:null,eventsByParticipants:null,displayedExperienceOption:null,leftMargin:0,emptyText:null,isPlaying:!1};var _s=Object(s.b)((function(e){var t=e.scrub,n=e.callSummary,a=e.playback,i=a.playhead,r=a.isPlaying;return{audioTransport:gr(e),playhead:i,isPlaying:r,scrub:t,callSummary:n,timeline:Xe(e),participants:de(e),status:ye(e),sentences:ke(e),eventsByParticipants:fe(e),eventTimelineVisible:Ne(e),displayedExperienceOption:Xr(e),emptyText:Jr(e),unread:Yt(e)}}),(function(e){return{onSetPlayhead:function(t,n){e(ga(t,n))},onStartPlaying:function(){e(fa())},onRestartPlaying:function(){e({type:vt})},onHideScrubAndTimeline:function(){e(za(!1)),e(ki(!1)),e(ui(qt.onlyUnread))}}}))(Os),xs=n(39),Cs=n.n(xs),ks=function(){function e(){Object(f.a)(this,e),this.transcription={}}return Object(y.a)(e,[{key:"useData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return e?(this.transcription=e,this):(t("Invalid data"),this)}},{key:"forKey",value:function(t){return{key:t,name:e.nameForKey(t),paths:this.pathsForData(t)}}},{key:"pathsForData",value:function(e){var t=this.linesForKey(e),n={};return Object.keys(t).forEach((function(e){var a=t[e],i=a.style,r=a.data,o=a.isStepped,s=a.isFloating,c=a.isCurved,l=a.isInverted;if(0!==r.length){var u=s?"":"M".concat(r[0].x-1," ").concat(l?0:100),d=s?"":"L".concat(r[r.length-1].x+1," ").concat(l?0:100);n[e]={style:i,path:[[u],r.map((function(e,t,n){var a=[],i=s&&0===t?"M":"L";if(o&&t>0){var r=n[t-1];a.push("L".concat(e.x," ").concat(l?r.y:100-r.y))}if(c&&t>0){var u=n[t-1],d=(e.x-u.x)/2,h={first:{x:u.x+d,y:l?u.y:100-u.y},second:{x:e.x-d,y:l?e.y:100-e.y}},p=[[h.first.x,h.first.y].join(" "),[h.second.x,h.second.y].join(" "),[e.x,h.second.y]];a.push("C".concat(p.join(", ")))}else a.push("".concat(i).concat(e.x," ").concat(l?e.y:100-e.y));return a.join(" ")})),[d]].flat().filter((function(e){return e})).join(" ")}}})),n}},{key:"confidenceDataForChannel",value:function(e,t){return this.transcription&&this.transcription[e]?this.transcription[e].Words.map((function(e){return[{x:e.s,y:t.top+e.c*t.height},{x:e.e,y:t.top+e.c*t.height}]})).flat():[]}},{key:"noiseDataForChannel",value:function(e){return this.transcription&&this.transcription[e]?[{x:0,y:10},{x:400,y:5},{x:2500,y:20},{x:5e3,y:7},{x:6e4,y:17},{x:9e5,y:20}]:[]}},{key:"linesForKey",value:function(e){switch(e){case Aa:return{1:{style:"confidence",data:this.confidenceDataForChannel(1,{top:55,height:25}),isStepped:!0,isFloating:!0},2:{style:"confidence",data:this.confidenceDataForChannel(2,{top:20,height:25}),isStepped:!0,isFloating:!0}};case La:return{1:{style:"noise-primary",data:this.noiseDataForChannel(1),isCurved:!0,isInverted:!0},2:{style:"noise-secondary",data:this.noiseDataForChannel(2),isCurved:!0}};default:return{}}}}],[{key:"nameForKey",value:function(e){switch(e){case La:return"Noise";case Aa:return"Confidence";default:return""}}}]),e}(),ws=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"pathForMetric",value:function(){var e=this.props,t=e.metricType,n=e.plotWholeTimeline,a=e.transcriptionData,i=(new ks).useData(a).forKey(t),r=i.name,o=i.paths;return o&&Object.keys(o).length?Object(br.jsx)("g",{children:Object.keys(o).map((function(e){var a=o[e],i=t===La&&n?"noise":a.style;return Object(br.jsx)("path",{className:"".concat(Cs.a.plotline," ").concat(Cs.a[i]),d:a.path},e)}))},r):null}},{key:"render",value:function(){var e=this.props,t=e.scrub,n=e.plotWholeTimeline,a=e.timeline,i=Object(u.a)(Object(u.a)({},A(n,t)),{},{marginLeft:"".concat(a.transcriptionOffsetPercentage(),"%")});return Object(br.jsx)("div",{className:Cs.a.LayerContent,style:i,children:Object(br.jsx)("svg",{width:"100%",height:"100%",viewBox:R(a),preserveAspectRatio:"none",children:this.pathForMetric()})})}}],[{key:"scrubLegend",value:function(e){return[Object(br.jsx)("div",{className:Cs.a["key-info-box"],children:Object(br.jsx)("div",{className:Cs.a[e],children:ks.nameForKey(e)})},0)]}}]),n}(a.Component);ws.defaultProps={plotWholeTimeline:!1};var Ss=ws;function Ts(e){var t=e.metricType,n=e.scrub,a=e.plotWholeTimeline,i=e.timeline,r=e.transcriptionData;return Object(br.jsx)(Ss,{timeline:i,metricType:t,scrub:n,plotWholeTimeline:a,transcriptionData:r})}Ts.defaultProps={plotWholeTimeline:!1};var Ns=Object(s.b)((function(e){return{scrub:e.scrub,timeline:Xe(e),transcriptionData:xe(e)}}))(Ts),Es=(n(85),function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).state={isDragging:{start:!1,end:!1},isMoving:!1,didDrag:!1},a.handleMouseDown=a.handleMouseDown.bind(Object(rr.a)(a)),a.handleClick=a.handleClick.bind(Object(rr.a)(a)),a.handleScroll=a.handleScroll.bind(Object(rr.a)(a)),a}return Object(y.a)(n,[{key:"noAgentDataState",value:function(e){var t=this.props.emptyText;return Object(br.jsx)("section",{className:"Scrubber",id:e,children:Object(br.jsx)("div",{className:"timeline-scrubber-container empty",children:t})})}},{key:"componentDidMount",value:function(){this.node=null,window.addEventListener("mouseup",this.handleClick.bind(this)),window.addEventListener("mousemove",this.handleMouseMove.bind(this))}},{key:"componentWillUnmount",value:function(){this.node=null,window.removeEventListener("mouseup",this.handleClick.bind(this)),window.removeEventListener("mousemove",this.handleMouseMove.bind(this))}},{key:"setDragState",value:function(e,t,n,a){this.setState({isDragging:{start:e,end:t},isMoving:n,didDrag:a})}},{key:"setScrub",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.state,a=n.isMoving,i=n.isDragging,r=this.props,o=r.scrub,s=r.onScrubDragged;if(a){var c=o.end-o.start,l=t?Math.max(e-c/2,0):Math.max(e-this.pointerOffset,0),u=t?Math.min(e+c/2,100):Math.min(e-this.pointerOffset+c,100);this.updateScrubState({start:Math.min(l,100-c),end:Math.max(u,c)}),t||"function"===typeof s&&s()}else{var d=i.start?Math.min(o.end-.1,e):o.start,h=i.end?Math.max(o.start+.1,e):o.end;this.updateScrubState({start:Math.max(0,d),end:Math.min(100,h)})}}},{key:"updateScrubState",value:function(e){var t=this.props.onScrubPositionChange;"function"===typeof t?t(Object(u.a)(Object(u.a)({},e),{},{isUserModified:this.isUserModifyingScrub()})):this.scrub=e}},{key:"updatePlayhead",value:function(e){var t=this.props.onSetPlayhead;if("function"===typeof t){var n=this.node.getBoundingClientRect(),a=100/n.width*(e.pageX-n.x);this.setScrub(a,!0),t(a,!0)}}},{key:"scrubPercentage",value:function(e){if(!(this.node instanceof HTMLElement))return 0;var t=this.node.getBoundingClientRect(),n=t.x,a=e.pageX-n;return 100/t.width*a}},{key:"handleMouseDown",value:function(e){this.node=e.target;var t=this.scrubPercentage(e),n=this.props,a=n.scrub,i=n.onSetPlayhead;t<2&&i(.7,!0);var r=Math.min(t-a.start,2),o=Math.min(a.end-t,2);switch(!0){case r<2&&r>-3:this.setDragState(!0,!1,!1,!0);break;case o<2&&o>-3:this.setDragState(!1,!0,!1,!0);break;default:this.pointerOffset=t-a.start,this.setDragState(!1,!1,!0,!1)}}},{key:"handleMouseMove",value:function(e){this.node instanceof HTMLElement&&0!==e.buttons&&this.setScrub(this.scrubPercentage(e))}},{key:"handleClick",value:function(e){var t=this.state.didDrag;this.node instanceof HTMLElement&&!t?(this.hold=clearTimeout(this.hold),this.updatePlayhead(e),this.node=null):this.node=null}},{key:"handleScroll",value:function(e){var t=this.props.scrub;this.handleClick(e);var n;e.deltaY<0?n=-.5:e.deltaY>0&&(n=.5);var a={start:Math.max(0,t.start-n),end:Math.min(100,t.end+n)};a.start>a.end||this.updateScrubState(a)}},{key:"isUserModifyingScrub",value:function(){var e=this.state,t=e.isDragging,n=e.isMoving;return t.left||t.right||n}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.status,a=e.scrub,i=e.children,r=e.isVisible;if(n===nt)return null;if(n===it)return this.noAgentDataState(t);if(!r)return null;var o="".concat(a.start,"%"),s="".concat(100-a.end,"%");return Object(br.jsx)("section",{className:"Scrubber",id:t,children:Object(br.jsx)("div",{role:"button",tabIndex:0,className:"timeline-scrubber-container",onMouseDown:this.handleMouseDown,children:Object(br.jsxs)("div",{role:"button",tabIndex:0,className:"timeline-scrubber",children:[Object(br.jsx)("div",{className:"scrub-window",style:{marginLeft:o,marginRight:s}}),Object(br.jsx)("div",{className:"scrub-content",children:i}),Object(br.jsxs)("div",{className:"scrub-control",style:{marginLeft:o,marginRight:s},children:[Object(br.jsx)("div",{className:"scrub-handle left",children:Object(br.jsx)("svg",{width:"2px",height:"16px",viewBox:"0 0 2 16",children:Object(br.jsx)("rect",{x:"0",y:"0",rx:"1",ry:"1",width:"2",height:"16",style:{fill:"white",stroke:"none"}})})}),Object(br.jsx)("div",{className:"scrub-handle right",children:Object(br.jsx)("svg",{width:"2px",height:"16px",viewBox:"0 0 2 16",children:Object(br.jsx)("rect",{x:"0",y:"0",rx:"1",ry:"1",width:"2",height:"16",style:{fill:"white",stroke:"none"}})})})]})]})})})}}]),n}(a.Component));Es.defaultProps={id:void 0,status:void 0,onScrubPositionChange:void 0,onSetPlayhead:void 0,onScrubDragged:void 0,emptyText:null};var Is=Es;function Ps(e){var t=e.id,n=e.children,a=e.scrub,i=e.status,r=e.onScrubPositionChange,o=e.onSetPlayhead,s=e.onScrubDragged,c=e.isVisible,l=e.emptyText;return Object(br.jsx)(Is,{id:t,status:i,scrub:a,onScrubPositionChange:r,onSetPlayhead:o,onScrubDragged:s,isVisible:c,emptyText:l,children:n})}Ps.defaultProps={id:void 0,emptyText:null};var Ls=Object(s.b)((function(e){return{scrub:e.scrub,status:ye(e),isVisible:Te(e),emptyText:Jr(e)}}),(function(e){return{onSetPlayhead:function(t,n){e(ga(t,n))},onScrubPositionChange:function(t){e(ba(t))},onScrubDragged:function(){e(va())}}}))(Ps),As=n(19),Rs=n.n(As),Ms=n.p+"static/media/icon-answer.b4e2108d.svg",Ds=n.p+"static/media/icon-waiting.88d74cc5.svg",Us=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"eventElements",value:function(e,t){var a=this.props,i=a.scrub,r=a.timeline,o=a.plotWholeTimeline,s=a.activeLayers,c=a.status.isDisplaying.routing,l={start:r.start+r.range*i.start/100,end:r.start+r.range*i.end/100},d=.02*(l.end-l.start);return Object.keys(e).map((function(a){return t[a].events.filter(n.filterRoutingEvents(c)).filter(n.filterSelectedEvents(!o,s)).map((function(t,i){var s=t.startFlags,c=s.isHold,h=s.isBridge,p=s.isUnBridge,m=s.isRecordStop,f=s.isParkedTransfer,v=s.isRouting,b=s.isSecondary,y=s.isChannelStart,g=s.isChannelRing;if(p||v)return null;var j=o||c||m,O=o||c||m||h,_=b?55:18,x=Ar()(Object(u.a)(Object(u.a)({},n.markerLineClasses(t)),{},{[Rs.a.small]:!0,[Rs.a.eventContainer]:!0})),C=l.start,k=l.end,w=t.start<C&&t.end>C?C:t.start,S=t.end>k&&t.start<k?k:t.end,T=Object(u.a)(Object(u.a)({},n.markerLineStyles(t,e[a])),{},{left:I(w,r),width:L(w,S,r),textAlign:"center"}),N=Ar()({[Rs.a.event]:!0,[Rs.a.transfer]:f,[Rs.a.hold]:c,[Rs.a.pause]:m,[Rs.a.start]:y,[Rs.a.ring]:g,[Rs.a.bridge]:h,[Rs.a.wholeTimeline]:o}),E={top:"".concat(j?0:_,"%"),height:"".concat(j?100:28,"%"),borderRadius:"".concat(j?"0":"4px")},P={top:"".concat(j?0:_+8,"%")},A={top:"".concat(O?0:_+8,"%")},R=t.duration>0&&t.duration<d;if(!o&&R){var M=n.iconImageForEvent(t,!0),D=n.iconImageForEvent(t,!1);null!==M&&null!==D||(R=!1)}return Object(br.jsxs)("div",{className:x,style:T,children:[Object(br.jsx)("div",{className:N,style:E},"event-".concat(i,"-").concat(t.event).concat(t.start).concat(t.end)),!o&&!R&&n.icon(t,!0,{"translate-r50":w===C,[Rs.a.iconLevel]:!0},P),!o&&n.icon(t,!1,{"translate-l50":S===k,[Rs.a.iconLevel]:!0},A,R)]},"container-".concat(i,"-").concat(t.event).concat(t.start).concat(t.end))}))}))}},{key:"routingOverlay",value:function(){var e=this.props,t=e.participants,n=e.eventsByParticipants,a=e.keyCallers,i=e.timeline,r=Ar()({[Rs.a.routing]:!0,[Rs.a.primary]:!0}),o=Ar()({[Rs.a.routing]:!0,[Rs.a.secondary]:!0});if(!t||!n)return null;var s=n[Object.keys(t).filter((function(e){return t[e].isPrimary})).shift()].events.sort((function(e,t){return e.start>t.start})),c=Object(Fe.a)(s,1)[0];if(!c)return null;var l={width:P(c.start,i)},u={borderColor:a.colors?a.colors[0]:"#000"},d={borderColor:a.colors?a.colors[1]:"#000"};return Object(br.jsxs)("div",{className:Rs.a.routingOverlay,style:l,children:[Object(br.jsx)("div",{className:r,style:u}),Object(br.jsx)("div",{className:Rs.a.unrecordedTimeLabel,children:"Unrecorded call time"}),Object(br.jsx)("div",{className:o,style:d})]})}},{key:"render",value:function(){var e=this.props,t=e.plotWholeTimeline,n=e.scrub,a=e.participants,i=e.eventsByParticipants,r=e.status,o=r.status,s=r.isDisplaying.routing;if(o!==at)return null;var c=null!==i?this.eventElements(a,i):null,l=!t&&s?this.routingOverlay():null;return Object(br.jsxs)("div",{className:Rs.a.LayerContent,style:A(t,n),children:[c,l]})}}],[{key:"iconImage",value:function(e,t){var n=e.isHold,a=e.isParkedTransfer,i=e.isConferenceIn,r=e.isRecordStart,o=e.isRecordStop,s=e.isChannelAnswer,c=e.isChannelRing,l=e.isCallStart,u=e.isBridge;switch(!0){case a&&t:case n:return Yo;case i:return Xo;case t&&o:return Jo;case s:return Ms;case!t&&c:return Ds;case u&&!t:return qo;case!t&&o:case t&&c:case l&&t:case r:default:return null}}},{key:"iconLabel",value:function(e){var t=e.isBridge,n=e.isChannelStart,a=e.isChannelRing,i=e.isChannelAnswer,r=e.isChannelEnd,o=e.isChannelComplete,s=e.isConferenceIn,c=e.isConferenceOut,l=e.isHold,u=e.isListenIn,d=e.isListenInBarge,h=e.isListenInDisconnect,p=e.isListenInWhisper,m=e.isParkOtherForTransfer,f=e.isParkedTransfer,v=e.isQueuing,b=e.isRecordStart,y=e.isRecordStop,g=e.isRequestOnHold,j=e.isRequestUnHold,O=e.isRouting,_=e.isUnBridge,x=e.isUnHold;switch(!0){case n:return"Channel start";case a:return"Channel ring";case i:return"Channel answer";case r:return"Channel end";case o:return"Channel complete";case s:return"Conference";case c:return"Conference end";case l:return"On Hold";case x:return"Un-hold";case g:return"On hold";case j:return"Un-hold";case b:return"Un-pause";case y:return"Pause";case f:case m:return"Start transfer";case t:return"Complete Transfer";case u:return"Listen in";case d:return"Barge";case h:return"Listen in end";case p:return"Whisper";case v:return"Queueing";case O:return"Routing";case _:return"Disconnect";default:return Object.keys(e).join(" ")}}},{key:"iconImageForEvent",value:function(e,t){var a=t?e.startFlags:e.endFlags;return n.iconImage(a,t)}},{key:"icon",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=t?e.startFlags:e.endFlags,s=Ar()(Object(u.a)(Object(u.a)({},a),{},{[Rs.a.startIcon]:t,[Rs.a.endIcon]:!t&&!r,[Rs.a.microClusteredEndIcon]:!t&&r})),c=n.iconImage(o,t);if(null===c)return null;var l=n.iconLabel(o,t);if(!r)return Object(br.jsx)("img",{src:c,className:s,style:i,"data-tooltip":l,alt:l});var d=n.iconLabel(e.startFlags,!0);l="".concat(d,"<br/>").concat(l);var h=Ar()({[Rs.a.microClusteredEndIconContainer]:!0});return Object(br.jsx)("div",{className:h,style:i,children:Object(br.jsx)("img",{src:c,className:s,style:i,"data-tooltip":l,alt:l})})}},{key:"markerLineClasses",value:function(e){var t=e.startFlags,n=e.endFlags;return{[Rs.a.markerLines]:!0,[Rs.a.leftLine]:!0===t.isParkedTransfer,[Rs.a.rightLine]:!0===n.isBridge}}},{key:"markerLineStyles",value:function(e,t){var n=e.startFlags,a=e.endFlags;return{borderLeftColor:!0===n.isParkedTransfer?t.color:"#000",borderRightColor:!0===a.isBridge?t.color:"#000"}}},{key:"filterRoutingEvents",value:function(e){return function(t){return!!e||!0!==t.endFlags.isChannelAnswer&&!0!==t.endFlags.isChannelRing}}},{key:"filterRequiredForEvent",value:function(e){var t=e.startFlags;switch(!0){case!0===t.isHold:return Fa;case!0===t.isParkedTransfer:case!0===t.isBridge:return Ka;case!0===t.isListenIn||!0===t.isListenInBarge||!0===t.isListenInWhisper:return Ha;case!0===t.isQueuing:return Wa;case!0===t.isCsStateChange:return Va;default:return null}}},{key:"filterSelectedEvents",value:function(e,t){return function(a){return!!e||(null==n.filterRequiredForEvent(a)||t.includes(n.filterRequiredForEvent(a)))}}}]),n}(a.Component);Us.defaultProps={padding:10,plotWholeTimeline:!1,keyCallers:{},activeLayers:[]};var Bs=Us;function Fs(e){var t=e.data,n=e.padding,a=e.scrub,i=e.status,r=e.plotWholeTimeline,o=e.timeline,s=e.participants,c=e.eventsByParticipants,l=e.keyCallers,u=e.activeLayers;return Object(br.jsx)(Bs,{timeline:o,data:t,scrub:a,status:i,padding:n,plotWholeTimeline:r,participants:s,eventsByParticipants:c,keyCallers:l,activeLayers:u})}Fs.defaultProps={padding:10,plotWholeTimeline:!1,eventsByParticipants:null,activeLayers:[]};var Ks=Object(s.b)((function(e){return{data:e.data,scrub:e.scrub,status:e.status,activeLayers:e.activeLayers,timeline:Xe(e),participants:de(e),eventsByParticipants:fe(e),keyCallers:Re(e)}}))(Fs);function Hs(e){var t=e.activeLayers,n=e.onScrubberMoved;return[La,Aa].filter((function(e){return t.includes(e)})).map((function(e){return Object(br.jsx)(Ls,{id:"metrics-scrubber-".concat(e),infoSection:Ss.scrubLegend(e),time:" ",onScrubPositionChange:n,children:Object(br.jsxs)(_s,{plotWholeTimeline:!0,hideSentenceLayer:!0,children:[Object(br.jsx)(Ks,{plotWholeTimeline:!0}),Object(br.jsx)(Ns,{plotWholeTimeline:!0,metricType:e})]})},e)}))}Hs.propTypes={activeLayers:lr.isRequired,onScrubberMoved:cr.a.func.isRequired};var Ws=Hs;var Vs=Object(s.b)((function(e){return{activeLayers:e.activeLayers}}),(function(e){return{onScrubberMoved:function(t){e(ba(t))}}}))((function(e){var t=e.activeLayers,n=e.onScrubberMoved;return Object(br.jsx)(Ws,{activeLayers:t,onScrubberMoved:n})})),Gs=n(9),Ys=n.n(Gs),Xs=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;Object(f.a)(this,n),(a=t.call(this,e)).container=i.a.createRef();var r=e.time;return a.state={dropDownOpen:!1,time:r},a.timePickerConfig=[{id:"hours",ref:i.a.createRef(),max:23,spacer:":"},{id:"minutes",ref:i.a.createRef(),max:59,spacer:":"},{id:"seconds",ref:i.a.createRef(),max:59,spacer:null}],a.toggleDropDown.bind(Object(rr.a)(a)),a.handleClickOutside=a.handleClickOutside.bind(Object(rr.a)(a)),a}return Object(y.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"handleClickOutside",value:function(e){if(this.container.current&&!this.container.current.contains(e.target)){var t=this.state,n=t.time,a=t.dropDownOpen,i=this.props.setTime;a&&i(n),this.setState({dropDownOpen:!1})}}},{key:"toggleDropDown",value:function(){var e=this.props,t=e.timeChecked,n=e.canEdit;t&&n?this.setState((function(e){return{dropDownOpen:!e.dropDownOpen}})):this.setState({dropDownOpen:!1})}},{key:"handleLoseFocus",value:function(e,t){var n=e.id,a=e.ref,i=e.max,r=this.state.time,o=t.target.value.replace(/\D/,"");o.length>2&&(o=o.substr(0,2)),o=Math.min(o,i),o=Math.max(o,0),this.setState({time:Object(u.a)(Object(u.a)({},r),{},{[n]:String(o).padStart(2,0)})}),a.current.value=String(o).padStart(2,0)}},{key:"increment",value:function(e){var t=e.id,n=e.ref,a=e.max,i=this.state.time,r=parseInt(n.current.value,10)+1;r>a&&(r=0);var o=String(r).padStart(2,0);this.setState({time:Object(u.a)(Object(u.a)({},i),{},{[t]:o})}),n.current.value=o}},{key:"decrement",value:function(e){var t=e.id,n=e.ref,a=e.max,i=this.state.time,r=parseInt(n.current.value,10)-1;r<0&&(r=a);var o=String(r).padStart(2,0);this.setState({time:Object(u.a)(Object(u.a)({},i),{},{[t]:o})}),n.current.value=o}},{key:"render",value:function(){var e=this,t=this.state,a=t.time,i=t.dropDownOpen,r=this.props.timeChecked?"".concat(a.hours," : ").concat(a.minutes," : ").concat(a.seconds):"N/A";return Object(br.jsxs)("div",{className:"".concat(Ys.a.dropdown," ").concat(Ys.a.timeDropdown),ref:this.container,children:[Object(br.jsx)("div",{onClick:function(){return e.toggleDropDown()},children:Object(br.jsx)("div",{children:r})}),i&&Object(br.jsx)("div",{className:Ys.a.timePicker,children:this.timePickerConfig.map((function(t){return[Object(br.jsxs)("div",{className:Ys.a.numberPicker,children:[Object(br.jsx)("button",{type:"button",className:Ys.a.upButton,onClick:e.increment.bind(e,t)},t.id),Object(br.jsx)("input",{ref:t.ref,type:"number",className:Ys.a.numberInput,defaultValue:a[t.id],onInput:n.handleTextChange.bind(e),onKeyDown:n.handleKeyPress.bind(e),onBlur:e.handleLoseFocus.bind(e,t)},"".concat(t.id,"Input")),Object(br.jsx)("button",{type:"button",className:Ys.a.downButton,onClick:e.decrement.bind(e,t)},"".concat(t.id,"Button"))]},"".concat(t.id,"Picker")),null!==t.spacer?Object(br.jsx)("div",{children:t.spacer},"".concat(t.id,"Spacer")):""]}))},"timePickerContent")]})}}],[{key:"handleKeyPress",value:function(e){"Enter"===e.key&&e.target.blur()}},{key:"handleTextChange",value:function(e){var t=e.target;t.value=t.value.replace(/\D/,""),t.value.length>2&&(t.value=t.value.substr(0,2))}}]),n}(a.Component),Js=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).container=i.a.createRef(),a.state={dropDownOpen:!1},a.toggleDropDown=a.toggleDropDown.bind(Object(rr.a)(a)),a.handleClickOutside=a.handleClickOutside.bind(Object(rr.a)(a)),a}return Object(y.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"shouldComponentUpdate",value:function(e,t,n){var a=this.props.selectedUser,i=this.state.dropDownOpen;return a!==e.selectedUser||i!==t.dropDownOpen}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"handleClickOutside",value:function(e){this.container.current&&!this.container.current.contains(e.target)&&this.setState({dropDownOpen:!1})}},{key:"handleUserClick",value:function(e){var t=this.props.handleUserClick;this.toggleDropDown(),t(e)}},{key:"toggleDropDown",value:function(){var e=this.props,t=e.isShared,n=e.canEdit;t||n?this.setState((function(e){return{dropDownOpen:!e.dropDownOpen}})):this.setState({dropDownOpen:!1})}},{key:"relatingToList",value:function(){var e=this;return this.props.userList.map((function(t){var n=Object(br.jsx)(ys,{isAvatar:!!t.avatar,url:t.avatar||t.icon,color:t.color});return Object(br.jsxs)("div",{className:"".concat(Ys.a.dropdownItem," ").concat(Ys.a.dropdownItemWithIcon),onClick:e.handleUserClick.bind(e,t),children:[Object(br.jsx)("div",{className:Ys.a.dropdownItemIcon,children:n}),t.title]},t.uuid)}))}},{key:"createUserButton",value:function(){var e,t=this,n=this.props.selectedUser;if(n){var a=Object(br.jsx)(ys,{isAvatar:!!n.avatar,url:n.avatar||n.icon,color:n.color});e=Object(br.jsxs)("div",{className:Ys.a.dropdownButtonWithIcon,onClick:function(){return t.toggleDropDown()},children:[Object(br.jsx)("div",{className:Ys.a.dropdownButtonIcon,children:a}),n.title]})}else e=Object(br.jsx)("div",{className:Ys.a.dropdownButton,onClick:function(){return t.toggleDropDown()},children:"Please choose"});return e}},{key:"render",value:function(){var e=this.createUserButton(),t=this.state.dropDownOpen;return Object(br.jsxs)("div",{className:Ys.a.dropdown,ref:this.container,children:[e,t&&Object(br.jsx)("div",{className:Ys.a.dropdownContent,children:this.relatingToList()})]})}}],[{key:"svgCircle",value:function(e,t){return"undefined"!==t?"<svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'><circle fill='".concat(e.replace(/#/,"%23"),"' id='a' cx='12' cy='12' r='9' /><image width=\"24px\" height=\"24px\" x=\"6px\" y=\"4px\" href='").concat(t,"'/></svg>"):"<svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'><circle fill='".concat(e.replace(/#/,"%23"),"' id='a' cx='12' cy='12' r='9' /></svg>")}}]),n}(a.Component);Js.defaultProps={selectedUser:null};var qs=Js,zs=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).container=i.a.createRef(),a.state={dropDownOpen:!1},a.toggleDropDown=a.toggleDropDown.bind(Object(rr.a)(a)),a.handleClickOutside=a.handleClickOutside.bind(Object(rr.a)(a)),a}return Object(y.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"handleClickOutside",value:function(e){this.container.current&&!this.container.current.contains(e.target)&&this.setState({dropDownOpen:!1})}},{key:"handleTypeClick",value:function(e){var t=this.props.handleTypeClicked;this.toggleDropDown(),t(e)}},{key:"toggleDropDown",value:function(){this.props.canEdit?this.setState((function(e){return{dropDownOpen:!e.dropDownOpen}})):this.setState({dropDownOpen:!1})}},{key:"createTypeButton",value:function(){var e,t=this,n=this.props,a=n.selectedTypeId,i=n.eventTypesList.find((function(e){return e.id===a}));if(i){e=Object(br.jsx)("div",{style:{backgroundRepeat:"no-repeat, no-repeat",backgroundPosition:"left 0px top 50%, right 8px top 50%, 0 0",backgroundSize:"18px 18px"},className:Ys.a.dropdownButton,onClick:function(){return t.toggleDropDown()},children:i.text})}else e=Object(br.jsx)("div",{className:Ys.a.dropdownButton,onClick:function(){return t.toggleDropDown()},children:"Please choose"});return e}},{key:"renderTypeList",value:function(){var e=this;return this.props.eventTypesList.map((function(t){var n={backgroundImage:"url(".concat(t.icon,")"),backgroundRepeat:"no-repeat, repeat",backgroundPosition:"right 8px top 50%, 0 0"};return Object(br.jsx)("div",{style:n,className:Ys.a.dropdownItem,onClick:e.handleTypeClick.bind(e,t.id),children:t.text},t.id)}))}},{key:"render",value:function(){var e=this.createTypeButton(),t=this.state.dropDownOpen;return Object(br.jsxs)("div",{className:Ys.a.dropdown,ref:this.container,children:[e,t&&Object(br.jsx)("div",{className:Ys.a.dropdownContent,children:this.renderTypeList()})]})}}]),n}(a.Component);zs.defaultProps={selectedTypeId:null};var Qs=zs,Zs=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;Object(f.a)(this,n),a=t.call(this,e);var r=e.primaryUuid,o=e.notes,s=e.timeline,c=e.playhead,l=e.meId,u=e.meName,d=e.participants,h=o.editMode,p=o.commentToEdit,m=o.notes.find((function(e){return e.noteId===o.noteToEdit})),v=m?le(m.thread,p):null;m&&Number.isNaN(m.timestamp)&&(m.timestamp=null);var b,y=m?m.timestamp:s.range*c/100,g=y/1e6,j=Math.floor(g/3600),O=Math.floor(g%3600/60),_=Math.floor(g%60);return a.userList=n.createUserList(d),b=!!ri.isNew(h)||(ri.isComment(h)?v.author.toString()===l:m.author.toString()===l),ri.isExistingItem(h)?a.state={noteId:m.noteId,selectedUser:m.uuid?a.userList.find((function(e){return e.uuid===m.uuid})):null,typeId:m.eventType,text:ri.isNote(h)?m.text:v.comment,timestamp:y,time:{seconds:String(_).padStart(2,0),minutes:String(O).padStart(2,0),hours:String(j).padStart(2,0)},author:m.author,authorName:m.authorName,timeChecked:null!==y,shareChecked:!!m.isShared,acknowledgeChecked:!!m.isAcknowledged,canShare:m.canShare,isAcknowledged:!!m.isAcknowledged,canAcknowledge:m.canAcknowledge,isShared:!!m.isShared,channelUuid:m.channelUuid,canEdit:b&&!m.isAcknowledged,thread:m.thread,polarity:m.polarity,userActivity:m.userActivity,version:m.version}:a.state={noteId:We(),selectedUser:null,typeId:null,text:"",timestamp:y,canShare:o.canShare,shareChecked:!0,acknowledgeChecked:!1,isAcknowledged:!1,canAcknowledge:!1,isShared:!1,time:{seconds:String(_).padStart(2,0),minutes:String(O).padStart(2,0),hours:String(j).padStart(2,0)},author:l,authorName:u,timeChecked:!0,channelUuid:r,canEdit:!0,thread:[],polarity:"Neutral",userActivity:[],version:1},a.typeList=o.eventTypes,a.timePickerConfig=[{id:"hours",ref:i.a.createRef(),max:23,spacer:":"},{id:"minutes",ref:i.a.createRef(),max:59,spacer:":"},{id:"seconds",ref:i.a.createRef(),max:59,spacer:null}],a.handleAddNoteClicked=a.handleAddNoteClicked.bind(Object(rr.a)(a)),a.handleDeleteNoteClicked=a.handleDeleteNoteClicked.bind(Object(rr.a)(a)),a.setTime=a.setTime.bind(Object(rr.a)(a)),a.handleUserClick=a.handleUserClick.bind(Object(rr.a)(a)),a.handleTypeClick=a.handleTypeClick.bind(Object(rr.a)(a)),a.handlePolarityClick=a.handlePolarityClick.bind(Object(rr.a)(a)),a.handleSubmitClicked=a.handleSubmitClicked.bind(Object(rr.a)(a)),a.handleAddCommentClicked=a.handleAddCommentClicked.bind(Object(rr.a)(a)),a.handleDeleteCommentClicked=a.handleDeleteCommentClicked.bind(Object(rr.a)(a)),a}return Object(y.a)(n,[{key:"setTime",value:function(e){this.setState({time:e})}},{key:"handleUserClick",value:function(e){this.setState({selectedUser:e})}},{key:"handleTypeClick",value:function(e){this.setState({typeId:e})}},{key:"handlePolarityClick",value:function(e){this.setState({polarity:e})}},{key:"handleTextUpdate",value:function(e){this.setState({text:e.target.value})}},{key:"handleEventTimeChecked",value:function(e){this.setState({timeChecked:e.target.checked})}},{key:"handleShareNote",value:function(e){this.setState({shareChecked:e.target.checked})}},{key:"handleAcknowledgeNote",value:function(e){this.setState({acknowledgeChecked:e.target.checked})}},{key:"handleSubmitClicked",value:function(){var e=this.props.notes.editMode;ri.isNote(e)?this.handleAddNoteClicked():ri.isComment(e)&&this.handleAddCommentClicked()}},{key:"handleAddNoteClicked",value:function(){var e=this.props,t=e.onUpdateNote,n=e.timeline,a=this.state,i=a.noteId,r=a.selectedUser,o=a.typeId,s=a.text,c=a.timestamp,l=a.time,u=a.author,d=a.authorName,h=a.timeChecked,p=a.channelUuid,m=a.shareChecked,f=a.canShare,v=a.thread,b=a.polarity,y=a.userActivity,g=a.version;if(null!==o)if(null!==r&&void 0!==r){var j=null;if(h&&(j=c%1e6,(j=Number(j+36e8*l.hours+6e7*l.minutes+1e6*l.seconds))>n.range))window.alert("The time is greater than the recording length");else t({noteId:i,uuid:r.uuid,timestamp:j,eventType:o,author:u,authorName:d,text:s,isShared:r.uuid!==oo&&m,channelUuid:p,canShare:f,thread:v,polarity:b,userActivity:y,version:g})}else window.alert("You must specify who the note relates to");else window.alert("You must specify an event type")}},{key:"handleAddCommentClicked",value:function(){var e=this.props,t=e.notes,n=t.editMode,a=t.notes,i=t.noteToEdit,r=t.commentToEdit,o=e.onUpdateNote,s=e.meId,c=e.meName,l=this.state.text,d=(new Date).toISOString(),h=a.find((function(e){return e.noteId===i}));if(h){var p=ri.isNew(n)?[].concat(Object(oe.a)(h.thread),[{uuid:We(),comment:l,created:d,modified:d,author:s,authorName:c}]):h.thread.map((function(e){return Object(u.a)(Object(u.a)({},e),e.uuid===r?{comment:l,modified:d}:null)}));o(Object(u.a)(Object(u.a)({},h),{},{thread:p}),d)}}},{key:"handleDeleteNoteClicked",value:function(){var e=this.state.noteId;(0,this.props.onDeleteNote)(e)}},{key:"handleDeleteCommentClicked",value:function(){var e=this.props,t=e.notes,n=t.noteToEdit,a=t.commentToEdit;(0,e.onDeleteComment)(n,a)}},{key:"titleForEditMode",value:function(e){switch(e){case ri.existingNote:return"Edit note";case ri.newComment:return"Replying to:";case ri.existingComment:return"Edit reply to:";default:return"New note"}}},{key:"buttonTextForEditMode",value:function(e){switch(e){case ri.existingNote:return"Update note";case ri.newComment:return"Add comment";case ri.existingComment:return"Update comment";default:return"Add note"}}},{key:"commentToReplyTo",value:function(e,t){var n=e.editMode,a=e.noteToEdit,i=e.commentToEdit,r=e.notes.find((function(e){return e.noteId===a})),o=le(r.thread,i),s=e.eventTypes.find((function(e){return e.id===r.eventType})),c=t(r.uuid).color,l=n===ri.newComment?r:Object(u.a)(Object(u.a)({},r),{},{thread:r.thread.filter((function(e,t){return t<r.thread.indexOf(o)}))});return Object(br.jsx)("div",{className:Ys.a.threadContainer,children:Object(br.jsx)(go,{event:s,color:c,note:l,id:a,interactive:!1})})}},{key:"render",value:function(){var e=this.props,t=e.notes,n=e.onCloseNoteEditor,a=e.meId,i=e.participants,r=e.getParticipantById,o=t.showEditModal,s=t.editMode,c=this.state,l=c.selectedUser,u=c.typeId,d=c.polarity,h=c.text,p=c.time,m=c.timeChecked,f=c.shareChecked,v=c.acknowledgeChecked,b=c.canShare,y=c.isAcknowledged,g=c.isShared,j=c.canAcknowledge,O=c.canEdit,_=c.authorName,x=this.titleForEditMode(s),C=this.buttonTextForEditMode(s),k=_,w=b;w=!!l&&(l.uuid!==oo&&(b&&l&&l.userId!==Number(a)));var S="Add a comment to this event...",T=[];O||T.push(Ys.a.modalBodyDisabled);var N=Ar()({[Ys.a.mask]:!0,"ignore-nodestack":!0});return Object(br.jsx)("div",{className:N,children:Object(br.jsxs)("div",{className:Ys.a.NoteModal,style:{opacity:o?"1":"0"},children:[Object(br.jsxs)("div",{className:Ys.a.modalHeader,children:[Object(br.jsx)("div",{className:Ys.a.title,children:x}),k&&Object(br.jsx)("div",{children:"Added by ".concat(k)})]}),Object(br.jsxs)("div",{className:Ys.a.modalBody,children:[ri.isNote(s)&&Object(br.jsxs)("div",{className:[].concat(T,[Ys.a.noteDetailsContainer]).join(" "),children:[Object(br.jsxs)("div",{className:Ys.a.detailColumn,id:Ys.a.timeDetailColumn,children:[Object(br.jsx)("div",{className:Ys.a.checkboxContainer,children:Object(br.jsxs)("label",{className:Ys.a.checkboxLabel,htmlFor:"eventTimeCheckbox",children:["Event time:",Object(br.jsx)("input",{className:Ys.a.checkbox,type:"checkbox",id:"eventTimeCheckbox",onChange:this.handleEventTimeChecked.bind(this),checked:m,disabled:!O})]})}),Object(br.jsx)(Xs,{time:p,timeChecked:m,canEdit:O,setTime:this.setTime})]}),Object(br.jsxs)("div",{className:Ys.a.detailColumn,id:Ys.a.userDetailColumn,children:[Object(br.jsx)("div",{children:"Relating to:"}),Object(br.jsx)(qs,{participants:i,selectedUser:l,canEdit:O,isShared:g,handleUserClick:this.handleUserClick,userList:this.userList})]}),Object(br.jsxs)("div",{className:Ys.a.detailColumn,id:Ys.a.relatingToDetailColumn,children:[Object(br.jsx)("div",{children:"Type of event:"}),Object(br.jsx)(Qs,{selectedTypeId:u,eventTypesList:this.typeList,canEdit:O,handleTypeClicked:this.handleTypeClick})]}),Object(br.jsxs)("div",{className:Ys.a.detailColumn,id:Ys.a.polarityDetailColumn,children:[Object(br.jsx)("div",{children:"Polarity:"}),Object(br.jsx)(Qs,{selectedTypeId:d,eventTypesList:t.polarityTypes,canEdit:O,handleTypeClicked:this.handlePolarityClick})]})]}),ri.isComment(s)&&this.commentToReplyTo(t,r),Object(br.jsx)("div",{className:[].concat(T,[Ys.a.noteTextContainer]).join(" "),children:Object(br.jsx)("textarea",{value:Ve(h),name:"noteDetails",className:Ys.a.noteDetails,rows:"5",onChange:this.handleTextUpdate.bind(this),placeholder:S,onFocus:function(e){e.target.placeholder=""},onBlur:function(e){e.target.placeholder=S},disabled:!O})}),j&&Object(br.jsx)("div",{className:Ys.a.shareContainer,children:y?Object(br.jsx)("p",{children:"Note Acknowledged"}):Object(br.jsxs)("label",{className:Ys.a.checkboxLabel,htmlFor:"acknowledgeCheckbox",children:["Acknowledge you have received this note",Object(br.jsx)("input",{className:[Ys.a.checkbox,Ys.a.checkbox2].join(" "),type:"checkbox",id:"acknowledgeCheckbox",onChange:this.handleAcknowledgeNote.bind(this),checked:v})]})}),l&&Object(br.jsxs)("div",{className:Ys.a.shareContainer,children:[w&&!g&&Object(br.jsxs)("label",{className:Ys.a.checkboxLabel,htmlFor:"shareCheckbox",children:["Share notes with ".concat(l.title,"?"),Object(br.jsx)("input",{className:[Ys.a.checkbox,Ys.a.checkbox2].join(" "),type:"checkbox",id:"shareCheckbox",onChange:this.handleShareNote.bind(this),checked:f})]}),g&&Object(br.jsxs)("p",{children:["Note has been shared with ".concat(l.title),y&&" and has been acknowledged"]})]})]}),Object(br.jsxs)("div",{className:Ys.a.modalFooter,children:[!!ri.isExistingItem(s)&&O&&Object(br.jsxs)("button",{type:"button",className:Ys.a.deleteButton,onClick:ri.isComment(s)?this.handleDeleteCommentClicked:this.handleDeleteNoteClicked,children:["DELETE ",ri.isComment(s)?"COMMENT":"NOTE"]}),Object(br.jsx)("button",{type:"button",className:Ys.a.cancelButton,onClick:n,children:"CANCEL"}),Object(br.jsx)("button",{type:"submit",className:Ys.a.addButton,disabled:""===this.state.text,onClick:this.handleSubmitClicked,children:C})]})]})})}}],[{key:"createUserList",value:function(e){var t=[];return Object.keys(e).forEach((function(n){var a=e[n];a.title!==k&&t.push({uuid:a.relatedUuids[0],title:a.name?a.name:a.title,icon:a.image,color:a.color,userId:a.userId,avatar:a.photoUrl})})),t.push({uuid:oo,title:"General",icon:null,color:"#adb3b7",userId:oo}),t}}]),n}(a.Component),$s=Object(Ue.a)([de],(function(e){return function(t){return e[Object.keys(e).find((function(n){return e[n].relatedUuids.reduce((function(e,n){return e||n===t}))}))]}})),ec=Object(s.b)((function(e){var t=e.primaryUuid,n=e.notes,a=e.participants;return{primaryUuid:t,notes:n,playhead:e.playback.playhead,timeline:Xe(e),participants:a,getParticipantById:$s(e),meId:Wt(e),meName:Vt(e)}}),(function(e){return{onCloseNoteEditor:function(){e(si())},onDeleteNote:function(t){e(mn(t)),e(si())},onDeleteComment:function(t,n){e(ai(t,n)),e(si())},onUpdateNote:function(t,n){e(pn(t,n)),e(si())}}}))((function(e){return Object(br.jsx)(Zs,Object(u.a)({},e))})),tc=function(){function e(t){var n=this;Object(f.a)(this,e),this.selector=t,this.hover={duration:1e3,action:null,handler:null},this.clear={action:null,items:[]},this.click={action:null},window.addEventListener("click",(function(e){var t=n.elementsMatchingSelectorAndEvent(n.selector,e);"function"===typeof n.click.action&&t.length>0&&n.click.action(t)})),window.addEventListener("mousemove",(function(e){"function"===typeof n.clear.action&&n.clear.items.length>0&&(n.clear.action(n.clear.items),n.clear.items=[]),null!==n.hover.handler&&(clearTimeout(n.hover.handler),n.hover.handler=null),n.hover.handler=setTimeout((function(){var t=n.elementsMatchingSelectorAndEvent(n.selector,e);"function"===typeof n.hover.action&&t.length>0&&(n.clear.items=n.hover.action(t)||t),n.hover.handler=null}),n.hover.duration)}))}return Object(y.a)(e,[{key:"elementsMatchingSelectorAndEvent",value:function(t,n){var a=e.filterElements(n),i=document.querySelectorAll(this.selector),r=Object.keys(i);return 0===r.length||document.querySelectorAll(".ignore-nodestack").length>0?[]:r.map((function(e){return i[e]})).filter(a)}},{key:"onClick",value:function(e){return this.click.action=e,this}},{key:"onHover",value:function(e){return this.hover.action=e,this}},{key:"onClear",value:function(e){return this.clear.action=e,this}},{key:"duration",value:function(e){return this.hover.duration=e,this}}],[{key:"filterElements",value:function(e){var t,n=e.pageX,a=e.pageY;return function(e){var i=e.getBoundingClientRect();return t={x:[i.left,i.left+i.width],y:[i.top,i.top+i.height]},n>=t.x[0]&&n<=t.x[1]&&a>=t.y[0]&&a<=t.y[1]}}}]),e}(),nc=n(25),ac=n.n(nc);function ic(e){return"EXPECTED"===e.Trigger.toUpperCase()&&1===e.CategoryValue}function rc(e){return"EXPECTED"===e.Trigger.toUpperCase()&&0===e.CategoryValue}function oc(e){return"UNEXPECTED"===e.Trigger.toUpperCase()&&1===e.CategoryValue}function sc(e){return rc(e)||oc(e)}function cc(e){return"INFO"===e.Trigger.toUpperCase()&&1===e.CategoryValue}function lc(e){return sc(e)||ic(e)||cc(e)}function uc(e){return ic(e)?10:oc(e)?20:rc(e)?30:40}var dc=n(35),hc=n.n(dc);function pc(e){var t=e.category,n=e.isSelected,a=e.onClick,i=Ar()({[hc.a.classificationPill]:!0}),r=Ar()({[hc.a.classificationIndicator]:!0,[hc.a.positive]:ic(t),[hc.a.negative]:oc(t),[hc.a.warning]:rc(t),[hc.a.info]:cc(t)}),o=function(e){return"EXPECTED"===e.Trigger.toUpperCase()?1===e.CategoryValue?"This was expected to trigger and did":"This was expected to trigger but did not":"UNEXPECTED"===e.Trigger.toUpperCase()?1===e.CategoryValue?"This was not expected to trigger but did":"This was not expected to trigger and did not":"INFO"===e.Trigger.toUpperCase()&&1===e.CategoryValue?"This was triggered and was flagged as interesting to you":null}(t),s=(t.DisplayName||"").replace(/_/g," ");return Object(br.jsxs)("div",{className:i,"data-metric":t.Name,"data-metric-selected":n,"data-tooltip":o,onClick:a,onKeyPress:a,role:"button",tabIndex:"-1",children:[Object(br.jsx)("div",{className:r}),Object(br.jsx)("div",{className:hc.a.pillText,children:s})]},t.DisplayName)}pc.defaultProps={onClick:null};var mc=n(40),fc=n.n(mc);function vc(e){var t=e.colors,n=e.isSelected,a=e.onClick,i=e.showLeftIndicator,r=e.showRightIndicator,o=e.text,s=e.modalPill,c=e.modalCategoryPill,l=fc.a.pill;return s?l=fc.a.pillModal:c&&(l=fc.a.pillCategoryModal),Object(br.jsxs)("div",{onClick:a,className:l,role:"button",onKeyPress:a,tabIndex:"-1","data-metric":o,"data-metric-selected":n,children:[Object(br.jsx)("div",{className:fc.a.pillText,children:o}),Object(br.jsxs)("div",{className:fc.a.pillColourContainer,children:[Object(br.jsx)("div",{style:{backgroundColor:t[0],display:i?"block":"none"}}),Object(br.jsx)("div",{style:{backgroundColor:t[1],display:r?"block":"none"}})]})]})}vc.defaultProps={colors:["#444","#aaa"],onClick:null,modalPill:!1,modalCategoryPill:!1};var bc=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).handleClick=a.handleClick.bind(Object(rr.a)(a)),a.setPlayHeadPosition=a.setPlayHeadPosition.bind(Object(rr.a)(a)),a}return Object(y.a)(n,[{key:"setPlayHeadPosition",value:function(e){var t=this.props,n=t.onSetScrollToMatch,a=t.scrub,i=t.viewport,r=i.span,o=a.end-a.start,s=e-(a.start+o/2),c=Math.min(Math.max(0,a.start+s),100-o),l=c+o,u=e-(i.start+r/2);n(e,{start:c,end:l},{start:Math.min(Math.max(0,i.start+u),100-r),span:r})}},{key:"handleClick",value:function(e){var t=this;return function(n){var a=t.props,i=a.onClassificationSelected,r=a.onKeywordSelected,o=a.onTopicSelected,s=n.target.dataset.metric;"undefined"!==typeof s&&(e===Ti?i(s):e===Ni?r(s):e===Ei&&o(s))}}},{key:"loadingBar",value:function(e){var t=this.props.loadProgress,n=Ar()({[ac.a.progressBarContainer]:!0,hidden:!e}),a={width:"".concat(t,"%")};return Object(br.jsxs)("div",{className:n,children:[Object(br.jsx)("div",{className:ac.a.progressBarOuter,children:t>0&&Object(br.jsx)("div",{className:ac.a.progressBar,style:a})}),Object(br.jsxs)("div",{children:[t,"%"]})]})}},{key:"render",value:function(){var e=this.props,t=e.status.status,a=e.callSummary,i=e.selectedItem,r=e.onClickShowAllClassifications,o=e.transcription,s=e.onClickShowAllKeyWords,c=t===nt;if(t===it||null===o[1])return this.loadingBar(c);var l=n.generateAllClassifications(o,i,this.handleClick),u=n.generateKeywords(o,a.keyCallers.colors,i,this.handleClick),d=n.generateTopics(o,a.keyCallers.colors,i,this.handleClick),h=l.length,p=u.length+d.length;return Object(br.jsxs)("div",{className:"column-container ".concat(ac.a.content),children:[Object(br.jsxs)("div",{className:"column ".concat(ac.a.column," ").concat(ac.a.classificationsExceptionColumn),children:[Object(br.jsxs)("div",{className:ac.a.classificationsExceptionHeader,children:[Object(br.jsx)("p",{className:ac.a.title,children:"Keywords:"}),p>0&&Object(br.jsxs)("button",{type:"button",className:ac.a.showAll,onClick:s,children:["View ",p>1?"All ":"",p," Item",1===p?"":"s"]})]}),Object(br.jsx)("hr",{}),Object(br.jsxs)("div",{className:ac.a.pillContainer,children:[u.length>0&&u,0===u.length&&Object(br.jsx)("p",{className:"text-grey-primary",children:"No keywords found"})]})]}),Object(br.jsx)("div",{className:ac.a.spacer}),Object(br.jsxs)("div",{className:"column ".concat(ac.a.column," ").concat(ac.a.classificationsExceptionColumn),children:[Object(br.jsxs)("div",{className:ac.a.classificationsExceptionHeader,children:[Object(br.jsx)("p",{className:ac.a.title,children:"Top Categories:"}),h>0&&Object(br.jsxs)("button",{type:"button",className:ac.a.showAll,onClick:r,children:["View ",h>1?"All ":"",h," Item",1===h?"":"s"]})]}),Object(br.jsx)("hr",{}),n.hasClassificationExceptionsOrInfo(o)&&Object(br.jsx)("div",{className:ac.a.classificationContainer,children:l}),!n.hasClassificationExceptionsOrInfo(o)&&Object(br.jsx)("div",{className:ac.a.classificationsEmpty,children:Object(br.jsx)("div",{children:"No categories were flagged for this call."})})]})]})}}],[{key:"generateClassifications",value:function(e,t,a,i){var r=(e.Categories||[]).filter((function(e){return e.Type.toUpperCase()===t.toUpperCase()&&(rc(e)||oc(e))}));if(0===r.length)return[];var o="function"===typeof i?i(Ti):null;return n.processChannelClassifications(r,a,o)}},{key:"generateAllClassifications",value:function(e,t,a){var i=(e.Categories||[]).filter((function(e){return lc(e)})).sort((function(e,t){return uc(e)-uc(t)}));if(0===i.length)return[];var r="function"===typeof a?a(Ti):null;return n.processChannelClassifications(i,t,r)}},{key:"generateKeywords",value:function(e,t,a,i){if(0===e[1].Keywords.length&&0===e[2].Keywords.length)return[];var r="function"===typeof i?i(Ni):null;return n.processKeywordsTopics(e,"Keywords","Keyword",Ni,t,a,r)}},{key:"generateTopics",value:function(e,t,a,i){if(0===e[1].Topics.length&&0===e[2].Topics.length)return[];var r="function"===typeof i?i(Ei):null;return n.processKeywordsTopics(e,"Topics","Topic",Ei,t,a,r)}},{key:"processChannelClassifications",value:function(e,t,n){return e.map((function(e){var a=t.type===Ti&&t.identifier===e.Name;return Object(br.jsx)(pc,{category:e,isSelected:a,onClick:n},e.Name)}))}},{key:"processKeywordsTopics",value:function(e,t,a,i,r,o,s){var c={};return e[1][t].forEach((function(e){var t=c[e[a]]||Object(u.a)({},e);t[1]=!0,c[e[a]]=t})),e[2][t].forEach((function(e){var t=c[e[a]]||Object(u.a)({},e);t[2]=!0,c[e[a]]=t})),n.generateMarkupForKeywordsTopics(a,Object.values(c),i,r,o,s)}},{key:"generateMarkupForKeywordsTopics",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["#444","#aaa"],i=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0;return t.map((function(t){var o=i.type===n&&i.identifier===t[e];return Object(br.jsx)(vc,{colors:a,isSelected:o,onClick:r,showLeftIndicator:!0===t[1],showRightIndicator:!0===t[2],text:t[e]},"".concat(t[e]))}))}},{key:"hasClassificationExceptionsOrInfo",value:function(e){return(e.Categories||[]).filter((function(e){return sc(e)||cc(e)})).length>0}}]),n}(a.Component);var yc=Object(s.b)((function(e){var t=e.status,n=e.activeLayers,a=e.callSummary,i=e.knowledge,r=e.search,o=e.scrub,s=e.transcription.viewport;return{status:t,activeLayers:n,callSummary:a,search:r,scrub:o,selectedItem:i.selectedItem,transcription:xe(e),timeline:Xe(e),viewport:s,loadProgress:ge(e)}}),(function(e){return{onClassificationSelected:function(t){e(Di(t))},onKeywordSelected:function(t){e(Bi(t))},onTopicSelected:function(t){e(Ki(t))},onSetSearchMatch:function(t){e(ji(t))},onSetScrollToMatch:function(t,n,a){e(ga(t)),e(ba(n)),e(_a(a))},onClickShowAllClassifications:function(){e({type:Ii})},onClickShowAllKeyWords:function(){e({type:Wi})}}}))((function(e){var t=e.status,n=e.onClassificationSelected,a=e.onKeywordSelected,i=e.onTopicSelected,r=e.activeLayers,o=e.callSummary,s=e.onSetSearchMatch,c=e.search,l=e.selectedItem,u=e.transcription,d=e.onSetScrollToMatch,h=e.timeline,p=e.scrub,m=e.viewport,f=e.onClickShowAllClassifications,v=e.onClickShowAllKeyWords,b=e.loadProgress;return Object(br.jsx)(bc,{status:t,onClassificationSelected:n,onKeywordSelected:a,onTopicSelected:i,activeLayers:r,callSummary:o,onSetSearchMatch:s,selectedItem:l,search:c,transcription:u,timeline:h,scrub:p,viewport:m,onSetScrollToMatch:d,onClickShowAllClassifications:f,onClickShowAllKeyWords:v,loadProgress:b})})),gc=n(21),jc=n.n(gc),Oc=n(31),_c=n.n(Oc),xc=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).handleInputChange=a.handleInputChange.bind(Object(rr.a)(a)),a}return Object(y.a)(n,[{key:"handleInputChange",value:function(e){var t=this;return function(n){var a=t.props,i=a.onToggleLayer,r=a.onToggleRouting;e!==Cn?i(n.target.id):r()}}},{key:"renderMetrics",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[];return Object.keys(e).forEach((function(i){var r=e[i],o=r.checked,s=r.subtitle,c=r.disabled,l="string"===typeof s&&s.length>0;a.push(Object(br.jsxs)("div",{className:_c.a.formCheck,children:[Object(br.jsxs)("label",{htmlFor:i,children:[Object(br.jsx)("input",{type:"checkbox",id:i,checked:o,onChange:t.handleInputChange(i),disabled:!0===c}),Object(br.jsx)("span",{children:r.title}),l&&Object(br.jsx)("span",{className:_c.a.subtitle,children:r.subtitle})]}),"undefined"!==typeof r.indicator&&r.indicator.total>0&&Object(br.jsxs)("div",{className:_c.a.indicator,children:[Object(br.jsx)("div",{style:{width:"".concat(r.indicator.left/r.indicator.total*100,"%"),backgroundColor:n[0]},className:Vr(n[0],["text-black","text-white"]),children:r.indicator.left}),Object(br.jsx)("div",{style:{width:"".concat(r.indicator.right/r.indicator.total*100,"%"),backgroundColor:n[1]},className:Vr(n[1],["text-black","text-white"]),children:r.indicator.right})]})]},i))})),a}},{key:"render",value:function(){var e=this.props,t=e.status.status,a=e.data,i=e.callSummary,r=e.isDisplayRouting,o=e.timeline.unrecordedTime,s=e.activeLayers;if(t===it)return null;var c=a.talkTime,l=(n.calculateStatistics(c,1),n.calculateStatistics(c,2),o>0),u=l?Ke(o/1e6):"--",d={[Fa]:{title:"Hold/Unhold",checked:s.includes(Fa)},[Ka]:{title:"Transfer",checked:s.includes(Ka)},[Ha]:{title:"Listen In",checked:s.includes(Ha)},[Wa]:{title:"Call Queuing",checked:s.includes(Wa)},[Va]:{title:"New Party Joins/Leaves",checked:s.includes(Va)}},h={[Aa]:{title:"Transcription Confidence"},[Cn]:{title:"View Full Call",checked:r,subtitle:"".concat(u," of additional unrecorded time is available"),disabled:!l}},p=Ar()({[_c.a.thirdWidth]:!0}),m=Ar()({[_c.a.halfWidth]:!0});return Object(br.jsx)("div",{className:_c.a.container,children:Object(br.jsxs)("div",{className:"column-container",children:[Object(br.jsxs)("div",{className:p,children:[Object(br.jsx)("p",{className:_c.a.title,children:"Call Events on Scrubber"}),Object(br.jsx)("hr",{className:_c.a.separator}),this.renderMetrics(d,i.keyCallers.colors)]}),Object(br.jsx)("div",{className:"vertical-spacer"}),Object(br.jsxs)("div",{className:"column",children:[Object(br.jsx)("p",{className:_c.a.title,children:"Additional Metrics"}),Object(br.jsx)("hr",{className:_c.a.separator}),Object(br.jsxs)("div",{className:"column-container",children:[Object(br.jsx)("div",{className:m,children:this.renderMetrics(h,i.keyCallers.colors)}),Object(br.jsx)("div",{className:m,children:this.renderMetrics({},i.keyCallers.colors)})]})]})]})})}}],[{key:"calculateStatistics",value:function(e,t){return null===e?{}:{clashWins:e[t].filter((function(e){return e.event===Qo})).length,affirmations:e[t].filter((function(e){return e.event===Zo})).length,interruptions:e[t].filter((function(e){return e.event===$o})).length,steals:e[t].filter((function(e){return e.event===es})).length}}}]),n}(a.Component);xc.defaultProps={activeLayers:[]};var Cc=xc;function kc(e){var t=e.status,n=e.data,a=e.onToggleLayer,i=e.onToggleRouting,r=e.isDisplayRouting,o=e.timeline,s=e.callSummary,c=e.activeLayers;return Object(br.jsx)(Cc,{status:t,data:n,onToggleLayer:a,onToggleRouting:i,isDisplayRouting:r,callSummary:s,timeline:o,activeLayers:c})}kc.defaultProps={activeLayers:[]};var wc=Object(s.b)((function(e){var t=e.status,n=e.data,a=e.callSummary,i=e.activeLayers;return{status:t,data:n,callSummary:a,isDisplayRouting:Ae(e),timeline:Xe(e),activeLayers:i}}),(function(e){return{onToggleLayer:function(t){e(ja(t))},onToggleRouting:function(){e(va()),e({type:Cn}),e(Bn())}}}))(kc),Sc=n(32),Tc=n.n(Sc),Nc=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"optionsList",value:function(){var e=this,t=this.props,n=t.id,a=t.options,i=t.selection;return Object.keys(a).map((function(t){var r=a[t];return Object(br.jsxs)("label",{className:"".concat(Tc.a.dropdownItem," ").concat(t===i?Tc.a.selected:""),htmlFor:n,onClick:e.handleChange(t),children:[Object(br.jsx)(ys,{isAvatar:!!r.avatar,url:r.avatar||r.icon,color:r.color}),Object(br.jsx)("div",{className:Tc.a.viewName,children:r.viewName})]},"focus-".concat(t))}))}},{key:"handleChange",value:function(e){var t=this.props.onChange;return function(){t(e)}}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.selection,a=e.options,i=Object(br.jsx)("label",{className:Tc.a.dropdownButton,htmlFor:t,children:"Please select..."});if(a[n]){var r=a[n];i=Object(br.jsxs)("label",{className:Tc.a.dropdownButton,htmlFor:t,children:[Object(br.jsx)(ys,{isAvatar:!!r.avatar,url:r.avatar||r.icon,color:r.color}),Object(br.jsx)("div",{className:Tc.a.viewName,children:r.viewName})]})}return Object(br.jsxs)("div",{className:Tc.a.dropdown,children:[Object(br.jsx)("input",{className:Tc.a.dropdownToggle,type:"checkbox",id:t}),i,Object(br.jsx)("label",{className:Tc.a.dropdownBackground,htmlFor:t}),Object(br.jsx)("div",{className:Tc.a.dropdownContent,children:this.optionsList()})]})}}]),n}(a.Component);Nc.defaultProps={onChange:function(){},selection:""};var Ec=Nc;function Ic(e){var t=e.primaryUuid,n=e.onSetPrimaryUuid,a=e.options;return Object(br.jsx)(Ec,{id:"focus-switcher-dropdown",selection:t,options:a,onChange:function(e){n(e)}})}Ic.defaultProps={primaryUuid:null};var Pc=Object(s.b)((function(e){return{primaryUuid:e.primaryUuid,options:Ie(e)}}),(function(e){return{onSetPrimaryUuid:function(t){e(Ta(t))}}}))(Ic),Lc=n(12),Ac=n.n(Lc),Rc=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).state={isViewExpanded:!1},a.barRefs={container:null,bars:[],lines:[],labels:[]},a.toggleExpandedView=a.toggleExpandedView.bind(Object(rr.a)(a)),a}return Object(y.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.plotLabelLines.bind(this))}},{key:"componentDidUpdate",value:function(e,t,n){this.plotLabelLines()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.plotLabelLines.bind(this))}},{key:"bars",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.proportionalWidths(t),i=n.callDurationFromSummary(t);return this.barRefs.bars=[],Object.keys(t).filter((function(e){return t[e]>0})).map((function(n){var r=(100/i*t[n]).toFixed(0);return Object(br.jsx)("div",{className:Ac.a[n],style:{width:"".concat(a[n],"%")},ref:function(t){return e.barRefs.bars.push(t)},children:r>2&&"".concat(r,"%")},n)}))}},{key:"lines",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.barRefs.lines=[],Object.keys(t).filter((function(e){return t[e]>0})).map((function(t){var n=Ar()({[Ac.a.line]:!0}),a=Ar()({[Ac.a.group]:!0});return Object(br.jsx)("svg",{viewBox:"0 0 10 10",className:n,ref:function(t){return e.barRefs.lines.push(t)},preserveAspectRatio:"none",children:Object(br.jsxs)("g",{className:a,children:[Object(br.jsx)("line",{x1:"0",x2:"0",y1:"0",y2:3,vectorEffect:"non-scaling-stroke",shapeRendering:"crisp-edges"}),Object(br.jsx)("line",{x1:"0",x2:"10",y1:3,y2:7,vectorEffect:"non-scaling-stroke",shapeRendering:"geometric-precision"}),Object(br.jsx)("line",{x1:"10",x2:"10",y1:7,y2:"10",vectorEffect:"non-scaling-stroke",shapeRendering:"crisp-edges"})]})},t)}))}},{key:"labels",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.barRefs.labels=[];var a=n.proportionalWidths(t);return Object.keys(t).filter((function(e){return t[e]>0})).map((function(i,r,o){var s=Ar()({[Ac.a.label]:!0});return Object(br.jsxs)("div",{className:s,ref:function(t){return e.barRefs.labels.push(t)},"data-width":a[i],children:[Object(br.jsx)("div",{children:n.labelTextForKey(i)}),Object(br.jsxs)("div",{children:["(",Ke(Math.ceil(t[i])),")"]})]},i)}))}},{key:"plotLabelLines",value:function(){var e=this.barRefs,t=e.bars,n=e.lines,a=e.labels,i=e.container;if(i&&Array.isArray(a)&&0!==a.length){var r=i.getBoundingClientRect(),o=r.x,s=r.width,c=[],l=0;a.forEach((function(e,n){if(e){e.style.width=null;var a=t[n],i=e.getBoundingClientRect().width,r=a.getBoundingClientRect().width,o=100/s*r,u=100/s*i;u>=o?(e.style.width="".concat(u,"%"),l+=u-o):c.push({label:e,labelWidthAsPercentage:u,barWidthAsPercentage:o})}})),c.forEach((function(e){var t=e.label,n=e.barWidthAsPercentage,a=e.labelWidthAsPercentage,i=Math.max(Math.min(l,n-a),0);t.style.width="".concat(n-i,"%"),l=Math.max(0,l-i)})),n.forEach((function(e,n){if(e){var i=a[n],r=t[n].getBoundingClientRect(),s=r.x,c=r.width,l=s-o+c/2,u=i.getBoundingClientRect(),d=u.x,h=u.width,p=d-o-l+h/2;e.style.left=Math.min(l,l+p),e.style.width=Math.max(1,Math.abs(p)),p<0?e.classList.add(Ac.a.flip):e.classList.remove(Ac.a.flip)}}))}}},{key:"toggleExpandedView",value:function(){var e=this.state.isViewExpanded;this.setState({isViewExpanded:!e})}},{key:"showAlternativeStatus",value:function(e){return Object(br.jsx)("div",{children:Object(br.jsxs)("div",{className:Ac.a.section,children:[Object(br.jsxs)("div",{className:Ac.a.header,children:[Object(br.jsx)("div",{className:Ac.a.headerItem,children:"Start time:"}),Object(br.jsx)("div",{className:Ac.a.headerItem,children:"Duration:"}),Object(br.jsx)("div",{className:Ac.a.headerItem,children:"Direction:"}),Object(br.jsx)("div",{className:Ac.a.headerItem,children:Object(br.jsx)("button",{className:Ac.a.buttonShowMore,type:"button",disabled:!0})})]}),Object(br.jsx)("div",{className:Ac.a.summaryBar,children:this.bars({})})]})})}},{key:"render",value:function(){var e=this,t=this.props,a=t.status,i=t.callSummary,r=t.participants,o=t.sentences;if(a.status!==at)return this.showAlternativeStatus(a.status);var s=i.startTime,c=i.duration,l=i.direction,u=i.metrics,d=i.keyCallers,h=i.summary,p=0;"undefined"!==typeof r&&null!==o&&null!==u&&(p=n.numberOfConversations(r,o));var m=[],f=[],v=[],b=[];null!=d&&(m=d.colors.slice(0,2),d.titles),null!==u&&(f=u.map((function(e){return e.data.holdEvents})),v=u.map((function(e){return e.data.pauseEvents})),b=u.map((function(e){return Ke(c*e.data.SilenceRatio/1e6)})));var y=this.state.isViewExpanded,g=y?Ac.a.buttonShowLess:Ac.a.buttonShowMore;return Object(br.jsxs)("div",{children:[Object(br.jsxs)("div",{className:Ac.a.section,children:[Object(br.jsxs)("div",{className:Ac.a.header,children:[Object(br.jsxs)("div",{className:Ac.a.headerItem,children:["Start time:"," ",He(s)]}),Object(br.jsxs)("div",{className:Ac.a.headerItem,children:["Duration:"," ",Ke(c/1e6)]}),Object(br.jsxs)("div",{className:Ac.a.headerItem,children:["Direction:"," ",l]}),Object(br.jsx)("div",{className:Ac.a.headerItem,children:Object(br.jsx)("button",{className:g,onClick:this.toggleExpandedView,type:"button"})})]}),Object(br.jsx)("div",{className:Ac.a.summaryBar,children:this.bars(h)}),Object(br.jsx)("div",{className:Ac.a.summaryLines,ref:function(t){return e.barRefs.container=t},children:this.lines(h)}),Object(br.jsx)("div",{className:Ac.a.summaryLabels,children:this.labels(h)})]}),y&&Object(br.jsx)("div",{className:Ac.a.section,children:Object(br.jsxs)("div",{className:Ac.a.metricsSection,children:[Object(br.jsxs)("div",{className:Ac.a.metricsTable,children:[Object(br.jsx)("div",{className:Ac.a.sectionColumns,children:n.metricsHeader(m)}),Object(br.jsx)("div",{className:Ac.a.sectionColumns,children:n.metricsRow("Hold Events",f)}),Object(br.jsx)("div",{className:Ac.a.sectionColumns,children:n.metricsRow("Recording Paused",v)}),Object(br.jsx)("div",{className:Ac.a.sectionColumns,children:n.metricsRow("Silence Duration",b)})]}),Object(br.jsxs)("div",{className:Ac.a.totals,children:[Object(br.jsx)("div",{children:"Conversations held"}),Object(br.jsx)("div",{className:Ac.a.bigDigits,children:p})]}),Object(br.jsxs)("div",{className:Ac.a.totals,children:[Object(br.jsx)("div",{children:"Turn Swaps"}),Object(br.jsx)("div",{className:Ac.a.bigDigits,children:n.turnSwaps(o)})]})]})})]})}}],[{key:"labelTextForKey",value:function(e){switch(e){case"talking":return"Talk Time";case"listening":return"Listen Time";case"silent":return"Silence";case"holding":return"On Hold";case"queuing":return"Queuing";case"ringing":return"Ringing";case"routing":return"Routing";case"overtalk":return"Over Talk";default:return e}}},{key:"proportionalWidths",value:function(e){var t=Object.keys(e).map((function(t){return e[t]})).reduce((function(e,t){return e+t}),0),n={};return Object.keys(e).forEach((function(a){var i=e[a],r=100/t;n[a]=r*i})),n}},{key:"metricsHeader",value:function(e){return[Object(br.jsx)("div",{className:Ac.a.rowTitle},"titles-heading")].concat(e.map((function(e,t){return Object(br.jsx)("div",{style:{borderTop:"2px solid ".concat(e)}},"".concat(e,"-").concat(t,"-heading"))})))}},{key:"metricsRow",value:function(e,t){return[Object(br.jsx)("div",{className:Ac.a.rowTitle,children:e},e)].concat(t.map((function(e,t){return Object(br.jsx)("div",{className:Ac.a.figure,children:e},"".concat(t,"-").concat(e))})))}},{key:"turnSwaps",value:function(e){var t,n=0;return null===e?0:(Object.keys(e).map((function(t){return e[t]})).flat().sort((function(e,t){return e.Start<t.Start?-1:e.Start>t.Start?1:0})).forEach((function(e){t?e.number!==t&&(n+=1,t=e.number):t=e.number})),n)}},{key:"numberOfConversations",value:function(e,t){var n={};return Object.keys(e).filter((function(t){return e[t].isPrimary})).forEach((function(e){t[e].forEach((function(e){n["".concat(e.number,":").concat(e.opposing.number)]=1}))})),Object.keys(n).length}},{key:"talkAndListenTime",value:function(e,t){var n={talkTime:0,listenTime:0};return"undefined"!==typeof e&&null!==t&&Object.keys(e).forEach((function(a){var i=e[a].isPrimary?"talkTime":"listenTime";t[a].forEach((function(e){n[i]+=e.timelineEnd-e.timelineStart}))})),n}},{key:"callDurationFromSummary",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map((function(t){return e[t]})).reduce((function(e,t){return t+e}),0)}}]),n}(a.Component);Rc.defaultProps={sentences:null};var Mc=Rc,Dc=function(e){return Object(br.jsx)(Mc,Object(u.a)({},e))};Dc.defaultProps={sentences:null,isVisible:!1};var Uc=Object(s.b)((function(e){return{status:e.status,callSummary:e.callSummary,participants:de(e),sentences:ke(e)}}))(Dc),Bc=n(36),Fc=n.n(Bc),Kc=n.p+"static/media/up-chevron-white.b8709411.svg",Hc=n.p+"static/media/down-chevron-white.58efb287.svg",Wc=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).handleSearchInputChange=a.handleSearchInputChange.bind(Object(rr.a)(a)),a.handlePreviousClicked=a.handlePreviousClicked.bind(Object(rr.a)(a)),a.handleNextClicked=a.handleNextClicked.bind(Object(rr.a)(a)),a.handleClearClicked=a.handleClearClicked.bind(Object(rr.a)(a)),a}return Object(y.a)(n,[{key:"handleSearchInputChange",value:function(e){(0,this.props.onSearchPhraseChanged)(e.currentTarget.value)}},{key:"handlePreviousClicked",value:function(){var e=this.props,t=e.search,n=t.currentPositionIndex,a=t.positionCount;(0,e.onSetMatchPositionIndex)(n>0?n-1:a-1)}},{key:"handleNextClicked",value:function(){var e=this.props,t=e.search,n=t.currentPositionIndex,a=t.positionCount;(0,e.onSetMatchPositionIndex)(n<a-1?n+1:0)}},{key:"handleClearClicked",value:function(){(0,this.props.onSearchPhraseChanged)(null,[])}},{key:"render",value:function(){var e=this.props.search,t="Search Transcript...",n=null!==e.searchPhrase?e.searchPhrase:"",a=e.currentPositionIndex,i=e.positionCount,r=n.length>0&&i>0;return Object(br.jsxs)("div",{className:Fc.a.Search,children:[Object(br.jsx)("input",{className:Fc.a.searchTextBox,type:"text",value:n,onChange:this.handleSearchInputChange,placeholder:t,onFocus:function(e){e.target.placeholder=""},onBlur:function(e){e.target.placeholder=t}}),r&&Object(br.jsxs)("div",{className:Fc.a.searchNavigation,children:[Object(br.jsx)("div",{children:"".concat(a+1," of ").concat(i)}),Object(br.jsx)("img",{className:Fc.a.chevron,src:Kc,alt:"Previous match",height:"24",width:"24",onMouseDown:this.handlePreviousClicked}),Object(br.jsx)("img",{className:Fc.a.chevron,src:Hc,alt:"Next match",height:"24",width:"24",onMouseDown:this.handleNextClicked}),Object(br.jsx)("div",{className:Fc.a.spacer}),Object(br.jsx)("button",{className:Fc.a.clearButton,type:"button",onClick:this.handleClearClicked,children:"CLEAR"})]})]})}}]),n}(a.Component);Wc.defaultProps={sentences:null};var Vc=Wc;function Gc(e){var t=e.search,n=e.onSearchPhraseChanged,a=e.onSetMatchPositionIndex,i=e.participants,r=e.sentences,o=e.transcription,s=e.onSetScrollToMatch,c=e.timeline;return Object(br.jsx)(Vc,{search:t,onSearchPhraseChanged:n,onSetMatchPositionIndex:a,participants:i,sentences:r,transcription:o,onSetScrollToMatch:s,timeline:c})}Gc.defaultProps={sentences:null};var Yc=Object(s.b)((function(e){return{search:e.search,participants:de(e),sentences:ke(e),transcription:xe(e),timeline:Xe(e)}}),(function(e){return{onSearchPhraseChanged:function(t){e({type:gi,payload:{searchPhrase:t}}),e(yi())},onSetMatchPositionIndex:function(t){e(fi(t))},onSetScrollToMatch:function(t){e(Ca(t))}}}))(Gc),Xc=n(41),Jc=n.n(Xc),qc=n.p+"static/media/close.325eaabb.svg",zc=n.p+"static/media/up-chevron-disabled.75e1dbee.svg",Qc=n.p+"static/media/down-chevron-disabled.50ca0970.svg",Zc=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).onPreviousClicked=a.onPreviousClicked.bind(Object(rr.a)(a)),a.onNextClicked=a.onNextClicked.bind(Object(rr.a)(a)),a}return Object(y.a)(n,[{key:"onPreviousClicked",value:function(){var e=this.props,t=e.search,n=t.currentPositionIndex,a=t.positionCount;(0,e.onSetMatchPositionIndex)(n>0?n-1:a-1)}},{key:"onNextClicked",value:function(){var e=this.props,t=e.search,n=t.currentPositionIndex,a=t.positionCount;(0,e.onSetMatchPositionIndex)(n<a-1?n+1:0)}},{key:"render",value:function(){var e,t=this.props,a=t.callSummary,i=t.onClear,r=t.selectedItem,o=t.search;if("string"!==typeof r.identifier||0===r.identifier.length)return null;if(r.type===Ti)e=Object(br.jsx)(pc,{category:r.category,isSelected:!0});else if(r.type===Ni){var s=o.positions,c=n.channelIndicatorsForPositions(s),l=c.showLeftIndicator,u=c.showRightIndicator;e=Object(br.jsx)(vc,{colors:a.keyCallers.colors,isSelected:!0,text:r.identifier,showLeftIndicator:l,showRightIndicator:u})}else{if(r.type!==Ei)return null;var d=o.positions,h=n.channelIndicatorsForPositions(d),p=h.showLeftIndicator,m=h.showRightIndicator;e=Object(br.jsx)(vc,{colors:a.keyCallers.colors,isSelected:!0,text:r.identifier,showLeftIndicator:p,showRightIndicator:m})}var f=o.currentPositionIndex,v=o.positionCount;return Object(br.jsxs)("div",{className:Jc.a.resultNavigator,children:[Object(br.jsx)("button",{type:"button",className:Jc.a.button,onMouseDown:i,children:Object(br.jsx)("img",{src:qc,alt:"Clear",height:"18",width:"18"})}),Object(br.jsx)("div",{className:Jc.a.searchItemContainer,children:e}),Object(br.jsx)("div",{children:"".concat(f+1," of ").concat(v)}),Object(br.jsx)("button",{type:"button",className:Jc.a.button,onMouseDown:this.onPreviousClicked,disabled:0===v,children:Object(br.jsx)("img",{src:zc,alt:"Previous match",height:"24",width:"24"})}),Object(br.jsx)("button",{type:"button",className:Jc.a.button,onMouseDown:this.onNextClicked,disabled:0===v,children:Object(br.jsx)("img",{src:Qc,alt:"Next match",height:"24",width:"24"})})]})}}],[{key:"channelIndicatorsForPositions",value:function(e){return{showLeftIndicator:e.filter((function(e){return 1===e.channel})).length>0,showRightIndicator:e.filter((function(e){return 2===e.channel})).length>0}}}]),n}(a.Component);Zc.defaultProps={sentences:null};var $c=Zc;function el(e){var t=e.callSummary,n=e.onClear,a=e.onSetMatches,i=e.onSetMatch,r=e.onSetScrollToMatch,o=e.selectedItem,s=e.transcription,c=e.participants,l=e.sentences,u=e.onSetMatchPositions,d=e.onSetMatchPositionIndex,h=e.search;return Object(br.jsx)($c,{callSummary:t,onClear:n,onSetMatches:a,onSetMatch:i,onSetScrollToMatch:r,selectedItem:o,transcription:s,participants:c,sentences:l,onSetMatchPositions:u,onSetMatchPositionIndex:d,search:h})}el.defaultProps={sentences:null};var tl=Object(s.b)((function(e){var t=e.callSummary,n=e.knowledge;return{callSummary:t,search:e.search,selectedItem:n.selectedItem,participants:de(e),sentences:ke(e),transcription:xe(e)}}),(function(e){return{onClear:function(){e({type:Hi}),e(Oi([])),e(bi([]))},onSetMatches:function(t){e(Oi(t))},onSetMatch:function(t){e(ji(t))},onSetScrollToMatch:function(t){e(Ca(t))},onSetMatchPositions:function(t){e(bi(t))},onSetMatchPositionIndex:function(t){e(fi(t))}}}))(el),nl="tab-search",al="tab-call-summary",il="tab-knowledge",rl="tab-insights",ol=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).handleTabClick=a.handleTabClick.bind(Object(rr.a)(a)),a}return Object(y.a)(n,[{key:"isValidSearchPhrase",value:function(){var e=this.props.search.searchPhrase;return"string"===typeof e&&e.length>0}},{key:"handleTabClick",value:function(e){var t=this.props.toggleTab;e.preventDefault();var n=e.currentTarget.id;t(n);var a=this.props,i=a.knowledgeSelectedItem,r=a.onSetPositionsFromSearchPhrase,o=a.onSetPositionsFromKnowledgeSelectedItem;if(n===nl&&this.isValidSearchPhrase())r();else if(n===il){var s=i.identifier;"string"===typeof s&&s.length>0&&o()}}},{key:"render",value:function(){var e=this.props,t=e.activeLayers,a=e.knowledgeSelectedItem,i=e.activeTab,r=Ar()({[jc.a.button]:!0,[jc.a.active]:i===nl,[jc.a.inuse]:this.isValidSearchPhrase()}),o=Ar()({[jc.a.button]:!0,[jc.a.active]:i===al}),s=Ar()({[jc.a.button]:!0,[jc.a.active]:i===il,[jc.a.inuse]:n.knowledgeLayersInUse(a)}),c=Ar()({[jc.a.button]:!0,[jc.a.active]:i===rl,[jc.a.inuse]:n.insightsLayersInUse(t)}),l={display:i===nl?"block":"none"},u={display:i===al?"block":"none"},d={display:i===il?"block":"none"},h={display:i===rl?"block":"none"};return Object(br.jsxs)("section",{className:jc.a.SearchFilters,children:[Object(br.jsxs)("div",{className:jc.a.tabs,children:[Object(br.jsx)("button",{type:"button",id:nl,className:r,onClick:this.handleTabClick,children:Object(br.jsx)("span",{className:jc.a.chevron})}),Object(br.jsxs)("button",{type:"button",id:al,className:o,onClick:this.handleTabClick,children:["Call Summary ",Object(br.jsx)("span",{className:jc.a.chevron})]}),Object(br.jsxs)("button",{type:"button",id:il,className:s,onClick:this.handleTabClick,children:["Knowledge ",Object(br.jsx)("span",{className:jc.a.chevron})]}),Object(br.jsxs)("button",{type:"button",id:rl,className:c,onClick:this.handleTabClick,children:["Timeline Options ",Object(br.jsx)("span",{className:jc.a.chevron})]}),Object(br.jsx)("div",{className:jc.a.spacer}),i!==nl&&Object(br.jsx)(tl,{}),Object(br.jsx)(Pc,{})]}),Object(br.jsx)("div",{className:jc.a.search,style:l,children:Object(br.jsx)(Yc,{})}),Object(br.jsx)("div",{className:jc.a.callSummary,style:u,children:Object(br.jsx)(Uc,{isVisible:i===al})}),Object(br.jsx)("div",{className:jc.a.knowledge,style:d,children:Object(br.jsx)(yc,{})}),Object(br.jsx)("div",{className:jc.a.insights,style:h,children:Object(br.jsx)(wc,{})})]})}}],[{key:"knowledgeLayersInUse",value:function(e){return null!=e.identifier}},{key:"insightsLayersInUse",value:function(e){return[La,Aa,Ma,Da,Ua,Ba].filter((function(t){return e.includes(t)})).length>0}}]),n}(a.Component);function sl(e){var t=e.activeLayers,n=e.knowledgeSelectedItem,a=e.search,i=e.onSetPositionsFromSearchPhrase,r=e.onSetPositionsFromKnowledgeSelectedItem,o=e.activeTab,s=e.onTabClicked;return Object(br.jsx)(ol,{activeLayers:t,knowledgeSelectedItem:n,search:a,onSetPositionsFromSearchPhrase:i,onSetPositionsFromKnowledgeSelectedItem:r,activeTab:o,toggleTab:s})}sl.defaultProps={activeLayers:[]};var cl=Object(s.b)((function(e){var t=e.activeLayers,n=e.knowledge,a=e.search;return{activeLayers:t,knowledgeSelectedItem:n.selectedItem,search:a,activeTab:Ee(e)}}),(function(e){return{onSetPositionsFromSearchPhrase:function(){e(yi())},onSetPositionsFromKnowledgeSelectedItem:function(){e(Ri())},onTabClicked:function(t){e(function(e){return{type:er,payload:e}}(t))}}}))(sl),ll=n(18),ul=n.n(ll),dl=function(e){var t=e.name,n=e.onSelect,i=e.selectedIndex,r=[{id:"pip1-".concat(t),radioStyle:ul.a.radio1,pipStyle:ul.a.pip1,value:5},{id:"pip2-".concat(t),radioStyle:ul.a.radio2,pipStyle:ul.a.pip2,value:4},{id:"pip3-".concat(t),radioStyle:ul.a.radio3,pipStyle:ul.a.pip3,value:3},{id:"pip4-".concat(t),radioStyle:ul.a.radio4,pipStyle:ul.a.pip4,value:2},{id:"pip5-".concat(t),radioStyle:ul.a.radio5,pipStyle:ul.a.pip5,value:1}],o=function(e){var t=e.currentTarget;n(parseInt(t.value,10))};return Object(br.jsx)("div",{className:ul.a.pipRating,children:Object(br.jsx)("div",{className:ul.a.rating,children:r.map((function(e){return Object(br.jsxs)(a.Fragment,{children:[Object(br.jsx)("input",{type:"radio",id:e.id,name:t,value:e.value,className:e.radioStyle,onChange:o,checked:e.value===i&&i>0}),Object(br.jsx)("label",{htmlFor:e.id,className:"".concat(ul.a.pip," ").concat(e.pipStyle),title:e.value})]},e.id)}))})})};dl.defaultProps={selectedIndex:0};var hl=dl,pl=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).state={rating:[]},a}return Object(y.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.rating;this.setState({rating:e})}},{key:"handleFinishClicked",value:function(){var e=this.props,t=e.onRateCall,n=e.rating,a=this.state.rating,i=!a.find((function(e){return 0===e.score}));JSON.stringify(n)!==JSON.stringify(a)&&i?t(a):i?window.alert("No changes were made"):window.alert("Please choose a rating for all categories.")}},{key:"handleCancelClicked",value:function(){var e=this.props,t=e.onCancelRateCall,n=e.rating,a=this.state.rating;JSON.stringify(n)!==JSON.stringify(a)?window.confirm("Warning your changes will be lost.")&&t(a):t(a)}},{key:"handleScoreChange",value:function(e,t){this.setState((function(n){return{rating:n.rating.map((function(n){var a=n.score;return n.salesforceId===t&&(a=e),Object(u.a)(Object(u.a)({},n),{},{score:a})}))}}))}},{key:"handleNoteChange",value:function(e,t){this.setState((function(n){return{rating:n.rating.map((function(n){var a=n.note;return n.salesforceId===t&&(a=e),Object(u.a)(Object(u.a)({},n),{},{note:a})}))}}))}},{key:"render",value:function(){var e=this,t=this.props.showCallRatingDialog,n=this.state.rating,a="Add note... (optional)",i=Ar()({[ul.a.mask]:!0,"ignore-nodestack":!0});return Object(br.jsx)("div",{className:i,children:Object(br.jsxs)("div",{className:ul.a.CallRating,style:{opacity:t?"1":"0"},children:[Object(br.jsx)("div",{className:ul.a.modalHeader,children:Object(br.jsx)("div",{className:ul.a.title,children:"How would you rate this call?"})}),Object(br.jsxs)("div",{className:ul.a.modalBody,children:[Object(br.jsx)("div",{children:"Completing this call rating helps our system to provide you with more accurate call metrics."}),Object(br.jsx)("div",{className:ul.a.ratingRow,children:n.map((function(t){return Object(br.jsxs)("div",{className:ul.a.ratingContainer,children:[Object(br.jsx)("div",{className:ul.a.ratingTitle,children:t.type}),Object(br.jsx)(hl,{name:t.salesforceId,onSelect:function(n){return e.handleScoreChange(n,t.salesforceId)},selectedIndex:t.score}),Object(br.jsx)("textarea",{name:t.salesforceId,className:ul.a.noteDetails,rows:"3",placeholder:a,value:t.note,onChange:function(n){return e.handleNoteChange(n.target.value,t.salesforceId)},onFocus:function(e){e.target.placeholder=""},onBlur:function(e){e.target.placeholder=a}})]},t.salesforceId)}))})]}),Object(br.jsxs)("div",{className:ul.a.modalFooter,children:[Object(br.jsx)("button",{type:"button",className:ul.a.cancelButton,onClick:this.handleCancelClicked.bind(this),children:"CANCEL"}),Object(br.jsx)("button",{type:"submit",className:ul.a.finishButton,onClick:this.handleFinishClicked.bind(this),children:"Finish"})]})]})})}}]),n}(a.Component);pl.defaultProps={rating:[]};var ml=pl,fl=Object(s.b)((function(e){var t=e.callRating;return{showCallRatingDialog:t.showCallRatingDialog,rating:t.rating}}),(function(e){return{onCancelRateCall:function(){e({type:Lt,payload:{showCallRatingDialog:!1}})},onRateCall:function(t){var n;e((n=t,function(e,t){if(window.parent.getVisualforce){var a=t(),i=a.auth,r=a.primaryUuid;if(i.jwtToken&&i.jwtToken.userId){var o=n.map((function(e){var t=Object(u.a)({},e);return t.salesforceId&&t.salesforceId.includes("tempID")&&delete t.salesforceId,t})),s={userId:i.jwtToken.userId,channelUuid:r,data:o};sn("saveRating",(function(t,n){if(n.status){var a=t.data?t.data:[];e({type:At,payload:{rating:a.map((function(e,t){return Object(u.a)(Object(u.a)({},e),{},{salesforceId:e.salesforceId?e.salesforceId:"tempID-".concat(t)})})),showCallRatingDialog:!1}})}else n.xhr.responseText?cn():window.alert("Problem saving new ratings!")}),JSON.stringify(s))}}else e({type:At,payload:{rating:n,showCallRatingDialog:!1}})}))}}}))(ml),vl=n(22),bl=n.n(vl),yl=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).state={selectedItem:null,selectedItemName:null,selectedItemKeywords:null},a.onClickClassification=a.onClickClassification.bind(Object(rr.a)(a)),a.onClickClose=a.onClickClose.bind(Object(rr.a)(a)),a}return Object(y.a)(n,[{key:"onClickClassification",value:function(e){var t=this.props.transcription.Categories.filter((function(t){return t.Name===e.currentTarget.dataset.metric}))[0],n=t.Keywords.map((function(e){for(var t=!1,n=!1,a=0;a<e.Mentions.length;a++)t="1"===e.Mentions[a].Channel,n="2"===e.Mentions[a].Channel;return{keyword:e.Keyword,showRightIndicator:n,showLeftIndicator:t}}));this.setState({selectedItem:e.currentTarget.dataset.metric,selectedItemName:t.DisplayName,selectedItemKeywords:n})}},{key:"onClickClose",value:function(){var e=this.props,t=e.onClose;(0,e.onItemSelected)(this.state.selectedItem),t()}},{key:"generateClassifications",value:function(e,t,n){var a=e.filter((function(e){return e.Type.toUpperCase()===t.toUpperCase()&&lc(e)})).sort((function(e,t){return uc(e)-uc(t)}));if(0===a.length)return null;var i=this.state.selectedItem;return a.map((function(e){var t=i===e.Name;return Object(br.jsx)(pc,{category:e,isSelected:t,onClick:n},e.Name)}))}},{key:"renderKeyWordPills",value:function(e){var t=this.props.callSummary;return null===e?null:0===e.length?Object(br.jsx)("span",{children:"No keywords found for this category"}):e.map((function(e){return Object(br.jsx)(vc,{colors:t.keyCallers.colors,isSelected:!1,text:e.keyword,showLeftIndicator:e.showLeftIndicator,showRightIndicator:e.showRightIndicator,modalCategoryPill:!0})}))}},{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.show,a=e.transcription,i=this.state,r=i.selectedItemName,o=i.selectedItemKeywords;if(!n)return null;var s=a.Categories||[],c=this.generateClassifications(s,"Checkpoint",this.onClickClassification),l=this.generateClassifications(s,"Alert",this.onClickClassification),u=this.generateClassifications(s,"Concept",this.onClickClassification),d=this.renderKeyWordPills(o),h=null!==r?"Triggers:":null;return Object(br.jsx)("div",{className:bl.a.mask,children:Object(br.jsxs)("div",{className:bl.a.modal,children:[Object(br.jsx)("div",{className:bl.a.modalHeader,children:Object(br.jsx)("div",{className:bl.a.title,children:"Categories"})}),Object(br.jsx)("span",{className:bl.a.selectedItemName,children:r}),Object(br.jsxs)("div",{className:bl.a.triggers,children:[Object(br.jsx)("span",{children:h}),Object(br.jsx)("div",{className:bl.a.pillContainerKeywords,children:d})]}),Object(br.jsxs)("div",{className:bl.a.categoriesContainer,children:[Object(br.jsxs)("div",{className:bl.a.categoriesHeader,children:[Object(br.jsxs)("div",{className:bl.a.headerTitle,children:[Object(br.jsx)("div",{className:bl.a.title,children:"CheckPoints"}),Object(br.jsx)("hr",{})]}),Object(br.jsxs)("div",{className:bl.a.headerTitle,children:[Object(br.jsx)("div",{className:bl.a.title,children:"Alerts"}),Object(br.jsx)("hr",{})]}),Object(br.jsxs)("div",{className:bl.a.headerTitle,children:[Object(br.jsx)("div",{className:bl.a.title,children:"Concepts"}),Object(br.jsx)("hr",{})]})]}),Object(br.jsxs)("div",{className:bl.a.categoriesBody,children:[Object(br.jsx)("div",{className:bl.a.pillContainer,children:c}),Object(br.jsx)("div",{className:bl.a.pillContainer,children:l}),Object(br.jsx)("div",{className:bl.a.pillContainer,children:u})]})]}),Object(br.jsxs)("div",{className:bl.a.modalFooter,children:[Object(br.jsx)("button",{type:"button",className:bl.a.cancelButton,onClick:t,children:"CANCEL"}),Object(br.jsx)("button",{type:"button",className:bl.a.closeButton,onClick:this.onClickClose,disabled:null===r,children:"View Selection On Timeline"})]})]})})}}]),n}(a.Component);yl.defaultProps={show:!1};var gl=yl;var jl=Object(s.b)((function(e){var t=e.callSummary;return{show:e.knowledge.showClassificationsDialog,transcription:xe(e),callSummary:t}}),(function(e){return{onClose:function(){e({type:Pi})},onItemSelected:function(t){e(Di(t))}}}))((function(e){var t=e.onClose,n=e.onItemSelected,a=e.show,i=e.transcription,r=e.callSummary;return Object(br.jsx)(gl,{onClose:t,onItemSelected:n,show:a,transcription:i,callSummary:r})})),Ol=n(29),_l=n.n(Ol),xl=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).state={selectedItem:null,keyword:!1},a.onClickKeyword=a.onClickKeyword.bind(Object(rr.a)(a)),a.onClickClose=a.onClickClose.bind(Object(rr.a)(a)),a.onClickTopic=a.onClickTopic.bind(Object(rr.a)(a)),a.processKeywordsTopics=a.processKeywordsTopics.bind(Object(rr.a)(a)),a.generateKeywords=a.generateKeywords.bind(Object(rr.a)(a)),a.generateTopics=a.generateTopics.bind(Object(rr.a)(a)),a.generateMarkupForKeywordsTopics=a.generateMarkupForKeywordsTopics.bind(Object(rr.a)(a)),a}return Object(y.a)(n,[{key:"onClickKeyword",value:function(e){this.setState({selectedItem:e.currentTarget.dataset.metric,keyword:!0})}},{key:"onClickTopic",value:function(e){this.setState({selectedItem:e.currentTarget.dataset.metric,keyword:!1})}},{key:"processKeywordsTopics",value:function(e,t,n,a,i,r){var o={};return e[1][t].forEach((function(e){var t=o[e[n]]||Object(u.a)({},e);t[1]=!0,o[e[n]]=t})),e[2][t].forEach((function(e){var t=o[e[n]]||Object(u.a)({},e);t[2]=!0,o[e[n]]=t})),this.generateMarkupForKeywordsTopics(n,Object.values(o),a,i,r)}},{key:"generateKeywords",value:function(e,t,n){return 0===e[1].Keywords.length&&0===e[2].Keywords.length?Object(br.jsx)("p",{className:"text-grey-primary",children:"No keywords found"}):this.processKeywordsTopics(e,"Keywords","Keyword",Ni,t,n)}},{key:"generateTopics",value:function(e,t,n){return 0===e[1].Keywords.length&&0===e[2].Keywords.length?Object(br.jsx)("p",{className:"text-grey-primary",children:"No keywords found"}):this.processKeywordsTopics(e,"Topics","Topic",Ei,t,n)}},{key:"generateMarkupForKeywordsTopics",value:function(e,t,n){var a=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["#444","#aaa"],r=arguments.length>4?arguments[4]:void 0;return t.map((function(t){var n=a.state.selectedItem,o=!1;return null!==n&&(o=n===t.Keyword||n===t.Topic),Object(br.jsx)(vc,{colors:i,isSelected:o,onClick:r,showLeftIndicator:!0===t[1],showRightIndicator:!0===t[2],text:t[e],modalPill:!0},"".concat(t[e]))}))}},{key:"onClickClose",value:function(){var e=this.props,t=e.onClose;(0,e.onItemSelected)(this.state),t()}},{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.show,a=e.transcription,i=e.callSummary,r=this.state.selectedItem;if(!n)return null;var o=this.generateKeywords(a,i.keyCallers.colors,this.onClickKeyword),s=this.generateTopics(a,i.keyCallers.colors,this.onClickTopic);return Object(br.jsx)("div",{className:_l.a.mask,children:Object(br.jsxs)("div",{className:_l.a.modal,children:[Object(br.jsx)("div",{className:_l.a.modalHeader,children:Object(br.jsx)("div",{className:_l.a.title,children:"All Keywords & Topics"})}),Object(br.jsx)("div",{className:_l.a.subtitle,children:"Keywords"}),Object(br.jsx)("hr",{}),Object(br.jsx)("div",{className:_l.a.pillContainer,children:o}),Object(br.jsx)("div",{className:_l.a.subtitle,children:"Topics"}),Object(br.jsx)("hr",{}),Object(br.jsx)("div",{className:_l.a.pillContainer,children:s}),Object(br.jsxs)("div",{className:_l.a.modalFooter,children:[Object(br.jsx)("button",{type:"button",className:_l.a.cancelButton,onClick:t,children:"CANCEL"}),Object(br.jsx)("button",{type:"button",className:_l.a.closeButton,disabled:null===r,onClick:this.onClickClose,children:"View Selection On Timeline"})]})]})})}}]),n}(a.Component);xl.defaultProps={show:!1};var Cl=xl;var kl=Object(s.b)((function(e){return{show:e.knowledge.showKeywordsTopicsDialog,transcription:xe(e),callSummary:e.callSummary}}),(function(e){return{onClose:function(){e({type:Vi})},onItemSelected:function(t){t.keyword?e(Bi(t.selectedItem)):e(Ki(t.selectedItem))}}}))((function(e){var t=e.onClose,n=e.onItemSelected,a=e.show,i=e.transcription,r=e.callSummary;return Object(br.jsx)(Cl,{onClose:t,onItemSelected:n,show:a,transcription:i,callSummary:r})})),wl=n(33),Sl=n.n(wl),Tl=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).handlePrimaryClick=a.handlePrimaryClick.bind(Object(rr.a)(a)),a.handleSecondaryClick=a.handleSecondaryClick.bind(Object(rr.a)(a)),a}return Object(y.a)(n,[{key:"handlePrimaryClick",value:function(){var e=this.props,t=e.closeModal;(0,e.onPrimaryClicked)(),t()}},{key:"handleSecondaryClick",value:function(){(0,this.props.closeModal)()}},{key:"render",value:function(){var e=this.props,t=e.show,n=e.title,a=e.message,i=e.primaryButtonText,r=e.secondaryButtonText;return t?Object(br.jsx)("div",{className:Sl.a.mask,children:Object(br.jsxs)("div",{className:Sl.a.modal,children:[Object(br.jsx)("div",{className:Sl.a.modalHeader,children:Object(br.jsx)("div",{"data-testid":"divTitle",className:Sl.a.title,children:n})}),Object(br.jsx)("div",{"data-testid":"divMessage",className:Sl.a.message,children:a}),Object(br.jsxs)("div",{className:Sl.a.modalFooter,children:[r&&Object(br.jsx)("button",{type:"button",className:Sl.a.secondaryButton,onClick:this.handleSecondaryClick,children:r.toUpperCase()}),Object(br.jsx)("button",{type:"button",className:Sl.a.primaryButton,onClick:this.handlePrimaryClick,children:i})]})]})}):null}}]),n}(a.Component),Nl=Object(s.b)((function(e){var t=Me(e);return{show:t.show,title:t.title,message:t.message,primaryButtonText:t.primaryButtonText,secondaryButtonText:t.secondaryButtonText,onPrimaryClicked:t.onPrimaryClicked}}),(function(e){return{closeModal:function(){e((function(e){e({type:Zn})}))}}}))(Tl),El=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.onSetFocus;new tc("[data-tooltip]").onHover((function(e){return e.map((function(e){var t=new ir.a(e,{title:e.dataset.tooltip,html:!0,placement:"bottom",container:document.body,trigger:"manual"});return t.show(),"true"===e.dataset.tooltipFixedWidth&&t._tooltipNode.classList.add("fixed-width"),t}))})).onClear((function(e){e.forEach((function(e){e.dispose()}))})),new tc("[data-set-focus]").onClick((function(t){var n=Object(Fe.a)(t,1)[0].dataset.setFocus;e(n)}))}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isPlaying,a=t.scrub,i=t.playhead,r=t.onScrubberMoved;i!==e.playhead&&(n?(a.isUserModified&&e.playhead<=a.end&&i>a.end&&this.moveScrubToPlayheadArea(i),this.moveScrubToKeepPlayheadCentral(i),this.moveTranscriptionViewportToKeepPlayheadCentral(i)):r(Object(u.a)(Object(u.a)({},a),{},{isUserModified:!1})))}},{key:"moveScrubToPlayheadArea",value:function(e){var t=this.props,n=t.scrub,a=t.onScrubberMoved,i=n.end-n.start,r=Math.min(e,100-i);a({start:r,end:r+i})}},{key:"moveScrubToKeepPlayheadCentral",value:function(e){var t=this.props,n=t.scrub,a=t.onScrubberMoved,i=n.end-n.start,r=e-(n.start+i/2);if(!n.isUserModified||0===parseInt(100*r,10)){var o=Math.min(Math.max(0,n.start+r),100-i);a({start:o,end:o+i})}}},{key:"moveTranscriptionViewportToKeepPlayheadCentral",value:function(e){var t=this.props,n=t.viewport,a=t.onViewportMoved,i=n.span,r=e-(n.start+i/2);a({start:Math.min(Math.max(0,n.start+r),100-i),span:i})}},{key:"render",value:function(){var e=this.props,t=e.activeLayers,n=e.callSummary,a=e.showEditModal,i=e.showCallRatingDialog,r=e.onFinishAndRateClicked,o=e.showClassificationsDialog,s=e.showKeywordsTopicsDialog,c=e.jwtToken,l=e.showRatingButton,u=e.isRated,d=e.showErrorModal,h=n.keyCallers.colors,p=t.filter((function(e){return[La,Aa].includes(e)})).map((function(e){return Object(br.jsx)(Ns,{metricType:e},e)}));return Object(br.jsxs)("div",{className:"App",children:[Object(br.jsx)(Er,{onFinishAndRateClicked:r,showTransport:!0,jwtToken:c,showRatingButton:l,isRated:u}),Object(br.jsxs)("div",{className:"appContainer container",children:[Object(br.jsx)(cl,{activeLayers:t}),Object(br.jsxs)("div",{className:"hideableContainer",children:[Object(br.jsx)(Ls,{id:"event-scrubber",children:Object(br.jsx)(_s,{plotWholeTimeline:!0,singleColor:"#49535c",children:Object(br.jsx)(Ks,{plotWholeTimeline:!0})})}),Object(br.jsx)(Vs,{}),Object(br.jsxs)(_s,{showTransport:!0,plotWholeTimeline:!1,colors:h,leftMargin:40,children:[p,Object(br.jsx)(Ks,{plotWholeTimeline:!1})]})]}),Object(br.jsx)(Do,{canSetPlayHead:!0,plotWholeTimeline:!1})]}),a&&Object(br.jsx)(ec,{}),i&&Object(br.jsx)(fl,{}),o&&Object(br.jsx)(jl,{}),s&&Object(br.jsx)(kl,{}),d&&Object(br.jsx)(Nl,{})]})}}]),n}(a.Component);El.defaultProps={jwtToken:null,showRatingButton:!1,isRated:!1,showErrorModal:!1};var Il=Object(s.b)((function(e){var t=e.primaryUuid,n=e.activeLayers,a=e.scrub,i=e.data,r=e.callSummary,o=e.playback,s=o.isPlaying,c=o.playhead,l=e.transcription.viewport,u=e.notes.showEditModal,d=e.callRating,h=d.showCallRatingDialog,p=d.rating,m=e.knowledge.showClassificationsDialog,f=e.knowledge.showKeywordsTopicsDialog,v=e.auth.jwtToken,b=p.length>0,y=!!p.find((function(e){return e.score>0}));return{primaryUuid:t,activeLayers:n,isPlaying:s,playhead:c,scrub:a,data:i,callSummary:r,timeline:Xe(e),viewport:l,showEditModal:u,showCallRatingDialog:h,showClassificationsDialog:m,showKeywordsTopicsDialog:f,jwtToken:v,showRatingButton:b,isRated:y,showErrorModal:De(e)}}),(function(e){return{onScrubberMoved:function(t){e(ba(t))},onViewportMoved:function(t){e(_a(t))},onFinishAndRateClicked:function(){e({type:Pt,payload:{showCallRatingDialog:!0}})},onSetFocus:function(t){e(Ta(t))}}}))(El);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Pl=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||c.d,Ll=Object(c.e)((function(e,t){return t.type===ka?ar({experienceOptions:e.experienceOptions,auth:e.auth,activeLayers:e.activeLayers,status:Object(u.a)(Object(u.a)({},Na),{},{isDisplaying:e.status.isDisplaying}),scrub:Object(u.a)(Object(u.a)({},Qa),{},{isVisible:e.scrub.isVisible}),eventTimeline:Object(u.a)(Object(u.a)({},wi),{},{eventTimelineVisible:e.eventTimeline.eventTimelineVisible}),tabs:e.tabs},t):ar(e,t)}),Pl(Object(c.a)(l.a)));Ll.dispatch(Zi()),o.a.render(Object(br.jsx)(s.a,{store:Ll,children:Object(br.jsx)(Il,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[86,1,2]]]);
//# sourceMappingURL=main.1a303565.chunk.js.map