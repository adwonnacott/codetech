(this.webpackJsonpinsight=this.webpackJsonpinsight||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports={mask:"NoteModal_mask__1sUur",NoteModal:"NoteModal_NoteModal__1CEpf",modalHeader:"NoteModal_modalHeader__G3xba",title:"NoteModal_title__W7Jhu",modalBody:"NoteModal_modalBody__3C9UD",modalBodyDisabled:"NoteModal_modalBodyDisabled__3Q1R5",noteDetailsContainer:"NoteModal_noteDetailsContainer__2Uque",threadContainer:"NoteModal_threadContainer__2rgPO",detailColumn:"NoteModal_detailColumn__3j5i8",timeDetailColumn:"NoteModal_timeDetailColumn__3oSOl",userDetailColumn:"NoteModal_userDetailColumn__3873S",relatingToDetailColumn:"NoteModal_relatingToDetailColumn__1pydu",polarityDetailColumn:"NoteModal_polarityDetailColumn__S5HQY",timeInput:"NoteModal_timeInput__A0BE8",dropdown:"NoteModal_dropdown__190h9",timeDropdown:"NoteModal_timeDropdown__34kHu",dropdownButton:"NoteModal_dropdownButton__3vsAb",dropdownButtonWithIcon:"NoteModal_dropdownButtonWithIcon__14PCC",dropdownButtonIcon:"NoteModal_dropdownButtonIcon__1UAVK",typeToggle:"NoteModal_typeToggle__10u6g",dropdownContent:"NoteModal_dropdownContent__Qsz7N",timeToggle:"NoteModal_timeToggle__1-Dbp",dropdownItem:"NoteModal_dropdownItem__o06A4",dropdownItemWithIcon:"NoteModal_dropdownItemWithIcon__11Y9K",dropdownItemIcon:"NoteModal_dropdownItemIcon__2lT0D",dropdownBackground:"NoteModal_dropdownBackground__VLJmq",noteTextContainer:"NoteModal_noteTextContainer__2Q5uZ",noteDetails:"NoteModal_noteDetails__2QRGe",shareContainer:"NoteModal_shareContainer__1YoJG",modalFooter:"NoteModal_modalFooter__1gKrE",closeButton:"NoteModal_closeButton__3LD5c",cancelButton:"NoteModal_cancelButton__KgG6g",addButton:"NoteModal_addButton__EWZrV",deleteButton:"NoteModal_deleteButton__3Y1ib",timePicker:"NoteModal_timePicker__1pzBZ",numberPicker:"NoteModal_numberPicker__22GIX",numberInput:"NoteModal_numberInput__1Y-YM",upButton:"NoteModal_upButton__2eVrI",downButton:"NoteModal_downButton__NNB7z",checkboxContainer:"NoteModal_checkboxContainer__3ZLxn",checkboxLabel:"NoteModal_checkboxLabel__24vPa",checkbox:"NoteModal_checkbox__7QcMD",checkbox2:"NoteModal_checkbox2__2xXfi"}},,function(e,t,n){e.exports={EventTimeline:"EventTimeline_EventTimeline__33wCA",ControlLayer:"EventTimeline_ControlLayer__3I9iP",EventLayer:"EventTimeline_EventLayer__2vguG",LayerContent:"EventTimeline_LayerContent__755Wd",overlayMargin:"EventTimeline_overlayMargin__3Y6ok",gradientLayer:"EventTimeline_gradientLayer__2bcZi",gradientStart:"EventTimeline_gradientStart__fe28T",gradientEnd:"EventTimeline_gradientEnd__1FIgX",sentenceMarker:"EventTimeline_sentenceMarker__210VZ",focusSwitcherTop:"EventTimeline_focusSwitcherTop__1LiA0",focusSwitcherBottom:"EventTimeline_focusSwitcherBottom__1loOO",sentenceMarkerAvatarTop:"EventTimeline_sentenceMarkerAvatarTop__1O-ia",sentenceMarkerAvatarBottom:"EventTimeline_sentenceMarkerAvatarBottom__3Ph4J",sentence:"EventTimeline_sentence__jg4lB",conference:"EventTimeline_conference__2Eby2",top:"EventTimeline_top__2Wmfw",bottom:"EventTimeline_bottom__1jFB9",playhead:"EventTimeline_playhead__AyxS7",playheadTop:"EventTimeline_playheadTop__3Q8LR",playheadBottom:"EventTimeline_playheadBottom__2Vz-9",playheadTime:"EventTimeline_playheadTime__3MIEW",timeStamp:"EventTimeline_timeStamp__2ot5c",timeStampLine:"EventTimeline_timeStampLine__hoyPZ",timeStampText:"EventTimeline_timeStampText__3KcwP",overlay:"EventTimeline_overlay__2aUBd","transport-container":"EventTimeline_transport-container__1JTo3","transport-button":"EventTimeline_transport-button__1qMlf",start:"EventTimeline_start__18fGt",restart:"EventTimeline_restart__1SD5f",overlayContentFlex:"EventTimeline_overlayContentFlex__25gAH","info-box":"EventTimeline_info-box__2tBxX","info-displaying-text":"EventTimeline_info-displaying-text__3zglK",channelLines:"EventTimeline_channelLines__2PYg_",channelLabel:"EventTimeline_channelLabel__17jRE",tinyNumber:"EventTimeline_tinyNumber__298XW",hideEventTimeline:"EventTimeline_hideEventTimeline__1Ts_P",showEventTimeline:"EventTimeline_showEventTimeline__6kP7r",showEventTimelineContent:"EventTimeline_showEventTimelineContent__OyRJo",showIcon:"EventTimeline_showIcon__3LR3W",pauseSkipIcon:"EventTimeline_pauseSkipIcon__1Z7lW",progressBarContainer:"EventTimeline_progressBarContainer__me3sx",progressBarOuter:"EventTimeline_progressBarOuter__2amQO",progressBar:"EventTimeline_progressBar__6AoIF",closeButton:"EventTimeline_closeButton__w6MsB",unreadNotes:"EventTimeline_unreadNotes__2oRWZ",notificationBell:"EventTimeline_notificationBell__3J2q2",notificationCount:"EventTimeline_notificationCount__336nT",reviewButton:"EventTimeline_reviewButton__3hWjI"}},function(e,t,n){e.exports={header:"CallSummary_header__1BrBi",summaryBar:"CallSummary_summaryBar__29dIH",summaryLines:"CallSummary_summaryLines__1o5UL",summaryLabels:"CallSummary_summaryLabels__O3NWb",label:"CallSummary_label__1Ad0x",line:"CallSummary_line__1ABtQ",group:"CallSummary_group__2Snbk",flip:"CallSummary_flip__nesyS",section:"CallSummary_section__1TjqM",sectionColumns:"CallSummary_sectionColumns__2exPN",talking:"CallSummary_talking__1fO-y",listening:"CallSummary_listening__2mQKD",overtalk:"CallSummary_overtalk__Ez4YV",silent:"CallSummary_silent__22eJS",holding:"CallSummary_holding__10Wlo",queuing:"CallSummary_queuing__3noF0",routing:"CallSummary_routing__2xLTH",ringing:"CallSummary_ringing__3dJg9",agent:"CallSummary_agent__HcXtE",customer:"CallSummary_customer__M0Ach",headerItem:"CallSummary_headerItem__3Kfka",buttonShowLess:"CallSummary_buttonShowLess__2u-v-",buttonShowMore:"CallSummary_buttonShowMore__q9TAD",metricsSection:"CallSummary_metricsSection__Bmdci",metricsTable:"CallSummary_metricsTable__3tBLo",totals:"CallSummary_totals__3S669",figure:"CallSummary_figure__2TdLL",rowTitle:"CallSummary_rowTitle__1Lho5",bigDigits:"CallSummary_bigDigits__2s6yo"}},,function(e,t,n){e.exports={onTop:"TranscriptionConversation_onTop__H7ZcM",TranscriptionConversation:"TranscriptionConversation_TranscriptionConversation__Hm7sm",transcriptionEventContainer:"TranscriptionConversation_transcriptionEventContainer__3j7RN",container:"TranscriptionConversation_container__d2bFK",playHead:"TranscriptionConversation_playHead__10vuv",start:"TranscriptionConversation_start__28y7S",conversation:"TranscriptionConversation_conversation__9LZ36",conversationContainer:"TranscriptionConversation_conversationContainer__3GZbJ",conversationRow:"TranscriptionConversation_conversationRow__3FWdD",conversationRowLinked:"TranscriptionConversation_conversationRowLinked__YmrvP",conversationRowRight:"TranscriptionConversation_conversationRowRight__1hJHF",spacer:"TranscriptionConversation_spacer__1P6IX",sentence:"TranscriptionConversation_sentence__3Yd0S",primary:"TranscriptionConversation_primary__3s7C6",playheadMarker:"TranscriptionConversation_playheadMarker__2IF7x",sentenceBody:"TranscriptionConversation_sentenceBody__2qhuW",person:"TranscriptionConversation_person__1lwBb",blanking:"TranscriptionConversation_blanking__2y-h2",secondary:"TranscriptionConversation_secondary__2k82J",initials:"TranscriptionConversation_initials__11w8E",playHeadLine:"TranscriptionConversation_playHeadLine__1ir2G",playHeadStartText:"TranscriptionConversation_playHeadStartText__2Bhe6",confidence:"TranscriptionConversation_confidence__3QVNg",matchFill:"TranscriptionConversation_matchFill__3n50E",matchFillAnimate:"TranscriptionConversation_matchFillAnimate__1KxgR"}},,,,function(e,t,n){e.exports={mask:"CallRating_mask__2Zwb0",CallRating:"CallRating_CallRating__1tqJB",modalHeader:"CallRating_modalHeader__NQG1W",title:"CallRating_title__2Icpr",modalBody:"CallRating_modalBody__xjR-2",ratingRow:"CallRating_ratingRow__2z4ST",ratingContainer:"CallRating_ratingContainer__3toSc",ratingTitle:"CallRating_ratingTitle__2cE1f",noteDetails:"CallRating_noteDetails__2XJ4E",pipRating:"CallRating_pipRating__15oOm",rating:"CallRating_rating__ClyMx",pip:"CallRating_pip__1RnoO",pip5:"CallRating_pip5__3tMFu",active:"CallRating_active__wbvz3",radio5:"CallRating_radio5__yIA_p",pip4:"CallRating_pip4__2th7s",radio4:"CallRating_radio4__3KLED",pip3:"CallRating_pip3__vIrFG",radio3:"CallRating_radio3__2OTA4",pip2:"CallRating_pip2__1he_W",radio2:"CallRating_radio2__LLg-u",pip1:"CallRating_pip1__3fhyr",radio1:"CallRating_radio1__1kD5j",modalFooter:"CallRating_modalFooter__3hk2T",closeButton:"CallRating_closeButton__ENewE",cancelButton:"CallRating_cancelButton__2tfav",finishButton:"CallRating_finishButton__2XxMi"}},function(e,t,n){e.exports={small:"StandardChannelEventsLayer_small__1cz35",startIcon:"StandardChannelEventsLayer_startIcon__saU_x",endIcon:"StandardChannelEventsLayer_endIcon__uu9yc",eventContainer:"StandardChannelEventsLayer_eventContainer__C4qVC",event:"StandardChannelEventsLayer_event__3V-VD",LayerContent:"StandardChannelEventsLayer_LayerContent__1PL5F",transfer:"StandardChannelEventsLayer_transfer__1lZVx",scrubber:"StandardChannelEventsLayer_scrubber__1D3au",pause:"StandardChannelEventsLayer_pause__1RSEJ",start:"StandardChannelEventsLayer_start__3RgZE",ring:"StandardChannelEventsLayer_ring__1sQ7b",bridge:"StandardChannelEventsLayer_bridge__k8UYG",wholeTimeline:"StandardChannelEventsLayer_wholeTimeline__1pwqa",hold:"StandardChannelEventsLayer_hold__2xXdl",microClusteredEndIconContainer:"StandardChannelEventsLayer_microClusteredEndIconContainer__inN4v",microClusteredEndIcon:"StandardChannelEventsLayer_microClusteredEndIcon__3RFBa",markerLines:"StandardChannelEventsLayer_markerLines__Gu0Eq",leftLine:"StandardChannelEventsLayer_leftLine__yYz6W",rightLine:"StandardChannelEventsLayer_rightLine__1BGwr",routingOverlay:"StandardChannelEventsLayer_routingOverlay__InWyN",routing:"StandardChannelEventsLayer_routing__3eXD8",primary:"StandardChannelEventsLayer_primary__2UeZx",secondary:"StandardChannelEventsLayer_secondary__33HtG",iconLevel:"StandardChannelEventsLayer_iconLevel__12BAC",unrecordedTimeLabel:"StandardChannelEventsLayer_unrecordedTimeLabel__1Q3g4"}},,function(e,t,n){e.exports={SearchFilters:"SearchFilters_SearchFilters__357Sq",tabs:"SearchFilters_tabs__2YMo0",button:"SearchFilters_button__cLFyv",active:"SearchFilters_active__173Mt",inuse:"SearchFilters_inuse__2hUDP",spacer:"SearchFilters_spacer__1zssF",search:"SearchFilters_search__Drw9T",callSummary:"SearchFilters_callSummary__2My5R",knowledge:"SearchFilters_knowledge__2vUtq",insights:"SearchFilters_insights__2Et2o",chevron:"SearchFilters_chevron__2PbAp"}},function(e,t,n){e.exports={mask:"KnowledgeClassifications_mask__1WKQO",modal:"KnowledgeClassifications_modal__1QIuP",modalHeader:"KnowledgeClassifications_modalHeader__2w6Aq",title:"KnowledgeClassifications_title__1iCPt",modalFooter:"KnowledgeClassifications_modalFooter__NR1DA",categoriesContainer:"KnowledgeClassifications_categoriesContainer__Stq-p",categoriesHeader:"KnowledgeClassifications_categoriesHeader__LFc_1",categoriesBody:"KnowledgeClassifications_categoriesBody__2J2G9",headerTitle:"KnowledgeClassifications_headerTitle__flmR3",pillContainer:"KnowledgeClassifications_pillContainer__2PJxO",pillContainerKeywords:"KnowledgeClassifications_pillContainerKeywords__ElOMm",selectedItemName:"KnowledgeClassifications_selectedItemName__2s8Fe",triggers:"KnowledgeClassifications_triggers__1IY6a",closeButton:"KnowledgeClassifications_closeButton__3BDhi",cancelButton:"KnowledgeClassifications_cancelButton__3dCyB"}},,function(e,t,n){e.exports={callListContainer:"Header_callListContainer__3V3Yf",callListItem:"Header_callListItem__3ZYY-",uuid:"Header_uuid__29XWB",itemIndex:"Header_itemIndex__6xdhU",Header:"Header_Header__1CTzX",HeaderContainer:"Header_HeaderContainer__1lPul",Branding:"Header_Branding__3-ssE",logo:"Header_logo__3T0lc",Player:"Header_Player__3mMx8",LayoutOptions:"Header_LayoutOptions__uuRgn",Exit:"Header_Exit__3Zmim",visibilityButton:"Header_visibilityButton__2fe1C",dropdownContent:"Header_dropdownContent__1iGTI",regularCheckbox:"Header_regularCheckbox__3Mc9e",dropdownItem:"Header_dropdownItem__1lTVZ",finish:"Header_finish__2O8pu"}},function(e,t,n){e.exports={content:"Knowledge_content__SqQhv",column:"Knowledge_column__Ozm__",title:"Knowledge_title__2OvnU",topics:"Knowledge_topics__2vmDc",spacer:"Knowledge_spacer__3sa6z",pillContainer:"Knowledge_pillContainer__2fixs",classificationContainer:"Knowledge_classificationContainer__3epfS",classificationsExceptionHeader:"Knowledge_classificationsExceptionHeader__1nYgL",classificationsExceptionColumn:"Knowledge_classificationsExceptionColumn__2OBgk",classificationsEmpty:"Knowledge_classificationsEmpty__343P2",noPointerEvents:"Knowledge_noPointerEvents__2uKBo",searchNavigation:"Knowledge_searchNavigation__UuGYG",showAll:"Knowledge_showAll__mBv5l",progressBarContainer:"Knowledge_progressBarContainer__ng3g5",progressBarOuter:"Knowledge_progressBarOuter__31YuM",progressBar:"Knowledge_progressBar__iUN4Q"}},function(e,t,n){e.exports={actionButton:"TranscriptionNote_actionButton__269-z",overflowMenu:"TranscriptionNote_overflowMenu__3ybh5",acknowledged:"TranscriptionNote_acknowledged__2GXoK",toggleThreadButton:"TranscriptionNote_toggleThreadButton__27ZFe",edited:"TranscriptionNote_edited__2fkGM",locked:"TranscriptionNote_locked__1Oel1",note:"TranscriptionNote_note__3SnEO",comment:"TranscriptionNote_comment__2_9kK",closed:"TranscriptionNote_closed__2wrrn",heading:"TranscriptionNote_heading__24j7C",subject:"TranscriptionNote_subject__2VwZG",author:"TranscriptionNote_author__3_4Rr",time:"TranscriptionNote_time__1-g5E",noteText:"TranscriptionNote_noteText__1B-l1",unread:"TranscriptionNote_unread__25WDG"}},function(e,t,n){e.exports={transcriptionContainer:"Transcription_transcriptionContainer__OfTBP",Transcription:"Transcription_Transcription__5sUXw",sections:"Transcription_sections__3y7Hr",LayerContent:"Transcription_LayerContent__3-m_O",playScrub:"Transcription_playScrub__1RgEc",playScrubLine:"Transcription_playScrubLine__1XA-7",playButton:"Transcription_playButton__939mV",playHead:"Transcription_playHead__3ktpg",notes:"Transcription_notes__28nDa",conversation:"Transcription_conversation__3Vogj",confidenceContainer:"Transcription_confidenceContainer__IUiZE",confidenceHighlight:"Transcription_confidenceHighlight__H7Vyc",confidenceText:"Transcription_confidenceText__1iM-r",slider:"Transcription_slider__3gJr4"}},function(e,t,n){e.exports={TranscriptionNotes:"TranscriptionNotes_TranscriptionNotes__2SeRv",NewNoteSection:"TranscriptionNotes_NewNoteSection__ra53G",newNoteContainer:"TranscriptionNotes_newNoteContainer__K0dDS",newNoteText:"TranscriptionNotes_newNoteText__2rKR2",newNoteIcon:"TranscriptionNotes_newNoteIcon__WGBma",checkboxContainer:"TranscriptionNotes_checkboxContainer__3c2aO",checkboxLabel:"TranscriptionNotes_checkboxLabel__1rHpr",checkbox:"TranscriptionNotes_checkbox__1IkkD",note:"TranscriptionNotes_note__nH8_D",heading:"TranscriptionNotes_heading__3oU5F",time:"TranscriptionNotes_time__1pqGi",noteText:"TranscriptionNotes_noteText__3eHkg",editButton:"TranscriptionNotes_editButton__SiSVX",bottomMenuSpacer:"TranscriptionNotes_bottomMenuSpacer__1nUEP"}},function(e,t,n){e.exports={mask:"KnowledgeKeywordsTopics_mask__3tGa-",modal:"KnowledgeKeywordsTopics_modal__2Zeaj",modalHeader:"KnowledgeKeywordsTopics_modalHeader__12uxf",title:"KnowledgeKeywordsTopics_title__Z41_g",subtitle:"KnowledgeKeywordsTopics_subtitle__2ed4A",modalFooter:"KnowledgeKeywordsTopics_modalFooter__1BRyY",columnContainer:"KnowledgeKeywordsTopics_columnContainer__1uO-U",pillContainer:"KnowledgeKeywordsTopics_pillContainer__1yuPX",classificationPill:"KnowledgeKeywordsTopics_classificationPill__73Y_w",light:"KnowledgeKeywordsTopics_light__2nTR6",dark:"KnowledgeKeywordsTopics_dark__1kTN4",pillText:"KnowledgeKeywordsTopics_pillText__3u4JU",classificationIndicator:"KnowledgeKeywordsTopics_classificationIndicator__3SXfQ",red:"KnowledgeKeywordsTopics_red__3gxmE",orange:"KnowledgeKeywordsTopics_orange__rJbPG",green:"KnowledgeKeywordsTopics_green__a3zG0",grey:"KnowledgeKeywordsTopics_grey__3Ep5x",closeButton:"KnowledgeKeywordsTopics_closeButton__2zTH8",cancelButton:"KnowledgeKeywordsTopics_cancelButton__22Ydx"}},function(e,t,n){e.exports={container:"Insights_container__tixkw",title:"Insights_title__2p7eg",subtitle:"Insights_subtitle__2cDow",formCheck:"Insights_formCheck__3v1Y9",indicator:"Insights_indicator__3ot-J",separator:"Insights_separator__G8ClD",thirdWidth:"Insights_thirdWidth__yWkcT",halfWidth:"Insights_halfWidth__28ltv"}},function(e,t,n){e.exports={dropdown:"Dropdown_dropdown__2ms-9",dropdownToggle:"Dropdown_dropdownToggle__2e8Ib",dropdownBackground:"Dropdown_dropdownBackground__284-1",dropdownContent:"Dropdown_dropdownContent__3v-qe",fadeIn:"Dropdown_fadeIn__3EmcY",dropdownButton:"Dropdown_dropdownButton__3eMEJ",dropdownItem:"Dropdown_dropdownItem__2IaVy",selected:"Dropdown_selected__2KC1A",viewName:"Dropdown_viewName__fPHuV"}},function(e,t,n){e.exports={Player:"Player_Player__2Y5lJ",skipBack:"Player_skipBack__2B606",playback:"Player_playback__1QNHd",skipForward:"Player_skipForward__3mvfF",play:"Player_play__3iaw4",playDisabled:"Player_playDisabled__261XM",pause:"Player_pause__3i8vL",changeSpeed:"Player_changeSpeed__1nV3t"}},function(e,t,n){e.exports={mask:"ErrorModal_mask__1iinA",modal:"ErrorModal_modal__3DSmd",modalHeader:"ErrorModal_modalHeader__3noKu",title:"ErrorModal_title__20LRH",message:"ErrorModal_message__1siCE",modalFooter:"ErrorModal_modalFooter__6Vgf2",secondaryButton:"ErrorModal_secondaryButton__2ATbd",primaryButton:"ErrorModal_primaryButton__1KUs3"}},,function(e,t,n){e.exports={classificationPill:"KnowledgeClassificationPill_classificationPill__3r7bf",dark:"KnowledgeClassificationPill_dark__1u4sR",classificationIndicator:"KnowledgeClassificationPill_classificationIndicator__10E2O",positive:"KnowledgeClassificationPill_positive__3NkmP",negative:"KnowledgeClassificationPill_negative__1T4AJ",warning:"KnowledgeClassificationPill_warning__2yPbF",info:"KnowledgeClassificationPill_info__sVvVr",pillText:"KnowledgeClassificationPill_pillText__2PbXm"}},function(e,t,n){e.exports={Search:"Search_Search__2wNw2",searchTextBox:"Search_searchTextBox__1XTgg",searchNavigation:"Search_searchNavigation__gvy74",chevron:"Search_chevron__2pcu0",spacer:"Search_spacer__OM0E8",clearButton:"Search_clearButton__18xL2"}},,function(e,t,n){e.exports={button:"OverflowMenu_button__2JaCa",locked:"OverflowMenu_locked__oj3aS",popover:"OverflowMenu_popover__178h3",menu:"OverflowMenu_menu__Li1f5",item:"OverflowMenu_item__1xBO4"}},function(e,t,n){e.exports={"info-box":"MetricsTimelineLayer_info-box__2mv6g","key-info-box":"MetricsTimelineLayer_key-info-box__1qu8Z","transcription-confidence":"MetricsTimelineLayer_transcription-confidence__2_7Us","background-noise-level":"MetricsTimelineLayer_background-noise-level__pMkDu",LayerContent:"MetricsTimelineLayer_LayerContent__2dmql",plotline:"MetricsTimelineLayer_plotline__CEqVm",confidence:"MetricsTimelineLayer_confidence__2Fesv",caller:"MetricsTimelineLayer_caller__9_6-d",agent:"MetricsTimelineLayer_agent__2uZ2h",noise:"MetricsTimelineLayer_noise__XMWu5","noise-primary":"MetricsTimelineLayer_noise-primary__2FFQq","noise-secondary":"MetricsTimelineLayer_noise-secondary__30XHG"}},function(e,t,n){e.exports={pill:"KnowledgeKeywordTopicPill_pill__3gVG5",pillModal:"KnowledgeKeywordTopicPill_pillModal__3mstZ",pillCategoryModal:"KnowledgeKeywordTopicPill_pillCategoryModal__27JUc",pillText:"KnowledgeKeywordTopicPill_pillText__3hCWf",pillColourContainer:"KnowledgeKeywordTopicPill_pillColourContainer__jQNrN"}},function(e,t,n){e.exports={resultNavigator:"ResultNavigator_resultNavigator__2de3B",button:"ResultNavigator_button__3LA5-",searchItemContainer:"ResultNavigator_searchItemContainer__3Lcb1"}},,,,function(e,t,n){e.exports={filter:"NotesFilterSelector_filter__39c6L",popover:"NotesFilterSelector_popover__6Ahbx",item:"NotesFilterSelector_item__27MiK",highlighted:"NotesFilterSelector_highlighted__3IDw-"}},function(e,t,n){e.exports={LayerContent:"AudioEventLayer_LayerContent__1wCHN",LayerContentVertical:"AudioEventLayer_LayerContentVertical__1_LDe",eventContainer:"AudioEventLayer_eventContainer__61Q3N",ClashLine:"AudioEventLayer_ClashLine__3aXBK",ClashLineHorizontal:"AudioEventLayer_ClashLineHorizontal__1PnCw",ClashIcon:"AudioEventLayer_ClashIcon__jIbuW",Primary:"AudioEventLayer_Primary__pimRL",Secondary:"AudioEventLayer_Secondary__3wL-C",Cluster:"AudioEventLayer_Cluster__14ML6"}},,,,,,,,,function(e,t,n){e.exports={container:"LayoutOptions_container__SnRJV",button:"LayoutOptions_button__2hfc6",popover:"LayoutOptions_popover__12o3_",item:"LayoutOptions_item__ih14T",regularCheckbox:"LayoutOptions_regularCheckbox__1NGBi"}},function(e,t,n){e.exports={avatar:"Avatar_avatar__33rUO",svgIcon:"Avatar_svgIcon__1m2Hf"}},,,,,,,,,,,,,,,,,,function(e,t){},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),i=n(47),o=n.n(i),s=n(10),c=n(34),l=n(60),u=n(1),d="SET_PRIMARY_UUID";var h=n(15),p=n.n(h),m=n(23),f=n(4),v=n(6),b=n(7),y=n(8),g=n(61),j=n.n(g),O="https://sapien.stage.redmatter.com",_="https://callflow.redmatter-stage.pub",x="https://gatekeeper.redmatter-stage.pub",C="Employee",k="Customer",w=function e(t,n,a){Object(f.a)(this,e),this.accessToken=t,this.userId=n,this.organisationId=a},S=function(){function e(t){Object(f.a)(this,e),this.BASE_URL=t,this.auth=new j.a({clientId:"",clientSecret:"",accessTokenUri:"".concat(e.tokenBaseUrl,"/auth/token")})}return Object(y.a)(e,[{key:"getToken",value:function(){var t=Object(m.a)(p.a.mark((function t(){var n,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"===typeof this.token){t.next=2;break}return t.abrupt("return",this.token);case 2:return t.next=4,this.auth.owner.getToken("","");case 4:return n=t.sent,t.next=7,fetch("".concat(e.tokenBaseUrl,"/v1/user/me"),{headers:{Accept:"application/json",Authorization:"Bearer ".concat(n.accessToken)}}).then((function(e){return e.json()}));case 7:return a=t.sent,this.token=new w(n.accessToken,a.userId,a.organisationId),t.abrupt("return",this.token);case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"doGet",value:function(){var e=Object(m.a)(p.a.mark((function e(t,n){var a,r,i,o=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=o.length>2&&void 0!==o[2]?o[2]:{},(r=a.Accept||"application/json").includes("application/json")||(r="".concat(a.Accept,", application/json")),i=null,!n){e.next=8;break}i={accessToken:n},e.next=11;break;case 8:return e.next=10,this.getToken();case 10:i=e.sent;case 11:return e.abrupt("return",fetch("".concat(this.BASE_URL,"/").concat(t),{headers:Object(u.a)(Object(u.a)({},a),{},{Accept:r,Authorization:"Bearer ".concat(i.accessToken)})}));case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"tokenBaseUrl",get:function(){return O}}]),e}(),T=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){Object(f.a)(this,n);var e=JSON.parse(localStorage.getItem("ENV_URLS")),a=_;return e&&e.callflowUrl&&(a=e.callflowUrl),t.call(this,a)}return n}(S),N=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){Object(f.a)(this,n);var e=JSON.parse(localStorage.getItem("ENV_URLS")),a=O;return e&&e.sapienUrl&&(a=e.sapienUrl),t.call(this,a)}return n}(S),E="mp3";function I(e,t){var n=100/t.range;return"".concat(n*(e-t.start),"%")}function P(e,t){var n=e+(t.transcriptionStart-t.start),a=100/t.range;return"".concat(a*(n-t.start),"%")}function L(e,t,n){var a=100/n.range;return"".concat(a*(t-e),"%")}function R(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e)return Object(u.a)(Object(u.a)({},n),{},{width:"100%",marginLeft:"0%"});var a=100/(t.end-t.start)*100,r=a/100*t.start;return Object(u.a)(Object(u.a)({},n),{},{width:"".concat(a,"%"),marginLeft:"".concat(-r,"%")})}function M(e){return[0,0,Math.floor(e.range/1e3),100].join(" ")}function A(e,t,n,a,r){return(e-t)*(r-a)/(n-t)+a}function D(e){var t=e.event,n={isCsStateChange:!0};switch(t){case"CHANNEL_START":return{isChannelStart:!0};case"CHANNEL_RING":return{isChannelRing:!0};case"CHANNEL_ANSWER":return{isChannelAnswer:!0};case"CHANNEL_END":return{isChannelEnd:!0};case"CHANNEL_COMPLETE":return{isChannelComplete:!0};case"CS_BRIDGE":return Object(u.a)(Object(u.a)({},n),{},{isBridge:!0});case"CS_PARKED_TRANSFER":return Object(u.a)(Object(u.a)({},n),{},{isParkedTransfer:!0});case"CS_QUEUING":return Object(u.a)(Object(u.a)({},n),{},{isQueuing:!0});case"CS_ROUTING":return Object(u.a)(Object(u.a)({},n),{},{isRouting:!0});case"PARK_OTHER_FOR_TRANSFER":return Object(u.a)(Object(u.a)({},n),{},{isParkedTransfer:!0,isSecondary:!0});case"UNBRIDGE":return Object(u.a)(Object(u.a)({},n),{},{isUnBridge:!0});case"CONFERENCE_IN":return{isConferenceIn:!0};case"CONFERENCE_OUT":return{isConferenceOut:!0};case"RECORD_START":return{isRecordStart:!0};case"RECORD_STOP":return{isRecordStop:!0};case"HOLD":return{isHold:!0};case"UN_HOLD":return{isUnHold:!0};case"REQUEST_HOLD":return{isHold:!0,isSecondary:!0};case"REQUEST_UN_HOLD":return{isUnHold:!0,isSecondary:!0};case"LISTEN_IN":return{isListenIn:!0};case"LISTEN_IN_WHISPER":return{isListenInWhisper:!0};case"LISTEN_IN_BARGE":return{isListenInBarge:!0};case"LISTEN_IN_DISCONNECT":return{isListenInDisconnect:!0};default:return console.log("New event found: ".concat(t.event)),{}}}function U(e){return Object.keys(e).join(" ")}var B=n(57),F=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object(f.a)(this,n),(e=t.call(this,a)).status=r,e.displayMessage=i,e}return n}(Object(B.a)(Error)),K=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Object(f.a)(this,n),(e=t.call(this,a)).response=r,e}return n}(Object(B.a)(Error)),H=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(f.a)(this,e),this.status=t,this.statusMessage=n,this.blockingMessage=a};function W(e){return V.apply(this,arguments)}function V(){return(V=Object(m.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new N,a=null,!t){e.next=6;break}a=t,e.next=9;break;case 6:return e.next=8,n.getToken();case 8:a=e.sent;case 9:return e.abrupt("return",n.doGet("v1/organisation/".concat(a.organisationId,"/log/call"),t?t.token:null).then((function(e){return e.ok?e.json():[]})));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e,t){return Y.apply(this,arguments)}function Y(){return(Y=Object(m.a)(p.a.mark((function e(t,n){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=new N,r=null,!n){e.next=6;break}r=n,e.next=9;break;case 6:return e.next=8,a.getToken();case 8:r=e.sent;case 9:return e.abrupt("return",a.doGet("v1/organisation/".concat(r.organisationId,"/log/call?uuid=").concat(t),n?n.token:null).then((function(e){return e.ok?e.json():[]})));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){var t=function(){var e=[];return function(t){return!e.includes(t.timeStart)&&(e.push(t.timeStart),!0)}}();return e.flat().filter(t).sort((function(e,t){return new Date(e.timeStart).getTime()-new Date(t.timeStart).getTime()}))}function J(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:G;return new Promise((function(a){var r=[];e.forEach((function(i){n(i,t).then((function(t){r.push(t.data),r.length===e.length&&a(X(r))}))}))}))}function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===t||!Array.isArray(e)||0===e.length)return e;var n=Number.MAX_SAFE_INTEGER,a=t,r=Number.MAX_SAFE_INTEGER;return e.forEach((function(e){(!0===e.flags.isRecordStart||!0===e.flags.isSecondary&&!0===e.flags.isUnHold)&&e.timestamp<n&&(n=e.timestamp),(!0===e.flags.isRecordStop||!0===e.flags.isSecondary&&!0===e.flags.isHold)&&(a-=e.timestamp-n,n=Number.MAX_SAFE_INTEGER,a<0&&r===Number.MAX_SAFE_INTEGER&&(r=e.timestamp+a))})),e.map((function(e){return!0===e.flags.isRecordStop||!0===e.flags.isSecondary&&!0===e.flags.isHold?Object(u.a)(Object(u.a)({},e),{},{timestamp:Math.min(r,e.timestamp)}):e}))}function z(e){var t=e.events,n=t;if(0===t.filter((function(e){return"CHANNEL_START"===e.event})).length){var a=t.sort((function(e,t){return e.timestamp-t.timestamp}))[0];n=n.concat({event:"CHANNEL_START",timestamp:a.timestamp})}if(0===t.filter((function(e){return"CHANNEL_END"===e.event})).length){var r=t.sort((function(e,t){return t.timestamp-e.timestamp}))[0];n=n.concat({event:"CHANNEL_END",timestamp:r.timestamp})}return Object(u.a)(Object(u.a)({},e),{},{events:n})}function Q(e,t){var n=e.events;return Object(u.a)(Object(u.a)({},e),{},{events:q(n.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{flags:D(e)})})),t)})}function Z(e,t,n){return $.apply(this,arguments)}function $(){return($=Object(m.a)(p.a.mark((function e(t,n,a){var r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=3;break}return alert("UUID cannot be null"),e.abrupt("return",[]);case 3:if(r=new T,i=null,!a){e.next=9;break}i=a,e.next=12;break;case 9:return e.next=11,r.getToken();case 11:i=e.sent;case 12:return e.abrupt("return",r.doGet("organisation/".concat(i.organisationId,"/callflow/").concat(t),a?a.token:null).then((function(e){if(!e.ok)throw Error("Request failed");return e.json().then((function(e){return z(e)})).then((function(e){return Q(e,n)}))})));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e,t){return te.apply(this,arguments)}function te(){return(te=Object(m.a)(p.a.mark((function e(t,n){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=3;break}return alert("UUID cannot be null"),e.abrupt("return",[]);case 3:if(a=new N,r=null,!n){e.next=9;break}r=n,e.next=12;break;case 9:return e.next=11,a.getToken();case 11:r=e.sent;case 12:return e.abrupt("return",a.doGet("v1/organisation/".concat(r.organisationId,"/archive/recording/").concat(t,"/analytics/transcription"),n?n.token:null).then((function(e){return e.ok?e.json():[]})));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e,t){return ae.apply(this,arguments)}function ae(){return(ae=Object(m.a)(p.a.mark((function e(t,n){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=3;break}return alert("UUID cannot be null"),e.abrupt("return",[]);case 3:if(a=new N,r=null,!n){e.next=9;break}r=n,e.next=12;break;case 9:return e.next=11,a.getToken();case 11:r=e.sent;case 12:return e.abrupt("return",a.doGet("v1/organisation/".concat(r.organisationId,"/archive/recording/").concat(t,"/analytics/talkTime"),n?n.token:null).then((function(e){return e.ok?e.json():[]})));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e,t){return ie.apply(this,arguments)}function ie(){return(ie=Object(m.a)(p.a.mark((function e(t,n){var a,r,i,o,s,c,l,u,d,h,m,f,v,b=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=b.length>2&&void 0!==b[2]?b[2]:function(){},null!==t){e.next=4;break}return alert("UUID cannot be null"),e.abrupt("return",[]);case 4:if(r=new N,i=null,!n){e.next=10;break}i=n,e.next=13;break;case 10:return e.next=12,r.getToken();case 12:i=e.sent;case 13:return e.next=15,r.doGet("v1/organisation/".concat(i.organisationId,"/archive/recording/").concat(t),n?n.token:null,{Accept:"audio/".concat(E)});case 15:if((o=e.sent).ok){e.next=18;break}throw new K("Request failed",o);case 18:s=o.body.getReader(),o.headers&&(c=o.headers.get("X-Audio-duration"),l=o.headers.get("Content-Length")),c||(c=1e3),l||(l=c*4388),u=0,d=[];case 24:return e.next=27,s.read();case 27:if(h=e.sent,m=h.done,f=h.value,!m){e.next=32;break}return e.abrupt("break",38);case 32:d.push(f),u+=f.length,a(u/l*100),e.next=24;break;case 38:return v=new Blob(d),e.abrupt("return",{duration:Math.round(1e6*Number(c)),blob:v});case 40:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var oe=n(20);function se(e){return e.map((function(e){var t=e.data,n=t?{data:t}:null;if("string"===typeof t)try{n={data:JSON.parse(t)}}catch(a){console.warn("Unable to parse the data")}return Object(u.a)(Object(u.a)({},e),n)}))}function ce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=se(e).filter((function(e){return e.data&&e.data.uuid})).map((function(e){return e.data.uuid}));return"string"===typeof t&&t.length>0&&(n=[t].concat(Object(oe.a)(n))),n.filter((function(e,t,n){return n.indexOf(e)===t}))}var le=function(e,t){return e.find((function(e){return e.uuid===t}))},ue=function(e){return e.primaryUuid},de=function(e){return e.participants},he=function(e){return e.events},pe=function(e){return he(e).uuid},me=function(e){return he(e).events},fe=function(e){return he(e).eventsByParticipants},ve=function(e){return e.calls},be=function(e){return ve(e).calls},ye=function(e){return e.status.status},ge=function(e){return e.status.progress},je=function(e){return e.audio},Oe=function(e){return je(e).duration},_e=function(e){return e.transcription},xe=function(e){return _e(e).rawData},Ce=function(e){return _e(e).uuid},ke=function(e){return _e(e).sentences},we=function(e){return e.data},Se=function(e){return we(e).channels},Te=function(e){return e.scrub.isVisible},Ne=function(e){return e.eventTimeline.eventTimelineVisible},Ee=function(e){return e.tabs.activeTab},Ie=function(e){return e.experienceOptions},Pe=function(e){return e.search},Le=function(e){return e.status},Re=function(e){return function(e){return Le(e).isDisplaying}(e).routing},Me=function(e){return function(e){return e.callSummary}(e).keyCallers},Ae=function(e){return e.errorModal},De=function(e){return Ae(e).show},Ue=n(16),Be=Object(Ue.a)([function(e){return je(e).events}],(function(e){return function(t){var n=e.filter((function(e){return t<e.timelineStop})).shift();return n||(n=e.filter((function(e){return t>e.timelineStart})).pop())?t+n.offset:t}})),Fe=n(17);function Ke(e){var t=parseInt(Math.floor(e/3600),10),n=parseInt(Math.floor(e%3600/60),10),a=parseInt(e%60,10);return[t,0===t?n.toString():n.toString().padStart(2,"0"),a.toString().padStart(2,"0")].filter((function(e){return e})).join(":")}function He(e){var t=new Date(e/1e3),n=t.getMonth()+1,a=t.getDate(),r=t.getHours(),i=t.getMinutes(),o=[(r>9?"":"0")+r,(i>9?"":"0")+i].join(":");return[[(a>9?"":"0")+a,(n>9?"":"0")+n,t.getFullYear()].join("/"),o].join(" ")}function We(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))}var Ve=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(t)}))},Ge=function(e){if(!e)return{time:"--:--",date:"--/--/--/"};var t=He(1e3*new Date(Date.parse(e.replace(" ","T")))).split(" "),n=Object(Fe.a)(t,2),a=n[0];return{time:n[1],date:a}};var Ye=function(e){if("string"!==typeof e)return e;var t;try{t=JSON.parse(function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}(e))}catch(n){console.warn("Could not parse JSON (".concat(n.localDescription,")"))}return t},Xe=Object(Ue.a)([je,he,Be,Re],(function(e,t,n,a){var r={timestampAtPlayhead:function(e){return this.start+this.range/100*e},sentenceTimestampAtPlayhead:function(e){var t=this.transcriptionStart;return n(this.timestampAtPlayhead(e)-t)/1e3},playheadAtTimestamp:function(e){return 100/this.range*e},formattedTimeAtPlayhead:function(e){var t=this.range*e/1e8,n=this.routingOffset/1e6,a=n-t>0,r=new Date(Math.abs(n-t));return"".concat(a?"-":"").concat(Ke(r))},pausedPropertiesAtPlayhead:function(e,t){var n={isPaused:!1,timeAtPauseEnd:null,playheadAtPauseEnd:null};if(t&&t.events){var a=this.timestampAtPlayhead(e),r=t.events.filter((function(e){return e.startFlags&&!0===e.startFlags.isRecordStop&&a>=e.start&&a<=e.end})).shift();void 0!==r&&(n.isPaused=!0,n.timeAtPauseEnd=r.end,n.playheadAtPauseEnd=this.playheadAtTimestamp(r.end-this.start))}return n},transcriptionOffsetPercentage:function(){var e=this.transcriptionStart-this.start;return 100/this.range*e}};if(null===e.source||null===t.events)return Object(u.a)(Object(u.a)({},r),{},{start:0,end:0,range:0});var i=0===t.events.filter((function(e){return!0===e.flags.isRecordStart})).length,o=t.events.filter((function(e){return i?e.flags.isChannelAnswer:!0===e.flags.isRecordStart})).shift().timestamp,s=t.events.filter((function(e){return e.flags.isChannelStart})).shift().timestamp,c=a?s:o,l=o-s,d=o-c,h=t.events.filter((function(e){return i?e.flags.isChannelComplete:!0===e.flags.isRecordStop})).sort((function(e,t){return e.timestamp-t.timestamp})).pop().timestamp;return Object(u.a)(Object(u.a)({},r),{},{start:c,end:h,range:h-c,transcriptionStart:o,routingOffset:d,unrecordedTime:l})})),Je="REQUEST_CALLS";function qe(e){return{type:Je,payload:{isLoading:!0,uuids:e}}}var ze="INVALIDATE_CALLS";function Qe(){return{type:ze,payload:{calls:null}}}var Ze="RECEIVE_CALLS";function $e(e,t,n){return{type:Ze,payload:{isLoading:!1,uuids:e,calls:t,isRecorded:n}}}function et(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!1;return e.forEach((function(e){var n=Array.isArray(e.aFlags)?e.aFlags:[],a=Array.isArray(e.bFlags)?e.bFlags:[];(n.includes("RECORDED")||a.includes("RECORDED"))&&(t=!0)})),t}function tt(e,t){return e.sort((function(e,t){return e.timeStart<t.timeStart?-1:e.timeStart>t.timeStart?1:0})).map((function(e,n,a){var r={start:1e3*new Date(e.timeStart).getTime(),end:1e3*t.end};return n===a.length-1||(r.end=1e3*new Date(a[n+1].timeStart).getTime()-1),Object(u.a)(Object(u.a)({},e),{},{time:r,index:n})}))}var nt="STATUS_LOADING",at="STATUS_OK",rt="STATUS_EMPTY",it="REQUEST_EVENTS";function ot(e){return{type:it,payload:{isLoading:!0,uuid:e}}}var st="INVALIDATE_EVENTS";function ct(){return{type:st,payload:{events:null}}}var lt="RECEIVE_EVENTS";function ut(e,t){return{type:lt,payload:{isLoading:!1,uuid:e,events:t}}}function dt(e){return e.sort((function(e,t){return e.start<t.start?-1:e.start>t.start?1:0}))}var ht="PROCESS_EVENTS";function pt(e){var t={},n={},a=[],r={addGroup:function(i,o,s){return n[i]=null,a.push((function(a){var r,c,l;"function"===typeof o&&"function"===typeof s&&(!0!==o(a.flags)||n[i]||(r=e,c=t,l=n,function(e,t){var n=t.flags,a=t.timestamp;e.forEach((function(e){var t={event:U(n),group:e,start:a,startFlags:n};l[e]=t,"undefined"===typeof c[r]&&(c[r]={},c[r].events=[]),c[r].events.push(t)}))})([i],a),!0===s(a.flags)&&n[i]&&function(e){return function(t,n){var a=n.flags,r=n.timestamp;t.forEach((function(t){if(e[t]){var n=e[t];n.end=r,n.endFlags=a,n.duration=n.end-n.start,n.timeline={start:new Date(n.start/1e3),end:new Date(n.end/1e3),duration:Ke(n.duration/1e6)},e[t]=null}}))}}(n)([i],a))})),r},processEvents:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return n.forEach((function(e){return a.forEach((function(t){return t(e)}))})),{events:t[e].events.filter((function(e){return void 0!==e.endFlags}))}}};return r}var mt="INITIAL_LOAD",ft="PLAY",vt="PLAY_FROM_START",bt="PAUSE",yt="SKIP_BACK",gt="SKIP_FORWARD",jt="MOVE_SCRUBBER",Ot="MOVE_PLAY_HEAD",_t="SET_PLAYBACK_SPEED",xt="TOGGLE_METRICS_LAYER",Ct="SET_METRICS_LAYER",kt="HIDE_METRICS_LAYER",wt="SET_AUDIO",St="MOVE_TRANSCRIPTION_PLAY_SCRUB",Tt="UPDATE_TRANSCRIPTION_VIEWPORT",Nt="UPDATE_TRANSCRIPTION_CONFIDENCE",Et="SET_NOTE_VISIBILITY",It="IMPORT_NOTES",Pt="OPEN_RATE_CALL",Lt="CANCEL_RATE_CALL",Rt="RATE_CALL",Mt="SET_EVENT_TYPES",At="SET_JWT_TOKEN",Dt="SET_PARTICIPANT_NAMES",Ut="SET_CAN_SHARE",Bt=n.p+"static/media/icon-account.f2b6ece7.svg",Ft=n.p+"static/media/icon-contact.e3ec6d62.svg",Kt=n.p+"static/media/icon-user.33a39f8c.svg",Ht=function(e){return e.auth},Wt=Object(Ue.a)([Ht],(function(e){return e&&e.jwtToken?e.jwtToken.userId:""})),Vt=Object(Ue.a)([Ht],(function(e){return e&&e.displayName?e.displayName:e&&e.jwtToken?e.jwtToken.userName:""})),Gt=function(e){return e.notes},Yt=function(e){return Gt(e).unread},Xt=Object(Ue.a)([Gt],(function(e){return function(t){return e.notes.find((function(e){return e.noteId===t}))}})),Jt=Object(Ue.a)([Gt],(function(e){return function(t){return(e||{notes:[]}).notes.reduce((function(e,n){var a=n.noteId,r=n.thread,i=n.userActivity,o=n.noteModified,s=(i||[]).find((function(e){return Number(e.user)===Number(t)}));return[].concat(Object(oe.a)(e),Object(oe.a)(!s||new Date(s.lastRead)<new Date(o)?[a]:[]),Object(oe.a)(r.reduce((function(e,t){return[].concat(Object(oe.a)(e),Object(oe.a)(!s||new Date(s.lastRead)<new Date(t.modified)?[t.uuid]:[]))}),[])))}),[])}})),qt={all:"Show All",onlyUnread:"Only unread notes",onlyAcknowledged:"Only acknowledged notes",onlyUnAcknowledged:"Only un-acknowledged notes",onlyMyNotes:"Only my notes",onlyOpenNotes:"Only open notes",closedNotes:"Only closed notes"},zt=Object(Ue.a)([Gt,Wt],(function(e,t){var n=e.notes,a=e.filter,r=e.unread;switch(a){case qt.closedNotes:return n.filter((function(e){return e.isClosed}));case qt.onlyOpenNotes:return n.filter((function(e){return!e.isClosed}));case qt.onlyAcknowledged:return n.filter((function(e){return e.isAcknowledged}));case qt.onlyUnAcknowledged:return n.filter((function(e){return!e.isAcknowledged}));case qt.onlyUnread:return n.filter((function(e){return r.includes(e.noteId)||e.thread.reduce((function(e,t){return r.includes(t.uuid)}),!1)}));case qt.onlyMyNotes:return n.filter((function(e){return Number(e.author)===Number(t)}));default:return n}})),Qt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return[].concat(Object(oe.a)((e||[]).filter((function(e){return Number(e.user)!==Number(t)}))),[{user:t,lastRead:n||(new Date).toISOString()}])},Zt=function(e,t){return function(n){return n.reduce((function(n,a){return n&&e[a]===t[a]}),!0)}},$t="DELETE_NOTE",en=function(e){return{type:$t,payload:{noteId:e}}},tn="REFRESH_UNREAD_NOTES";function nn(){return function(e,t){var n=t(),a=Wt(n),r=Jt(n)(a);e({type:tn,payload:{ids:r}})}}var an="SET_NOTES",rn="UPDATE_NOTE";function on(e){return function(t){t({type:rn,payload:{note:Object(u.a)(Object(u.a)({},e),{},{thread:Ye(e.thread)||[],userActivity:Ye(e.userActivity)||[]})}}),t(nn())}}var sn=function(e,t,n){if(window.parent.getVisualforce){var a=window.parent.getVisualforce(),r=window.parent.getAction(e),i={escape:!0};n?a.invokeAction(r,n,t,i):a.invokeAction(r,t,i)}else console.log("Warning: no salesforce parent")},cn=function(){window.alert("Sorry, your session has timed out. Please refresh your page to try again")},ln=function(){return function(e){sn("getEventTypes",(function(t,n){n.status?e({type:Mt,payload:{eventTypes:t}}):n.xhr.responseText?cn():window.alert("Problem loading event types!")}))}},un="SET_PARTICIPANT_IMAGE",dn=function(e){return function(t){e&&sn("getNotes",(function(e,n){var a;n.status?t((a=e,function(e){var t=a.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{timestamp:Number(e.timestamp),eventType:Number(e.eventType),thread:Ye(e.thread)||[],userActivity:Ye(e.userActivity)||[]})}));e({type:an,payload:{notes:t}}),e(nn())})):n.xhr.responseText?cn():window.alert("Problem loading notes!")}),e)}},hn=function(e,t){if(!t)return!0;var n=Zt(e,t);return Number.isNaN(e.timestamp)&&Number.isNaN(t.timestamp)?!n(["text","channelUuid","polarity","eventType"]):!n(["timestamp","text","channelUuid","polarity","eventType"])},pn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,a){var r=a(),i=Wt(r),o="createNewNote",s=Xt(r)(e.noteId),c=parseInt(e.timestamp,10)/1e6,l=Math.floor(c/3600),d=Math.floor(c%3600/60),h=Math.floor(c%60),p=e.timestamp?"".concat(String(l).padStart(2,0),":").concat(String(d).padStart(2,0),":").concat(String(h).padStart(2,0)):null,m=t||(new Date).toISOString(),f={author:e.author,authorName:e.authorName,eventType:parseInt(e.eventType,10).toString(),text:Ve(e.text),timestamp:parseInt(e.timestamp,10).toString(),eventTime:p,uuid:e.uuid,channelUuid:e.channelUuid,isShared:e.isShared,isAcknowledged:e.isAcknowledged,isClosed:e.isClosed,canShare:e.canShare,noteCreated:s?s.noteCreated:m,noteModified:hn(e,s)?m:s.noteModified,thread:JSON.stringify(e.thread||[]),polarity:e.polarity,userActivity:JSON.stringify(i?Qt(e.userActivity||[],i,m):e.userActivity||[]),version:e.version};s&&(o="EditNote",f.noteId=e.noteId),sn(o,(function(t,a){a.status?("createNewNote"===a.method&&(f.noteId=t),n(on(Object(u.a)(Object(u.a)({},f),{},{timestamp:parseInt(f.timestamp,10),eventType:parseInt(f.eventType,10),eventTime:p,uuid:e.uuid}))),dn(ue(r))):a.xhr.responseText?cn():window.alert("Problem saving note!")}),JSON.stringify(f)),window.parent.getVisualforce||n(on(Object(u.a)(Object(u.a)({},f),{},{noteId:e.noteId,timestamp:parseInt(f.timestamp,10),eventType:parseInt(f.eventType,10),eventTime:p,uuid:e.uuid})))}},mn=function(e){return function(t){window.confirm("Delete this note?")&&(sn("DeleteNote",(function(n,a){a.status?n.includes(e)&&t(en(e)):a.xhr.responseText?cn():window.alert("Problem deleting note!")}),e),window.parent.getVisualforce||t(en(e)))}},fn="SET_EXPERIENCE_OPTIONS";function vn(e,t){e.relatedUuids.includes(t)||e.relatedUuids.push(t)}function bn(e){return Object.keys(e).filter((function(t){return e[t].isAgent})).length}function yn(e){return 0===bn(e)?"#00A9CE":"#64CCC9"}function gn(e){return 0===function(e){return Object.keys(e).filter((function(t){return!e[t].isAgent})).length}(e)?"#FFC72C":"#FFA12C"}function jn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3?arguments[3]:void 0;return{isPrimary:e,isAgent:t,userId:n,image:Kt,relatedUuids:[],start:Number.MAX_SAFE_INTEGER,end:0,initials:null,title:"",agentNumber:t?bn(a)+1:null,agents:0,classes:t?"local-caller":"remote-caller",color:t?yn(a):gn(a),call:{isInternalOnly:!1},type:null}}var On="SET_PARTICIPANTS";function _n(e,t,n,a){var r={};return t.forEach((function(t){var n=1e3*new Date(t.timeStart).getTime(),i=1e3*(new Date(t.timeStart).getTime()+1e3*t.timeTalking);if(!r[t.fromNumber]){r[t.fromNumber]=function(e,t,n){return jn(t.aUuid===e,null!==t.fromSipDeviceId||null!==t.fromUserId,t.fromUserId,n)}(e,t,r);var o=a&&a.find((function(e){return t.fromNumber===e.phoneNum}));o&&(r[t.fromNumber].name=o.name||null,r[t.fromNumber].initials=o.initials||null,r[t.fromNumber].photoUrl=o.photoUrl||null,r[t.fromNumber].type=o.type||null)}if(!r[t.toNumber]){r[t.toNumber]=function(e,t,n){return jn(t.bUuid===e,null!==t.toSipDeviceId||null!==t.toUserId,t.toUserId,n)}(e,t,r);var s=a&&a.find((function(e){return t.toNumber===e.phoneNum}));s&&(r[t.toNumber].name=s.name||null,r[t.toNumber].initials=s.initials||null,r[t.toNumber].photoUrl=s.photoUrl||null,r[t.toNumber].type=s.type||null)}vn(r[t.fromNumber],t.aUuid),vn(r[t.toNumber],t.bUuid),r[t.toNumber].start=Math.min(r[t.toNumber].start,n),r[t.fromNumber].start=Math.min(r[t.fromNumber].start,n),r[t.toNumber].end=i||0,r[t.fromNumber].end=i||0})),function(e){var t=e,n=bn(e);return Object.keys(e).forEach((function(a){var r=e[a],i=r.isAgent,o=r.agentNumber;t[a].agents=n,t[a].number=a,t[a].call.isInternalOnly=n===Object.keys(t).length;var s="";i?n>1?(t[a].title="".concat(C," ").concat(o),t[a].classes="local-caller-".concat(1===o?"a":"b")):t[a].title=C:(s="+",t[a].title=k);var c=t[a],l=c.title,u=c.number;t[a].fullNumber="".concat(s).concat(u);var d=t[a].fullNumber;t[a].fullTitle="".concat(l," (").concat(d,")")})),t}(r)}function xn(e,t,n,a){var r=_n(e,t,0,a);return function(e){e({type:On,payload:r}),e(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a={};return Object.keys(e).forEach((function(r){a[r]={events:[]};var i=e[r],o=t[Object.keys(t)[0]].events;if(i.isPrimary){var s=pt(r).addGroup("bridge",(function(e){return!0===e.isBridge}),(function(e){return!0!==e.isBridge&&!0===e.isCsStateChange})).addGroup("start",(function(e){return!0===e.isChannelStart}),(function(e){return!0===e.isChannelRing})).addGroup("ring",(function(e){return!0===e.isChannelRing}),(function(e){return!0===e.isChannelAnswer})).addGroup("recording",(function(e){return!0===e.isRecordStart}),(function(e){return!0===e.isRecordStop})).addGroup("conference",(function(e){return!0===e.isConferenceIn}),(function(e){return!0===e.isConferenceOut})).addGroup("transfer",(function(e){return!0===e.isParkedTransfer}),(function(e){return!0===e.isBridge})).addGroup("pause",(function(e){return!0===e.isRecordStop}),(function(e){return!0===e.isRecordStart})).addGroup("hold",(function(e){return!0===e.isHold}),(function(e){return!0===e.isUnHold})).addGroup("routing",(function(e){return!0===e.isRouting}),(function(e){return!0!==e.isRouting&&!0===e.isCsStateChange})).addGroup("queuing",(function(e){return!0===e.isQueuing}),(function(e){return!0!==e.isQueuing&&!0===e.isCsStateChange})).processEvents(o);s={events:s.events.concat(n.map((function(e,t){return{event:"CALL",style:"call".concat(t),group:"call",start:e.time.start,end:e.time.end/1e3,startFlags:{isCallStart:!0},endFlags:{isCallEnd:!0}}})))},a[r]=s}})),Object.keys(a).forEach((function(e){dt(a[e].events)})),{type:ht,payload:{eventsByParticipants:a}}}(r,n,t)),e(function(e){if(Object.keys(e).length>0){var t={},n=1;return Object.keys(e).forEach((function(a){var r=e[a],i=Object(Fe.a)(r.relatedUuids,1)[0];if(r.isAgent){var o=r.name?"".concat(r.name.toUpperCase(),"'S"):"".concat(C," ").concat(n);t[i]={type:C,viewName:"".concat(o," View"),icon:r.image,color:r.color,avatar:r.photoUrl},n+=1}else{var s=r.name?"".concat(r.name.toUpperCase(),"'S"):k;t[i]={type:k,viewName:"".concat(s," Experience"),icon:r.image,color:r.color,avatar:r.photoUrl}}})),{type:fn,payload:t}}return{type:fn,payload:{}}}(r)),Object.keys(r).forEach((function(t){var n;e((n=r[t],function(e){var t,a=n.number,r=n.relatedUuids,i=n.type,o=n.userId,s=Object(Fe.a)(r,1)[0];return t=o?Kt:"string"===typeof i&&"ACCOUNT"===i.toUpperCase()?Bt:Ft,new Promise((function(n){n(e({type:un,payload:{number:a,image:t,uuid:s}}))}))}))}))}}var Cn="TOGGLE_ROUTING",kn="LOAD_PROGRESS";function wn(e){return{type:kn,payload:e}}var Sn="SET_STATUS";function Tn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:Sn,payload:{status:e,description:t}}}var Nn="SET_NOTES_WIDTH",En="REQUEST_AUDIO";function In(){return{type:En,payload:{isLoading:!0}}}var Pn="INVALIDATE_AUDIO";function Ln(){return{type:Pn,payload:{source:null,duration:null}}}var Rn="RECEIVE_AUDIO";function Mn(e,t){return{type:Rn,payload:{isLoading:!1,source:e,duration:t}}}var An="NO_AUDIO";function Dn(e){return{type:An,payload:{error:e}}}function Un(){return function(e,t){var n=t(),a=ue(n),r=Se(n),i=Xe(n),o=i.start,s=i.end,c=r[a];if(c){var l={flags:{isRecordStop:!0},timestamp:o},d={flags:{isRecordStop:!0},timestamp:s},h=d.timestamp-l.timestamp,p=[l,c.events.filter((function(e){return!0===e.flags.isRecordStart||!0===e.flags.isRecordStop||e.flags.isSecondary&&(e.flags.isHold||e.flags.isUnHold)})),d].flat().map((function(e){return Object(u.a)(Object(u.a)({},e),{},{position:100/h*(e.timestamp-l.timestamp)})})),m=0,f=l,v=null,b=[],y=0;p.forEach((function(e){var t=e.flags,n=e.position;!v&&(!0===t.isRecordStart||t.isSecondary&&t.isUnHold)?(y+=e.timestamp-f.timestamp,v={audioStart:m,start:e.position,timelineStart:e.timestamp,offset:y}):v&&(!0===t.isRecordStop||t.isSecondary&&t.isHold)&&(m+=n-f.position,v.stop=n,v.audioStop=m,v.timelineStop=e.timestamp,b.push(v),v=null),f=e})),b=(b=b.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{audioStart:100/m*e.audioStart,audioStop:100/m*e.audioStop})})).map((function(e){return Object(u.a)(Object(u.a)({},e),{},{timeline:{start:new Date(e.timelineStart/1e3),stop:new Date(e.timelineStop/1e3)}})}))).map((function(e){return Object(u.a)(Object(u.a)({},e),{},{playheadAtMediaPosition:function(t){var n=e.stop,a=e.audioStart,r=e.audioStop;return A(100/t.duration*t.currentTime,a,r,e.start,n)},mediaPositionAtPlayhead:function(t,n){var a=e.stop,r=e.audioStart,i=e.audioStop;return n.duration/100*A(t,e.start,a,r,i)}})})),e({type:wt,payload:{events:b}})}}}function Bn(){var e=window.location.search.substring(1);if(0===e.length)return{};var t={};return e.split("&").forEach((function(e){var n=e.split("="),a=Object(Fe.a)(n,2),r=a[0],i=a[1];t[r]=i})),t}var Fn=Object(Ue.a)([de],(function(e){return function(t){return e&&Object.keys(e).length&&Object.keys(e).filter((function(n){return e[n].relatedUuids.includes(t)})).map((function(t){return e[t]})).shift()||null}})),Kn=Object(Ue.a)([be],(function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Array.isArray(e)&&e.length?e.map((function(e){return e})).sort((function(e,t){return e.time.start-t.time.start})).filter((function(e,a,r){return n?e.toNumber===n.number:t>=e.time.start&&t<e.time.end||(0===a?t<e.time.start:a<r.length-1&&(t>=e.time.end&&t<r[a+1].time.start))})).pop()||e.map((function(e){return e})).pop():null}})),Hn=Object(Ue.a)([de],(function(e){return Object.keys(e||{}).filter((function(t){return e[t].isPrimary})).shift()})),Wn=Object(Ue.a)([Hn,fe],(function(e,t){return e&&t[e]?t[e].events:[]}));function Vn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.filter((function(t){return t.group===e}))}function Gn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Vn(e,t).map((function(e){return e.end-e.start}));return 0===n.length?0:n.reduce((function(e,t){return t+e}))/1e6}function Yn(e){var t=0,n=Number.MAX_SAFE_INTEGER;return e.forEach((function(e){!0===e.startFlags.isCallStart&&(t=e.start),!0===e.startFlags.isCsStateChange&&(n=Math.min(n,e.start))})),n===Number.MAX_SAFE_INTEGER&&(n=t),Math.max(0,n-t)/1e6}function Xn(e){var t=Wn(e);return Object(u.a)(Object(u.a)({},function(e){var t=Hn(e),n=Wn(e),a=ke(e),r=Vn("bridge",n),i={talking:0,listening:0,overtalk:0,silent:0};r.forEach((function(e){var n=e.start,r=e.end;Object.keys(a).forEach((function(e){var o=e===t,s=a[e],c=o?"talking":"listening",l=[];o&&(l=Object.keys(a).filter((function(e){return e!==t})).map((function(e){return a[e]})).flat()),s.forEach((function(e){var t=Math.max(n,Math.min(r,e.timelineEnd)),a=Math.min(r,Math.max(n,e.timelineStart));o&&l.forEach((function(e){if(e.timelineStart<t&&e.timelineEnd>a){var n=Math.max(a,e.timelineStart),r=Math.min(t,e.timelineEnd);i.overtalk+=(r-n)/1e6}}));var s=(t-a)/1e6;i[c]+=s}))}))}));var o=Gn("bridge",n);return i.talking-=i.overtalk,i.listening-=i.overtalk,i.silent=o-i.talking-i.listening-i.overtalk,i}(e)),{},{holding:Gn("hold",t),queuing:Gn("queuing",t),routing:Gn("routing",t),ringing:Yn(t)})}var Jn="SET_CALL_SUMMARY";function qn(){return function(e,t){var n=t(),a=de(n);return e({type:Jn,payload:{calls:be(n),timeline:Xe(n),channels:Se(n),transcription:xe(n),participants:a,summary:Xn(n)}})}}var zn="ERROR_MODAL_SHOW",Qn="ERROR_MODAL_CLEAR";function Zn(e){return function(t){t(Tn(e.status,e.statusMessage||e.blockingMessage)),t(function(e,t){return{type:zn,payload:{title:e,message:t,onPrimaryClicked:arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){}}}}("Error",e.blockingMessage||e.statusMessage))}}function $n(e){return function(t){e instanceof H?t(Zn(e)):e instanceof F&&e.status?(console.warn(e.message),t(Tn(e.status,e.displayMessage))):(window.alert(e.message),t({type:"SHOW_FETCH_ERROR",payload:{error:e}}))}}var ea="REQUEST_TRANSCRIPTION";function ta(e){return{type:ea,payload:{isLoading:!0,uuid:e}}}var na="RECEIVE_TRANSCRIPTION";function aa(e,t,n){return{type:na,payload:{isLoading:!1,uuid:e,data:t.data.analysis.normalised.data,sentences:n}}}function ra(e){return e.Mentions.map((function(e){return e.Pos.map((function(t){return{channel:parseInt(e.Channel,10),start:t,end:null}}))})).flat()}function ia(e){var t,n,a,r=e.Keywords||[],i=e.Phrases||[];return Object(u.a)(Object(u.a)({},e),{},{Keywords:r,Phrases:i,Positions:(t=[(a=r,a.map(ra).flat()),(n=i,n.map((function(e){return{channel:parseInt(e.Channel,10),start:e.Start,end:e.End}})))],t.flat().sort((function(e,t){return e.start-t.start})))})}function oa(e){var t=JSON.parse(e);return Object(u.a)(Object(u.a)({},t),{},{Categories:(t.Categories||[]).map(ia)})}function sa(e,t,n,a){var r,i,o=e.data.analysis.normalised.data,s=e.data.recordingId,c={},l=Bn().showAll,d=Number.MAX_SAFE_INTEGER,h=0;return Object.keys(n).forEach((function(e){var t=n[e].end-n[e].start;h<t&&!n[e].isAgent?(h=t,r=e):n[e].isAgent&&(i=e)})),Object.keys(n).forEach((function(e){var r=n[e],h=function(e,t,n,a,r){var i=a.split("/").pop(),o=Fn(e),s=Kn(e),c=o(i),l=[],d=Xe(e).start,h=Be(e);return[1,2].forEach((function(e){1===e&&c!==t||2===e&&c===t||n[e].Sentences.forEach((function(n){var a,i=h(1e3*n.Start+d),c=h(1e3*n.End+d),p=(i-d)/1e3,m=(c-d)/1e3;if(t.start<=i&&t.end>i&&!r?a=s(i,t):r&&(a=s(i)),void 0!==a&&null!==a){var f=c>a.time.end,v=a,b=v.aUuid,y=v.bUuid,g=o(b),j=o(y),O={};if(g===t)O.callIndex=a.index,O.uuid=b,O.number=g.number,O.opposing={uuid:y,number:j.number};else if(j===t)O.callIndex=a.index,O.uuid=y,O.number=j.number,O.opposing={uuid:b,number:g.number};else{if(!f)return;var _=s(c),x=_.aUuid,C=_.bUuid,k=o(x),w=o(C);O.callIndex=_.index,O.uuid=x,O.number=k.number,O.opposing={uuid:C,number:w.number}}l.push(Object(u.a)(Object(u.a)({},O),{},{channel:e,Start:n.Start,End:n.End,startWithOffset:p,endWithOffset:m,timelineStart:i,timelineEnd:c,Sentence:n.Sentence,timeline:{start:new Date(i/1e3),end:new Date(c/1e3)}}))}}))})),function(e){return e.sort((function(e,t){return e.Start<t.Start?-1:e.Start>t.Start?1:0}))}(l)}(a,r,o,s,i===e).filter((function(e){return!!r.relatedUuids.includes(t)||(!!n[e.opposing.number].isPrimary||l)}));Array.isArray(h)&&h.length>0&&(d=Math.min(h.map((function(e){return e.callIndex})).reduce((function(e,t){return Math.min(e,t)})),d)),c[e]=h})),Object.keys(c).forEach((function(e){c[e]=c[e].map((function(e){return Object(u.a)(Object(u.a)({},e),{},{isInEarliestCall:e.callIndex===d})}))})),Object.keys(c).forEach((function(e){if(e!==i&&e!==r&&c[r])for(var t=0;t<c[r].length;t++)for(var n=0;n<c[e].length;n++)if(c[r][t].timelineStart===c[e][n].timelineStart){c[r].splice(t,1),t-=1;break}})),c}function ca(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ee;return function(t,n){var r=n(),i=Ce(r),o=ke(r),s=de(r);return i===e&&Array.isArray(o)&&0!==o.length?(t(qn()),Promise.resolve()):(t(ta(e)),a(e,r.auth.jwtToken).then((function(n){if("undefined"!==typeof n.data){var a=n.data.analysis.normalised;a.data=oa(a.data);var i=sa(n,e,s,r);t(aa(e,n,i)),t(qn())}else{var o=new H(rt,"There is no transcription for this caller experience","There is no transcription for this caller experience.");t($n(o))}})))}}function la(e,t){var n={};t.events.forEach((function(e){var t=n[e.uuid]||{};t.events=e.events,n[e.uuid]=t})),t.talkTime.forEach((function(e){var t=e.data.recordingId.split("/"),a=Object(Fe.a)(t,2)[1],r=n[a]||{};r.talkTime=e.data.analysis.data,n[a]=r})),Object.keys(n).forEach((function(t){n[t].isPrimary=t===e;var a=n[t].events.filter((function(e){return!0===e.flags.isRecordStart})).sort((function(e,t){return e.timestamp-t.timestamp})).shift();void 0!==a&&(n[t].start=a.timestamp),n[t].end=n[t].events.filter((function(e){return!0===e.flags.isRecordStop})).sort((function(e,t){return e.timestamp-t.timestamp})).pop().timestamp}));var a=Object.keys(n).map((function(e){return n[e]})).filter((function(e){return!0===e.isPrimary})).reduce((function(e,t){return Math.min(e,t.start)}),Number.MAX_SAFE_INTEGER),r=Object.keys(n).map((function(e){return n[e]})).filter((function(e){return!0===e.isPrimary})).reduce((function(e,t){return Math.max(e,t.end)}),0);return{timelineRange:r-a,timelineStart:a,timelineEnd:r,channels:n}}function ua(e){var t=Object.keys(e).map((function(t){return e[t]})).filter((function(e){return!0===e.isPrimary})).reduce((function(e,t){return Math.min(e,t.start)}),Number.MAX_SAFE_INTEGER),n=Object.keys(e).map((function(t){return e[t]})).filter((function(e){return!0===e.isPrimary})).reduce((function(e,t){return Math.max(e,t.end)}),0)-t;return{1:[{event:"CLASH_WIN",timestamp:t+.2*n},{event:"CLASH_WIN",timestamp:t+.3*n},{event:"STEAL",timestamp:t+.4*n},{event:"INTERRUPTION",timestamp:t+.5*n}],2:[{event:"CLASH_WIN",timestamp:t+.8*n},{event:"AFFIRMATION",timestamp:t+.7*n},{event:"INTERRUPTION",timestamp:t+.6*n}]}}function da(e,t){return{type:mt,payload:{channels:e,talkTime:t}}}var ha="REQUEST_DATA",pa="RECEIVE_DATA";function ma(){return{type:ft}}function fa(){return{type:bt}}function va(e){return{type:jt,payload:{scrub:e}}}function ba(e){return{type:_t,payload:{speed:e}}}function ya(e,t){return function(n,a){var r=function(e){return e.playback}(a()).speed;t&&1!==r&&n(ba(1)),n({type:Ot,payload:{position:e}})}}function ga(e){return{type:xt,payload:{layer:e}}}function ja(e){return{type:St,payload:{transcriptionPlayScrub:e}}}function Oa(e){return{type:Tt,payload:{viewport:e}}}var _a="SET_COMPLETED_NOTES_VISIBILITY";function xa(e){return function(t,n){var a=n(),r=a.scrub,i=a.transcription.viewport,o=i.span,s=Xe(n()),c=100*(Be(n())(1e3*e+s.start)-s.start)/s.range,l=r.end-r.start,u=c-(r.start+l/2),d=Math.min(Math.max(0,r.start+u),100-l),h=d+l,p=c-(i.start+o/2),m=Math.min(Math.max(0,i.start+p),100-o);t(ya(c,!0)),t(va({start:d,end:h})),t(Oa({start:m,span:o}))}}var Ca="RESET_STATE";function ka(){return function(e,t){var n=t(),a=je(n).error,r=ve(n).isRecorded;if(a){if(r)return Promise.reject(function(e){var t=e instanceof K?e.response.status:0,n="Unable to load recording. The recording is not yet available or may have been purged.";return 403===t?n="Unable to load recording. You may not have permission to access this file.":t>=500&&(n="We were unable to fetch the audio file at this time. Please try again later."),new H(rt,"Unable to load recording.",n)}(a));var i=new H(rt,"No recording was made.","A recording was not made for this experience.");return Promise.reject(i)}return Promise.resolve()}}function wa(e){return"string"!==typeof e||0===e.length?function(e){var t;return e((t="Invalid PrimaryUUID",function(e){t instanceof F&&t.status&&e(Tn(t.status,t.displayMessage)),console.warn(t.message),e({type:"LOG_SILENT_ERROR",payload:{error:t}})})),Promise.reject()}:function(t,n){if(e===ue(n()))return null;return t({type:Ca,payload:null}),t(function(e){return{type:d,payload:{uuid:e}}}(e)),function(e,t){var n=1,a=setInterval((function(){if(n<10){var r=t();ge(r)>19?clearInterval(a):(e(wn(10+n)),n+=1)}else clearInterval(a)}),1e3)}(t,n),t(fa()),t(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.URL.createObjectURL;return function(){var n=Object(m.a)(p.a.mark((function n(a,r){var i,o,s,c,l,u;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(In()),a(Ln()),i=ue(r()),n.prev=3,o=function(e){var t=Math.round(e),n=Math.min(99,Math.max(20,t));a(wn(n))},n.next=7,e(i,r().auth.jwtToken,o);case 7:return s=n.sent,c=s.blob,l=s.duration,n.t0=t,n.next=13,c;case 13:n.t1=n.sent,u=(0,n.t0)(n.t1),a(Mn(u,l)),n.next=21;break;case 18:n.prev=18,n.t2=n.catch(3),a(Dn(n.t2));case 21:return n.abrupt("return",Promise.resolve());case 22:case"end":return n.stop()}}),n,null,[[3,18]])})));return function(e,t){return n.apply(this,arguments)}}()}()).then((function(){return t(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z;return function(t,n){var a=n(),r=ue(a);t(ot(r));var i=pe(a),o=me(a);if(i!==r||!Array.isArray(o)||0===o.length){t(ct());var s=Oe(n());return e(r,s,a.auth.jwtToken).then((function(e){var n=e.events;return t(ut(r,n))}),(function(){return Promise.reject(new H(rt,"Unable to load call flow for this call.","Unable to load call flow for this call. Please ensure you are accessing via the correct account, and that the call has not been deleted."))}))}return t(ut(r,o)),Promise.resolve()}}())})).then((function(){return t(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J;return function(t,n){var a=n(),r=ce(me(a),ue(a)),i=Xe(a);return t(qe(r)),t(Qe()),e(r,a.auth.jwtToken).then((function(e){t($e(r,tt(e,i),et(e)))}))}}())})).then((function(){return t(ka())})).then((function(){var e=n(),a=ue(e),r=be(e);t(function(e){return function(t){e&&sn("canShareRecording",(function(e,n){n.status?t({type:Ut,payload:e}):n.xhr.responseText?cn():window.alert("Problem loading notes!")}),e)}}(a)),t(function(e){return function(t){e&&sn("getRatingDetails",(function(e,n){if(n.status){var a=e.data;e.data&&!e.data[0].salesforceId&&(a=e.data.map((function(e,t){return Object(u.a)(Object(u.a)({},e),{},{salesforceId:e.salesforceId?e.salesforceId:"tempID-".concat(t),note:""})}))),t({type:Rt,payload:{rating:a}})}else n.xhr.responseText?cn():window.alert("Problem loading ratings!")}),e)}}(a)),t(function(e){return function(t){var n=[];return e.forEach((function(e){n.push({userId:e.fromUserId,phoneNum:e.fromNumber}),n.push({userId:e.toUserId,phoneNum:e.toNumber})})),new Promise((function(e,a){sn("getParticipantsInfo",(function(n,r){r.status?e(t({type:Dt,payload:n})):r.xhr.responseText?cn():(window.alert("Problem loading Participants Info!"),a(new Error("Problem loading Participants Info!")))}),n),window.parent.getVisualforce||e()}))}}(r)).then((function(){return t(function(e,t){return function(){var n=Object(m.a)(p.a.mark((function n(a,r){var i,o,s,c,l;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:ha,payload:{isLoading:!0}}),i={events:[{uuid:e,events:me(r())}],channelData:[],talkTime:[]},n.prev=2,n.next=5,ne(e,r().auth.jwtToken);case 5:(o=n.sent).data.analysis.data=JSON.parse(o.data.analysis.data),i.talkTime.push(o),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),console.log(n.t0);case 13:s=la(e,i),c=s.channels,l=ua(c),a(xn(e,t,c,(u=r(),we(u).participantNames))),a(da(c,l)),a(Un()),a(ca(e,t,i)),a({type:pa,payload:{isLoading:!1}});case 20:case"end":return n.stop()}var u}),n,null,[[2,10]])})));return function(e,t){return n.apply(this,arguments)}}()}(a,r)),t(ln()),t(dn(a)),t(nn())}))})).then((function(){return t(ya(0))})).catch((function(e){return t($n(e))}))}}var Sa={status:nt,description:null,isDisplaying:{routing:!1},isLoading:{calls:!1,events:!1,data:!1,audio:!1},progress:0,notesWidth:25};function Ta(e){var t=e.isLoading;return Object.keys(t).filter((function(e){return t[e]})).length?nt:at}var Na={isLoading:!1,uuid:null,events:null,eventsByParticipants:null};var Ea={isLoading:!1,uuids:null,calls:null,isRecorded:!1};var Ia="background-noise-level",Pa="transcription-confidence",La="show-notes",Ra="clash-wins",Ma="affirmations",Aa="interruptions",Da="steals",Ua="FILTER_HOLD_UNHOLD",Ba="FILTER_TRANSFER",Fa="FILTER_LISTEN_IN",Ka="FILTER_CALL_QUEUING",Ha="FILTER_NEW_PARTY",Wa=[Ua,Ba,La];var Va={source:null,events:[],error:null};var Ga={channels:{},talkTime:null,participantNames:[]};var Ya={isPlaying:!1,speed:1,availableSpeeds:[.5,1,1.5,2,3],playhead:0};var Xa="SET_SCRUBBER_VISIBILITY";function Ja(e){return{type:Xa,payload:{isVisible:e}}}var qa={start:0,end:30,isUserModified:!1,isVisible:!1};var za={startTime:0,duration:0,direction:null,from:"",to:"",images:[],metrics:[],summary:{},keyCallers:{colors:[],titles:[],numbers:[],fullNumbers:[],fullTitles:[],names:[],fullNameNumbers:[]}};var Qa={transcriptionPlayScrub:{position:0,offsetPosition:0},viewport:{start:0,span:100},confidence:0,isLoading:!1,uuid:null,rawData:{1:null,2:null},sentences:null};var Za=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n,a){var r=a(),i=Xt(r)(e);i&&n(pn(Object(u.a)(Object(u.a)({},i),"function"===typeof t?t(i):t)))}},$a=function(e){return function(t){return t(Za(e,{isAcknowledged:!0}))}},er=function(e){return function(t){return t(Za(e,{isClosed:!0}))}},tr=function(e,t){return function(n){window.confirm("Delete this reply?")&&n(Za(e,(function(e){return{isAcknowledged:!1,thread:e.thread.filter((function(e){return e.uuid!==t}))}})))}},nr="OPEN_NOTE_EDITOR",ar={newNote:"newNote",existingNote:"existingNote",newComment:"newComment",existingComment:"existingComment",isExistingItem:function(e){return e===ar.existingNote||e===ar.existingComment},isNote:function(e){return e===ar.newNote||e===ar.existingNote},isComment:function(e){return e===ar.newComment||e===ar.existingComment},isNew:function(e){return e===ar.newNote||e===ar.newComment}};var rr="CLOSE_NOTE_EDITOR";function ir(){return{type:rr}}var or="MARK_NOTE_AS_READ";var sr="SET_NOTES_FILTER";function cr(e){return{type:sr,payload:{filter:e}}}var lr={author:0,authorName:"",canShare:!0,channelUuid:"",isClosed:!1,eventTime:"",eventType:"",isAcknowledged:!1,noteId:"",noteCreated:null,noteModified:null,polarity:"Neutral",relatedToTitle:"",text:"",timestamp:0,uuid:"",userActivity:[],thread:[],version:1},ur={showOnTimeline:!0,showCompletedNotes:!0,filter:qt.all,showEditModal:!1,editMode:null,noteToEdit:null,commentToEdit:null,canShare:!1,unread:[],notes:[],eventTypes:[{icon:"",id:0,text:"General Note"},{icon:"",id:1,text:"Offensive Behaviour"},{icon:"",id:2,text:"Excellent Behaviour"},{icon:"",id:3,text:"Neutral"}],polarityTypes:[{icon:"",id:"Negative",text:"Negative"},{icon:"",id:"Neutral",text:"Neutral"},{icon:"",id:"Positive",text:"Positive"}]};var dr={showCallRatingDialog:!1,rating:[]};var hr="SET_CURRENT_MATCH_POSITION_INDEX";function pr(e){return function(t,n){t({type:hr,payload:{index:e}});var a,r=(a=n(),Pe(a).currentPosition);r&&t(xa(r.start))}}var mr="SET_MATCH_POSITIONS";function fr(e){return function(t){t({type:mr,payload:{positions:e}}),t(pr(0))}}function vr(){return function(e,t){var n=t();e(fr(function(e,t){if("string"!==typeof e||0===e.length)return[];var n=[];return Object.keys(t).filter((function(e){return parseInt(e,10)>0})).forEach((function(a){var r=t[a];if(null!==r&&Array.isArray(r.Words)){var i=r.Words,o=e.split(" "),s=o.shift(),c=null,l=0;i.forEach((function(t,r){var i,d,h=o.filter((function(e){return 0===e.length})).length,p=o.length;i=s,d=t.w,(p===h&&i.length>0&&i.length<d.length?i.toUpperCase()===d.toUpperCase().substr(0,i.length):i.toUpperCase()===d.toUpperCase())&&(null===c?c={channel:parseInt(a,10),start:t.s}:l<r-1&&(c=null,l=null,o=e.split(" ")),l=r,null!==c&&p===h&&(c=Object(u.a)(Object(u.a)({},c),{},{end:t.s}),n.push(c),c=null,o=e.split(" ")),s=o.shift())}))}})),n.sort((function(e,t){return e.start-t.start}))}(function(e){return Pe(e).searchPhrase}(n),xe(n))))}}var br="SET_SEARCH_PHRASE";function yr(e){return{type:"SET_CURRENT_MATCH",payload:{currentMatch:e}}}function gr(e){return{type:"SET_MATCHES",payload:{matches:e}}}var jr={searchPhrase:null,matches:[],matchCount:20,currentMatch:0,positions:[],positionCount:0,currentPosition:null,currentPositionIndex:0};var Or={};var _r="SET_EVENTTIMELINE_VISIBILITY";function xr(e){return{type:_r,payload:{eventTimelineVisible:e}}}var Cr={eventTimelineVisible:!1};var kr={};var wr="classification",Sr="keyword",Tr="topic",Nr="OPEN_CLASSIFICATIONS_DIALOG";var Er="CLOSE_CLASSIFICATIONS_DIALOG";function Ir(e,t,n){return t.filter((function(e){return e.Keyword===n})).map((function(t){return t.Pos.map((function(t){return{channel:e,start:t,end:null}}))})).flat()}function Pr(e,t,n){return t.filter((function(e){return e.Topic===n})).map((function(t){return t.Keywords.map((function(t){return t.Pos.map((function(t){return{channel:e,start:t,end:null}}))})).flat()})).flat()}function Lr(){return function(e,t){var n=function(e){return e.knowledge}(t()).selectedItem,a=n.identifier,r=n.type,i=n.category;if("string"===typeof a&&a.length>0){var o,s=xe(t());switch(r){case"classification":o=i.Positions;break;case"topic":o=function(e,t){var n=e[1].Topics,a=e[2].Topics;return[Pr(1,n,t),Pr(2,a,t)].flat()}(s,a);break;case"keyword":o=function(e,t){var n=e[1].Keywords,a=e[2].Keywords;return[Ir(1,n,t),Ir(2,a,t)].flat()}(s,a);break;default:return}e(fr(o))}}}var Rr="SELECT_KNOWLEDGE_CLASSIFICATION";function Mr(e){return function(t,n){var a=xe(n()).Categories.filter((function(t){return t.Name===e})),r=Object(Fe.a)(a,1)[0];t({type:Rr,payload:{identifier:e,category:r}}),t(Lr())}}var Ar="SELECT_KNOWLEDGE_KEYWORD";function Dr(e){return function(t){t({type:Ar,payload:{identifier:e}}),t(Lr())}}var Ur="SELECT_KNOWLEDGE_TOPIC";function Br(e){return function(t){t({type:Ur,payload:{identifier:e}}),t(Lr())}}var Fr="CLEAR_SELECTED_KNOWLEDGE_ITEM";var Kr="OPEN_KEYWORDS_TOPICS_DIALOG";var Hr="CLOSE_KEYWORDS_TOPICS_DIALOG";var Wr={currentMatch:0,selectedItem:{identifier:null,type:null,category:null},showClassificationsDialog:!1,showKeywordsTopicsDialog:!1};var Vr,Gr=n(62),Yr=null,Xr="SET_AUTH_DISPLAY_NAME",Jr=function(e){return function(t){var n=JSON.parse(localStorage.getItem("ENV_URLS")),a=n.gatekeeperUrl,r=n.namespace,i=n?a:x,o=r?"&namespace=".concat(r):"",s=new Headers({Accept:"application/json","content-type":"application/json",authorization:"Bearer ".concat(e)});fetch("".concat(i,"/token/salesforce?scope=insights:basic&hastoken=true").concat(o),{method:"get",headers:s}).then((function(e){return e.json()})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.jwt){var n=e.jwt.split("."),a=Gr.Base64.decode(n[1]),r=JSON.parse(a),i=r["https://natterbox.com/claim/orgId"],o=r["https://natterbox.com/claim/userId"],s=r["https://natterbox.com/claim/username"],c=r.scope,l=r.exp,u=r.iat,d=r.nbf,h={token:e.jwt,organisationId:i,userName:s,userId:o,scope:c,exp:l,iat:u,nbf:d};return localStorage.setItem("jwtToken",JSON.stringify(h)),t(Vr(h)),t({type:At,payload:h}),t(wa(Bn().uuid)),o}window.alert("Sorry, your session has timed out. Please refresh your page to try again")})).then((function(e){e&&function(e){return new Promise((function(t,n){sn("getUserName",(function(e,a){a.status?t(e):a.xhr.responseText?cn():n(new Error("Unable to fetch display name for user!"))}),e)}))}(e).then((function(e){return t({type:Xr,payload:e})})).catch((function(e){return console.log("Error fetching display name: ".concat(e))}))})).catch((function(e){t(Tn(rt,"Unable to load recording. You may not have permission to access this file")),console.log("ERROR GETTING JWT:",e),window.alert("Sorry, your session has timed out. Please refresh your page to try again")}))}},qr=function(){return function(){var e=Object(m.a)(p.a.mark((function e(t){var n,a,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.parent.getSessionId){e.next=18;break}return e.prev=1,e.next=4,new Promise((function(e,t){sn("getNamespace",(function(n,a){a.status?e(n):a.xhr.responseText?cn():t(new Error("".concat(a.message)))}))}));case 4:return n=e.sent,e.next=7,new Promise((function(e,t){sn("getOrgUrl",(function(n,a){a.status?e(n):a.xhr.responseText?cn():t(new Error("".concat(a.message)))})),window.parent.getVisualforce||e()}));case 7:(a=e.sent)&&(r={isSalesforce:!0,isProd:a.isProd,sapienUrl:a.SapienHostUrl,gatekeeperUrl:a.GatekeeperHostUrl,callflowUrl:a.callFlowHostUrl,namespace:n},localStorage.setItem("ENV_URLS",JSON.stringify(r))),console.log("Auth expired getting new SF session ID"),t(Jr(window.parent.getSessionId())),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),window.alert(e.t0);case 16:e.next=21;break;case 18:"",!0,"".length>0?(console.log("Warning: no salesforce parent, running in linked standalone mode using token: '".concat("","'")),"","",i={isSalesforce:!0,isProd:true,sapienUrl:O,gatekeeperUrl:x,callflowUrl:_,namespace:""},localStorage.setItem("ENV_URLS",JSON.stringify(i)),t(Jr(""))):(console.log("Warning: no salesforce parent, running in full standalone mode"),t(wa(Bn().uuid)));case 21:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}()};Vr=function(e){return function(t){Yr&&clearTimeout(Yr);var n=(Number(e.exp)-Number(e.iat))/2;Yr=setTimeout((function(){t(qr())}),1e3*n)}};var zr=qr,Qr={jwtToken:null,displayName:null},Zr="TOGGLE_TAB";var $r={activeTab:"tab-knowledge"};var ei={show:!1,title:"Error",message:"An error occurred.",primaryButtonText:"Ok",secondaryButtonText:void 0,onPrimaryClicked:function(){}};var ti=Object(c.c)({primaryUuid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===d?t.payload.uuid:e},status:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sa,t=arguments.length>1?arguments[1]:void 0,n=e;switch(t.type){case Je:case Ze:n=Object(u.a)(Object(u.a)({},e),{},{isLoading:Object(u.a)(Object(u.a)({},e.isLoading),{},{calls:t.payload.isLoading})});break;case it:case lt:n=Object(u.a)(Object(u.a)({},e),{},{isLoading:Object(u.a)(Object(u.a)({},Sa.isLoading),{},{events:t.payload.isLoading})});break;case ha:case pa:n=Object(u.a)(Object(u.a)({},e),{},{isLoading:Object(u.a)(Object(u.a)({},Sa.isLoading),{},{data:t.payload.isLoading})});break;case En:case Rn:n=Object(u.a)(Object(u.a)({},e),{},{isLoading:Object(u.a)(Object(u.a)({},Sa.isLoading),{},{audio:t.payload.isLoading})});break;case An:n=Object(u.a)(Object(u.a)({},e),{},{isLoading:Object(u.a)(Object(u.a)({},Sa.isLoading),{},{audio:!1})});break;case Cn:n=Object(u.a)(Object(u.a)({},e),{},{isDisplaying:Object(u.a)(Object(u.a)({},e.isDisplaying),{},{routing:!e.isDisplaying.routing})});break;case kn:n=Object(u.a)(Object(u.a)({},e),{},{progress:t.payload});break;case Sn:return Object(u.a)(Object(u.a)({},e),{},{status:t.payload.status,description:t.payload.description});case Nn:return Object(u.a)(Object(u.a)({},e),{},{notesWidth:t.payload});default:return e}return Object(u.a)(Object(u.a)({},n),{},{status:Ta(n)})},events:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Na,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case it:case lt:case st:case ht:return Object(u.a)(Object(u.a)({},e),t.payload);default:return e}},eventTimeline:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _r:return{eventTimelineVisible:t.payload.eventTimelineVisible};default:return e}},experienceOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case fn:return t.payload;case un:var n=t.payload,a=n.image,r=n.uuid;return Object(u.a)(Object(u.a)({},e),{},{[r]:Object(u.a)(Object(u.a)({},e[r]),{},{icon:a})});default:return e}},calls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ea,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Je:case ze:case Ze:return Object(u.a)(Object(u.a)({},e),t.payload);default:return e}},activeLayers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case xt:var n=t.payload.layer;return e.includes(n)?e.filter((function(e){return e!==n})):e.concat([n]);case Ct:var a=t.payload.layer;return e.includes(a)?e:e.concat([a]);case kt:var r=t.payload.layer;return e.filter((function(e){return e!==r}));default:return e}},audio:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Va,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Rn:var n=t.payload,a=n.source,r=n.duration;return Object(u.a)(Object(u.a)({},e),{},{source:a,duration:r,error:null});case Pn:var i=t.payload,o=i.source,s=i.duration;return Object(u.a)(Object(u.a)({},e),{},{source:o,duration:s,error:null});case wt:var c=t.payload.events;return Object(u.a)(Object(u.a)({},e),{},{events:c});case An:var l=t.payload.error;return Object(u.a)(Object(u.a)({},e),{},{source:null,duration:0,events:[],error:l});default:return e}},data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ga,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Dt:return Object(u.a)(Object(u.a)({},e),{},{participantNames:t.payload});case mt:var n=t.payload,a=n.channels,r=n.talkTime;return Object(u.a)(Object(u.a)({},e),{},{channels:Object(u.a)(Object(u.a)({},e.channels),a),talkTime:r});default:return e}},playback:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ya,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ft:return Object(u.a)(Object(u.a)({},e),{},{isPlaying:!0});case vt:return Object(u.a)(Object(u.a)({},e),{},{isPlaying:!0,playhead:0});case bt:return Object(u.a)(Object(u.a)({},e),{},{isPlaying:!1});case yt:return Object(u.a)(Object(u.a)({},e),{},{playhead:Math.max(.01,e.playhead-t.payload.adjustment)});case gt:return Object(u.a)(Object(u.a)({},e),{},{playhead:Math.min(100,e.playhead+t.payload.adjustment)});case Ot:return Object(u.a)(Object(u.a)({},e),{},{playhead:t.payload.position});case _t:return Object(u.a)(Object(u.a)({},e),{},{speed:t.payload.speed});default:return e}},scrub:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case jt:return Object(u.a)(Object(u.a)({},e),{},{start:t.payload.scrub.start,end:t.payload.scrub.end});case Xa:return Object(u.a)(Object(u.a)({},e),{},{isVisible:t.payload.isVisible});default:return e}},callSummary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:za,t=arguments.length>1?arguments[1]:void 0;function n(e){return Object.keys(e).filter((function(t){return e[t].isAgent})).length}function a(e,t){var a=Object(Fe.a)(t,1)[0].direction,r=n(e)<Object.keys(e).length?"":"Internal ";return"".concat(r).concat("OUTBOUND"===a?"Outbound":"Inbound")}function r(e){var t=Object.keys(e).sort((function(t){return e[t].isPrimary?-1:0})).map((function(t){return e[t]}));return{images:t.map((function(e){return e.image})),avatar:t.map((function(e){return e.photoUrl})),colors:t.map((function(e){return e.color})),titles:t.map((function(e){return e.title})),numbers:t.map((function(e){return e.number})),fullNumbers:t.map((function(e){return e.fullNumber})),fullTitles:t.map((function(e){return e.fullTitle})),names:t.map((function(e){return e.name})),fullNameNumbers:t.map((function(e){return e.name?"".concat(e.name," (").concat(e.fullNumber,")"):e.fullTitle}))}}function i(e,t,n,a){return Object.keys(e).filter((function(e){return parseInt(e,10)>0})).map((function(r,i){var o=t.numbers[i],s=n[o],c=s.isAgent,l=s.relatedUuids,u={holdEvents:0,pauseEvents:0,uuid:null},d=Object(Fe.a)(l,1);u.uuid=d[0];var h=Object.keys(a)[0],p=a[h];return a[h].events.forEach((function(e){var t=e.flags,n=t.isHold;t.isRecordStop&&e.timestamp<p.end&&(u.pauseEvents+=1),n&&(u.holdEvents+=1)})),e[r].Metrics.forEach((function(e){var t=Object.keys(e),n=Object(Fe.a)(t,1)[0];u[n]=e[n]})),{title:c?C:k,color:c?"#00A9CE":"#FFC72C",isAgent:c,data:u}}))}switch(t.type){case Jn:var o=t.payload,s=o.calls,c=o.timeline,l=o.channels,d=o.transcription,h=o.participants,p=o.summary,m=c.start,f=c.range;if(!s)return za;var v=r(h),b=Object.keys(h).length<1?null:i(d,v,h,l),y=Object.keys(h).length<1?null:a(h,s);return Object(u.a)(Object(u.a)({},e),{},{startTime:m,duration:f,direction:y,metrics:b,summary:p,keyCallers:v});default:return e}},participants:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Or,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case On:return t.payload;case un:var n=t.payload,a=n.number,r=n.image;return Object(u.a)(Object(u.a)({},e),{},{[a]:Object(u.a)(Object(u.a)({},e[a]),{},{image:r})});default:return e}},transcription:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case St:return Object(u.a)(Object(u.a)({},e),{},{transcriptionPlayScrub:t.payload.transcriptionPlayScrub});case Tt:return Object(u.a)(Object(u.a)({},e),{},{viewport:t.payload.viewport});case Nt:return Object(u.a)(Object(u.a)({},e),{},{confidence:t.payload.confidence});case ea:return Object(u.a)(Object(u.a)({},e),{},{isLoading:t.payload.isLoading,uuid:t.payload.uuid});case na:return Object(u.a)(Object(u.a)({},e),{},{isLoading:t.payload.isLoading,uuid:t.payload.uuid,rawData:t.payload.data,sentences:t.payload.sentences});default:return e}},notes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ur,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case Ut:return Object(u.a)(Object(u.a)({},e),{},{canShare:a});case Mt:return Object(u.a)(Object(u.a)({},e),{},{eventTypes:a.eventTypes});case Et:return Object(u.a)(Object(u.a)({},e),{},{showOnTimeline:a.visible});case _a:return Object(u.a)(Object(u.a)({},e),{},{showCompletedNotes:a.visible});case $t:return Object(u.a)(Object(u.a)({},e),{},{notes:e.notes.filter((function(e){return e.noteId!==a.noteId}))});case an:return Object(u.a)(Object(u.a)({},e),{},{notes:a.notes,unread:[]});case rn:return e.notes.some((function(e){return e.noteId===a.note.noteId}))?Object(u.a)(Object(u.a)({},e),{},{notes:e.notes.map((function(e){return e.noteId===a.note.noteId?Object(u.a)(Object(u.a)({},e),a.note):e}))}):Object(u.a)(Object(u.a)({},e),{},{notes:[].concat(Object(oe.a)(e.notes),[Object(u.a)(Object(u.a)({},lr),a.note)])});case nr:return Object(u.a)(Object(u.a)({},e),{},{showEditModal:!0,editMode:a.editMode,noteToEdit:a.noteToEdit,commentToEdit:a.commentToEdit});case rr:return Object(u.a)(Object(u.a)({},e),{},{showEditModal:!1,editMode:null,noteToEdit:null,commentToEdit:null});case It:return Object(u.a)(Object(u.a)({},e),{},{notes:a.notes});case tn:return Object(u.a)(Object(u.a)({},e),{},{unread:a.ids});case or:return Object(u.a)(Object(u.a)({},e),{},{unread:e.unread.filter((function(e){return e!==a.id}))});case sr:return Object(u.a)(Object(u.a)({},e),{},{filter:a.filter});default:return e}},callRating:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dr,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case Pt:case Lt:return Object(u.a)(Object(u.a)({},e),{},{showCallRatingDialog:a.showCallRatingDialog});case Rt:return Object(u.a)(Object(u.a)({},e),{},{showCallRatingDialog:a.showCallRatingDialog,rating:a.rating});default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case br:return Object(u.a)(Object(u.a)({},e),{},{searchPhrase:t.payload.searchPhrase});case mr:return Object(u.a)(Object(u.a)({},e),{},{positions:t.payload.positions,positionCount:(t.payload.positions||[]).length,currentPosition:(t.payload.positions||[])[0],currentPositionIndex:0});case hr:return Object(u.a)(Object(u.a)({},e),{},{currentPosition:e.positions[t.payload.index],currentPositionIndex:t.payload.index});default:return e}},knowledge:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Nr:return Object(u.a)(Object(u.a)({},e),{},{showClassificationsDialog:!0});case Er:return Object(u.a)(Object(u.a)({},e),{},{showClassificationsDialog:!1});case Rr:return Object(u.a)(Object(u.a)({},e),{},{selectedItem:{identifier:t.payload.identifier,type:wr,category:t.payload.category}});case Ar:return Object(u.a)(Object(u.a)({},e),{},{selectedItem:{identifier:t.payload.identifier,type:Sr,category:null}});case Ur:return Object(u.a)(Object(u.a)({},e),{},{selectedItem:{identifier:t.payload.identifier,type:Tr,category:null}});case Fr:return Object(u.a)(Object(u.a)({},e),{},{currentMatch:0,selectedItem:{identifier:null,type:null,category:null}});case Kr:return Object(u.a)(Object(u.a)({},e),{},{showKeywordsTopicsDialog:!0});case Hr:return Object(u.a)(Object(u.a)({},e),{},{showKeywordsTopicsDialog:!1});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case At:return Object(u.a)(Object(u.a)({},e),{},{jwtToken:t.payload});case Xr:return Object(u.a)(Object(u.a)({},e),{},{displayName:t.payload});default:return e}},tabs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$r,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Zr:var n=t.payload;return n===e.activeTab&&(n="none"),Object(u.a)(Object(u.a)({},e),{},{activeTab:n});default:return e}},errorModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ei,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case zn:var n=t.payload,a=n.title,r=n.message,i=n.primaryButtonText,o=n.secondaryButtonText,s=n.onPrimaryClicked;return{show:!0,title:a||ei.title,message:r||ei.message,primaryButtonText:i||ei.primaryButtonText,secondaryButtonText:o,onPrimaryClicked:s};case Qn:return Object(u.a)({},ei);default:return e}}}),ni=(n(79),n(80),n(81),n(63)),ai=n(5),ri=n.p+"static/media/logo-linear.f69f4348.svg",ii=n(3),oi=n.n(ii),si=oi.a.arrayOf(oi.a.string),ci=(oi.a.shape({primaryUuid:oi.a.string,channels:oi.a.object,transcription:oi.a.object,talkTime:oi.a.object}),oi.a.shape({1:oi.a.object,2:oi.a.object}),oi.a.shape({start:oi.a.number,end:oi.a.number}),oi.a.shape({start:oi.a.number,end:oi.a.number,range:oi.a.number,routingOffset:oi.a.number,unrecordedTime:oi.a.number}),oi.a.object,oi.a.object,oi.a.array,oi.a.array,oi.a.object,oi.a.object,oi.a.object,oi.a.object,oi.a.object,oi.a.object,oi.a.object,oi.a.object,oi.a.shape({isPrimary:oi.a.bool,isAgent:oi.a.bool,userId:oi.a.bool,image:oi.a.string,relatedUuids:oi.a.array,start:oi.a.number,end:oi.a.number,title:oi.a.string,agentNumber:oi.a.number,agents:oi.a.number,classes:oi.a.string,color:oi.a.string,sentences:oi.a.array,events:oi.a.array,call:oi.a.object}),oi.a.shape({source:oi.a.string,events:oi.a.array}),oi.a.shape({notes:oi.a.string,transcription:oi.a.string}),oi.a.shape({start:oi.a.func,stop:oi.a.func,duration:oi.a.func,eventAtPlayhead:oi.a.func,eventAtMediaPosition:oi.a.func,playheadAtMediaPosition:oi.a.func}),oi.a.shape({startTime:oi.a.number,duration:oi.a.number,calls:oi.a.array,direction:oi.a.string,from:oi.a.string,to:oi.a.string,images:oi.a.array,channels:oi.a.array,participants:oi.a.object,callers:oi.a.object,metrics:oi.a.array,keyCallers:oi.a.object}),oi.a.shape({start:oi.a.number,span:oi.a.number}),oi.a.shape({position:oi.a.number,offsetPosition:oi.a.number}),oi.a.shape({user:oi.a.string,lastRead:oi.a.string})),li=oi.a.shape({uuid:oi.a.string,comment:oi.a.string,created:oi.a.string,modified:oi.a.string,author:oi.a.string}),ui=oi.a.shape({noteId:oi.a.string,uuid:oi.a.string,timestamp:oi.a.number,eventType:oi.a.number,author:oi.a.string,text:oi.a.string,channelUuid:oi.a.string,isAcknowledged:oi.a.bool,isClosed:oi.a.bool,noteCreated:oi.a.string,noteModified:oi.a.string,polarity:oi.a.string,userActivity:oi.a.arrayOf(ci),thread:oi.a.arrayOf(li)}),di=oi.a.arrayOf(ui),hi=(oi.a.shape({showOnTimeline:oi.a.bool,showCompletedNotes:oi.a.bool,showEditModal:oi.a.bool,editMode:oi.a.string,noteToEdit:oi.a.string,commentToEdit:oi.a.string,notes:di}),oi.a.arrayOf(oi.a.shape({direction:oi.a.string,start:oi.a.number,end:oi.a.number,data:oi.a.array})),oi.a.shape({quality:oi.a.number,qualityNote:oi.a.string,politeness:oi.a.number,politenessNote:oi.a.string,customerExperience:oi.a.number,customerExperienceNote:oi.a.string,agentKnowledge:oi.a.number,agentKnowledgeNote:oi.a.string}),oi.a.shape({searchPhrase:oi.a.string,matches:oi.a.array,matchCount:oi.a.number,currentMatch:oi.a.number,positions:oi.a.array,positionCount:oi.a.number,currentPosition:oi.a.object,currentPositionIndex:oi.a.number}),oi.a.shape({isPlaying:oi.a.bool,speed:oi.a.number,availableSpeeds:oi.a.array,playhead:oi.a.number}),oi.a.shape({identifier:oi.a.string,type:oi.a.string}),n(54)),pi=n(32),mi=n.n(pi),fi=n(0),vi=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).state={clock:.1,start:null},a.clockHandler=null,a.mediaPlayer=null,a}return Object(y.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.speed,n=e.onMovePlayhead;this.updatePlaybackSpeed(t),this.startUpdatingPlayhead(n)}},{key:"componentDidUpdate",value:function(e,t){var a=e,r=this.props,i=r.audio,o=r.isPlaying,s=r.playhead,c=r.speed;o!==a.isPlaying&&this.updatePlayerState(s),s!==a.playhead&&this.updatePlayerState(s),c!==a.speed&&this.updatePlaybackSpeed(c),i!==a.audio&&(this.mediaPlayer=n.createMediaPlayer(i))}},{key:"componentWillUnmount",value:function(){this.stopUpdatingPlayhead()}},{key:"updatePlaybackSpeed",value:function(e){this.mediaPlayer&&(this.mediaPlayer.playbackRate=e)}},{key:"startUpdatingPlayhead",value:function(e){var t=this,n=this.props,a=n.isPlaying,r=n.clock;if(setTimeout((function(){t.startUpdatingPlayhead(e)}),r.interval),a){var i=this.props,o=i.playhead,s=i.speed,c=i.audioTransport.eventAtPlayhead(o);if(c){if(!this.mediaPlayer)return;e(c.playheadAtMediaPosition(this.mediaPlayer))}else e(o+r.speed*s)}}},{key:"stopUpdatingPlayhead",value:function(){null!==this.clockHandler&&clearTimeout(this.clockHandler),this.clockHandler=null}},{key:"updatePlayerState",value:function(e){if(this.mediaPlayer){var t=this.props,n=t.isPlaying,a=t.onMovePlayhead,r=t.onPauseClick,i=t.audioTransport;if(99.9===Math.min(e,99.9)&&(a(100),r()),n){var o=i.eventAtPlayhead(e);if(o){var s=o.playheadAtMediaPosition(this.mediaPlayer);(e>s+.5||e<s-.5)&&(this.mediaPlayer.currentTime=o.mediaPositionAtPlayhead(e,this.mediaPlayer)),this.mediaPlayer.paused&&this.mediaPlayer.play()}else this.mediaPlayer.paused||this.mediaPlayer.pause()}else this.mediaPlayer.paused||this.mediaPlayer.pause()}}},{key:"render",value:function(){var e=this.props,t=e.isPlaying,n=e.onPauseClick,a=e.onPlayClick,r=e.onSkipBackClick,i=e.onSkipForwardClick,o=e.onRestartPlayHeadClick,s=e.availableSpeeds,c=e.speed,l=e.onSetPlaybackSpeed,u=e.playhead,d=e.showTransport,h=e.status.status,p=t?mi.a.pause:mi.a.play;d&&100===u&&(p=mi.a.playDisabled);var m=t?n:a,f=h!==at;return Object(fi.jsxs)("div",{className:mi.a.Player,children:[Object(fi.jsx)("button",{tabIndex:0,type:"button",className:mi.a.playback,onClick:o,disabled:f}),Object(fi.jsx)("button",{tabIndex:0,type:"button",className:mi.a.skipBack,onClick:r,disabled:f}),Object(fi.jsx)("button",{tabIndex:0,type:"button",className:p,onClick:m,disabled:f}),Object(fi.jsx)("button",{tabIndex:0,type:"button",className:mi.a.skipForward,onClick:i,disabled:f}),Object(fi.jsx)("select",{tabIndex:0,type:"button",className:mi.a.changeSpeed,value:c,onChange:function(e){return l(parseFloat(e.target.value,10))},disabled:f,children:s.map((function(e){return Object(fi.jsxs)("option",{value:e,children:[e,"x"]},e)}))})]})}}],[{key:"createMediaPlayer",value:function(e){var t=e.source,n=e.duration,a=new hi.Howl({src:[t],html5:!1,format:E}),r=new hi.Howl({src:[t],html5:!0,format:E}),i=a,o=null,s=0,c=0,l=1,u=null;return{pause:function(){this.paused||(clearTimeout(u),u=null,o=null,this.paused=!0,i.pause())},play:function(){var e=this;(this.paused||c!==this.currentTime||l!==this.playbackRate)&&(i.pause(),o=(new Date).getTime(),s=this.currentTime,l=this.playbackRate,i=1===this.playbackRate?a:r,this.paused=!1,i.rate(this.playbackRate),i.seek(this.currentTime),i.play());var t=(new Date).getTime();this.currentTime=s+(t-o)/1e3*this.playbackRate,c=this.currentTime,u=setTimeout((function(){e.play()}),10)},duration:n/1e6,currentTime:0,paused:!0,playbackRate:1}}}]),n}(a.Component),bi=Object(Ue.a)([je],(function(e){var t=function(){return(e.events[0]||{start:0}).start},n=function(){return(e.events[e.events.length-1]||{stop:100}).stop},a=function(t){var n=t.currentTime,a=100/t.duration*n;return e.events.filter((function(e){return a>=e.audioStart&&a<=e.audioStop}))[0]||null};return{start:t,stop:n,duration:function(){var a=e.events;return Array.isArray(a)&&0!==a.length?e.events.map((function(e){return e.stop-e.start})).reduce((function(e,t){return t+e})):n()-t()},eventAtPlayhead:function(t){return e.events.filter((function(e){return t>=e.start&&t<=e.stop}))[0]||null},eventAtMediaPosition:a,playheadAtMediaPosition:function(e){var t=a(e);return t?t.playheadAtMediaPosition(e):0}}})),yi=Object(Ue.a)([Xe],(function(e){return e.range?{speed:100/(e.range/1e6)/47.5,interval:20}:{speed:0,interval:20}}));var gi=Object(s.b)((function(e){var t=e.audio,n=e.status,a=e.playback;return{isPlaying:a.isPlaying,availableSpeeds:a.availableSpeeds,speed:a.speed,playhead:a.playhead,audio:t,audioTransport:bi(e),status:n,clock:yi(e)}}),(function(e){return{onSkipBackClick:function(){e((function(e,t){var n=1e7/Xe(t()).range*100;e({type:yt,payload:{adjustment:n}})}))},onPlayClick:function(){e(ma())},onPauseClick:function(){e(fa())},onSkipForwardClick:function(){e((function(e,t){var n=3e7/Xe(t()).range*100;e({type:gt,payload:{adjustment:n}})}))},onRestartPlayHeadClick:function(){e(ja({position:0,offsetPosition:0})),e(ya(.01))},onSetPlaybackSpeed:function(t){e(ba(t))},onMovePlayhead:function(t){e(ya(t))}}}))((function(e){var t=e.isPlaying,n=e.playhead,a=e.onSkipBackClick,r=e.onPlayClick,i=e.onPauseClick,o=e.onSkipForwardClick,s=e.onRestartPlayHeadClick,c=e.availableSpeeds,l=e.speed,u=e.onSetPlaybackSpeed,d=e.onMovePlayhead,h=e.audio,p=e.audioTransport,m=e.showTransport,f=e.status,v=e.clock;return Object(fi.jsx)(vi,{isPlaying:t,playhead:n,onSkipBackClick:a,onPlayClick:r,onPauseClick:i,onSkipForwardClick:o,onRestartPlayHeadClick:s,availableSpeeds:c,speed:l,onSetPlaybackSpeed:u,onMovePlayhead:d,audio:h,audioTransport:p,showTransport:m,status:f,clock:v})})),ji=n(24),Oi=n.n(ji),_i=n(55),xi=n.n(_i),Ci=function(e){var t=function(e){var t=e.isScrubVisible,n=e.isTimelineVisible,r=e.onSetScrubVisibility,i=e.onSetTimelineVisibility,o=Object(a.useState)(!1),s=Object(Fe.a)(o,2),c=s[0],l=s[1];return{label:c?"Hide timeline":"Show timeline",handleToggleOpen:function(){r(!t),i(!n),l(!c)}}}(e),n=t.label,r=t.handleToggleOpen;return Object(fi.jsx)("div",{className:xi.a.container,children:Object(fi.jsx)("div",{className:xi.a.button,role:"button",onMouseDown:r,children:n})})},ki=Object(s.b)((function(e){return{isScrubVisible:Te(e),isTimelineVisible:Ne(e)}}),(function(e){return{onSetScrubVisibility:function(t){e(Ja(t))},onSetTimelineVisibility:function(t){e(xr(t))}}}))((function(e){return Object(fi.jsx)(Ci,Object(u.a)({},e))})),wi=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).callList=r.a.createRef(),a.state={calls:null},a.onCallListClicked=a.onCallListClicked.bind(Object(ai.a)(a)),a.showCallList=a.showCallList.bind(Object(ai.a)(a)),a.hideCallList=a.hideCallList.bind(Object(ai.a)(a)),a}return Object(y.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutsideDropdown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutsideDropdown)}},{key:"onCallListClicked",value:function(){var e=Object(m.a)(p.a.mark((function e(){var t,n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.calls,n=this.props.jwtToken,!t){e.next=5;break}return this.showCallList(),e.abrupt("return");case 5:return e.next=7,W(n);case 7:(a=e.sent)&&(this.setState({calls:a.data.map((function(e,t){return Object(fi.jsxs)("div",{className:Oi.a.callListItem,children:[Object(fi.jsx)("div",{className:Oi.a.itemIndex,children:t+1}),Object(fi.jsxs)("div",{className:Oi.a.uuid,children:[e.fromNumber,Object(fi.jsx)("br",{}),Object(fi.jsx)("a",{href:"?uuid=".concat(e.aUuid),children:e.aUuid||"unavailable"})]}),Object(fi.jsx)("div",{className:Oi.a.description,children:new Date(e.timeStart).toLocaleString()}),Object(fi.jsxs)("div",{className:Oi.a.uuid,children:[e.toNumber||e.toNumberDialled,Object(fi.jsx)("br",{}),e.bUuid&&Object(fi.jsx)("a",{href:"?uuid=".concat(e.bUuid),children:e.bUuid})]})]},"".concat(e.aUuid,"-").concat(t))}))}),this.showCallList());case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"showCallList",value:function(){this.callList.current.style.display="block"}},{key:"hideCallList",value:function(){this.callList.current.style.display="none"}},{key:"render",value:function(){var e=this.state.calls,t=this.props,n=t.onFinishAndRateClicked,a=t.showRatingButton,r=t.isRated;return Object(fi.jsxs)("header",{className:Oi.a.Header,children:[Object(fi.jsxs)("div",{className:"container ".concat(Oi.a.HeaderContainer),children:[Object(fi.jsx)("div",{className:Oi.a.Branding,children:Object(fi.jsx)("img",{src:ri,className:Oi.a.logo,alt:"natterbox"})}),Object(fi.jsx)("div",{className:"spacer"}),Object(fi.jsx)("div",{className:Oi.a.Player,children:Object(fi.jsx)(gi,{showTransport:!0})}),Object(fi.jsx)("div",{className:Oi.a.LayoutOptions,children:Object(fi.jsx)(ki,{})}),Object(fi.jsxs)("div",{className:Oi.a.Exit,children:[!window.parent.getSessionId&&Object(fi.jsx)("button",{id:"call-list",type:"button",className:"button button--state-primary",onClick:this.onCallListClicked,children:"Call List"}),a&&Object(fi.jsx)("button",{type:"button",className:"button button--state-primary ".concat(Oi.a.finish),onClick:n,children:r?"Review Rating":"Finish & Rate"})]})]}),Object(fi.jsxs)("div",{ref:this.callList,"data-testid":"divCallList",className:"container",style:{display:"none",color:"#FFFFFF"},children:[Object(fi.jsx)("button",{type:"button",onClick:this.hideCallList,children:"Close"}),Object(fi.jsxs)("div",{className:Oi.a.callListContainer,children:[Object(fi.jsxs)("div",{className:Oi.a.callListItem,children:[Object(fi.jsx)("div",{className:Oi.a.itemIndex}),Object(fi.jsx)("div",{className:Oi.a.uuid,children:"Primary"}),Object(fi.jsx)("div",{children:"Date and Time"}),Object(fi.jsx)("div",{className:Oi.a.uuid,children:"Secondary"})]}),e]})]})]})}}]),n}(a.Component);wi.defaultProps={jwtToken:null,isRated:!1};var Si,Ti=Object(s.b)(null,(function(e){return{onSetScrubberVisibility:function(t){e(Ja(t))},onSetEventTimelineVisibility:function(t){e(xr(t))}}}))(wi),Ni=n(27),Ei=n.n(Ni),Ii=n(13),Pi=n.n(Ii);function Li(){return(Li=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Ri(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Mi(e,t){var n=e.title,r=e.titleId,i=Ri(e,["title","titleId"]);return a.createElement("svg",Li({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:24,height:24,viewBox:"0 0 24 24",fill:"#49535C",ref:t,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,Si||(Si=a.createElement("path",{fill:"fill",id:"a",d:"M21 18.36v.84c0 .99-.81 1.8-1.8 1.8H4.8c-.99 0-1.8-.81-1.8-1.8v-.84c0-2.19 2.55-3.51 4.95-4.56.09-.03.15-.06.24-.12.18-.09.39-.09.57.03.96.63 2.07.99 3.24.99 1.17 0 2.28-.36 3.24-.96.18-.12.39-.12.57-.03.09.03.15.06.24.12 2.4 1.02 4.95 2.34 4.95 4.53zm-9-5.46c-2.469 0-4.47-2.216-4.47-4.95S9.531 3 12 3s4.47 2.216 4.47 4.95S14.469 12.9 12 12.9z"})))}var Ai=a.forwardRef(Mi),Di=(n.p,n(14)),Ui=n.n(Di),Bi=n.p+"static/media/timeline.ac675505.svg";function Fi(e,t){return e.Start<t.Start?-1:e.Start>t.Start?1:0}function Ki(e,t){return e.s<t.s?-1:e.s>t.s?1:0}function Hi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["#000","#fff"],n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(!n)return t[1];var a=parseInt(n[1],16),r=parseInt(n[2],16),i=parseInt(n[3],16),o=(299*a+587*r+114*i)/255e3;return o>=.5?t[0]:t[1]}var Wi=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).conversationRef=r.a.createRef(),a.scrollTimeoutHandler=null,a.handleMouseDown=a.handleMouseDown.bind(Object(ai.a)(a)),a.handleScrollWheel=a.handleScrollWheel.bind(Object(ai.a)(a)),a}return Object(y.a)(n,[{key:"componentDidUpdate",value:function(){var e=this.props.playback.isPlaying;this.updateViewport(e)}},{key:"getConversationViewportScalingFactor",value:function(){var e=this.props,t=e.transcription,n=e.timeline;if("undefined"===typeof t||null==t)return 0;var a=t[1].Sentences,r=t[2].Sentences,i=Number.MAX_SAFE_INTEGER;i=a.reduce((function(e,t){return Math.min(e,t.End-t.Start)}),i),i=r.reduce((function(e,t){return Math.min(e,t.End-t.Start)}),i);var o=n.range/4e6;return i<Number.MAX_SAFE_INTEGER?Math.max(o,i/26):Math.max(o,8)}},{key:"styleSentence",value:function(e,t,a){var r=this.props,i=r.confidence,o=r.search,s=o.positions,c=o.currentPosition,l=s.filter((function(t){return t.channel===e.channel})).map((function(e){return Object(u.a)(Object(u.a)({},e),{},{end:e.end?e.end:e.start})})).filter((function(t){return t.start<=e.End&&t.end>=e.Start})),d=t.filter((function(t){return t.s>=e.Start&&t.e<=e.End}));if(d.sort(Ki),0===i&&0===l.length)return e.Sentence;var h=d.filter((function(e){return l.filter((function(t){return n.isWordIntersectingPosition(e,t)})).length>0})),p=a?Hi(a,["#5c6770","#ffffff"]):"#5c6770";return d.map((function(e,t,r){var o=h.indexOf(e)>-1,s=t<r.length-1?r[t+1]:null,l=!!s&&h.indexOf(s)>-1,u=Pi()({[Ui.a.confidence]:e.c<i/100});if(o){var d=n.isWordIntersectingPosition(e,c),m=d?{color:p,background:"linear-gradient(to right, rgba(247,247,247,0) 50%, ".concat(a," 50%)"),backgroundSize:"200%"}:{backgroundColor:a,color:p,borderRadius:"2px"},f=Pi()({[Ui.a.matchFill]:d,[Ui.a.matchFillAnimate]:d});return Object(fi.jsxs)("span",{className:u,children:[Object(fi.jsx)("span",{className:f,style:m,children:"".concat(e.w).concat(l?" ":"")}),!l&&" "]},"".concat(t,"-").concat(e))}return Object(fi.jsx)("span",{className:u,children:"".concat(e.w," ")},"".concat(t,"-").concat(e))}))}},{key:"updateViewport",value:function(e){if(!this.isScrolling()){var t=document.getElementsByClassName(Ui.a.playHead);if(0!==t.length){var n=t[0],a=this.conversationRef.current,r=a.getBoundingClientRect(),i=a.scrollTop,o=n.getBoundingClientRect().top+Math.abs(i),s=r.top+r.height/2;if(e){var c=o-s-this.conversationRef.current.scrollTop;this.conversationRef.current.scrollTop+=c/10}else 0===this.props.transcriptionPlayScrub.position&&(this.conversationRef.current.scrollTop=o-s)}}}},{key:"mergedConversation",value:function(){var e=this.props.transcription;if("undefined"===typeof e)return[];var t=[];e[1].Sentences.forEach((function(e){var n={person:1};Object.assign(n,e),t.push(n)}));var n=[];e[2].Sentences.forEach((function(e){var t={person:2};Object.assign(t,e),n.push(t)}));var a=t.concat(n);return a.sort(Fi),a}},{key:"getConversation",value:function(e){var t=this,a=this.props,r=a.transcription,i=a.sentences,o=a.playback.playhead,s=a.timeline,c=s.routingOffset,l=[],d=[],h=null,p=1;if(null!==i)return Object.keys(e).map((function(n){var a=e[n],o=[];return null!==r[1]&&(o=a.isPrimary?r[1].Words:r[2].Words),i[n].map((function(e){return Object(u.a)(Object(u.a)({},e),{},{startWithOffset:e.startWithOffset+c/1e3,endWithOffset:e.endWithOffset+c/1e3})})).map((function(e){return Object(u.a)(Object(u.a)({},e),{},{isPrimary:a.isPrimary,color:a.color,styledSentence:t.styleSentence(e,o,a.color)})}))})).flat().sort((function(e,t){return e.startWithOffset-t.startWithOffset})).forEach((function(t){var n={borderBottom:"4px solid ".concat(t.color)},a={fill:"".concat(t.color),width:"18px",height:"18px"},r={color:"".concat(t.color)},i=null===e[t.number].initials?Object(fi.jsx)(Ai,{style:a}):Object(fi.jsxs)("span",{style:r,children:[" ",e[t.number].initials," "]}),o=null===h||t.startWithOffset>h.end;p=o?1:p+1;var s={className:t.isPrimary?Ui.a.primary:Ui.a.secondary,initialHtml:i,tabStyle:n};o?(d=[Object(u.a)(Object(u.a)({},t),s)],h={start:t.startWithOffset,end:t.endWithOffset},l.push({range:h,sentences:d})):(h.end=Math.max(t.endWithOffset,h.end),d.push(Object(u.a)(Object(u.a)({},t),s)))})),l.map((function(e,t,a){var r=e.range,i=e.sentences,c=t>0?a[t-1]:null,l=s.sentenceTimestampAtPlayhead(o),u=l>=r.start&&l<r.end,d={start:null!==c?c.range.end:0,end:r.start-1},h=l>=d.start&&l<=d.end,p=h?Ui.a.playheadLocation:"",m=u?Ui.a.playheadLocation:"";return[Object(fi.jsx)("div",{className:"".concat(Ui.a.conversationRow," ").concat(p," ").concat(Ui.a.spacer),"data-timestamp-start":d.start||0,"data-timestamp-end":d.end||0,children:h&&n.playHeadMarker(l,d,s)},"spacer-".concat(r.start||0,"-").concat(r.end||0)),Object(fi.jsxs)("div",{className:"\n                            ".concat(Ui.a.conversationRow," \n                            ").concat(m," \n                            ").concat(i&&i.length>1?Ui.a.conversationRowLinked:"","\n                            ").concat(i&&1===i.length&&2===i[0].channel?Ui.a.conversationRowRight:"","\n                            ").concat(i&&i.length>1&&i.every((function(e){return 2===e.channel}))?Ui.a.conversationRowRight:"","\n                        "),"data-timestamp-start":r.start||0,"data-timestamp-end":r.end||0,children:[u&&n.playHeadMarker(l,r,s),1===i.length?i.map((function(e){var t=Object(fi.jsx)("div",{className:Ui.a.initials,style:e.tabStyle,children:e.initialHtml},"icon"),n=Object(fi.jsx)("div",{className:Ui.a.sentenceBody,children:e.styledSentence},"sentence"),a=Object(fi.jsx)("div",{className:Ui.a.blanking},"blanking"),r=e.isPrimary?[t,a,n]:[n,a,t];return Object(fi.jsx)("div",{className:"".concat(Ui.a.sentence," ").concat(e.className),style:e.style,children:r},"".concat(e.Start,"-").concat(e.End,"-").concat(e.Sentence))})):i.reduce((function(e,t){return e[+!t.isPrimary]?(e[+!t.isPrimary].End=t.End,e[+!t.isPrimary].endWithOffset=t.endWithOffset,e[+!t.isPrimary].timelineEnd=t.timelineEnd,e[+!t.isPrimary].timeline.end=t.timeline.end,e[+!t.isPrimary].styledSentence.push(t.styledSentence)):(e[+!t.isPrimary]=t,e[+!t.isPrimary].styledSentence=[e[+!t.isPrimary].styledSentence]),e}),[]).map((function(e){var t=Object(fi.jsx)("div",{className:Ui.a.initials,style:e.tabStyle,children:e.initialHtml},"icon"),n=Object(fi.jsx)("div",{className:Ui.a.sentenceBody,children:e.styledSentence.map((function(e){return Object(fi.jsx)("div",{children:e})}))},"sentence"),a=Object(fi.jsx)("div",{className:Ui.a.blanking},"blanking"),r=e.isPrimary?[t,a,n]:[n,a,t];return Object(fi.jsx)("div",{className:"".concat(Ui.a.sentence," ").concat(e.className," ").concat(2===e.channel?Ui.a.secondaryLinked:""),children:r},"".concat(e.Start,"-").concat(e.End,"-").concat(e.Sentence))}))]},"row-".concat(r.start||0,"-").concat(r.end||0))]}))}},{key:"handleMouseDown",value:function(e){var t=e.target;if(void 0!==t.dataset.timestampStart){var n=parseInt(t.dataset.timestampStart,10),a=parseInt(t.dataset.timestampEnd,10),r=e.target.getBoundingClientRect(),i=e.clientX-r.left,o=i>18&&i<42,s=e.clientY-r.top,c=parseInt((a-n)/r.height*s+n,10),l=this.props,u=l.timeline,d=l.onSetPlayHeadPosition,h=l.setPaused,p=l.onClickPlay,m=l.playback.isPlaying,f=u.playheadAtTimestamp(1e3*c);o&&!m?(d(f,!0),p()):(o&&m||d(f,!0),h())}}},{key:"isScrolling",value:function(){return null!==this.scrollTimeoutHandler}},{key:"handleScrollWheel",value:function(){var e=this;this.isScrolling()&&clearTimeout(this.scrollTimeoutHandler),this.scrollTimeoutHandler=setTimeout((function(){e.scrollTimeoutHandler=null}),1e3)}},{key:"render",value:function(){var e=this.props,t=e.status,a=e.children,r=e.participants,i=e.emptyText,o=this.getConversation(r);if(t===rt){return Object(fi.jsx)("div",{ref:this.conversationRef,style:{backgroundImage:"url(".concat(Bi,")"),backgroundRepeat:"repeat-y",backgroundPosition:"14px top",position:"absolute",left:0,right:0,top:0,bottom:0},children:Object(fi.jsxs)("div",{style:{height:"100%",marginTop:"0px"},children:[n.noAgentDataOverlay(),n.noAgentDataText(i)]})})}return Object(fi.jsxs)("div",{ref:this.conversationRef,className:Ui.a.TranscriptionConversation,style:{backgroundImage:"url(".concat(Bi,")"),backgroundRepeat:"repeat-y",backgroundPosition:"14px top"},onWheel:this.handleScrollWheel,children:[Object(fi.jsxs)("div",{className:Ui.a.transcriptionEventContainer,children:[a,Object(fi.jsxs)("div",{className:"".concat(Ui.a.container," ").concat(Ui.a.start),children:[Object(fi.jsx)("span",{className:Ui.a.playHeadLine}),Object(fi.jsx)("span",{className:Ui.a.playHeadStartText,children:"Call Begins"}),Object(fi.jsx)("span",{className:Ui.a.playHeadLine})]})]}),Object(fi.jsx)("div",{className:Ui.a.conversationContainer,onClick:this.handleMouseDown,children:o}),n.loadingScreen(t===nt)]})}}],[{key:"loadingScreen",value:function(e){var t="".concat(Ui.a.onTop," loading-overlay ").concat(e?"":"fade-out");return Object(fi.jsxs)("svg",{className:t,width:"100%",height:"100%",viewBox:"0 0 300 300",preserveAspectRatio:"none",children:[Object(fi.jsx)("defs",{children:Object(fi.jsxs)("linearGradient",{id:"bottom-top-gradient",x1:"0%",y1:"100%",x2:"0%",y2:"0%",spreadMethod:"pad",children:[Object(fi.jsx)("stop",{stopColor:"#fff",stopOpacity:"1",offset:"0%"}),Object(fi.jsx)("stop",{stopColor:"#fff",stopOpacity:"0",offset:"100%"})]})}),Object(fi.jsxs)("g",{opacity:"0.033",children:[Object(fi.jsx)("rect",{x:"20",y:"10",width:"30",height:"20",radius:"4"}),Object(fi.jsx)("rect",{x:"35",y:"10",width:"100",height:"40",radius:"4"}),Object(fi.jsx)("rect",{x:"170",y:"60",width:"30",height:"20",radius:"4"}),Object(fi.jsx)("rect",{x:"185",y:"60",width:"100",height:"30",radius:"4"}),Object(fi.jsx)("rect",{x:"20",y:"100",width:"30",height:"20",radius:"4"}),Object(fi.jsx)("rect",{x:"35",y:"100",width:"100",height:"80",radius:"4"}),Object(fi.jsx)("rect",{x:"170",y:"200",width:"30",height:"20",radius:"4"}),Object(fi.jsx)("rect",{x:"185",y:"200",width:"100",height:"180",radius:"4"})]}),Object(fi.jsx)("rect",{x:"0",y:"150",width:"300",height:"150",fill:"url(#bottom-top-gradient)"}),Object(fi.jsx)("line",{x1:"0",x2:"0",y1:"0",y2:"300",strokeWidth:"1",stroke:"#000",opacity:"0.5"}),Object(fi.jsx)("line",{x1:"15",x2:"15",y1:"0",y2:"300",strokeWidth:"1",stroke:"#000",opacity:"0.125",strokeDasharray:"4 4"})]})}},{key:"noAgentDataText",value:function(e){return Object(fi.jsx)("div",{className:"noAgentDataText",children:e})}},{key:"noAgentDataOverlay",value:function(){return Object(fi.jsxs)("svg",{className:"loading-overlay",width:"100%",height:"100%",viewBox:"0 0 300 300",preserveAspectRatio:"none",children:[Object(fi.jsx)("defs",{children:Object(fi.jsxs)("linearGradient",{id:"bottom-top-gradient",x1:"0%",y1:"100%",x2:"0%",y2:"0%",spreadMethod:"pad",children:[Object(fi.jsx)("stop",{stopColor:"#fff",stopOpacity:"1",offset:"0%"}),Object(fi.jsx)("stop",{stopColor:"#fff",stopOpacity:"0",offset:"100%"})]})}),Object(fi.jsxs)("g",{opacity:"0.033",children:[Object(fi.jsx)("rect",{x:"20",y:"10",width:"30",height:"20",radius:"4"}),Object(fi.jsx)("rect",{x:"35",y:"10",width:"100",height:"40",radius:"4"}),Object(fi.jsx)("rect",{x:"170",y:"60",width:"30",height:"20",radius:"4"}),Object(fi.jsx)("rect",{x:"185",y:"60",width:"100",height:"30",radius:"4"}),Object(fi.jsx)("rect",{x:"20",y:"100",width:"30",height:"20",radius:"4"}),Object(fi.jsx)("rect",{x:"35",y:"100",width:"100",height:"80",radius:"4"}),Object(fi.jsx)("rect",{x:"170",y:"200",width:"30",height:"20",radius:"4"}),Object(fi.jsx)("rect",{x:"185",y:"200",width:"100",height:"180",radius:"4"})]}),Object(fi.jsx)("rect",{x:"0",y:"150",width:"300",height:"150",fill:"url(#bottom-top-gradient)"}),Object(fi.jsx)("line",{x1:"0",x2:"0",y1:"0",y2:"300",strokeWidth:"1",stroke:"#000",opacity:"0.5"}),Object(fi.jsx)("line",{x1:"15",x2:"15",y1:"0",y2:"300",strokeWidth:"1",stroke:"#000",opacity:"0.125",strokeDasharray:"4 4"})]})}},{key:"isWordIntersectingPosition",value:function(e,t){return e.e>=t.start&&e.s<=t.end}},{key:"playHeadMarker",value:function(e,t,n){var a=100/n.range*(1e3*e),r=n.formattedTimeAtPlayhead(a),i=Math.max(0,e-t.start),o=t.end-t.start,s={top:"".concat(100/o*i,"%")};return Object(fi.jsxs)("div",{className:"".concat(Ui.a.container," ").concat(Ui.a.playHead),style:s,children:[Object(fi.jsx)("div",{style:{backgroundColor:"#F7F7F7"},children:r}),Object(fi.jsx)("div",{className:Ui.a.playHeadLine})]})}}]),n}(a.Component);Wi.defaultProps={viewport:{start:0,span:100},onSetTranscriptionViewport:function(){},children:null,sentences:null};var Vi=Wi,Gi=Object(Ue.a)([Ie,ue],(function(e,t){return e[t]})),Yi=Object(Ue.a)([Le,Gi],(function(e,t){var n=e.description;if("string"===typeof n&&n.length>0)return n;var a=t?"this ".concat(t.type.toLowerCase(),"'s perspective of the"):"this";return"There is no data for ".concat(a," call.")}));function Xi(e){var t=e.status,n=e.viewport,a=e.onSetTranscriptionViewport,r=e.timeline,i=e.playback,o=e.callSummary,s=e.confidence,c=e.children,l=e.search,u=e.setPaused,d=e.transcriptionPlayScrub,h=e.onSetPlayHeadPosition,p=e.onClickPlay,m=e.participants,f=e.transcription,v=e.sentences,b=e.emptyText;return Object(fi.jsx)(Vi,{status:t,onClickPlay:p,viewport:n,onSetTranscriptionViewport:a,timeline:r,playback:i,callSummary:o,confidence:s,search:l,setPaused:u,transcriptionPlayScrub:d,onSetPlayHeadPosition:h,participants:m,transcription:f,sentences:v,emptyText:b,children:c})}Xi.defaultProps={children:null,sentences:null,emptyText:null};var Ji=Object(s.b)((function(e){var t=e.callSummary,n=e.search,a=e.playback,r=e.transcription,i=r.transcriptionPlayScrub,o=r.viewport,s=r.confidence;return{viewport:o,timeline:Xe(e),playback:a,callSummary:t,confidence:s,search:n,transcriptionPlayScrub:i,participants:de(e),status:ye(e),transcription:xe(e),sentences:ke(e),emptyText:Yi(e)}}),(function(e){return{onSetTranscriptionViewport:function(t){e(Oa(t))},setPaused:function(){e(fa())},onSetPlayHeadPosition:function(t,n){e(ya(t,n))},onClickPlay:function(){e(ma())}}}))(Xi),qi=n(28),zi=n.n(qi),Qi=n.p+"static/media/icon-plus.c0aef066.svg",Zi=n(26),$i=n.n(Zi),eo=function(e){var t=e.onSelectOption,n=Object(a.useState)({top:0,left:0}),r=Object(Fe.a)(n,2),i=r[0],o=r[1],s=Object(a.useRef)(),c=function e(){if(s.current&&document.activeElement===s.current){var t=s.current.getBoundingClientRect(),n=t.top,a=t.left;i.left===a&&i.top===n?window.requestAnimationFrame(e):document.activeElement.blur()}};return{ref:s,handleOptionSelected:function(e){return function(){document.activeElement.blur(),t(e)}},handleMouseDown:function(){if(s.current){var e=s.current.getBoundingClientRect(),t=e.top,n=e.left;o({left:n,top:t})}},handleOnFocus:function(){c()},position:{top:"".concat(i.top,"px"),left:"".concat(i.left,"px")}}},to=n(38),no=n.n(to),ao=function(e){var t=e.className,n=e.options,a=e.isLocked,r=eo(e),i=r.handleOptionSelected,o=r.handleMouseDown,s=r.position,c=r.handleOnFocus,l=r.ref;return Object(fi.jsx)("div",{className:"".concat(t," ").concat(no.a.button," ").concat(a&&no.a.locked),role:"button",tabIndex:1,ref:l,onMouseDown:o,onFocus:c,children:Object(fi.jsx)("div",{className:no.a.popover,style:s,"data-overflow-menu-popover":!0,children:Object(fi.jsx)("div",{className:no.a.menu,children:n.map((function(e){return Object(fi.jsx)("div",{role:"button",className:no.a.item,onClick:i(e),children:e},e)}))})})})},ro="general",io="Mark as acknowledged",oo="Close this note",so={edit:"Edit note",reply:"Reply to note",delete:"Delete note"},co={edit:"Edit reply",reply:"Add reply",delete:"Delete reply"},lo="NOTE_AND_COMMENT_THREAD",uo="COMMENT_ONLY",ho=function(e){var t=e.commentId,n=e.viewingUserId,a=e.callerWithUuid,r=e.note,i=r.author,o=r.uuid,s=r.thread,c=t?le(s,t):null,l=Number(i)===Number(n),d=o===ro,h=function(e,t){return Object(u.a)(Object(u.a)({},e),e.userId===t?{name:"You"}:{})}(d?{title:"General",userId:ro}:a(o)||{title:"",userId:""},n),p=h.userId,m=h.name?h.name:h.title;return{isNoteAuthor:l,isCommentAuthor:!!c&&Number(n)===Number(c.author),isRelatingToUser:!l&&(d||Number(p)===Number(n)),relatingToTitle:m}},po=function(e){var t=e.displayMode,n=e.note,r=e.event,i=e.interactive,o=n.authorName,s=n.thread,c=n.isAcknowledged,l=n.isClosed,d=Object(a.useState)(!0),h=Object(Fe.a)(d,2),p=h[0],m=h[1],f=ho(e),v=f.isNoteAuthor,b=f.isCommentAuthor,y=f.isRelatingToUser,g=f.relatingToTitle,j=function(e){var t=e.displayMode,n=e.unread,a=e.commentId,r=e.viewingUserId,i=e.note,o=i.noteId,s=i.thread,c=i.noteCreated,l=i.noteModified,u=i.author,d=a?le(s,a):null,h=t===uo?s.indexOf(d)===s.length-1:0===s.length,p=t===uo?n.includes(d.uuid):n.includes(o);return{comment:d,isEmptyThread:!s||Array.isArray(s)&&!s.length,isUnread:u!==r&&p,isEdited:t===uo?d.created!==d.modified:c!==l,isLastItem:h}}(e),O=j.isEmptyThread,_=j.comment,x=j.isUnread,C=j.isEdited,k=j.isLastItem,w=function(e){var t=e.id,n=e.onAcknowledge,a=e.onEditNote,r=e.onEditComment,i=e.onDeleteNote,o=e.onDeleteComment,s=e.onCloseNote,c=e.onNoteClick,l=e.onUpdateUserActivity,u=e.commentId,d=e.note.isAcknowledged,h=function(e){switch(e){case io:d||n(t);break;case so.edit:a(t);break;case so.reply:case co.reply:r(t);break;case so.delete:i(t);break;case co.edit:r(t,u);break;case co.delete:o(t,u);break;case oo:s(t)}};return{handleNoteClicked:function(){l(t),c()},handleDefaultAction:function(){return h(io)},handleOptionSelected:h}}(e),S=w.handleNoteClicked,T=w.handleDefaultAction,N=w.handleOptionSelected,E=function(e){var t=e.displayMode,n=e.isClosed,a=e.isNoteAuthor,r=e.isCommentAuthor,i=[];return!n&&a&&t!==uo&&i.push(oo),n||(i.push(t===uo?co.reply:so.reply),a&&t!==uo&&i.push(so.edit,so.delete),r&&t===uo&&i.push(co.edit,co.delete)),i}({displayMode:t,isAcknowledged:c,isClosed:l,isNoteAuthor:v,isCommentAuthor:b,isRelatingToUser:y,isLastItem:k}),I=t===lo&&!O;return Object(u.a)({handleNoteClicked:S,handleOptionSelected:N,handleDefaultAction:y?T:null,isEmptyThread:O,isUnread:x,isEdited:C,showThread:p&&t===lo,thread:t===lo?s:[],toggleShowThread:function(){return m(!p)},author:t===uo?_.authorName:o,relatingTo:"".concat(g," (").concat(r.text,")"),isAcknowledged:c,isClosed:l,showDefaultAction:!l&&i&&(k||!p)&&(c||y),showRelatingTo:t===lo,showThreadSection:I,overflowOptions:E,showOverflowMenu:i&&E.length>0},t===uo?{text:_.comment,noteCreated:Ge(_.created)}:{text:n.text,noteCreated:Ge(n.noteCreated)})},mo=function e(t){var n=t.id,a=t.displayMode,r=t.color,i=t.time,o=t.interactive,s=po(t),c=s.overflowOptions,l=s.handleNoteClicked,d=s.handleOptionSelected,h=s.handleDefaultAction,p=s.noteCreated,m=s.author,f=s.relatingTo,v=s.isAcknowledged,b=s.isClosed,y=s.text,g=s.showThread,j=s.thread,O=s.toggleShowThread,_=s.showDefaultAction,x=s.showRelatingTo,C=s.showThreadSection,k=s.showOverflowMenu,w=s.isEdited,S=s.isUnread,T={borderLeft:"4px solid",borderLeftColor:r};return Object(fi.jsxs)("div",{children:[Object(fi.jsxs)("div",{role:"button",tabIndex:0,className:"".concat($i.a.note," ").concat(a===uo?$i.a.comment:null),style:T,onMouseUp:o?l:void 0,children:[Object(fi.jsxs)("div",{className:$i.a.heading,children:[Object(fi.jsx)("div",{className:$i.a.author,children:m}),Object(fi.jsx)("div",{className:$i.a.time,children:p.time}),Object(fi.jsx)("div",{className:$i.a.date,children:p.date})]}),x&&Object(fi.jsxs)("div",{className:$i.a.subject,children:[!!i&&Object(fi.jsx)("div",{className:$i.a.time,children:i}),Object(fi.jsx)("div",{children:f})]}),Object(fi.jsxs)("div",{className:$i.a.noteText,children:[Ve(y||""),w&&Object(fi.jsx)("div",{className:$i.a.edited,children:"(EDITED)"})]}),k&&Object(fi.jsx)(ao,{className:$i.a.overflowMenu,options:c,isLocked:b,onSelectOption:d}),_&&Object(fi.jsx)("div",{role:"button",tabIndex:2,className:"".concat($i.a.actionButton," ").concat(v&&$i.a.acknowledged),onClick:h}),S&&Object(fi.jsx)("div",{className:$i.a.unread}),b&&a!==uo&&Object(fi.jsx)("div",{className:$i.a.closed,children:"NOTE CLOSED"})]},n),C&&Object(fi.jsxs)("div",{children:[g&&j.map((function(n){var a=n.uuid;return Object(fi.jsx)(e,Object(u.a)(Object(u.a)({},t),{},{displayMode:uo,commentId:a}),a)})),o&&Object(fi.jsx)("div",{className:$i.a.toggleThreadButton,onClick:O,children:g?"HIDE REPLIES":"SHOW REPLIES"})]})]})};mo.defaultProps={displayMode:lo,commentId:null,interactive:!0,viewingUserId:"",unread:[],time:"",onNoteClick:function(){},onEditNote:function(){},onEditComment:function(){}};var fo=mo,vo=function(e){return Object(fi.jsx)(fo,Object(u.a)({},e))};vo.defaultProps={displayMode:lo,commentId:null,interactive:!0,viewingUserId:"",unread:[],time:"",onNoteClick:function(){},onEditNote:function(){},onEditComment:function(){}};var bo=Object(s.b)((function(e){return{unread:Yt(e),viewingUserId:Wt(e),callerWithUuid:Fn(e)}}),(function(e){return{onAcknowledge:function(t){e($a(t))},onDeleteNote:function(t){e(mn(t))},onDeleteComment:function(t,n){e(tr(t,n))},onCloseNote:function(t){e(er(t))},onUpdateUserActivity:function(t){e(function(e){return function(t){return t(Za(e))}}(t))}}}))(vo),yo=n(45),go=n.n(yo),jo=function(e){var t=function(e){var t=e.notes.filter,n=e.onSelectFilter,a=t!==qt.all;return{handleOptionSelected:function(e){return function(){document.activeElement.blur(),n(qt[e])}},handleClickButton:function(e){document.activeElement===e.target.parentElement&&(document.activeElement.blur(),e.preventDefault())},label:a?"Showing ".concat(t.toLowerCase()):"Showing all notes",isFiltering:a}}(e),n=t.label,a=t.handleOptionSelected,r=t.handleClickButton,i=t.isFiltering;return Object(fi.jsxs)("div",{className:go.a.filter,role:"button",tabIndex:1,onMouseDown:r,children:[Object(fi.jsx)("div",{className:i?go.a.highlighted:"",children:n}),Object(fi.jsx)("div",{className:go.a.popover,children:Object.keys(qt).map((function(e){return Object(fi.jsx)("div",{className:go.a.item,onClick:a(e),children:qt[e]},e)}))})]})},Oo=Object(s.b)((function(e){return{notes:Gt(e)}}),(function(e){return{onSelectFilter:function(t){return e(cr(t))}}}))((function(e){return Object(fi.jsx)(jo,Object(u.a)({},e))})),_o=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).state={cachedNoteIds:a.props.filteredNotes.map((function(e){return e.noteId}))},a}return Object(y.a)(n,[{key:"shouldComponentUpdate",value:function(e,t,n){return e.notes.filter!==this.props.notes.filter&&this.setState({cachedNoteIds:e.filteredNotes.map((function(e){return e.noteId}))}),!0}},{key:"getNotes",value:function(){var e=this,t=this.props,n=t.participants,a=t.notes,r=[];Object.keys(n).forEach((function(e){var t=n[e];r.push({uuid:t.relatedUuids[0],title:t.title,color:t.color})}));var i,o=this.state.cachedNoteIds;i=0===o.length?this.props.filteredNotes:a.notes.filter((function(e){return o.includes(e.noteId)}));for(var s=[],c=function(t){var n=i[t],o=null===n.timestamp||Number.isNaN(n.timestamp)?null:Ke(Math.floor(n.timestamp/1e6)),c=a.eventTypes.find((function(e){return e.id===n.eventType})),l=r.find((function(e){return e.uuid===n.uuid}));s.push(Object(fi.jsx)(bo,{id:n.noteId,color:l?l.color:"#adb3b7",onNoteClick:e.handleNoteClick.bind(e,n.noteId),onEditNote:e.handleEditNote.bind(e),onEditComment:e.handleEditComment.bind(e),time:o,note:n,event:c},n.noteId))},l=0;l<i.length;l++)c(l);return s}},{key:"setPlayHeadPosition",value:function(e){var t=this.props,n=t.onNoteClicked,a=t.scrub,r=t.viewport,i=r.span,o=a.end-a.start,s=e-(a.start+o/2),c=Math.min(Math.max(0,a.start+s),100-o),l=c+o,u=e-(r.start+i/2);n(e,{start:c,end:l},{start:Math.min(Math.max(0,r.start+u),100-i),span:i})}},{key:"handleEditNote",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.props.onOpenNoteEditor,n=null!==e?ar.existingNote:ar.newNote;t(n,e)}},{key:"handleEditComment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.props.onOpenNoteEditor,a=null!==t?ar.existingComment:ar.newComment;n(a,e,t)}},{key:"handleNoteClick",value:function(e){var t=this.props,n=t.getNoteWithId,a=t.timeline,r=n(e);if(r){var i=r.timestamp/a.range*100;(null===r.timestamp||Number.isNaN(r.timestamp))&&(i=0),this.setPlayHeadPosition(i)}}},{key:"handleNewNote",value:function(){(0,this.props.onOpenNoteEditor)(ar.newNote)}},{key:"showNotes",value:function(){var e=this.getNotes();return Object(fi.jsx)("div",{children:e})}},{key:"addNewNoteDiv",value:function(){var e=this.props.notes;return Object(fi.jsxs)("div",{className:zi.a.NewNoteSection,children:[Object(fi.jsxs)("div",{children:[Object(fi.jsxs)("div",{role:"button",tabIndex:0,className:zi.a.newNoteContainer,onMouseDown:this.handleNewNote.bind(this),children:[Object(fi.jsx)("img",{className:zi.a.newNoteIcon,src:Qi,alt:"plus icon"}),Object(fi.jsx)("div",{className:zi.a.newNoteText,children:"Add New Note"})]}),Object(fi.jsx)("div",{className:zi.a.checkboxContainer,children:Object(fi.jsx)(Oo,{})})]}),Object(fi.jsxs)("div",{className:zi.a.checkboxContainer,children:[Object(fi.jsx)("input",{className:zi.a.checkbox,type:"checkbox",id:"showNotesCheckbox",onChange:this.handleShowNotesChecked.bind(this),checked:e.showOnTimeline}),Object(fi.jsx)("label",{className:zi.a.checkboxLabel,htmlFor:"showNotesCheckbox",children:"Show notes on timeline"})]})]})}},{key:"handleShowNotesChecked",value:function(e){var t=this.props,n=t.onSetNoteVisibility;(0,t.onToggleLayer)(La),n(e.target.checked)}},{key:"handleShowCompletedNotes",value:function(e){(0,this.props.onSetCompletedNotesVisibility)(e.target.checked)}},{key:"render",value:function(){var e=this.props,t=e.status,a=e.emptyText;return t===rt?Object(fi.jsxs)("div",{className:zi.a.TranscriptionNotes,children:[n.noAgentDataOverlay(),n.noAgentDataText(a)]}):Object(fi.jsxs)("div",{className:zi.a.TranscriptionNotes,children:[this.addNewNoteDiv(),this.showNotes(),Object(fi.jsx)("div",{className:zi.a.bottomMenuSpacer}),n.loadingScreen(t===nt)]})}}],[{key:"loadingScreen",value:function(e){var t="loading-overlay ".concat(e?"":"fade-out");return Object(fi.jsxs)("svg",{className:t,width:"100%",height:"100%",viewBox:"0 0 100 300",preserveAspectRatio:"none",children:[Object(fi.jsx)("defs",{children:Object(fi.jsxs)("g",{id:"note-shape",opacity:"0.4",children:[Object(fi.jsx)("rect",{x:"5",y:"5",width:"90",height:"35",opacity:"0.5"}),Object(fi.jsx)("rect",{x:"5",y:"5",width:"5",height:"35"})]})}),Object(fi.jsx)("use",{href:"#note-shape",x:"0",y:"0",opacity:"0.4"}),Object(fi.jsx)("use",{href:"#note-shape",x:"0",y:"40",opacity:"0.2"}),Object(fi.jsx)("use",{href:"#note-shape",x:"0",y:"80",opacity:"0.1"})]})}},{key:"noAgentDataOverlay",value:function(){return Object(fi.jsxs)("svg",{className:"loading-overlay",width:"100%",height:"100%",viewBox:"0 0 100 300",preserveAspectRatio:"none",children:[Object(fi.jsx)("defs",{children:Object(fi.jsxs)("g",{id:"note-shape",opacity:"0.4",children:[Object(fi.jsx)("rect",{x:"5",y:"5",width:"90",height:"35",opacity:"0.5"}),Object(fi.jsx)("rect",{x:"5",y:"5",width:"5",height:"35"})]})}),Object(fi.jsx)("use",{href:"#note-shape",x:"0",y:"0",opacity:"0.4"}),Object(fi.jsx)("use",{href:"#note-shape",x:"0",y:"40",opacity:"0.2"}),Object(fi.jsx)("use",{href:"#note-shape",x:"0",y:"80",opacity:"0.1"})]})}},{key:"noAgentDataText",value:function(e){return Object(fi.jsx)("div",{className:"noAgentDataText notes",children:e})}}]),n}(a.Component),xo=function(e){return Object(fi.jsx)(_o,Object(u.a)({},e))};xo.defaultProps={emptyText:null};var Co,ko=Object(s.b)((function(e){var t=e.scrub,n=e.callSummary,a=e.notes,r=e.transcription.viewport;return{notes:a,filteredNotes:zt(e),timeline:Xe(e),scrub:t,viewport:r,callSummary:n,participants:de(e),status:ye(e),emptyText:Yi(e),getNoteWithId:Xt(e)}}),(function(e){return{onSetNoteVisibility:function(t){e(function(e){return{type:Et,payload:{visible:e}}}(t))},onSetCompletedNotesVisibility:function(t){e({type:_a,payload:{visible:t}})},onOpenNoteEditor:function(t,n,a){e(fa()),e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ar.newNote;return{type:nr,payload:{editMode:e,noteToEdit:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,commentToEdit:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null}}}(t,n,a))},onNoteClicked:function(t,n,a){e(ya(t,!0)),e(va(n)),e(Oa(a))},onToggleLayer:function(t){e(ga(t))}}}))(xo),wo=n.p+"static/media/icon-playback.53bc9210.svg",So=n.p+"static/media/icon-pause-white.1c5f5b33.svg";function To(){return(To=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function No(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Eo(e,t){var n=e.title,r=e.titleId,i=No(e,["title","titleId"]);return a.createElement("svg",To({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:24,height:24,viewBox:"0 0 24 24",fill:"#000",ref:t,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,Co||(Co=a.createElement("path",{fill:"fill",id:"a",d:"M7.29 11.368L3.706 14.95a1 1 0 1 1-1.414-1.414l4.243-4.243A.997.997 0 0 1 7.289 9a.997.997 0 0 1 .754.292l3.591 3.591 3.592-3.591c.202-.203.47-.3.735-.293a.997.997 0 0 1 .736.293l4.243 4.243a1 1 0 0 1-1.414 1.414l-3.565-3.564-3.564 3.564a.998.998 0 0 1-.763.291.998.998 0 0 1-.763-.291L7.29 11.368z"})))}var Io=a.forwardRef(Eo),Po=(n.p,function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).sliderRef=r.a.createRef(),a}return Object(y.a)(n,[{key:"componentDidMount",value:function(){this.sliderRef.current.value=0}},{key:"playHeadLayer",value:function(e){var t,n=this.props,a=n.transcriptionPlayScrub,r=n.isPlaying?So:wo;a.position>0&&(t=Object(fi.jsxs)("div",{className:Ei.a.playScrub,style:{top:"".concat(a.position,"%"),marginTop:"-12px"},children:[Object(fi.jsxs)("svg",{className:Ei.a.playButton,children:[Object(fi.jsx)("circle",{fill:"#C4D600",cx:"12",cy:"12",r:"12"}),Object(fi.jsx)("image",{x:"3",y:"3",width:"18",height:"18",xlinkHref:r})]}),Object(fi.jsx)("div",{className:Ei.a.playScrubLine})]}));var i={visibility:e?"hidden":"visible",marginLeft:"18px",boxSizing:"border-box"};return Object(fi.jsx)("div",{role:"button",tabIndex:-1,className:Ei.a.LayerContent,style:i,children:t})}},{key:"confidenceGauge",value:function(e){var t=this.props.onSetConfidence,n={fill:"#979797",width:"24px",height:"24px",hidden:"".concat(e)};return Object(fi.jsxs)("div",{className:Ei.a.confidenceContainer,style:{visibility:e?"hidden":"visible"},children:[Object(fi.jsx)(Io,{style:n}),Object(fi.jsx)("span",{className:Ei.a.confidenceText,children:"Confidence Level"}),Object(fi.jsx)("input",{ref:this.sliderRef,type:"range",min:"0",max:"100",className:Ei.a.slider,id:"confidenceSlider",onChange:function(e){t(e.target.valueAsNumber)}})]})}},{key:"handleTranscriptionPlayHeadLayerMouseMove",value:function(){var e=this.props.onSetTranscriptionPlayScrub;return function(t){var n=t.clientY-t.currentTarget.getBoundingClientRect().y,a=100*n/t.currentTarget.clientHeight,r=Math.max(0,100*(n-50)/t.currentTarget.clientHeight);e({position:a,offsetPosition:r})}}},{key:"handleHideTranscriptionPlayHeadLayerOnMouseLeave",value:function(){var e=this.props.onSetTranscriptionPlayScrub;return function(){e({position:0,offsetPosition:0})}}},{key:"render",value:function(){var e=this.props.status.status;return Object(fi.jsx)("div",{className:Ei.a.transcriptionContainer,onMouseLeave:this.handleHideTranscriptionPlayHeadLayerOnMouseLeave(),children:Object(fi.jsxs)("section",{className:Ei.a.Transcription,children:[Object(fi.jsx)("div",{className:Ei.a.sections,children:Object(fi.jsx)(ko,{})}),Object(fi.jsxs)("div",{className:"".concat(Ei.a.conversation," ").concat(Ei.a.sections),onMouseMove:this.handleTranscriptionPlayHeadLayerMouseMove(),children:[Object(fi.jsx)(Ji,{colors:{channelColors:{1:"#FFC72C",2:"#00A9CE"}}}),this.playHeadLayer(e===nt||e===rt)]}),this.confidenceGauge(e===nt||e===rt)]})})}}]),n}(a.Component));Po.defaultProps={onSetTranscriptionPlayScrub:function(){},onSetConfidence:function(){},plotWholeTimeline:!1,isVertical:!0,width:""};var Lo=Po,Ro=function(e){return Object(fi.jsx)(Lo,Object(u.a)({},e))};Ro.defaultProps={plotWholeTimeline:!1};var Mo=Object(s.b)((function(e){var t=e.status,n=e.data,a=e.search,r=e.transcription;return{status:t,data:n,transcriptionPlayScrub:r.transcriptionPlayScrub,viewport:r.viewport,search:a,isPlaying:e.playback.isPlaying}}),(function(e){return{onSetTranscriptionPlayScrub:function(t){e(ja(t))},onSetConfidence:function(t){e(function(e){return{type:Nt,payload:{confidence:e}}}(t))}}}))(Ro),Ao=n(50),Do=n(46),Uo=n.n(Do),Bo=(n(84),n.p+"static/media/icon-customer-service.539a0d46.svg"),Fo=n.p+"static/media/icon-urgent.0ad51d65.svg",Ko=n.p+"static/media/icon-multiple.34923021.svg",Ho=n.p+"static/media/icon-note-unknown.c44385e0.svg",Wo=n.p+"static/media/icon-search-black.1502e3ca.svg",Vo=(n.p,n.p,n.p+"static/media/icon-on-hold.3d2f5cb3.svg"),Go=n.p+"static/media/icon-conference.c9fecb4f.svg",Yo=n.p+"static/media/icon-pause.f93c9c02.svg",Xo=n.p+"static/media/icon-transfer.4180c05e.svg",Jo=n.p+"static/media/icon-user-event.1314a75e.svg",qo="CLASH_WIN",zo="AFFIRMATION",Qo="INTERRUPTION",Zo="STEAL",$o="MULTIPLE_EVENTS",es="NOTE_EVENT",ts="SEARCH_EVENT",ns="CALL_EVENT",as=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).preRenderedEventsKey=null,a.preRenderedEvents=null,a}return Object(y.a)(n,[{key:"getNoteIcon",value:function(e){var t=this.props.notes.eventTypes.find((function(t){return t.id===e}));return t?t.icon:Ho}},{key:"iconForEventType",value:function(e,t){switch(e){case wr:case Sr:case Tr:return Fo;case $o:return Ko;case es:return this.getNoteIcon(t);case ts:return Wo;case ns:return n.getCallEventIcon(t);default:return Bo}}},{key:"generateOrUsePreRenderedEvents",value:function(){var e=this.props,t=e.data.talkTime,n=e.activeLayers,a=e.timeline,r=e.notes,i=e.callersAtTimestamp,o=e.callerWithUuid,s=e.search,c=e.participants,l=e.sentences,d=e.transcription,h=e.knowledgeSelectedItem,p=e.eventsByParticipants,m=e.scrub,f=e.plotWholeTimeline,v={talkTime:t,activeLayers:n,timeline:a,notes:r,callersAtTimestamp:i,callerWithUuid:o,search:s,participants:c,sentences:l,transcription:d,knowledgeSelectedItem:h,eventsByParticipants:p,plotWholeTimeline:f};return f||(v=Object(u.a)(Object(u.a)({},v),{},{scrub:m})),null!=this.preRenderedEvents&&Object(Ao.isEqual)(v,this.preRenderedEventsKey)||(this.preRenderedEvents=this.generateEvents(),this.preRenderedEventsKey=v),this.preRenderedEvents}},{key:"generateEvents",value:function(){var e=this.props,t=e.data,n=e.activeLayers,a=t.talkTime,r=[];n.length>0&&a&&(r.push.apply(r,Object(oe.a)(a[1].map((function(e){return Object(u.a)(Object(u.a)({},e),{},{channel:1})})))),r.push.apply(r,Object(oe.a)(a[2].map((function(e){return Object(u.a)(Object(u.a)({},e),{},{channel:2})})))),r.push.apply(r,Object(oe.a)(this.generateNoteEvents())),r.push.apply(r,Object(oe.a)(this.generateSearchEvents()))),r.push.apply(r,Object(oe.a)(this.generateClassificationEvents())),r.push.apply(r,Object(oe.a)(this.generateKeywordEvents())),r.push.apply(r,Object(oe.a)(this.generateTopicEvents()));var i=this.generateCallEvents();r.push.apply(r,Object(oe.a)(i.filter((function(e){return 1===e.channel}))));var o=i.filter((function(e){return 2===e.channel})),s=[];return s.push.apply(s,Object(oe.a)(this.generateEventList(r,!0))),s.push.apply(s,Object(oe.a)(this.generateEventList(o,!1))),s}},{key:"consolidateEvents",value:function(){var e=this.props.callersAtTimestamp;return function(t,a){return Object(u.a)(Object(u.a)({},t),{},{timestamp:a.map((function(e){return e.timestamp})).reduce((function(e,t){return e+t}))/a.length,label:a.map((function(t){var r=1===t.channel?0:1;if(void 0!==e(t.timestamp)){var i=e(t.timestamp)[r],o=t.label||n.labelForEventType(t.event);return 1===a.length?o:"".concat(i.title,": ").concat(o)}return"caller"})).join("<br>"),groupSize:a.length||0,groupedEvents:a})}}},{key:"clusterEvents",value:function(){var e=this.props.callersAtTimestamp;return function(t,a){return{event:a.length>1?$o:t.event,timestamp:a.map((function(e){return e.timestamp})).reduce((function(e,t){return e+t}))/a.length,label:a.map((function(t){if(t.groupSize>1)return t.label;var a=1===t.channel?0:1;if(void 0!==e(t.timestamp)){var r=e(t.timestamp)[a],i=t.label||n.labelForEventType(t.event);return"".concat(r.title,": ").concat(i)}return"caller"})).join("<br>"),channel:t.channel,color:t.color||"#ADB3B7",subType:t.subType,groupSize:a.length,groupedEvents:a}}}},{key:"groupEvents",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.consolidateEvents(),a=[],r=[];return e.forEach((function(e,i,o){a.push(e);var s=i===o.length-1,c=!0;i<o.length-1&&(o[i+1].timestamp-e.timestamp<=t&&(c=!1));if(s||c){var l=n(e,a);r.push(l),a=[]}})),r}},{key:"generateEventList",value:function(e,t){var a=this,r=this.props,i=r.scrub,o=r.activeLayers,s=r.timeline,c=r.plotWholeTimeline,l=r.callersAtTimestamp,d=[],h=e.filter((function(e){return n.isEventTypeInActiveLayers(e.event,o)})).filter(n.filterInvisibleEvents).sort((function(e,t){return e.timestamp-t.timestamp}));if(c)h.forEach((function(e,t,n){var a="".concat(e.channel).concat(e.event).concat(e.timestamp);if(e.event!==ns){var r="#ADB3B7",i=l(e.timestamp);if(e.channel&&void 0!==i)r=i[1===e.channel?0:1].color;var o={left:P(e.timestamp,s),backgroundColor:r};d.push(Object(fi.jsx)("span",{style:o,className:Uo.a.ClashLine},a))}}));else{var p=this.groupEvents(h,1,this.consolidateEvents()),m={start:s.start+s.range*i.start/100,end:s.start+s.range*i.end/100},f=.02*(m.end-m.start);this.groupEvents(p,f,this.clusterEvents()).forEach((function(e){var n="".concat(e.channel).concat(e.event).concat(e.timestamp),r={left:P(e.timestamp,s),top:t?"0px":"55%"},i=a.iconForEventType(e.event,e.subType);if(null!==i){var o="",c=e.color,h=c,p=l(e.timestamp);if(e.channel&&void 0!==p){var m=p[1===e.channel?0:1];o=m.classes,h=e.groupSize>1?"#888888":m.color}var f=Object(u.a)(Object(u.a)({},r),{},{backgroundColor:h}),v=Pi()({"translate-50":!0,[Uo.a.ClashIcon]:!0,[o]:!0}),b=Uo.a.ClashLine;if(e.groupedEvents.some((function(e){return e.event!==ns}))&&d.push(Object(fi.jsx)("span",{style:f,className:b},n)),e.event===ns)d.push(Object(fi.jsx)("img",{src:i,style:r,className:v,"data-tooltip":e.label,alt:e.label},"".concat(n,"icon")));else{var y=e.groupSize>1?e.groupSize:"";d.push(Object(fi.jsxs)("svg",{style:r,className:v,"data-tooltip":"".concat(e.label),children:[Object(fi.jsx)("circle",{strokeWidth:"4",cx:"12",cy:"12",r:"10",stroke:c}),Object(fi.jsx)("circle",{fill:"#F7F7F7",cx:"12",cy:"12",r:"10"}),Object(fi.jsx)("image",{x:"5",y:"5",width:"14",height:"14",xlinkHref:i}),Object(fi.jsx)("text",{x:"12",y:"16",width:"14",height:"14",textAnchor:"middle",children:y})]},"".concat(n,"icon")))}}}))}return d}},{key:"generateNoteEvents",value:function(){var e=this.props,t=e.timeline,n=e.activeLayers,a=e.notes,r=e.callersAtTimestamp,i=e.callerWithUuid,o=[];if(!n.includes(La))return o;var s=a.eventTypes;return a.notes.forEach((function(e){var n=e.eventType,a=e.timestamp,c=e.uuid,l=s.find((function(e){return e.id===n}));if(null!==a){var u=t.start+a,d=r(u).findIndex((function(e){return e.relatedUuids[0]===c})),h=d>=0?d+1:null,p=(c&&i(c)?i(c):{color:"#000"}).color;o.push({event:es,timestamp:t.start+a,label:l?l.text:"Unknown note type",color:p,channel:h,subType:n})}})),o}},{key:"generateSearchEvents",value:function(){var e=this.props,t=e.search,n=e.timeline,a=[];return t.matches.forEach((function(e){var t=e.caller,r=e.wordList,i=t.isPrimary?1:2;a.push({event:ts,timestamp:n.start+1e3*r[0].s,label:"Search match",channel:i})})),a}},{key:"generateClassificationEvents",value:function(){var e=this.props,t=e.timeline,n=e.transcription;return this.generateKnowledgeEvents(wr,(function(e,a){var r=n.Categories.filter((function(t){return t.Name.toUpperCase()===e.toUpperCase()}))[0];"undefined"!==typeof r&&("undefined"!==typeof r.Keywords?r.Keywords.forEach((function(e){e.Mentions.forEach((function(e){e.Pos.forEach((function(n){var i=t.start+1e3*n;a.push({event:wr,timestamp:i,label:r.DisplayName,channel:e.Channel})}))}))})):r.Keywords=[])}))}},{key:"generateKeywordEvents",value:function(){var e=this.props,t=e.timeline,n=e.transcription;return this.generateKnowledgeEvents(Sr,(function(e,a){[1,2].forEach((function(r){var i=n[r].Keywords.filter((function(t){return t.Keyword===e}))[0];"undefined"!==typeof i&&i.Pos.forEach((function(n){var i=t.start+1e3*n;a.push({event:Sr,timestamp:i,label:e,channel:r})}))}))}))}},{key:"generateTopicEvents",value:function(){var e=this.props,t=e.timeline,n=e.transcription;return this.generateKnowledgeEvents(Tr,(function(e,a){[1,2].forEach((function(r){var i=n[r].Topics.filter((function(t){return t.Topic===e}))[0];"undefined"!==typeof i&&i.Keywords.forEach((function(n){n.Pos.forEach((function(n){var i=t.start+1e3*n;a.push({event:Tr,timestamp:i,label:e,channel:r})}))}))}))}))}},{key:"generateKnowledgeEvents",value:function(e,t){var n=this.props.knowledgeSelectedItem;if(n.type!==e)return[];var a=[];return t(n.identifier,a),a}},{key:"generateCallEvents",value:function(){var e=this.props,t=e.participants,a=e.eventsByParticipants,r=[];return null==a||Object.keys(t).forEach((function(e){var i=t[e];a[e].events.forEach((function(e){var t=e.startFlags,a=t.isBridge,o=t.isUnBridge;a||o||(r.push({event:ns,timestamp:e.start,label:n.callEventIconLabel(e.startFlags),color:i.color,channel:i.isPrimary?1:2,subType:{event:e,isStart:!0}}),r.push({event:ns,timestamp:e.end,label:n.callEventIconLabel(e.endFlags),color:i.color,channel:i.isPrimary?1:2,subType:{event:e,isStart:!1}}))}))})),r}},{key:"render",value:function(){var e=this,t=this.props,n=t.plotWholeTimeline,a=t.scrub,r=Pi()({[Uo.a.LayerContent]:!0}),i=this.generateOrUsePreRenderedEvents();return Object(fi.jsx)("div",{ref:function(t){e.node=t},className:r,style:R(n,a),children:i})}}],[{key:"labelForEventType",value:function(e){switch(e){case qo:return"Clash Event";case zo:return"Affirmation Event";case Qo:return"Interruption Event";case Zo:return"Steal Event";case La:return"Note";default:return null}}},{key:"isLayerMatchingEventType",value:function(e,t){switch(t){case qo:return e===Ra;case zo:return e===Ma;case Qo:return e===Aa;case Zo:return e===Da;case es:return e===La;case ts:return"show-search-results"===e;default:return null}}},{key:"isEventTypeInActiveLayers",value:function(e,t){return e===ns||e===wr||e===Sr||e===Tr||0!==t.length&&t.filter((function(t){return n.isLayerMatchingEventType(t,e)})).length>0}},{key:"callEventIconImage",value:function(e){var t=e.isHold,n=e.isParkedTransfer,a=e.isConferenceIn,r=e.isRecordStart,i=e.isRecordStop,o=e.isChannelAnswer,s=e.isChannelRing;switch(!0){case n:case t:return Vo;case a:return Go;case i:return Yo;case s:return Jo;case r:case o:return null;default:return Xo}}},{key:"callEventIconLabel",value:function(e){var t=e.isBridge,n=e.isChannelStart,a=e.isChannelRing,r=e.isChannelAnswer,i=e.isChannelEnd,o=e.isChannelComplete,s=e.isConferenceIn,c=e.isConferenceOut,l=e.isHold,u=e.isListenIn,d=e.isListenInBarge,h=e.isListenInDisconnect,p=e.isListenInWhisper,m=e.isParkedTransfer,f=e.isQueuing,v=e.isRecordStart,b=e.isRecordStop,y=e.isRouting,g=e.isUnBridge,j=e.isUnHold;switch(!0){case n:return"Channel start";case a:return"Channel ring";case r:return"Channel answer";case i:return"Channel end";case o:return"Channel complete";case s:return"Conference";case c:return"Conference end";case l:return"On Hold";case j:return"Un-hold";case v:return"Un-pause";case b:return"Pause";case m:return"Start transfer";case t:return"Transfer";case u:return"Listen in";case d:return"Barge";case h:return"Listen in end";case p:return"Whisper";case f:return"Queueing";case y:return"Routing";case g:return"Disconnect";default:return Object.keys(e).join(" ")}}},{key:"getCallEventIcon",value:function(e){var t=e.event,a=e.isStart?t.startFlags:t.endFlags;return n.callEventIconImage(a)}},{key:"filterInvisibleEvents",value:function(e){if(e&&e.subType&&e.subType.event){var t=e.subType.event.startFlags;switch(!0){case!0===t.isConferenceIn:case!0===t.isRecordStart:case!0===t.isParkedTransfer:case!0===t.isRouting:case!0===t.isHold:case!0===t.isUnHold:case!0===t.isRecordStop:case!0===t.isChannelRing:case!0===t.isChannelStart:return!1}}return!0}}]),n}(a.Component);as.defaultProps={eventsByParticipants:null,plotWholeTimeline:!1,sentences:null};var rs=as,is=Object(Ue.a)([be,Fn,Kn],(function(e,t,n){return function(e){var a=n(e);if(void 0!==a&&null!==a){var r=t(a.aUuid),i=t(a.bUuid);return i.isPrimary?[i,r]:[r,i]}}}));function os(e){var t=e.activeLayers,n=e.data,a=e.scrub,r=e.plotWholeTimeline,i=e.timeline,o=e.callSummary,s=e.notes,c=e.search,l=e.callersAtTimestamp,u=e.callerWithUuid,d=e.participants,h=e.sentences,p=e.eventsByParticipants,m=e.transcription,f=e.knowledgeSelectedItem;return Object(fi.jsx)(rs,{activeLayers:t,data:n,scrub:a,plotWholeTimeline:r,timeline:i,callSummary:o,notes:s,search:c,callersAtTimestamp:l,callerWithUuid:u,participants:d,sentences:h,eventsByParticipants:p,transcription:m,knowledgeSelectedItem:f})}os.defaultProps={plotWholeTimeline:!1,sentences:null,eventsByParticipants:null};var ss=Object(s.b)((function(e){var t=e.activeLayers,n=e.data,a=e.scrub,r=e.callSummary,i=e.knowledge,o=e.notes,s=e.search;return{activeLayers:t,data:n,scrub:a,callSummary:r,knowledgeSelectedItem:i.selectedItem,participants:de(e),timeline:Xe(e),notes:o,search:s,callersAtTimestamp:is(e),callerWithUuid:Fn(e),sentences:ke(e),eventsByParticipants:fe(e),transcription:xe(e)}}))(os),cs=n(11),ls=n.n(cs),us=n.p+"static/media/icon-pause-skip.208b7558.svg",ds=n(56),hs=n.n(ds),ps="medium",ms="large",fs=function(e){var t,n=e.isAvatar,a=e.url,r=e.color,i=e.size,o=e.svgStyle,s=e.imgStyle,c=e.className;switch(i){case ps:t={svg:32,r:"15",icon:"24px",iconx:"4px",icony:"3px",img:"30px"};break;case ms:t={svg:36,r:"15",icon:"24px",iconx:"6px",icony:"4px",img:"30px"};break;default:t={svg:24,r:"10",icon:"16px",iconx:"4px",icony:"3px",img:"20px"}}return Object(fi.jsx)(fi.Fragment,{children:n?Object(fi.jsx)("img",{style:s,width:"".concat(t.img),height:"".concat(t.img),alt:"Avatar",src:a,className:[hs.a.avatar,c].join(" ")}):Object(fi.jsxs)("svg",{role:"img","aria-label":"no avatar",style:o,className:[hs.a.svgIcon,c].join(" "),width:"".concat(t.svg,"px"),height:"".concat(t.svg,"px"),viewBox:"0 0 ".concat(t.svg," ").concat(t.svg),children:[Object(fi.jsx)("circle",{fill:r,cx:"".concat(t.svg/2),cy:"".concat(t.svg/2),r:"".concat(t.r)}),Object(fi.jsx)("image",{width:"".concat(t.icon),height:"".concat(t.icon),x:"".concat(t.iconx),y:"".concat(t.icony),href:a})]})})};fs.defaultProps={isAvatar:!1,color:"white",url:"",size:"small",svgStyle:{},imgStyle:{},className:""};var vs=fs,bs=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).state={isEntryExitLayerDismissed:!1},a.preRenderedSentencesKey=null,a.preRenderedSentences=null,a.hideEntryExitLayerHandler=a.hideEntryExitLayerHandler.bind(Object(ai.a)(a)),a.handleClickReviewNotes=a.handleClickReviewNotes.bind(Object(ai.a)(a)),a}return Object(y.a)(n,[{key:"componentDidUpdate",value:function(e,t,n){var a=this.props.isPlaying,r=this.state.isEntryExitLayerDismissed;a&&r&&this.setState({isEntryExitLayerDismissed:!1})}},{key:"callerStyle",value:function(e,t,n,a,r){var i=n?8:16,o=n?33:24,s=e.isPrimary?"top":"bottom";return function(c){var l=t[c.opposing.number].isAgent&&e.agentNumber>1,u=c.timelineStart,d=c.timelineEnd-u,h=100/r.range*Math.max(0,u-r.start),p=100/r.range*Math.min(r.range,u+d-r.start),m=Math.max(.5,p-h),f="top"===s?ls.a.top:ls.a.bottom;return{style:{borderRadius:"4px",backgroundColor:a||e.color,left:"".concat(h,"%"),width:"".concat(m,"%"),height:"".concat(i*(l&&!n?.5:1),"%"),[s]:"".concat(o*(l&&!n?1.95:1),"%")},markerPosition:f}}}},{key:"createSentences",value:function(e,t,a,r,i,o){var s=this,c=[];return Object.keys(t).map((function(n){var r=t[n],c=s.callerStyle(r,t,e,i,o);return a[n].map((function(e){return{key:n,style:c,caller:r,sentence:e}}))})).flat().sort((function(e,t){return e.sentence.Start-t.sentence.Start})).map((function(t){var a=t.key,i=t.style,o=t.caller,s=t.sentence,l=n.eventsForSentence(s,r[a].events),d=i(s),h=null,p=l.filter((function(e){return e.startFlags.isConferenceIn})).length,m=!e&&p,f=m?ls.a.conference:null,v=m?Object(u.a)(Object(u.a)({},d.style),{},{backgroundColor:null,backgroundImage:n.conferencePattern(o.color)}):d.style,b=o.name?"".concat(o.name," (").concat(o.fullNumber,")"):o.fullTitle,y=p?"Multiple people. Hover for details":b,g="".concat(p?"conference:":"").concat(o.number);if(!e&&!c.includes(g)){var j=Object(Fe.a)(o.relatedUuids,1)[0];c.push(g);var O=o.isPrimary?ls.a.sentenceMarkerAvatarTop:ls.a.sentenceMarkerAvatarBottom,_=o.isPrimary?ls.a.focusSwitcherTop:ls.a.focusSwitcherBottom;h=Object(fi.jsxs)(fi.Fragment,{children:[Object(fi.jsx)("span",{className:ls.a.sentenceMarker,"data-marker-title":y,children:Object(fi.jsx)("span",{className:_,"data-set-focus":j})}),!!o.photoUrl&&Object(fi.jsx)(vs,{isAvatar:!!o.photoUrl,url:o.photoUrl||o.image,color:o.color,className:O,size:ms})]})}return Object(fi.jsx)("div",{className:"".concat([ls.a.sentence,i(s).markerPosition,f].join(" ")),style:v,"data-tooltip":"".concat(s.number,': "').concat(s.Sentence,'"'),"data-tooltip-fixed-width":!0,children:h},"".concat(a).concat(s.timelineStart))}))}},{key:"sentenceLayer",value:function(){var e=this.props,t=e.plotWholeTimeline,n=e.participants,a=e.sentences,r=e.eventsByParticipants,i=e.scrub,o=e.singleColor,s=e.timeline,c={plotWholeTimeline:t,participants:n,sentences:a,eventsByParticipants:r,singleColor:o,timeline:s};return null!=this.preRenderedSentences&&Object(Ao.isEqual)(c,this.preRenderedSentencesKey)||(this.preRenderedSentences=this.createSentences(t,n,a,r,o,s),this.preRenderedSentencesKey=c),Object(fi.jsx)("div",{className:ls.a.LayerContent,style:R(t,i),children:this.preRenderedSentences})}},{key:"avatarLayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.props,n=t.participants,a=t.sentences,r=t.audioTransport,i=t.timeline,o=t.scrub,s=t.plotWholeTimeline,c=t.playhead;return null!==a?Object(fi.jsx)("div",{className:ls.a.LayerContent,style:R(s,o),children:Object.keys(n).map((function(t){if(a[t].length>0){var l=a[t][0],d=a[t][a[t].length-1],h=r.start()/100*i.range,p=l.isInEarliestCall?0:l.timelineStart-i.start,m=100/(i.range-h)*p,f=d.timelineStart+(d.timelineEnd-d.timelineStart)-i.start,v=100/i.range*f,b=Math.min(Math.max(o.start,m-.5),v),y=n[t].isPrimary?"top":"bottom",g=n[l.opposing.number].isAgent&&n[t].agentNumber>1,j=s?33:24,O=1;if(b>o.start){var _=.2*(o.end-o.start);if(b>o.start+_)O=0;else{var x=b-o.start;O=1-Math.max(0,x)}}var C={style:{opacity:O,left:"".concat(b,"%"),marginLeft:-e,zIndex:c>0&&c<100?9:0,[y]:"".concat(j*(g&&!s?1.75:.96),"%"),paddingLeft:"4px"}};return Object(fi.jsx)(vs,{isAvatar:!!n[t].photoUrl,url:n[t].photoUrl||n[t].image,color:n[t].color,size:ms,svgStyle:C.style,imgStyle:Object(u.a)(Object(u.a)({},C.style),{},{paddingLeft:"6px"})},"avatar-".concat(t))}return null})).flat()}):null}},{key:"playheadLayer",value:function(){var e=this.props,t=e.canSetPlayhead,n=e.playhead,a=e.plotWholeTimeline,r=e.scrub,i=e.timeline,o=e.participants,s=e.eventsByParticipants,c=i.formattedTimeAtPlayhead(n),l={isPaused:!1,timeAtPauseEnd:null,playheadAtPauseEnd:null};if(!a){var u=null;s&&Object.keys(o).forEach((function(e){!0===o[e].isPrimary&&(u=s[e])})),u&&u.events&&(l=i.pausedPropertiesAtPlayhead(n,u))}return Object(fi.jsx)("div",{role:"button",tabIndex:0,className:ls.a.LayerContent,style:R(a,r),onMouseDown:this.handlePlayheadLayerMouseMove(t),children:Object(fi.jsxs)("div",{className:ls.a.playhead,style:{left:"".concat(n,"%")},children:[Object(fi.jsx)("div",{className:ls.a.playheadTop}),!a&&Object(fi.jsx)("div",{className:ls.a.playheadTime,children:Object(fi.jsx)("div",{children:c})}),Object(fi.jsx)("div",{className:ls.a.playheadBottom,children:!a&&l.isPaused&&Object(fi.jsx)("div",{role:"button",onMouseDown:this.createSkipPauseHandler(l),children:Object(fi.jsx)("img",{className:ls.a.pauseSkipIcon,src:us,alt:"Skip Pause"})})})]})})}},{key:"timestampsLayer",value:function(){for(var e=this.props,t=e.plotWholeTimeline,n=e.scrub,a=e.timeline,r=n.end-n.start,i=r>10?6:3,o=r/100*a.range/i,s=a.range/o,c=[],l=0;l<s;l++){var u=a.formattedTimeAtPlayhead(l/s*100),d=100/a.range*(o*l),h={left:"".concat(d,"%")},p=Object(fi.jsxs)("div",{className:ls.a.timeStamp,style:h,children:[Object(fi.jsx)("div",{className:ls.a.timeStampLine}),Object(fi.jsx)("div",{className:ls.a.timeStampText,children:Object(fi.jsx)("div",{children:u})})]},l);c.push(p)}return Object(fi.jsx)("div",{className:ls.a.LayerContent,style:R(t,n),children:c.flat()})}},{key:"showEntryExitLayer",value:function(){var e=this.props,t=e.showTransport,n=e.playhead,a=e.isPlaying,r=this.state.isEntryExitLayerDismissed;return!a&&!r&&t&&(0===n||100===n)}},{key:"hideEntryExitLayerHandler",value:function(){this.setState({isEntryExitLayerDismissed:!0})}},{key:"handleClickReviewNotes",value:function(){(0,this.props.onHideScrubAndTimeline)()}},{key:"entryExitLayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.props,a=t.callSummary,r=t.playhead,i=t.onStartPlaying,o=t.onRestartPlaying,s=t.displayedExperienceOption,c=t.unread;if(!this.showEntryExitLayer())return null;var l=0===r,u=l?"Begin ":"Restart ",d=l?ls.a.start:ls.a.restart,h=l?i:o,p=l?e:0,m=a.keyCallers,f=m.colors,v=m.fullNameNumbers,b=m.images,y=m.avatar;return Array.isArray(f)&&f.length?Object(fi.jsxs)("section",{className:"ignore-nodestack",children:[Object(fi.jsx)("div",{className:ls.a.overlay,style:{marginLeft:-e},onClick:this.hideEntryExitLayerHandler,children:Object(fi.jsxs)("svg",{width:"100%",height:"100%",viewBox:"0 0 100 100",preserveAspectRatio:"none",style:{marginLeft:p},children:[Object(fi.jsx)("line",{x1:"0",y1:"32",x2:"100",y2:"32",strokeWidth:"1",stroke:f[0]}),Object(fi.jsx)("line",{x1:"0",y1:"68",x2:"100",y2:"68",strokeWidth:"1",stroke:f[1]})]})}),Object(fi.jsxs)("div",{className:ls.a["transport-container"],style:{marginLeft:-e},children:[Object(fi.jsxs)("div",{className:ls.a.overlayContentFlex,children:[n.channelLabel("".concat(v[0]),f[0],b[0],y[0]),Object(fi.jsxs)("div",{className:ls.a["info-displaying-text"],children:["Viewing:",Object(fi.jsx)("br",{}),s.viewName]})]}),Object(fi.jsxs)("div",{className:ls.a.overlayContentFlex,children:[n.channelLabel("".concat(v[1]),f[1],b[1],y[1]),Object(fi.jsx)("button",{className:"".concat(ls.a["transport-button"]," ").concat(d),type:"button",tabIndex:0,onClick:h,children:"".concat(u," Playback")})]}),c.length>0&&Object(fi.jsxs)("div",{className:ls.a.unreadNotes,children:[Object(fi.jsx)("div",{className:ls.a.notificationBell}),Object(fi.jsxs)("div",{className:ls.a.notificationCount,children:["You have ",c.length," unread Note",1!==c.length?"s":""]}),Object(fi.jsx)("button",{className:ls.a.reviewButton,onClick:this.handleClickReviewNotes,children:"REVIEW NOTES"})]}),Object(fi.jsx)("button",{className:ls.a.closeButton,onClick:this.hideEntryExitLayerHandler})]})]}):Object(fi.jsx)("section",{})}},{key:"createSkipPauseHandler",value:function(e){var t=this.props.onSetPlayhead;return function(n){e.playheadAtPauseEnd&&(n.stopPropagation(),t(e.playheadAtPauseEnd,!0))}}},{key:"handlePlayheadLayerMouseMove",value:function(e){if(!e)return null;var t=this.props.onSetPlayhead;return function(e){var n=e.target.getBoundingClientRect(),a=100/n.width*(e.pageX-n.x);t(a,!0)}}},{key:"render",value:function(){var e=this.props,t=e.status,a=e.children,r=e.hideSentenceLayer,i=e.plotWholeTimeline,o=e.scrub,s=e.sentences,c=e.eventTimelineVisible,l=e.leftMargin,u=e.emptyText,d=t===at,h=t===nt,p=r||null===s?null:this.sentenceLayer(),m=!i&&!this.showEntryExitLayer(),f=Pi()({[ls.a.EventLayer]:!0});if(t===rt)return Object(fi.jsx)("div",{className:"Timeline",children:Object(fi.jsxs)("div",{className:f,children:[n.noAgentDataOverlay(),n.noAgentDataText(u)]})});if(!c&&!i)return null;var v=h?null:this.avatarLayer(l);return!i&&c?Object(fi.jsx)("section",{className:"Timeline",children:Object(fi.jsxs)("div",{className:f,style:{marginLeft:l},children:[this.timestampsLayer(),d&&p,m&&n.gradientLayer(o,l),a,v,Object(fi.jsx)(ss,{plotWholeTimeline:i}),this.playheadLayer(),this.entryExitLayer(l),n.loadingOverlay(h,l)]})}):Object(fi.jsxs)("div",{className:f,children:[d&&p,a,Object(fi.jsx)(ss,{plotWholeTimeline:i}),this.playheadLayer(),this.entryExitLayer(l),n.loadingOverlay(h,l)]})}}],[{key:"loadingOverlay",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n="loading-overlay ".concat(e?"":"fade-out");return Object(fi.jsxs)("svg",{className:n,width:"100%",height:"100%",viewBox:"0 0 400 100",preserveAspectRatio:"none",style:{marginLeft:-t},children:[Object(fi.jsxs)("defs",{children:[Object(fi.jsxs)("linearGradient",{id:"left-right-gradient",children:[Object(fi.jsx)("stop",{stopColor:"#fff",offset:"0%"}),Object(fi.jsx)("stop",{stopColor:"#fff",stopOpacity:"0",offset:"100%"})]}),Object(fi.jsxs)("linearGradient",{id:"right-left-gradient",children:[Object(fi.jsx)("stop",{stopColor:"#fff",stopOpacity:"0",offset:"0%"}),Object(fi.jsx)("stop",{stopColor:"#fff",offset:"100%"})]})]}),Object(fi.jsx)("rect",{x:"0",width:"40",y:"24",height:"16",opacity:"0.075",rx:"2"}),Object(fi.jsx)("rect",{x:"40",width:"48",y:"60",height:"16",opacity:"0.075",rx:"2"}),Object(fi.jsx)("rect",{x:"88",width:"36",y:"24",height:"16",opacity:"0.075",rx:"2"}),Object(fi.jsx)("rect",{x:"120",width:"48",y:"60",height:"16",opacity:"0.075",rx:"2"}),Object(fi.jsx)("rect",{x:"168",width:"40",y:"24",height:"16",opacity:"0.075",rx:"2"}),Object(fi.jsx)("rect",{x:"208",width:"40",y:"60",height:"16",opacity:"0.075",rx:"2"}),Object(fi.jsx)("rect",{x:"240",width:"36",y:"24",height:"16",opacity:"0.075",rx:"2"}),Object(fi.jsx)("rect",{x:"280",width:"40",y:"60",height:"16",opacity:"0.075",rx:"2"}),Object(fi.jsx)("rect",{x:"320",width:"40",y:"24",height:"16",opacity:"0.075",rx:"2"}),Object(fi.jsx)("rect",{x:"360",width:"40",y:"60",height:"16",opacity:"0.075",rx:"2"}),Object(fi.jsx)("rect",{x:"0",y:"0",height:"100",width:"40",fill:"url(#left-right-gradient)"}),Object(fi.jsx)("rect",{x:"360",y:"0",height:"100",width:"40",fill:"url(#right-left-gradient)"})]})}},{key:"gradientLayer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Pi()({[ls.a.gradientLayer]:!0,[ls.a.gradientStart]:0!==e.start,[ls.a.gradientEnd]:100!==e.end}),a={marginLeft:-t,left:"".concat(Math.min(e.start,7)-7,"%"),right:"".concat(Math.min(100-e.end,7)-7,"%")};return Object(fi.jsx)("div",{className:n,style:a})}},{key:"noAgentDataOverlay",value:function(){var e=Pi()({[ls.a.overlayMargin]:!0,"loading-overlay":!0});return Object(fi.jsxs)("svg",{className:e,width:"100%",height:"100%",viewBox:"0 0 400 100",preserveAspectRatio:"none",children:[Object(fi.jsxs)("defs",{children:[Object(fi.jsxs)("linearGradient",{id:"left-right-gradient",children:[Object(fi.jsx)("stop",{stopColor:"#fff",offset:"0%"}),Object(fi.jsx)("stop",{stopColor:"#fff",stopOpacity:"0",offset:"100%"})]}),Object(fi.jsxs)("linearGradient",{id:"right-left-gradient",children:[Object(fi.jsx)("stop",{stopColor:"#fff",stopOpacity:"0",offset:"0%"}),Object(fi.jsx)("stop",{stopColor:"#fff",offset:"100%"})]})]}),Object(fi.jsx)("rect",{x:"0",width:"40",y:"24",height:"16",opacity:"0.075",rx:"2"}),Object(fi.jsx)("rect",{x:"40",width:"48",y:"60",height:"16",opacity:"0.075",rx:"2"}),Object(fi.jsx)("rect",{x:"88",width:"36",y:"24",height:"16",opacity:"0.075",rx:"2"}),Object(fi.jsx)("rect",{x:"120",width:"48",y:"60",height:"16",opacity:"0.075",rx:"2"}),Object(fi.jsx)("rect",{x:"168",width:"40",y:"24",height:"16",opacity:"0.075",rx:"2"}),Object(fi.jsx)("rect",{x:"208",width:"40",y:"60",height:"16",opacity:"0.075",rx:"2"}),Object(fi.jsx)("rect",{x:"240",width:"36",y:"24",height:"16",opacity:"0.075",rx:"2"}),Object(fi.jsx)("rect",{x:"280",width:"40",y:"60",height:"16",opacity:"0.075",rx:"2"}),Object(fi.jsx)("rect",{x:"320",width:"40",y:"24",height:"16",opacity:"0.075",rx:"2"}),Object(fi.jsx)("rect",{x:"360",width:"40",y:"60",height:"16",opacity:"0.075",rx:"2"}),Object(fi.jsx)("rect",{x:"0",y:"0",height:"100",width:"40",fill:"url(#left-right-gradient)"}),Object(fi.jsx)("rect",{x:"360",y:"0",height:"100",width:"40",fill:"url(#right-left-gradient)"})]})}},{key:"noAgentDataText",value:function(e){return Object(fi.jsx)("div",{className:"noAgentDataText",children:e})}},{key:"scrubLegend",value:function(e){return[Object(fi.jsxs)("div",{className:ls.a["info-box"],children:[Object(fi.jsx)("div",{children:e[0]||"--"}),Object(fi.jsx)("div",{children:e[1]||"--"})]},0)]}},{key:"channelLabel",value:function(e,t,n,a){return Object(fi.jsxs)("div",{className:ls.a.channelLabel,children:[Object(fi.jsx)(vs,{isAvatar:!!a,url:a||n,color:t,size:ps}),Object(fi.jsx)("div",{children:e})]})}},{key:"conferencePattern",value:function(e){var t=e.replace("#","%23");return["url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='10' height='32' viewBox='0 0 10 32'>","<rect fill='".concat(t,"' x='0' y='0' width='10' height='8' />"),"<circle fill='".concat(t,"' cx='5' cy='16' r='3.5' />"),"<rect fill='".concat(t,"' x='0' y='24' width='10' height='8' />"),'</svg>")'].join("")}},{key:"eventsForSentence",value:function(e,t){return Array.isArray(t)&&0!==t.length?t.filter((function(t){return e.timelineStart>=t.start&&e.timelineStart<t.end})):[]}}]),n}(a.Component);bs.defaultProps={canSetPlayhead:!1,onSetPlayhead:function(){},onStartPlaying:function(){},onRestartPlaying:function(){},plotWholeTimeline:!1,showTransport:!1,singleColor:null,children:null,hideSentenceLayer:!1,sentences:null,eventsByParticipants:null,status:void 0,displayedExperienceOption:null,leftMargin:0,isPlaying:!1,unread:[]};var ys=bs,gs=function(e){return Object(fi.jsx)(ys,Object(u.a)({},e))};gs.defaultProps={canSetPlayhead:!0,plotWholeTimeline:!1,showTransport:!1,singleColor:null,colors:[],children:null,hideSentenceLayer:!1,sentences:null,eventsByParticipants:null,displayedExperienceOption:null,leftMargin:0,emptyText:null,isPlaying:!1};var js=Object(s.b)((function(e){var t=e.scrub,n=e.callSummary,a=e.playback,r=a.playhead,i=a.isPlaying;return{audioTransport:bi(e),playhead:r,isPlaying:i,scrub:t,callSummary:n,timeline:Xe(e),participants:de(e),status:ye(e),sentences:ke(e),eventsByParticipants:fe(e),eventTimelineVisible:Ne(e),displayedExperienceOption:Gi(e),emptyText:Yi(e),unread:Yt(e)}}),(function(e){return{onSetPlayhead:function(t,n){e(ya(t,n))},onStartPlaying:function(){e(ma())},onRestartPlaying:function(){e({type:vt})},onHideScrubAndTimeline:function(){e(Ja(!1)),e(xr(!1)),e(cr(qt.onlyUnread))}}}))(gs),Os=n(39),_s=n.n(Os),xs=function(){function e(){Object(f.a)(this,e),this.transcription={}}return Object(y.a)(e,[{key:"useData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return e?(this.transcription=e,this):(t("Invalid data"),this)}},{key:"forKey",value:function(t){return{key:t,name:e.nameForKey(t),paths:this.pathsForData(t)}}},{key:"pathsForData",value:function(e){var t=this.linesForKey(e),n={};return Object.keys(t).forEach((function(e){var a=t[e],r=a.style,i=a.data,o=a.isStepped,s=a.isFloating,c=a.isCurved,l=a.isInverted;if(0!==i.length){var u=s?"":"M".concat(i[0].x-1," ").concat(l?0:100),d=s?"":"L".concat(i[i.length-1].x+1," ").concat(l?0:100);n[e]={style:r,path:[[u],i.map((function(e,t,n){var a=[],r=s&&0===t?"M":"L";if(o&&t>0){var i=n[t-1];a.push("L".concat(e.x," ").concat(l?i.y:100-i.y))}if(c&&t>0){var u=n[t-1],d=(e.x-u.x)/2,h={first:{x:u.x+d,y:l?u.y:100-u.y},second:{x:e.x-d,y:l?e.y:100-e.y}},p=[[h.first.x,h.first.y].join(" "),[h.second.x,h.second.y].join(" "),[e.x,h.second.y]];a.push("C".concat(p.join(", ")))}else a.push("".concat(r).concat(e.x," ").concat(l?e.y:100-e.y));return a.join(" ")})),[d]].flat().filter((function(e){return e})).join(" ")}}})),n}},{key:"confidenceDataForChannel",value:function(e,t){return this.transcription&&this.transcription[e]?this.transcription[e].Words.map((function(e){return[{x:e.s,y:t.top+e.c*t.height},{x:e.e,y:t.top+e.c*t.height}]})).flat():[]}},{key:"noiseDataForChannel",value:function(e){return this.transcription&&this.transcription[e]?[{x:0,y:10},{x:400,y:5},{x:2500,y:20},{x:5e3,y:7},{x:6e4,y:17},{x:9e5,y:20}]:[]}},{key:"linesForKey",value:function(e){switch(e){case Pa:return{1:{style:"confidence",data:this.confidenceDataForChannel(1,{top:55,height:25}),isStepped:!0,isFloating:!0},2:{style:"confidence",data:this.confidenceDataForChannel(2,{top:20,height:25}),isStepped:!0,isFloating:!0}};case Ia:return{1:{style:"noise-primary",data:this.noiseDataForChannel(1),isCurved:!0,isInverted:!0},2:{style:"noise-secondary",data:this.noiseDataForChannel(2),isCurved:!0}};default:return{}}}}],[{key:"nameForKey",value:function(e){switch(e){case Ia:return"Noise";case Pa:return"Confidence";default:return""}}}]),e}(),Cs=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"pathForMetric",value:function(){var e=this.props,t=e.metricType,n=e.plotWholeTimeline,a=e.transcriptionData,r=(new xs).useData(a).forKey(t),i=r.name,o=r.paths;return o&&Object.keys(o).length?Object(fi.jsx)("g",{children:Object.keys(o).map((function(e){var a=o[e],r=t===Ia&&n?"noise":a.style;return Object(fi.jsx)("path",{className:"".concat(_s.a.plotline," ").concat(_s.a[r]),d:a.path},e)}))},i):null}},{key:"render",value:function(){var e=this.props,t=e.scrub,n=e.plotWholeTimeline,a=e.timeline,r=Object(u.a)(Object(u.a)({},R(n,t)),{},{marginLeft:"".concat(a.transcriptionOffsetPercentage(),"%")});return Object(fi.jsx)("div",{className:_s.a.LayerContent,style:r,children:Object(fi.jsx)("svg",{width:"100%",height:"100%",viewBox:M(a),preserveAspectRatio:"none",children:this.pathForMetric()})})}}],[{key:"scrubLegend",value:function(e){return[Object(fi.jsx)("div",{className:_s.a["key-info-box"],children:Object(fi.jsx)("div",{className:_s.a[e],children:xs.nameForKey(e)})},0)]}}]),n}(a.Component);Cs.defaultProps={plotWholeTimeline:!1};var ks=Cs;function ws(e){var t=e.metricType,n=e.scrub,a=e.plotWholeTimeline,r=e.timeline,i=e.transcriptionData;return Object(fi.jsx)(ks,{timeline:r,metricType:t,scrub:n,plotWholeTimeline:a,transcriptionData:i})}ws.defaultProps={plotWholeTimeline:!1};var Ss=Object(s.b)((function(e){return{scrub:e.scrub,timeline:Xe(e),transcriptionData:xe(e)}}))(ws),Ts=(n(85),function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).state={isDragging:{start:!1,end:!1},isMoving:!1,didDrag:!1},a.handleMouseDown=a.handleMouseDown.bind(Object(ai.a)(a)),a.handleClick=a.handleClick.bind(Object(ai.a)(a)),a.handleScroll=a.handleScroll.bind(Object(ai.a)(a)),a}return Object(y.a)(n,[{key:"noAgentDataState",value:function(e){var t=this.props.emptyText;return Object(fi.jsx)("section",{className:"Scrubber",id:e,children:Object(fi.jsx)("div",{className:"timeline-scrubber-container empty",children:t})})}},{key:"componentDidMount",value:function(){this.node=null,window.addEventListener("mouseup",this.handleClick.bind(this)),window.addEventListener("mousemove",this.handleMouseMove.bind(this))}},{key:"componentWillUnmount",value:function(){this.node=null,window.removeEventListener("mouseup",this.handleClick.bind(this)),window.removeEventListener("mousemove",this.handleMouseMove.bind(this))}},{key:"setDragState",value:function(e,t,n,a){this.setState({isDragging:{start:e,end:t},isMoving:n,didDrag:a})}},{key:"setScrub",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.state,a=n.isMoving,r=n.isDragging,i=this.props,o=i.scrub,s=i.onScrubDragged;if(a){var c=o.end-o.start,l=t?Math.max(e-c/2,0):Math.max(e-this.pointerOffset,0),u=t?Math.min(e+c/2,100):Math.min(e-this.pointerOffset+c,100);this.updateScrubState({start:Math.min(l,100-c),end:Math.max(u,c)}),t||"function"===typeof s&&s()}else{var d=r.start?Math.min(o.end-.1,e):o.start,h=r.end?Math.max(o.start+.1,e):o.end;this.updateScrubState({start:Math.max(0,d),end:Math.min(100,h)})}}},{key:"updateScrubState",value:function(e){var t=this.props.onScrubPositionChange;"function"===typeof t?t(Object(u.a)(Object(u.a)({},e),{},{isUserModified:this.isUserModifyingScrub()})):this.scrub=e}},{key:"updatePlayhead",value:function(e){var t=this.props.onSetPlayhead;if("function"===typeof t){var n=this.node.getBoundingClientRect(),a=100/n.width*(e.pageX-n.x);this.setScrub(a,!0),t(a,!0)}}},{key:"scrubPercentage",value:function(e){if(!(this.node instanceof HTMLElement))return 0;var t=this.node.getBoundingClientRect(),n=t.x,a=e.pageX-n;return 100/t.width*a}},{key:"handleMouseDown",value:function(e){this.node=e.target;var t=this.scrubPercentage(e),n=this.props,a=n.scrub,r=n.onSetPlayhead;t<2&&r(.7,!0);var i=Math.min(t-a.start,2),o=Math.min(a.end-t,2);switch(!0){case i<2&&i>-3:this.setDragState(!0,!1,!1,!0);break;case o<2&&o>-3:this.setDragState(!1,!0,!1,!0);break;default:this.pointerOffset=t-a.start,this.setDragState(!1,!1,!0,!1)}}},{key:"handleMouseMove",value:function(e){this.node instanceof HTMLElement&&0!==e.buttons&&this.setScrub(this.scrubPercentage(e))}},{key:"handleClick",value:function(e){var t=this.state.didDrag;this.node instanceof HTMLElement&&!t?(this.hold=clearTimeout(this.hold),this.updatePlayhead(e),this.node=null):this.node=null}},{key:"handleScroll",value:function(e){var t=this.props.scrub;this.handleClick(e);var n;e.deltaY<0?n=-.5:e.deltaY>0&&(n=.5);var a={start:Math.max(0,t.start-n),end:Math.min(100,t.end+n)};a.start>a.end||this.updateScrubState(a)}},{key:"isUserModifyingScrub",value:function(){var e=this.state,t=e.isDragging,n=e.isMoving;return t.left||t.right||n}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.status,a=e.scrub,r=e.children,i=e.isVisible;if(n===nt)return null;if(n===rt)return this.noAgentDataState(t);if(!i)return null;var o="".concat(a.start,"%"),s="".concat(100-a.end,"%");return Object(fi.jsx)("section",{className:"Scrubber",id:t,children:Object(fi.jsx)("div",{role:"button",tabIndex:0,className:"timeline-scrubber-container",onMouseDown:this.handleMouseDown,children:Object(fi.jsxs)("div",{role:"button",tabIndex:0,className:"timeline-scrubber",children:[Object(fi.jsx)("div",{className:"scrub-window",style:{marginLeft:o,marginRight:s}}),Object(fi.jsx)("div",{className:"scrub-content",children:r}),Object(fi.jsxs)("div",{className:"scrub-control",style:{marginLeft:o,marginRight:s},children:[Object(fi.jsx)("div",{className:"scrub-handle left",children:Object(fi.jsx)("svg",{width:"2px",height:"16px",viewBox:"0 0 2 16",children:Object(fi.jsx)("rect",{x:"0",y:"0",rx:"1",ry:"1",width:"2",height:"16",style:{fill:"white",stroke:"none"}})})}),Object(fi.jsx)("div",{className:"scrub-handle right",children:Object(fi.jsx)("svg",{width:"2px",height:"16px",viewBox:"0 0 2 16",children:Object(fi.jsx)("rect",{x:"0",y:"0",rx:"1",ry:"1",width:"2",height:"16",style:{fill:"white",stroke:"none"}})})})]})]})})})}}]),n}(a.Component));Ts.defaultProps={id:void 0,status:void 0,onScrubPositionChange:void 0,onSetPlayhead:void 0,onScrubDragged:void 0,emptyText:null};var Ns=Ts;function Es(e){var t=e.id,n=e.children,a=e.scrub,r=e.status,i=e.onScrubPositionChange,o=e.onSetPlayhead,s=e.onScrubDragged,c=e.isVisible,l=e.emptyText;return Object(fi.jsx)(Ns,{id:t,status:r,scrub:a,onScrubPositionChange:i,onSetPlayhead:o,onScrubDragged:s,isVisible:c,emptyText:l,children:n})}Es.defaultProps={id:void 0,emptyText:null};var Is=Object(s.b)((function(e){return{scrub:e.scrub,status:ye(e),isVisible:Te(e),emptyText:Yi(e)}}),(function(e){return{onSetPlayhead:function(t,n){e(ya(t,n))},onScrubPositionChange:function(t){e(va(t))},onScrubDragged:function(){e(fa())}}}))(Es),Ps=n(19),Ls=n.n(Ps),Rs=n.p+"static/media/icon-answer.b4e2108d.svg",Ms=n.p+"static/media/icon-waiting.88d74cc5.svg",As=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"eventElements",value:function(e,t){var a=this.props,r=a.scrub,i=a.timeline,o=a.plotWholeTimeline,s=a.activeLayers,c=a.status.isDisplaying.routing,l={start:i.start+i.range*r.start/100,end:i.start+i.range*r.end/100},d=.02*(l.end-l.start);return Object.keys(e).map((function(a){return t[a].events.filter(n.filterRoutingEvents(c)).filter(n.filterSelectedEvents(!o,s)).map((function(t,r){var s=t.startFlags,c=s.isHold,h=s.isBridge,p=s.isUnBridge,m=s.isRecordStop,f=s.isParkedTransfer,v=s.isRouting,b=s.isSecondary,y=s.isChannelStart,g=s.isChannelRing;if(p||v)return null;var j=o||c||m,O=o||c||m||h,_=b?55:18,x=Pi()(Object(u.a)(Object(u.a)({},n.markerLineClasses(t)),{},{[Ls.a.small]:!0,[Ls.a.eventContainer]:!0})),C=l.start,k=l.end,w=t.start<C&&t.end>C?C:t.start,S=t.end>k&&t.start<k?k:t.end,T=Object(u.a)(Object(u.a)({},n.markerLineStyles(t,e[a])),{},{left:I(w,i),width:L(w,S,i),textAlign:"center"}),N=Pi()({[Ls.a.event]:!0,[Ls.a.transfer]:f,[Ls.a.hold]:c,[Ls.a.pause]:m,[Ls.a.start]:y,[Ls.a.ring]:g,[Ls.a.bridge]:h,[Ls.a.wholeTimeline]:o}),E={top:"".concat(j?0:_,"%"),height:"".concat(j?100:28,"%"),borderRadius:"".concat(j?"0":"4px")},P={top:"".concat(j?0:_+8,"%")},R={top:"".concat(O?0:_+8,"%")},M=t.duration>0&&t.duration<d;if(!o&&M){var A=n.iconImageForEvent(t,!0),D=n.iconImageForEvent(t,!1);null!==A&&null!==D||(M=!1)}return Object(fi.jsxs)("div",{className:x,style:T,children:[Object(fi.jsx)("div",{className:N,style:E},"event-".concat(r,"-").concat(t.event).concat(t.start).concat(t.end)),!o&&!M&&n.icon(t,!0,{"translate-r50":w===C,[Ls.a.iconLevel]:!0},P),!o&&n.icon(t,!1,{"translate-l50":S===k,[Ls.a.iconLevel]:!0},R,M)]},"container-".concat(r,"-").concat(t.event).concat(t.start).concat(t.end))}))}))}},{key:"routingOverlay",value:function(){var e=this.props,t=e.participants,n=e.eventsByParticipants,a=e.keyCallers,r=e.timeline,i=Pi()({[Ls.a.routing]:!0,[Ls.a.primary]:!0}),o=Pi()({[Ls.a.routing]:!0,[Ls.a.secondary]:!0});if(!t||!n)return null;var s=n[Object.keys(t).filter((function(e){return t[e].isPrimary})).shift()].events.sort((function(e,t){return e.start>t.start})),c=Object(Fe.a)(s,1)[0];if(!c)return null;var l={width:P(c.start,r)},u={borderColor:a.colors?a.colors[0]:"#000"},d={borderColor:a.colors?a.colors[1]:"#000"};return Object(fi.jsxs)("div",{className:Ls.a.routingOverlay,style:l,children:[Object(fi.jsx)("div",{className:i,style:u}),Object(fi.jsx)("div",{className:Ls.a.unrecordedTimeLabel,children:"Unrecorded call time"}),Object(fi.jsx)("div",{className:o,style:d})]})}},{key:"render",value:function(){var e=this.props,t=e.plotWholeTimeline,n=e.scrub,a=e.participants,r=e.eventsByParticipants,i=e.status,o=i.status,s=i.isDisplaying.routing;if(o!==at)return null;var c=null!==r?this.eventElements(a,r):null,l=!t&&s?this.routingOverlay():null;return Object(fi.jsxs)("div",{className:Ls.a.LayerContent,style:R(t,n),children:[c,l]})}}],[{key:"iconImage",value:function(e,t){var n=e.isHold,a=e.isParkedTransfer,r=e.isConferenceIn,i=e.isRecordStart,o=e.isRecordStop,s=e.isChannelAnswer,c=e.isChannelRing,l=e.isCallStart,u=e.isBridge;switch(!0){case a&&t:case n:return Vo;case r:return Go;case t&&o:return Yo;case s:return Rs;case!t&&c:return Ms;case u&&!t:return Xo;case!t&&o:case t&&c:case l&&t:case i:default:return null}}},{key:"iconLabel",value:function(e){var t=e.isBridge,n=e.isChannelStart,a=e.isChannelRing,r=e.isChannelAnswer,i=e.isChannelEnd,o=e.isChannelComplete,s=e.isConferenceIn,c=e.isConferenceOut,l=e.isHold,u=e.isListenIn,d=e.isListenInBarge,h=e.isListenInDisconnect,p=e.isListenInWhisper,m=e.isParkOtherForTransfer,f=e.isParkedTransfer,v=e.isQueuing,b=e.isRecordStart,y=e.isRecordStop,g=e.isRequestOnHold,j=e.isRequestUnHold,O=e.isRouting,_=e.isUnBridge,x=e.isUnHold;switch(!0){case n:return"Channel start";case a:return"Channel ring";case r:return"Channel answer";case i:return"Channel end";case o:return"Channel complete";case s:return"Conference";case c:return"Conference end";case l:return"On Hold";case x:return"Un-hold";case g:return"On hold";case j:return"Un-hold";case b:return"Un-pause";case y:return"Pause";case f:case m:return"Start transfer";case t:return"Complete Transfer";case u:return"Listen in";case d:return"Barge";case h:return"Listen in end";case p:return"Whisper";case v:return"Queueing";case O:return"Routing";case _:return"Disconnect";default:return Object.keys(e).join(" ")}}},{key:"iconImageForEvent",value:function(e,t){var a=t?e.startFlags:e.endFlags;return n.iconImage(a,t)}},{key:"icon",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=t?e.startFlags:e.endFlags,s=Pi()(Object(u.a)(Object(u.a)({},a),{},{[Ls.a.startIcon]:t,[Ls.a.endIcon]:!t&&!i,[Ls.a.microClusteredEndIcon]:!t&&i})),c=n.iconImage(o,t);if(null===c)return null;var l=n.iconLabel(o,t);if(!i)return Object(fi.jsx)("img",{src:c,className:s,style:r,"data-tooltip":l,alt:l});var d=n.iconLabel(e.startFlags,!0);l="".concat(d,"<br/>").concat(l);var h=Pi()({[Ls.a.microClusteredEndIconContainer]:!0});return Object(fi.jsx)("div",{className:h,style:r,children:Object(fi.jsx)("img",{src:c,className:s,style:r,"data-tooltip":l,alt:l})})}},{key:"markerLineClasses",value:function(e){var t=e.startFlags,n=e.endFlags;return{[Ls.a.markerLines]:!0,[Ls.a.leftLine]:!0===t.isParkedTransfer,[Ls.a.rightLine]:!0===n.isBridge}}},{key:"markerLineStyles",value:function(e,t){var n=e.startFlags,a=e.endFlags;return{borderLeftColor:!0===n.isParkedTransfer?t.color:"#000",borderRightColor:!0===a.isBridge?t.color:"#000"}}},{key:"filterRoutingEvents",value:function(e){return function(t){return!!e||!0!==t.endFlags.isChannelAnswer&&!0!==t.endFlags.isChannelRing}}},{key:"filterRequiredForEvent",value:function(e){var t=e.startFlags;switch(!0){case!0===t.isHold:return Ua;case!0===t.isParkedTransfer:case!0===t.isBridge:return Ba;case!0===t.isListenIn||!0===t.isListenInBarge||!0===t.isListenInWhisper:return Fa;case!0===t.isQueuing:return Ka;case!0===t.isCsStateChange:return Ha;default:return null}}},{key:"filterSelectedEvents",value:function(e,t){return function(a){return!!e||(null==n.filterRequiredForEvent(a)||t.includes(n.filterRequiredForEvent(a)))}}}]),n}(a.Component);As.defaultProps={padding:10,plotWholeTimeline:!1,keyCallers:{},activeLayers:[]};var Ds=As;function Us(e){var t=e.data,n=e.padding,a=e.scrub,r=e.status,i=e.plotWholeTimeline,o=e.timeline,s=e.participants,c=e.eventsByParticipants,l=e.keyCallers,u=e.activeLayers;return Object(fi.jsx)(Ds,{timeline:o,data:t,scrub:a,status:r,padding:n,plotWholeTimeline:i,participants:s,eventsByParticipants:c,keyCallers:l,activeLayers:u})}Us.defaultProps={padding:10,plotWholeTimeline:!1,eventsByParticipants:null,activeLayers:[]};var Bs=Object(s.b)((function(e){return{data:e.data,scrub:e.scrub,status:e.status,activeLayers:e.activeLayers,timeline:Xe(e),participants:de(e),eventsByParticipants:fe(e),keyCallers:Me(e)}}))(Us);function Fs(e){var t=e.activeLayers,n=e.onScrubberMoved;return[Ia,Pa].filter((function(e){return t.includes(e)})).map((function(e){return Object(fi.jsx)(Is,{id:"metrics-scrubber-".concat(e),infoSection:ks.scrubLegend(e),time:" ",onScrubPositionChange:n,children:Object(fi.jsxs)(js,{plotWholeTimeline:!0,hideSentenceLayer:!0,children:[Object(fi.jsx)(Bs,{plotWholeTimeline:!0}),Object(fi.jsx)(Ss,{plotWholeTimeline:!0,metricType:e})]})},e)}))}Fs.propTypes={activeLayers:si.isRequired,onScrubberMoved:oi.a.func.isRequired};var Ks=Fs;var Hs=Object(s.b)((function(e){return{activeLayers:e.activeLayers}}),(function(e){return{onScrubberMoved:function(t){e(va(t))}}}))((function(e){var t=e.activeLayers,n=e.onScrubberMoved;return Object(fi.jsx)(Ks,{activeLayers:t,onScrubberMoved:n})})),Ws=n(9),Vs=n.n(Ws),Gs=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;Object(f.a)(this,n),(a=t.call(this,e)).container=r.a.createRef();var i=e.time;return a.state={dropDownOpen:!1,time:i},a.timePickerConfig=[{id:"hours",ref:r.a.createRef(),max:23,spacer:":"},{id:"minutes",ref:r.a.createRef(),max:59,spacer:":"},{id:"seconds",ref:r.a.createRef(),max:59,spacer:null}],a.toggleDropDown.bind(Object(ai.a)(a)),a.handleClickOutside=a.handleClickOutside.bind(Object(ai.a)(a)),a}return Object(y.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"handleClickOutside",value:function(e){if(this.container.current&&!this.container.current.contains(e.target)){var t=this.state,n=t.time,a=t.dropDownOpen,r=this.props.setTime;a&&r(n),this.setState({dropDownOpen:!1})}}},{key:"toggleDropDown",value:function(){var e=this.props,t=e.timeChecked,n=e.canEdit;t&&n?this.setState((function(e){return{dropDownOpen:!e.dropDownOpen}})):this.setState({dropDownOpen:!1})}},{key:"handleLoseFocus",value:function(e,t){var n=e.id,a=e.ref,r=e.max,i=this.state.time,o=t.target.value.replace(/\D/,"");o.length>2&&(o=o.substr(0,2)),o=Math.min(o,r),o=Math.max(o,0),this.setState({time:Object(u.a)(Object(u.a)({},i),{},{[n]:String(o).padStart(2,0)})}),a.current.value=String(o).padStart(2,0)}},{key:"increment",value:function(e){var t=e.id,n=e.ref,a=e.max,r=this.state.time,i=parseInt(n.current.value,10)+1;i>a&&(i=0);var o=String(i).padStart(2,0);this.setState({time:Object(u.a)(Object(u.a)({},r),{},{[t]:o})}),n.current.value=o}},{key:"decrement",value:function(e){var t=e.id,n=e.ref,a=e.max,r=this.state.time,i=parseInt(n.current.value,10)-1;i<0&&(i=a);var o=String(i).padStart(2,0);this.setState({time:Object(u.a)(Object(u.a)({},r),{},{[t]:o})}),n.current.value=o}},{key:"render",value:function(){var e=this,t=this.state,a=t.time,r=t.dropDownOpen,i=this.props.timeChecked?"".concat(a.hours," : ").concat(a.minutes," : ").concat(a.seconds):"N/A";return Object(fi.jsxs)("div",{className:"".concat(Vs.a.dropdown," ").concat(Vs.a.timeDropdown),ref:this.container,children:[Object(fi.jsx)("div",{onClick:function(){return e.toggleDropDown()},children:Object(fi.jsx)("div",{children:i})}),r&&Object(fi.jsx)("div",{className:Vs.a.timePicker,children:this.timePickerConfig.map((function(t){return[Object(fi.jsxs)("div",{className:Vs.a.numberPicker,children:[Object(fi.jsx)("button",{type:"button",className:Vs.a.upButton,onClick:e.increment.bind(e,t)},t.id),Object(fi.jsx)("input",{ref:t.ref,type:"number",className:Vs.a.numberInput,defaultValue:a[t.id],onInput:n.handleTextChange.bind(e),onKeyDown:n.handleKeyPress.bind(e),onBlur:e.handleLoseFocus.bind(e,t)},"".concat(t.id,"Input")),Object(fi.jsx)("button",{type:"button",className:Vs.a.downButton,onClick:e.decrement.bind(e,t)},"".concat(t.id,"Button"))]},"".concat(t.id,"Picker")),null!==t.spacer?Object(fi.jsx)("div",{children:t.spacer},"".concat(t.id,"Spacer")):""]}))},"timePickerContent")]})}}],[{key:"handleKeyPress",value:function(e){"Enter"===e.key&&e.target.blur()}},{key:"handleTextChange",value:function(e){var t=e.target;t.value=t.value.replace(/\D/,""),t.value.length>2&&(t.value=t.value.substr(0,2))}}]),n}(a.Component),Ys=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).container=r.a.createRef(),a.state={dropDownOpen:!1},a.toggleDropDown=a.toggleDropDown.bind(Object(ai.a)(a)),a.handleClickOutside=a.handleClickOutside.bind(Object(ai.a)(a)),a}return Object(y.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"shouldComponentUpdate",value:function(e,t,n){var a=this.props.selectedUser,r=this.state.dropDownOpen;return a!==e.selectedUser||r!==t.dropDownOpen}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"handleClickOutside",value:function(e){this.container.current&&!this.container.current.contains(e.target)&&this.setState({dropDownOpen:!1})}},{key:"handleUserClick",value:function(e){var t=this.props.handleUserClick;this.toggleDropDown(),t(e)}},{key:"toggleDropDown",value:function(){var e=this.props,t=e.isShared,n=e.canEdit;t||n?this.setState((function(e){return{dropDownOpen:!e.dropDownOpen}})):this.setState({dropDownOpen:!1})}},{key:"relatingToList",value:function(){var e=this;return this.props.userList.map((function(t){var n=Object(fi.jsx)(vs,{isAvatar:!!t.avatar,url:t.avatar||t.icon,color:t.color});return Object(fi.jsxs)("div",{className:"".concat(Vs.a.dropdownItem," ").concat(Vs.a.dropdownItemWithIcon),onClick:e.handleUserClick.bind(e,t),children:[Object(fi.jsx)("div",{className:Vs.a.dropdownItemIcon,children:n}),t.title]},t.uuid)}))}},{key:"createUserButton",value:function(){var e,t=this,n=this.props.selectedUser;if(n){var a=Object(fi.jsx)(vs,{isAvatar:!!n.avatar,url:n.avatar||n.icon,color:n.color});e=Object(fi.jsxs)("div",{className:Vs.a.dropdownButtonWithIcon,onClick:function(){return t.toggleDropDown()},children:[Object(fi.jsx)("div",{className:Vs.a.dropdownButtonIcon,children:a}),n.title]})}else e=Object(fi.jsx)("div",{className:Vs.a.dropdownButton,onClick:function(){return t.toggleDropDown()},children:"Please choose"});return e}},{key:"render",value:function(){var e=this.createUserButton(),t=this.state.dropDownOpen;return Object(fi.jsxs)("div",{className:Vs.a.dropdown,ref:this.container,children:[e,t&&Object(fi.jsx)("div",{className:Vs.a.dropdownContent,children:this.relatingToList()})]})}}],[{key:"svgCircle",value:function(e,t){return"undefined"!==t?"<svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'><circle fill='".concat(e.replace(/#/,"%23"),"' id='a' cx='12' cy='12' r='9' /><image width=\"24px\" height=\"24px\" x=\"6px\" y=\"4px\" href='").concat(t,"'/></svg>"):"<svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'><circle fill='".concat(e.replace(/#/,"%23"),"' id='a' cx='12' cy='12' r='9' /></svg>")}}]),n}(a.Component);Ys.defaultProps={selectedUser:null};var Xs=Ys,Js=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).container=r.a.createRef(),a.state={dropDownOpen:!1},a.toggleDropDown=a.toggleDropDown.bind(Object(ai.a)(a)),a.handleClickOutside=a.handleClickOutside.bind(Object(ai.a)(a)),a}return Object(y.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"handleClickOutside",value:function(e){this.container.current&&!this.container.current.contains(e.target)&&this.setState({dropDownOpen:!1})}},{key:"handleTypeClick",value:function(e){var t=this.props.handleTypeClicked;this.toggleDropDown(),t(e)}},{key:"toggleDropDown",value:function(){this.props.canEdit?this.setState((function(e){return{dropDownOpen:!e.dropDownOpen}})):this.setState({dropDownOpen:!1})}},{key:"createTypeButton",value:function(){var e,t=this,n=this.props,a=n.selectedTypeId,r=n.eventTypesList.find((function(e){return e.id===a}));if(r){e=Object(fi.jsx)("div",{style:{backgroundRepeat:"no-repeat, no-repeat",backgroundPosition:"left 0px top 50%, right 8px top 50%, 0 0",backgroundSize:"18px 18px"},className:Vs.a.dropdownButton,onClick:function(){return t.toggleDropDown()},children:r.text})}else e=Object(fi.jsx)("div",{className:Vs.a.dropdownButton,onClick:function(){return t.toggleDropDown()},children:"Please choose"});return e}},{key:"renderTypeList",value:function(){var e=this;return this.props.eventTypesList.map((function(t){var n={backgroundImage:"url(".concat(t.icon,")"),backgroundRepeat:"no-repeat, repeat",backgroundPosition:"right 8px top 50%, 0 0"};return Object(fi.jsx)("div",{style:n,className:Vs.a.dropdownItem,onClick:e.handleTypeClick.bind(e,t.id),children:t.text},t.id)}))}},{key:"render",value:function(){var e=this.createTypeButton(),t=this.state.dropDownOpen;return Object(fi.jsxs)("div",{className:Vs.a.dropdown,ref:this.container,children:[e,t&&Object(fi.jsx)("div",{className:Vs.a.dropdownContent,children:this.renderTypeList()})]})}}]),n}(a.Component);Js.defaultProps={selectedTypeId:null};var qs=Js,zs=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;Object(f.a)(this,n),a=t.call(this,e);var i=e.primaryUuid,o=e.notes,s=e.timeline,c=e.playhead,l=e.meId,u=e.meName,d=e.participants,h=o.editMode,p=o.commentToEdit,m=o.notes.find((function(e){return e.noteId===o.noteToEdit})),v=m?le(m.thread,p):null;m&&Number.isNaN(m.timestamp)&&(m.timestamp=null);var b,y=m?m.timestamp:s.range*c/100,g=y/1e6,j=Math.floor(g/3600),O=Math.floor(g%3600/60),_=Math.floor(g%60);return a.userList=n.createUserList(d),b=!!ar.isNew(h)||(ar.isComment(h)?v.author.toString()===l:m.author.toString()===l),ar.isExistingItem(h)?a.state={noteId:m.noteId,selectedUser:m.uuid?a.userList.find((function(e){return e.uuid===m.uuid})):null,typeId:m.eventType,text:ar.isNote(h)?m.text:v.comment,timestamp:y,time:{seconds:String(_).padStart(2,0),minutes:String(O).padStart(2,0),hours:String(j).padStart(2,0)},author:m.author,authorName:m.authorName,timeChecked:null!==y,shareChecked:!!m.isShared,acknowledgeChecked:!!m.isAcknowledged,canShare:m.canShare,isAcknowledged:!!m.isAcknowledged,canAcknowledge:m.canAcknowledge,isShared:!!m.isShared,channelUuid:m.channelUuid,canEdit:b&&!m.isAcknowledged,thread:m.thread,polarity:m.polarity,userActivity:m.userActivity,version:m.version}:a.state={noteId:We(),selectedUser:null,typeId:null,text:"",timestamp:y,canShare:o.canShare,shareChecked:!0,acknowledgeChecked:!1,isAcknowledged:!1,canAcknowledge:!1,isShared:!1,time:{seconds:String(_).padStart(2,0),minutes:String(O).padStart(2,0),hours:String(j).padStart(2,0)},author:l,authorName:u,timeChecked:!0,channelUuid:i,canEdit:!0,thread:[],polarity:"Neutral",userActivity:[],version:1},a.typeList=o.eventTypes,a.timePickerConfig=[{id:"hours",ref:r.a.createRef(),max:23,spacer:":"},{id:"minutes",ref:r.a.createRef(),max:59,spacer:":"},{id:"seconds",ref:r.a.createRef(),max:59,spacer:null}],a.handleAddNoteClicked=a.handleAddNoteClicked.bind(Object(ai.a)(a)),a.handleDeleteNoteClicked=a.handleDeleteNoteClicked.bind(Object(ai.a)(a)),a.setTime=a.setTime.bind(Object(ai.a)(a)),a.handleUserClick=a.handleUserClick.bind(Object(ai.a)(a)),a.handleTypeClick=a.handleTypeClick.bind(Object(ai.a)(a)),a.handlePolarityClick=a.handlePolarityClick.bind(Object(ai.a)(a)),a.handleSubmitClicked=a.handleSubmitClicked.bind(Object(ai.a)(a)),a.handleAddCommentClicked=a.handleAddCommentClicked.bind(Object(ai.a)(a)),a.handleDeleteCommentClicked=a.handleDeleteCommentClicked.bind(Object(ai.a)(a)),a}return Object(y.a)(n,[{key:"setTime",value:function(e){this.setState({time:e})}},{key:"handleUserClick",value:function(e){this.setState({selectedUser:e})}},{key:"handleTypeClick",value:function(e){this.setState({typeId:e})}},{key:"handlePolarityClick",value:function(e){this.setState({polarity:e})}},{key:"handleTextUpdate",value:function(e){this.setState({text:e.target.value})}},{key:"handleEventTimeChecked",value:function(e){this.setState({timeChecked:e.target.checked})}},{key:"handleShareNote",value:function(e){this.setState({shareChecked:e.target.checked})}},{key:"handleAcknowledgeNote",value:function(e){this.setState({acknowledgeChecked:e.target.checked})}},{key:"handleSubmitClicked",value:function(){var e=this.props.notes.editMode;ar.isNote(e)?this.handleAddNoteClicked():ar.isComment(e)&&this.handleAddCommentClicked()}},{key:"handleAddNoteClicked",value:function(){var e=this.props,t=e.onUpdateNote,n=e.timeline,a=this.state,r=a.noteId,i=a.selectedUser,o=a.typeId,s=a.text,c=a.timestamp,l=a.time,u=a.author,d=a.authorName,h=a.timeChecked,p=a.channelUuid,m=a.shareChecked,f=a.canShare,v=a.thread,b=a.polarity,y=a.userActivity,g=a.version;if(null!==o)if(null!==i&&void 0!==i){var j=null;if(h&&(j=c%1e6,(j=Number(j+36e8*l.hours+6e7*l.minutes+1e6*l.seconds))>n.range))window.alert("The time is greater than the recording length");else t({noteId:r,uuid:i.uuid,timestamp:j,eventType:o,author:u,authorName:d,text:s,isShared:i.uuid!==ro&&m,channelUuid:p,canShare:f,thread:v,polarity:b,userActivity:y,version:g})}else window.alert("You must specify who the note relates to");else window.alert("You must specify an event type")}},{key:"handleAddCommentClicked",value:function(){var e=this.props,t=e.notes,n=t.editMode,a=t.notes,r=t.noteToEdit,i=t.commentToEdit,o=e.onUpdateNote,s=e.meId,c=e.meName,l=this.state.text,d=(new Date).toISOString(),h=a.find((function(e){return e.noteId===r}));if(h){var p=ar.isNew(n)?[].concat(Object(oe.a)(h.thread),[{uuid:We(),comment:l,created:d,modified:d,author:s,authorName:c}]):h.thread.map((function(e){return Object(u.a)(Object(u.a)({},e),e.uuid===i?{comment:l,modified:d}:null)}));o(Object(u.a)(Object(u.a)({},h),{},{thread:p}),d)}}},{key:"handleDeleteNoteClicked",value:function(){var e=this.state.noteId;(0,this.props.onDeleteNote)(e)}},{key:"handleDeleteCommentClicked",value:function(){var e=this.props,t=e.notes,n=t.noteToEdit,a=t.commentToEdit;(0,e.onDeleteComment)(n,a)}},{key:"titleForEditMode",value:function(e){switch(e){case ar.existingNote:return"Edit note";case ar.newComment:return"Replying to:";case ar.existingComment:return"Edit reply to:";default:return"New note"}}},{key:"buttonTextForEditMode",value:function(e){switch(e){case ar.existingNote:return"Update note";case ar.newComment:return"Add comment";case ar.existingComment:return"Update comment";default:return"Add note"}}},{key:"commentToReplyTo",value:function(e,t){var n=e.editMode,a=e.noteToEdit,r=e.commentToEdit,i=e.notes.find((function(e){return e.noteId===a})),o=le(i.thread,r),s=e.eventTypes.find((function(e){return e.id===i.eventType})),c=t(i.uuid).color,l=n===ar.newComment?i:Object(u.a)(Object(u.a)({},i),{},{thread:i.thread.filter((function(e,t){return t<i.thread.indexOf(o)}))});return Object(fi.jsx)("div",{className:Vs.a.threadContainer,children:Object(fi.jsx)(bo,{event:s,color:c,note:l,id:a,interactive:!1})})}},{key:"render",value:function(){var e=this.props,t=e.notes,n=e.onCloseNoteEditor,a=e.meId,r=e.participants,i=e.getParticipantById,o=t.showEditModal,s=t.editMode,c=this.state,l=c.selectedUser,u=c.typeId,d=c.polarity,h=c.text,p=c.time,m=c.timeChecked,f=c.shareChecked,v=c.acknowledgeChecked,b=c.canShare,y=c.isAcknowledged,g=c.isShared,j=c.canAcknowledge,O=c.canEdit,_=c.authorName,x=this.titleForEditMode(s),C=this.buttonTextForEditMode(s),k=_,w=b;w=!!l&&(l.uuid!==ro&&(b&&l&&l.userId!==Number(a)));var S="Add a comment to this event...",T=[];O||T.push(Vs.a.modalBodyDisabled);var N=Pi()({[Vs.a.mask]:!0,"ignore-nodestack":!0});return Object(fi.jsx)("div",{className:N,children:Object(fi.jsxs)("div",{className:Vs.a.NoteModal,style:{opacity:o?"1":"0"},children:[Object(fi.jsxs)("div",{className:Vs.a.modalHeader,children:[Object(fi.jsx)("div",{className:Vs.a.title,children:x}),k&&Object(fi.jsx)("div",{children:"Added by ".concat(k)})]}),Object(fi.jsxs)("div",{className:Vs.a.modalBody,children:[ar.isNote(s)&&Object(fi.jsxs)("div",{className:[].concat(T,[Vs.a.noteDetailsContainer]).join(" "),children:[Object(fi.jsxs)("div",{className:Vs.a.detailColumn,id:Vs.a.timeDetailColumn,children:[Object(fi.jsx)("div",{className:Vs.a.checkboxContainer,children:Object(fi.jsxs)("label",{className:Vs.a.checkboxLabel,htmlFor:"eventTimeCheckbox",children:["Event time:",Object(fi.jsx)("input",{className:Vs.a.checkbox,type:"checkbox",id:"eventTimeCheckbox",onChange:this.handleEventTimeChecked.bind(this),checked:m,disabled:!O})]})}),Object(fi.jsx)(Gs,{time:p,timeChecked:m,canEdit:O,setTime:this.setTime})]}),Object(fi.jsxs)("div",{className:Vs.a.detailColumn,id:Vs.a.userDetailColumn,children:[Object(fi.jsx)("div",{children:"Relating to:"}),Object(fi.jsx)(Xs,{participants:r,selectedUser:l,canEdit:O,isShared:g,handleUserClick:this.handleUserClick,userList:this.userList})]}),Object(fi.jsxs)("div",{className:Vs.a.detailColumn,id:Vs.a.relatingToDetailColumn,children:[Object(fi.jsx)("div",{children:"Type of event:"}),Object(fi.jsx)(qs,{selectedTypeId:u,eventTypesList:this.typeList,canEdit:O,handleTypeClicked:this.handleTypeClick})]}),Object(fi.jsxs)("div",{className:Vs.a.detailColumn,id:Vs.a.polarityDetailColumn,children:[Object(fi.jsx)("div",{children:"Polarity:"}),Object(fi.jsx)(qs,{selectedTypeId:d,eventTypesList:t.polarityTypes,canEdit:O,handleTypeClicked:this.handlePolarityClick})]})]}),ar.isComment(s)&&this.commentToReplyTo(t,i),Object(fi.jsx)("div",{className:[].concat(T,[Vs.a.noteTextContainer]).join(" "),children:Object(fi.jsx)("textarea",{value:Ve(h),name:"noteDetails",className:Vs.a.noteDetails,rows:"5",onChange:this.handleTextUpdate.bind(this),placeholder:S,onFocus:function(e){e.target.placeholder=""},onBlur:function(e){e.target.placeholder=S},disabled:!O})}),j&&Object(fi.jsx)("div",{className:Vs.a.shareContainer,children:y?Object(fi.jsx)("p",{children:"Note Acknowledged"}):Object(fi.jsxs)("label",{className:Vs.a.checkboxLabel,htmlFor:"acknowledgeCheckbox",children:["Acknowledge you have received this note",Object(fi.jsx)("input",{className:[Vs.a.checkbox,Vs.a.checkbox2].join(" "),type:"checkbox",id:"acknowledgeCheckbox",onChange:this.handleAcknowledgeNote.bind(this),checked:v})]})}),l&&Object(fi.jsxs)("div",{className:Vs.a.shareContainer,children:[w&&!g&&Object(fi.jsxs)("label",{className:Vs.a.checkboxLabel,htmlFor:"shareCheckbox",children:["Share notes with ".concat(l.title,"?"),Object(fi.jsx)("input",{className:[Vs.a.checkbox,Vs.a.checkbox2].join(" "),type:"checkbox",id:"shareCheckbox",onChange:this.handleShareNote.bind(this),checked:f})]}),g&&Object(fi.jsxs)("p",{children:["Note has been shared with ".concat(l.title),y&&" and has been acknowledged"]})]})]}),Object(fi.jsxs)("div",{className:Vs.a.modalFooter,children:[!!ar.isExistingItem(s)&&O&&Object(fi.jsxs)("button",{type:"button",className:Vs.a.deleteButton,onClick:ar.isComment(s)?this.handleDeleteCommentClicked:this.handleDeleteNoteClicked,children:["DELETE ",ar.isComment(s)?"COMMENT":"NOTE"]}),Object(fi.jsx)("button",{type:"button",className:Vs.a.cancelButton,onClick:n,children:"CANCEL"}),Object(fi.jsx)("button",{type:"submit",className:Vs.a.addButton,disabled:""===this.state.text,onClick:this.handleSubmitClicked,children:C})]})]})})}}],[{key:"createUserList",value:function(e){var t=[];return Object.keys(e).forEach((function(n){var a=e[n];a.title!==k&&t.push({uuid:a.relatedUuids[0],title:a.name?a.name:a.title,icon:a.image,color:a.color,userId:a.userId,avatar:a.photoUrl})})),t.push({uuid:ro,title:"General",icon:null,color:"#adb3b7",userId:ro}),t}}]),n}(a.Component),Qs=Object(Ue.a)([de],(function(e){return function(t){return e[Object.keys(e).find((function(n){return e[n].relatedUuids.reduce((function(e,n){return e||n===t}))}))]}})),Zs=Object(s.b)((function(e){var t=e.primaryUuid,n=e.notes,a=e.participants;return{primaryUuid:t,notes:n,playhead:e.playback.playhead,timeline:Xe(e),participants:a,getParticipantById:Qs(e),meId:Wt(e),meName:Vt(e)}}),(function(e){return{onCloseNoteEditor:function(){e(ir())},onDeleteNote:function(t){e(mn(t)),e(ir())},onDeleteComment:function(t,n){e(tr(t,n)),e(ir())},onUpdateNote:function(t,n){e(pn(t,n)),e(ir())}}}))((function(e){return Object(fi.jsx)(zs,Object(u.a)({},e))})),$s=function(){function e(t){var n=this;Object(f.a)(this,e),this.selector=t,this.hover={duration:1e3,action:null,handler:null},this.clear={action:null,items:[]},this.click={action:null},window.addEventListener("click",(function(e){var t=n.elementsMatchingSelectorAndEvent(n.selector,e);"function"===typeof n.click.action&&t.length>0&&n.click.action(t)})),window.addEventListener("mousemove",(function(e){"function"===typeof n.clear.action&&n.clear.items.length>0&&(n.clear.action(n.clear.items),n.clear.items=[]),null!==n.hover.handler&&(clearTimeout(n.hover.handler),n.hover.handler=null),n.hover.handler=setTimeout((function(){var t=n.elementsMatchingSelectorAndEvent(n.selector,e);"function"===typeof n.hover.action&&t.length>0&&(n.clear.items=n.hover.action(t)||t),n.hover.handler=null}),n.hover.duration)}))}return Object(y.a)(e,[{key:"elementsMatchingSelectorAndEvent",value:function(t,n){var a=e.filterElements(n),r=document.querySelectorAll(this.selector),i=Object.keys(r);return 0===i.length||document.querySelectorAll(".ignore-nodestack").length>0?[]:i.map((function(e){return r[e]})).filter(a)}},{key:"onClick",value:function(e){return this.click.action=e,this}},{key:"onHover",value:function(e){return this.hover.action=e,this}},{key:"onClear",value:function(e){return this.clear.action=e,this}},{key:"duration",value:function(e){return this.hover.duration=e,this}}],[{key:"filterElements",value:function(e){var t,n=e.pageX,a=e.pageY;return function(e){var r=e.getBoundingClientRect();return t={x:[r.left,r.left+r.width],y:[r.top,r.top+r.height]},n>=t.x[0]&&n<=t.x[1]&&a>=t.y[0]&&a<=t.y[1]}}}]),e}(),ec=n(25),tc=n.n(ec);function nc(e){return"EXPECTED"===e.Trigger.toUpperCase()&&1===e.CategoryValue}function ac(e){return"EXPECTED"===e.Trigger.toUpperCase()&&0===e.CategoryValue}function rc(e){return"UNEXPECTED"===e.Trigger.toUpperCase()&&1===e.CategoryValue}function ic(e){return ac(e)||rc(e)}function oc(e){return"INFO"===e.Trigger.toUpperCase()&&1===e.CategoryValue}function sc(e){return ic(e)||nc(e)||oc(e)}function cc(e){return nc(e)?10:rc(e)?20:ac(e)?30:40}var lc=n(35),uc=n.n(lc);function dc(e){var t=e.category,n=e.isSelected,a=e.onClick,r=Pi()({[uc.a.classificationPill]:!0}),i=Pi()({[uc.a.classificationIndicator]:!0,[uc.a.positive]:nc(t),[uc.a.negative]:rc(t),[uc.a.warning]:ac(t),[uc.a.info]:oc(t)}),o=function(e){return"EXPECTED"===e.Trigger.toUpperCase()?1===e.CategoryValue?"This was expected to trigger and did":"This was expected to trigger but did not":"UNEXPECTED"===e.Trigger.toUpperCase()?1===e.CategoryValue?"This was not expected to trigger but did":"This was not expected to trigger and did not":"INFO"===e.Trigger.toUpperCase()&&1===e.CategoryValue?"This was triggered and was flagged as interesting to you":null}(t),s=(t.DisplayName||"").replace(/_/g," ");return Object(fi.jsxs)("div",{className:r,"data-metric":t.Name,"data-metric-selected":n,"data-tooltip":o,onClick:a,onKeyPress:a,role:"button",tabIndex:"-1",children:[Object(fi.jsx)("div",{className:i}),Object(fi.jsx)("div",{className:uc.a.pillText,children:s})]},t.DisplayName)}dc.defaultProps={onClick:null};var hc=n(40),pc=n.n(hc);function mc(e){var t=e.colors,n=e.isSelected,a=e.onClick,r=e.showLeftIndicator,i=e.showRightIndicator,o=e.text,s=e.modalPill,c=e.modalCategoryPill,l=pc.a.pill;return s?l=pc.a.pillModal:c&&(l=pc.a.pillCategoryModal),Object(fi.jsxs)("div",{onClick:a,className:l,role:"button",onKeyPress:a,tabIndex:"-1","data-metric":o,"data-metric-selected":n,children:[Object(fi.jsx)("div",{className:pc.a.pillText,children:o}),Object(fi.jsxs)("div",{className:pc.a.pillColourContainer,children:[Object(fi.jsx)("div",{style:{backgroundColor:t[0],display:r?"block":"none"}}),Object(fi.jsx)("div",{style:{backgroundColor:t[1],display:i?"block":"none"}})]})]})}mc.defaultProps={colors:["#444","#aaa"],onClick:null,modalPill:!1,modalCategoryPill:!1};var fc=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).handleClick=a.handleClick.bind(Object(ai.a)(a)),a.setPlayHeadPosition=a.setPlayHeadPosition.bind(Object(ai.a)(a)),a}return Object(y.a)(n,[{key:"setPlayHeadPosition",value:function(e){var t=this.props,n=t.onSetScrollToMatch,a=t.scrub,r=t.viewport,i=r.span,o=a.end-a.start,s=e-(a.start+o/2),c=Math.min(Math.max(0,a.start+s),100-o),l=c+o,u=e-(r.start+i/2);n(e,{start:c,end:l},{start:Math.min(Math.max(0,r.start+u),100-i),span:i})}},{key:"handleClick",value:function(e){var t=this;return function(n){var a=t.props,r=a.onClassificationSelected,i=a.onKeywordSelected,o=a.onTopicSelected,s=n.target.dataset.metric;"undefined"!==typeof s&&(e===wr?r(s):e===Sr?i(s):e===Tr&&o(s))}}},{key:"loadingBar",value:function(e){var t=this.props.loadProgress,n=Pi()({[tc.a.progressBarContainer]:!0,hidden:!e}),a={width:"".concat(t,"%")};return Object(fi.jsxs)("div",{className:n,children:[Object(fi.jsx)("div",{className:tc.a.progressBarOuter,children:t>0&&Object(fi.jsx)("div",{className:tc.a.progressBar,style:a})}),Object(fi.jsxs)("div",{children:[t,"%"]})]})}},{key:"render",value:function(){var e=this.props,t=e.status.status,a=e.callSummary,r=e.selectedItem,i=e.onClickShowAllClassifications,o=e.transcription,s=e.onClickShowAllKeyWords,c=t===nt;if(t===rt||null===o[1])return this.loadingBar(c);var l=n.generateAllClassifications(o,r,this.handleClick),u=n.generateKeywords(o,a.keyCallers.colors,r,this.handleClick),d=n.generateTopics(o,a.keyCallers.colors,r,this.handleClick),h=l.length,p=u.length+d.length;return Object(fi.jsxs)("div",{className:"column-container ".concat(tc.a.content),children:[Object(fi.jsxs)("div",{className:"column ".concat(tc.a.column," ").concat(tc.a.classificationsExceptionColumn),children:[Object(fi.jsxs)("div",{className:tc.a.classificationsExceptionHeader,children:[Object(fi.jsx)("p",{className:tc.a.title,children:"Keywords:"}),p>0&&Object(fi.jsxs)("button",{type:"button",className:tc.a.showAll,onClick:s,children:["View ",p>1?"All ":"",p," Item",1===p?"":"s"]})]}),Object(fi.jsx)("hr",{}),Object(fi.jsxs)("div",{className:tc.a.pillContainer,children:[u.length>0&&u,0===u.length&&Object(fi.jsx)("p",{className:"text-grey-primary",children:"No keywords found"})]})]}),Object(fi.jsx)("div",{className:tc.a.spacer}),Object(fi.jsxs)("div",{className:"column ".concat(tc.a.column," ").concat(tc.a.classificationsExceptionColumn),children:[Object(fi.jsxs)("div",{className:tc.a.classificationsExceptionHeader,children:[Object(fi.jsx)("p",{className:tc.a.title,children:"Top Categories:"}),h>0&&Object(fi.jsxs)("button",{type:"button",className:tc.a.showAll,onClick:i,children:["View ",h>1?"All ":"",h," Item",1===h?"":"s"]})]}),Object(fi.jsx)("hr",{}),n.hasClassificationExceptionsOrInfo(o)&&Object(fi.jsx)("div",{className:tc.a.classificationContainer,children:l}),!n.hasClassificationExceptionsOrInfo(o)&&Object(fi.jsx)("div",{className:tc.a.classificationsEmpty,children:Object(fi.jsx)("div",{children:"No categories were flagged for this call."})})]})]})}}],[{key:"generateClassifications",value:function(e,t,a,r){var i=(e.Categories||[]).filter((function(e){return e.Type.toUpperCase()===t.toUpperCase()&&(ac(e)||rc(e))}));if(0===i.length)return[];var o="function"===typeof r?r(wr):null;return n.processChannelClassifications(i,a,o)}},{key:"generateAllClassifications",value:function(e,t,a){var r=(e.Categories||[]).filter((function(e){return sc(e)})).sort((function(e,t){return cc(e)-cc(t)}));if(0===r.length)return[];var i="function"===typeof a?a(wr):null;return n.processChannelClassifications(r,t,i)}},{key:"generateKeywords",value:function(e,t,a,r){if(0===e[1].Keywords.length&&0===e[2].Keywords.length)return[];var i="function"===typeof r?r(Sr):null;return n.processKeywordsTopics(e,"Keywords","Keyword",Sr,t,a,i)}},{key:"generateTopics",value:function(e,t,a,r){if(0===e[1].Topics.length&&0===e[2].Topics.length)return[];var i="function"===typeof r?r(Tr):null;return n.processKeywordsTopics(e,"Topics","Topic",Tr,t,a,i)}},{key:"processChannelClassifications",value:function(e,t,n){return e.map((function(e){var a=t.type===wr&&t.identifier===e.Name;return Object(fi.jsx)(dc,{category:e,isSelected:a,onClick:n},e.Name)}))}},{key:"processKeywordsTopics",value:function(e,t,a,r,i,o,s){var c={};return e[1][t].forEach((function(e){var t=c[e[a]]||Object(u.a)({},e);t[1]=!0,c[e[a]]=t})),e[2][t].forEach((function(e){var t=c[e[a]]||Object(u.a)({},e);t[2]=!0,c[e[a]]=t})),n.generateMarkupForKeywordsTopics(a,Object.values(c),r,i,o,s)}},{key:"generateMarkupForKeywordsTopics",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["#444","#aaa"],r=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;return t.map((function(t){var o=r.type===n&&r.identifier===t[e];return Object(fi.jsx)(mc,{colors:a,isSelected:o,onClick:i,showLeftIndicator:!0===t[1],showRightIndicator:!0===t[2],text:t[e]},"".concat(t[e]))}))}},{key:"hasClassificationExceptionsOrInfo",value:function(e){return(e.Categories||[]).filter((function(e){return ic(e)||oc(e)})).length>0}}]),n}(a.Component);var vc=Object(s.b)((function(e){var t=e.status,n=e.activeLayers,a=e.callSummary,r=e.knowledge,i=e.search,o=e.scrub,s=e.transcription.viewport;return{status:t,activeLayers:n,callSummary:a,search:i,scrub:o,selectedItem:r.selectedItem,transcription:xe(e),timeline:Xe(e),viewport:s,loadProgress:ge(e)}}),(function(e){return{onClassificationSelected:function(t){e(Mr(t))},onKeywordSelected:function(t){e(Dr(t))},onTopicSelected:function(t){e(Br(t))},onSetSearchMatch:function(t){e(yr(t))},onSetScrollToMatch:function(t,n,a){e(ya(t)),e(va(n)),e(Oa(a))},onClickShowAllClassifications:function(){e({type:Nr})},onClickShowAllKeyWords:function(){e({type:Kr})}}}))((function(e){var t=e.status,n=e.onClassificationSelected,a=e.onKeywordSelected,r=e.onTopicSelected,i=e.activeLayers,o=e.callSummary,s=e.onSetSearchMatch,c=e.search,l=e.selectedItem,u=e.transcription,d=e.onSetScrollToMatch,h=e.timeline,p=e.scrub,m=e.viewport,f=e.onClickShowAllClassifications,v=e.onClickShowAllKeyWords,b=e.loadProgress;return Object(fi.jsx)(fc,{status:t,onClassificationSelected:n,onKeywordSelected:a,onTopicSelected:r,activeLayers:i,callSummary:o,onSetSearchMatch:s,selectedItem:l,search:c,transcription:u,timeline:h,scrub:p,viewport:m,onSetScrollToMatch:d,onClickShowAllClassifications:f,onClickShowAllKeyWords:v,loadProgress:b})})),bc=n(21),yc=n.n(bc),gc=n(30),jc=n.n(gc),Oc=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).handleInputChange=a.handleInputChange.bind(Object(ai.a)(a)),a}return Object(y.a)(n,[{key:"handleInputChange",value:function(e){var t=this;return function(n){var a=t.props,r=a.onToggleLayer,i=a.onToggleRouting;e!==Cn?r(n.target.id):i()}}},{key:"renderMetrics",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[];return Object.keys(e).forEach((function(r){var i=e[r],o=i.checked,s=i.subtitle,c=i.disabled,l="string"===typeof s&&s.length>0;a.push(Object(fi.jsxs)("div",{className:jc.a.formCheck,children:[Object(fi.jsxs)("label",{htmlFor:r,children:[Object(fi.jsx)("input",{type:"checkbox",id:r,checked:o,onChange:t.handleInputChange(r),disabled:!0===c}),Object(fi.jsx)("span",{children:i.title}),l&&Object(fi.jsx)("span",{className:jc.a.subtitle,children:i.subtitle})]}),"undefined"!==typeof i.indicator&&i.indicator.total>0&&Object(fi.jsxs)("div",{className:jc.a.indicator,children:[Object(fi.jsx)("div",{style:{width:"".concat(i.indicator.left/i.indicator.total*100,"%"),backgroundColor:n[0]},className:Hi(n[0],["text-black","text-white"]),children:i.indicator.left}),Object(fi.jsx)("div",{style:{width:"".concat(i.indicator.right/i.indicator.total*100,"%"),backgroundColor:n[1]},className:Hi(n[1],["text-black","text-white"]),children:i.indicator.right})]})]},r))})),a}},{key:"render",value:function(){var e=this.props,t=e.status.status,a=e.data,r=e.callSummary,i=e.isDisplayRouting,o=e.timeline.unrecordedTime,s=e.activeLayers;if(t===rt)return null;var c=a.talkTime,l=(n.calculateStatistics(c,1),n.calculateStatistics(c,2),o>0),u=l?Ke(o/1e6):"--",d={[Ua]:{title:"Hold/Unhold",checked:s.includes(Ua)},[Ba]:{title:"Transfer",checked:s.includes(Ba)},[Fa]:{title:"Listen In",checked:s.includes(Fa)},[Ka]:{title:"Call Queuing",checked:s.includes(Ka)},[Ha]:{title:"New Party Joins/Leaves",checked:s.includes(Ha)}},h={[Pa]:{title:"Transcription Confidence"},[Cn]:{title:"View Full Call",checked:i,subtitle:"".concat(u," of additional unrecorded time is available"),disabled:!l}},p=Pi()({[jc.a.thirdWidth]:!0}),m=Pi()({[jc.a.halfWidth]:!0});return Object(fi.jsx)("div",{className:jc.a.container,children:Object(fi.jsxs)("div",{className:"column-container",children:[Object(fi.jsxs)("div",{className:p,children:[Object(fi.jsx)("p",{className:jc.a.title,children:"Call Events on Scrubber"}),Object(fi.jsx)("hr",{className:jc.a.separator}),this.renderMetrics(d,r.keyCallers.colors)]}),Object(fi.jsx)("div",{className:"vertical-spacer"}),Object(fi.jsxs)("div",{className:"column",children:[Object(fi.jsx)("p",{className:jc.a.title,children:"Additional Metrics"}),Object(fi.jsx)("hr",{className:jc.a.separator}),Object(fi.jsxs)("div",{className:"column-container",children:[Object(fi.jsx)("div",{className:m,children:this.renderMetrics(h,r.keyCallers.colors)}),Object(fi.jsx)("div",{className:m,children:this.renderMetrics({},r.keyCallers.colors)})]})]})]})})}}],[{key:"calculateStatistics",value:function(e,t){return null===e?{}:{clashWins:e[t].filter((function(e){return e.event===qo})).length,affirmations:e[t].filter((function(e){return e.event===zo})).length,interruptions:e[t].filter((function(e){return e.event===Qo})).length,steals:e[t].filter((function(e){return e.event===Zo})).length}}}]),n}(a.Component);Oc.defaultProps={activeLayers:[]};var _c=Oc;function xc(e){var t=e.status,n=e.data,a=e.onToggleLayer,r=e.onToggleRouting,i=e.isDisplayRouting,o=e.timeline,s=e.callSummary,c=e.activeLayers;return Object(fi.jsx)(_c,{status:t,data:n,onToggleLayer:a,onToggleRouting:r,isDisplayRouting:i,callSummary:s,timeline:o,activeLayers:c})}xc.defaultProps={activeLayers:[]};var Cc=Object(s.b)((function(e){var t=e.status,n=e.data,a=e.callSummary,r=e.activeLayers;return{status:t,data:n,callSummary:a,isDisplayRouting:Re(e),timeline:Xe(e),activeLayers:r}}),(function(e){return{onToggleLayer:function(t){e(ga(t))},onToggleRouting:function(){e(fa()),e({type:Cn}),e(Un())}}}))(xc),kc=n(31),wc=n.n(kc),Sc=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"optionsList",value:function(){var e=this,t=this.props,n=t.id,a=t.options,r=t.selection;return Object.keys(a).map((function(t){var i=a[t];return Object(fi.jsxs)("label",{className:"".concat(wc.a.dropdownItem," ").concat(t===r?wc.a.selected:""),htmlFor:n,onClick:e.handleChange(t),children:[Object(fi.jsx)(vs,{isAvatar:!!i.avatar,url:i.avatar||i.icon,color:i.color}),Object(fi.jsx)("div",{className:wc.a.viewName,children:i.viewName})]},"focus-".concat(t))}))}},{key:"handleChange",value:function(e){var t=this.props.onChange;return function(){t(e)}}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.selection,a=e.options,r=Object(fi.jsx)("label",{className:wc.a.dropdownButton,htmlFor:t,children:"Please select..."});if(a[n]){var i=a[n];r=Object(fi.jsxs)("label",{className:wc.a.dropdownButton,htmlFor:t,children:[Object(fi.jsx)(vs,{isAvatar:!!i.avatar,url:i.avatar||i.icon,color:i.color}),Object(fi.jsx)("div",{className:wc.a.viewName,children:i.viewName})]})}return Object(fi.jsxs)("div",{className:wc.a.dropdown,children:[Object(fi.jsx)("input",{className:wc.a.dropdownToggle,type:"checkbox",id:t}),r,Object(fi.jsx)("label",{className:wc.a.dropdownBackground,htmlFor:t}),Object(fi.jsx)("div",{className:wc.a.dropdownContent,children:this.optionsList()})]})}}]),n}(a.Component);Sc.defaultProps={onChange:function(){},selection:""};var Tc=Sc;function Nc(e){var t=e.primaryUuid,n=e.onSetPrimaryUuid,a=e.options;return Object(fi.jsx)(Tc,{id:"focus-switcher-dropdown",selection:t,options:a,onChange:function(e){n(e)}})}Nc.defaultProps={primaryUuid:null};var Ec=Object(s.b)((function(e){return{primaryUuid:e.primaryUuid,options:Ie(e)}}),(function(e){return{onSetPrimaryUuid:function(t){e(wa(t))}}}))(Nc),Ic=n(12),Pc=n.n(Ic),Lc=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).state={isViewExpanded:!1},a.barRefs={container:null,bars:[],lines:[],labels:[]},a.toggleExpandedView=a.toggleExpandedView.bind(Object(ai.a)(a)),a}return Object(y.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.plotLabelLines.bind(this))}},{key:"componentDidUpdate",value:function(e,t,n){this.plotLabelLines()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.plotLabelLines.bind(this))}},{key:"bars",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.proportionalWidths(t),r=n.callDurationFromSummary(t);return this.barRefs.bars=[],Object.keys(t).filter((function(e){return t[e]>0})).map((function(n){return Object(fi.jsx)("div",{className:Pc.a[n],style:{width:"".concat(a[n],"%")},ref:function(t){return e.barRefs.bars.push(t)},"data-tooltip":"".concat((100/r*t[n]).toFixed(0),"%\n                        ").concat(Ke(t[n]))},n)}))}},{key:"lines",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.barRefs.lines=[],Object.keys(t).filter((function(e){return t[e]>0})).map((function(t){var n=Pi()({[Pc.a.line]:!0}),a=Pi()({[Pc.a.group]:!0});return Object(fi.jsx)("svg",{viewBox:"0 0 10 10",className:n,ref:function(t){return e.barRefs.lines.push(t)},preserveAspectRatio:"none",children:Object(fi.jsxs)("g",{className:a,children:[Object(fi.jsx)("line",{x1:"0",x2:"0",y1:"0",y2:3,vectorEffect:"non-scaling-stroke",shapeRendering:"crisp-edges"}),Object(fi.jsx)("line",{x1:"0",x2:"10",y1:3,y2:7,vectorEffect:"non-scaling-stroke",shapeRendering:"geometric-precision"}),Object(fi.jsx)("line",{x1:"10",x2:"10",y1:7,y2:"10",vectorEffect:"non-scaling-stroke",shapeRendering:"crisp-edges"})]})},t)}))}},{key:"labels",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.barRefs.labels=[];var a=n.proportionalWidths(t),r=n.callDurationFromSummary(t);return Object.keys(t).filter((function(e){return t[e]>0})).map((function(i,o,s){var c=Pi()({[Pc.a.label]:!0});return Object(fi.jsx)("div",{className:c,ref:function(t){return e.barRefs.labels.push(t)},"data-tooltip":"".concat((100/r*t[i]).toFixed(0),"%\n                        ").concat(Ke(t[i])),"data-width":a[i],children:n.labelTextForKey(i)},i)}))}},{key:"plotLabelLines",value:function(){var e=this.barRefs,t=e.bars,n=e.lines,a=e.labels,r=e.container;if(r&&Array.isArray(a)&&0!==a.length){var i=r.getBoundingClientRect(),o=i.x,s=i.width,c=[],l=0;a.forEach((function(e,n){if(e){e.style.width=null;var a=t[n],r=e.getBoundingClientRect().width,i=a.getBoundingClientRect().width,o=100/s*i,u=100/s*r;u>=o?(e.style.width="".concat(u,"%"),l+=u-o):c.push({label:e,labelWidthAsPercentage:u,barWidthAsPercentage:o})}})),c.forEach((function(e){var t=e.label,n=e.barWidthAsPercentage,a=e.labelWidthAsPercentage,r=Math.max(Math.min(l,n-a),0);t.style.width="".concat(n-r,"%"),l=Math.max(0,l-r)})),n.forEach((function(e,n){if(e){var r=a[n],i=t[n].getBoundingClientRect(),s=i.x,c=i.width,l=s-o+c/2,u=r.getBoundingClientRect(),d=u.x,h=u.width,p=d-o-l+h/2;e.style.left=Math.min(l,l+p),e.style.width=Math.max(1,Math.abs(p)),p<0?e.classList.add(Pc.a.flip):e.classList.remove(Pc.a.flip)}}))}}},{key:"toggleExpandedView",value:function(){var e=this.state.isViewExpanded;this.setState({isViewExpanded:!e})}},{key:"showAlternativeStatus",value:function(e){return Object(fi.jsx)("div",{children:Object(fi.jsxs)("div",{className:Pc.a.section,children:[Object(fi.jsxs)("div",{className:Pc.a.header,children:[Object(fi.jsx)("div",{className:Pc.a.headerItem,children:"Start time:"}),Object(fi.jsx)("div",{className:Pc.a.headerItem,children:"Duration:"}),Object(fi.jsx)("div",{className:Pc.a.headerItem,children:"Direction:"}),Object(fi.jsx)("div",{className:Pc.a.headerItem,children:Object(fi.jsx)("button",{className:Pc.a.buttonShowMore,type:"button",disabled:!0})})]}),Object(fi.jsx)("div",{className:Pc.a.summaryBar,children:this.bars({})})]})})}},{key:"render",value:function(){var e=this,t=this.props,a=t.status,r=t.callSummary,i=t.participants,o=t.sentences;if(a.status!==at)return this.showAlternativeStatus(a.status);var s=r.startTime,c=r.duration,l=r.direction,u=r.metrics,d=r.keyCallers,h=r.summary,p=0;"undefined"!==typeof i&&null!==o&&null!==u&&(p=n.numberOfConversations(i,o));var m=[],f=[],v=[],b=[];null!=d&&(m=d.colors.slice(0,2),d.titles),null!==u&&(f=u.map((function(e){return e.data.holdEvents})),v=u.map((function(e){return e.data.pauseEvents})),b=u.map((function(e){return Ke(c*e.data.SilenceRatio/1e6)})));var y=this.state.isViewExpanded,g=y?Pc.a.buttonShowLess:Pc.a.buttonShowMore;return Object(fi.jsxs)("div",{children:[Object(fi.jsxs)("div",{className:Pc.a.section,children:[Object(fi.jsxs)("div",{className:Pc.a.header,children:[Object(fi.jsxs)("div",{className:Pc.a.headerItem,children:["Start time:"," ",He(s)]}),Object(fi.jsxs)("div",{className:Pc.a.headerItem,children:["Duration:"," ",Ke(c/1e6)]}),Object(fi.jsxs)("div",{className:Pc.a.headerItem,children:["Direction:"," ",l]}),Object(fi.jsx)("div",{className:Pc.a.headerItem,children:Object(fi.jsx)("button",{className:g,onClick:this.toggleExpandedView,type:"button"})})]}),Object(fi.jsx)("div",{className:Pc.a.summaryBar,children:this.bars(h)}),Object(fi.jsx)("div",{className:Pc.a.summaryLines,ref:function(t){return e.barRefs.container=t},children:this.lines(h)}),Object(fi.jsx)("div",{className:Pc.a.summaryLabels,children:this.labels(h)})]}),y&&Object(fi.jsx)("div",{className:Pc.a.section,children:Object(fi.jsxs)("div",{className:Pc.a.metricsSection,children:[Object(fi.jsxs)("div",{className:Pc.a.metricsTable,children:[Object(fi.jsx)("div",{className:Pc.a.sectionColumns,children:n.metricsHeader(m)}),Object(fi.jsx)("div",{className:Pc.a.sectionColumns,children:n.metricsRow("Hold Events",f)}),Object(fi.jsx)("div",{className:Pc.a.sectionColumns,children:n.metricsRow("Recording Paused",v)}),Object(fi.jsx)("div",{className:Pc.a.sectionColumns,children:n.metricsRow("Silence Duration",b)})]}),Object(fi.jsxs)("div",{className:Pc.a.totals,children:[Object(fi.jsx)("div",{children:"Conversations held"}),Object(fi.jsx)("div",{className:Pc.a.bigDigits,children:p})]}),Object(fi.jsxs)("div",{className:Pc.a.totals,children:[Object(fi.jsx)("div",{children:"Turn Swaps"}),Object(fi.jsx)("div",{className:Pc.a.bigDigits,children:n.turnSwaps(o)})]})]})})]})}}],[{key:"labelTextForKey",value:function(e){switch(e){case"talking":return"Talk Time";case"listening":return"Listen Time";case"silent":return"Silence";case"holding":return"On Hold";case"queuing":return"Queuing";case"ringing":return"Ringing";case"routing":return"Routing";case"overtalk":return"Over Talk";default:return e}}},{key:"proportionalWidths",value:function(e){var t=Object.keys(e).map((function(t){return e[t]})).reduce((function(e,t){return e+t}),0),n={};return Object.keys(e).forEach((function(a){var r=e[a],i=100/t;n[a]=i*r})),n}},{key:"metricsHeader",value:function(e){return[Object(fi.jsx)("div",{className:Pc.a.rowTitle},"titles-heading")].concat(e.map((function(e,t){return Object(fi.jsx)("div",{style:{borderTop:"2px solid ".concat(e)}},"".concat(e,"-").concat(t,"-heading"))})))}},{key:"metricsRow",value:function(e,t){return[Object(fi.jsx)("div",{className:Pc.a.rowTitle,children:e},e)].concat(t.map((function(e,t){return Object(fi.jsx)("div",{className:Pc.a.figure,children:e},"".concat(t,"-").concat(e))})))}},{key:"turnSwaps",value:function(e){var t,n=0;return null===e?0:(Object.keys(e).map((function(t){return e[t]})).flat().sort((function(e,t){return e.Start<t.Start?-1:e.Start>t.Start?1:0})).forEach((function(e){t?e.number!==t&&(n+=1,t=e.number):t=e.number})),n)}},{key:"numberOfConversations",value:function(e,t){var n={};return Object.keys(e).filter((function(t){return e[t].isPrimary})).forEach((function(e){t[e].forEach((function(e){n["".concat(e.number,":").concat(e.opposing.number)]=1}))})),Object.keys(n).length}},{key:"talkAndListenTime",value:function(e,t){var n={talkTime:0,listenTime:0};return"undefined"!==typeof e&&null!==t&&Object.keys(e).forEach((function(a){var r=e[a].isPrimary?"talkTime":"listenTime";t[a].forEach((function(e){n[r]+=e.timelineEnd-e.timelineStart}))})),n}},{key:"callDurationFromSummary",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map((function(t){return e[t]})).reduce((function(e,t){return t+e}),0)}}]),n}(a.Component);Lc.defaultProps={sentences:null};var Rc=Lc,Mc=function(e){return Object(fi.jsx)(Rc,Object(u.a)({},e))};Mc.defaultProps={sentences:null,isVisible:!1};var Ac=Object(s.b)((function(e){return{status:e.status,callSummary:e.callSummary,participants:de(e),sentences:ke(e)}}))(Mc),Dc=n(36),Uc=n.n(Dc),Bc=n.p+"static/media/up-chevron-white.b8709411.svg",Fc=n.p+"static/media/down-chevron-white.58efb287.svg",Kc=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).handleSearchInputChange=a.handleSearchInputChange.bind(Object(ai.a)(a)),a.handlePreviousClicked=a.handlePreviousClicked.bind(Object(ai.a)(a)),a.handleNextClicked=a.handleNextClicked.bind(Object(ai.a)(a)),a.handleClearClicked=a.handleClearClicked.bind(Object(ai.a)(a)),a}return Object(y.a)(n,[{key:"handleSearchInputChange",value:function(e){(0,this.props.onSearchPhraseChanged)(e.currentTarget.value)}},{key:"handlePreviousClicked",value:function(){var e=this.props,t=e.search,n=t.currentPositionIndex,a=t.positionCount;(0,e.onSetMatchPositionIndex)(n>0?n-1:a-1)}},{key:"handleNextClicked",value:function(){var e=this.props,t=e.search,n=t.currentPositionIndex,a=t.positionCount;(0,e.onSetMatchPositionIndex)(n<a-1?n+1:0)}},{key:"handleClearClicked",value:function(){(0,this.props.onSearchPhraseChanged)(null,[])}},{key:"render",value:function(){var e=this.props.search,t="Search Transcript...",n=null!==e.searchPhrase?e.searchPhrase:"",a=e.currentPositionIndex,r=e.positionCount,i=n.length>0&&r>0;return Object(fi.jsxs)("div",{className:Uc.a.Search,children:[Object(fi.jsx)("input",{className:Uc.a.searchTextBox,type:"text",value:n,onChange:this.handleSearchInputChange,placeholder:t,onFocus:function(e){e.target.placeholder=""},onBlur:function(e){e.target.placeholder=t}}),i&&Object(fi.jsxs)("div",{className:Uc.a.searchNavigation,children:[Object(fi.jsx)("div",{children:"".concat(a+1," of ").concat(r)}),Object(fi.jsx)("img",{className:Uc.a.chevron,src:Bc,alt:"Previous match",height:"24",width:"24",onMouseDown:this.handlePreviousClicked}),Object(fi.jsx)("img",{className:Uc.a.chevron,src:Fc,alt:"Next match",height:"24",width:"24",onMouseDown:this.handleNextClicked}),Object(fi.jsx)("div",{className:Uc.a.spacer}),Object(fi.jsx)("button",{className:Uc.a.clearButton,type:"button",onClick:this.handleClearClicked,children:"CLEAR"})]})]})}}]),n}(a.Component);Kc.defaultProps={sentences:null};var Hc=Kc;function Wc(e){var t=e.search,n=e.onSearchPhraseChanged,a=e.onSetMatchPositionIndex,r=e.participants,i=e.sentences,o=e.transcription,s=e.onSetScrollToMatch,c=e.timeline;return Object(fi.jsx)(Hc,{search:t,onSearchPhraseChanged:n,onSetMatchPositionIndex:a,participants:r,sentences:i,transcription:o,onSetScrollToMatch:s,timeline:c})}Wc.defaultProps={sentences:null};var Vc=Object(s.b)((function(e){return{search:e.search,participants:de(e),sentences:ke(e),transcription:xe(e),timeline:Xe(e)}}),(function(e){return{onSearchPhraseChanged:function(t){e({type:br,payload:{searchPhrase:t}}),e(vr())},onSetMatchPositionIndex:function(t){e(pr(t))},onSetScrollToMatch:function(t){e(xa(t))}}}))(Wc),Gc=n(41),Yc=n.n(Gc),Xc=n.p+"static/media/close.325eaabb.svg",Jc=n.p+"static/media/up-chevron-disabled.75e1dbee.svg",qc=n.p+"static/media/down-chevron-disabled.50ca0970.svg",zc=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).onPreviousClicked=a.onPreviousClicked.bind(Object(ai.a)(a)),a.onNextClicked=a.onNextClicked.bind(Object(ai.a)(a)),a}return Object(y.a)(n,[{key:"onPreviousClicked",value:function(){var e=this.props,t=e.search,n=t.currentPositionIndex,a=t.positionCount;(0,e.onSetMatchPositionIndex)(n>0?n-1:a-1)}},{key:"onNextClicked",value:function(){var e=this.props,t=e.search,n=t.currentPositionIndex,a=t.positionCount;(0,e.onSetMatchPositionIndex)(n<a-1?n+1:0)}},{key:"render",value:function(){var e,t=this.props,a=t.callSummary,r=t.onClear,i=t.selectedItem,o=t.search;if("string"!==typeof i.identifier||0===i.identifier.length)return null;if(i.type===wr)e=Object(fi.jsx)(dc,{category:i.category,isSelected:!0});else if(i.type===Sr){var s=o.positions,c=n.channelIndicatorsForPositions(s),l=c.showLeftIndicator,u=c.showRightIndicator;e=Object(fi.jsx)(mc,{colors:a.keyCallers.colors,isSelected:!0,text:i.identifier,showLeftIndicator:l,showRightIndicator:u})}else{if(i.type!==Tr)return null;var d=o.positions,h=n.channelIndicatorsForPositions(d),p=h.showLeftIndicator,m=h.showRightIndicator;e=Object(fi.jsx)(mc,{colors:a.keyCallers.colors,isSelected:!0,text:i.identifier,showLeftIndicator:p,showRightIndicator:m})}var f=o.currentPositionIndex,v=o.positionCount;return Object(fi.jsxs)("div",{className:Yc.a.resultNavigator,children:[Object(fi.jsx)("button",{type:"button",className:Yc.a.button,onMouseDown:r,children:Object(fi.jsx)("img",{src:Xc,alt:"Clear",height:"18",width:"18"})}),Object(fi.jsx)("div",{className:Yc.a.searchItemContainer,children:e}),Object(fi.jsx)("div",{children:"".concat(f+1," of ").concat(v)}),Object(fi.jsx)("button",{type:"button",className:Yc.a.button,onMouseDown:this.onPreviousClicked,disabled:0===v,children:Object(fi.jsx)("img",{src:Jc,alt:"Previous match",height:"24",width:"24"})}),Object(fi.jsx)("button",{type:"button",className:Yc.a.button,onMouseDown:this.onNextClicked,disabled:0===v,children:Object(fi.jsx)("img",{src:qc,alt:"Next match",height:"24",width:"24"})})]})}}],[{key:"channelIndicatorsForPositions",value:function(e){return{showLeftIndicator:e.filter((function(e){return 1===e.channel})).length>0,showRightIndicator:e.filter((function(e){return 2===e.channel})).length>0}}}]),n}(a.Component);zc.defaultProps={sentences:null};var Qc=zc;function Zc(e){var t=e.callSummary,n=e.onClear,a=e.onSetMatches,r=e.onSetMatch,i=e.onSetScrollToMatch,o=e.selectedItem,s=e.transcription,c=e.participants,l=e.sentences,u=e.onSetMatchPositions,d=e.onSetMatchPositionIndex,h=e.search;return Object(fi.jsx)(Qc,{callSummary:t,onClear:n,onSetMatches:a,onSetMatch:r,onSetScrollToMatch:i,selectedItem:o,transcription:s,participants:c,sentences:l,onSetMatchPositions:u,onSetMatchPositionIndex:d,search:h})}Zc.defaultProps={sentences:null};var $c=Object(s.b)((function(e){var t=e.callSummary,n=e.knowledge;return{callSummary:t,search:e.search,selectedItem:n.selectedItem,participants:de(e),sentences:ke(e),transcription:xe(e)}}),(function(e){return{onClear:function(){e({type:Fr}),e(gr([])),e(fr([]))},onSetMatches:function(t){e(gr(t))},onSetMatch:function(t){e(yr(t))},onSetScrollToMatch:function(t){e(xa(t))},onSetMatchPositions:function(t){e(fr(t))},onSetMatchPositionIndex:function(t){e(pr(t))}}}))(Zc),el="tab-search",tl="tab-call-summary",nl="tab-knowledge",al="tab-insights",rl=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).handleTabClick=a.handleTabClick.bind(Object(ai.a)(a)),a}return Object(y.a)(n,[{key:"isValidSearchPhrase",value:function(){var e=this.props.search.searchPhrase;return"string"===typeof e&&e.length>0}},{key:"handleTabClick",value:function(e){var t=this.props.toggleTab;e.preventDefault();var n=e.currentTarget.id;t(n);var a=this.props,r=a.knowledgeSelectedItem,i=a.onSetPositionsFromSearchPhrase,o=a.onSetPositionsFromKnowledgeSelectedItem;if(n===el&&this.isValidSearchPhrase())i();else if(n===nl){var s=r.identifier;"string"===typeof s&&s.length>0&&o()}}},{key:"render",value:function(){var e=this.props,t=e.activeLayers,a=e.knowledgeSelectedItem,r=e.activeTab,i=Pi()({[yc.a.button]:!0,[yc.a.active]:r===el,[yc.a.inuse]:this.isValidSearchPhrase()}),o=Pi()({[yc.a.button]:!0,[yc.a.active]:r===tl}),s=Pi()({[yc.a.button]:!0,[yc.a.active]:r===nl,[yc.a.inuse]:n.knowledgeLayersInUse(a)}),c=Pi()({[yc.a.button]:!0,[yc.a.active]:r===al,[yc.a.inuse]:n.insightsLayersInUse(t)}),l={display:r===el?"block":"none"},u={display:r===tl?"block":"none"},d={display:r===nl?"block":"none"},h={display:r===al?"block":"none"};return Object(fi.jsxs)("section",{className:yc.a.SearchFilters,children:[Object(fi.jsxs)("div",{className:yc.a.tabs,children:[Object(fi.jsx)("button",{type:"button",id:el,className:i,onClick:this.handleTabClick,children:Object(fi.jsx)("span",{className:yc.a.chevron})}),Object(fi.jsxs)("button",{type:"button",id:tl,className:o,onClick:this.handleTabClick,children:["Call Summary ",Object(fi.jsx)("span",{className:yc.a.chevron})]}),Object(fi.jsxs)("button",{type:"button",id:nl,className:s,onClick:this.handleTabClick,children:["Knowledge ",Object(fi.jsx)("span",{className:yc.a.chevron})]}),Object(fi.jsxs)("button",{type:"button",id:al,className:c,onClick:this.handleTabClick,children:["Timeline Options ",Object(fi.jsx)("span",{className:yc.a.chevron})]}),Object(fi.jsx)("div",{className:yc.a.spacer}),r!==el&&Object(fi.jsx)($c,{}),Object(fi.jsx)(Ec,{})]}),Object(fi.jsx)("div",{className:yc.a.search,style:l,children:Object(fi.jsx)(Vc,{})}),Object(fi.jsx)("div",{className:yc.a.callSummary,style:u,children:Object(fi.jsx)(Ac,{isVisible:r===tl})}),Object(fi.jsx)("div",{className:yc.a.knowledge,style:d,children:Object(fi.jsx)(vc,{})}),Object(fi.jsx)("div",{className:yc.a.insights,style:h,children:Object(fi.jsx)(Cc,{})})]})}}],[{key:"knowledgeLayersInUse",value:function(e){return null!=e.identifier}},{key:"insightsLayersInUse",value:function(e){return[Ia,Pa,Ra,Ma,Aa,Da].filter((function(t){return e.includes(t)})).length>0}}]),n}(a.Component);function il(e){var t=e.activeLayers,n=e.knowledgeSelectedItem,a=e.search,r=e.onSetPositionsFromSearchPhrase,i=e.onSetPositionsFromKnowledgeSelectedItem,o=e.activeTab,s=e.onTabClicked;return Object(fi.jsx)(rl,{activeLayers:t,knowledgeSelectedItem:n,search:a,onSetPositionsFromSearchPhrase:r,onSetPositionsFromKnowledgeSelectedItem:i,activeTab:o,toggleTab:s})}il.defaultProps={activeLayers:[]};var ol=Object(s.b)((function(e){var t=e.activeLayers,n=e.knowledge,a=e.search;return{activeLayers:t,knowledgeSelectedItem:n.selectedItem,search:a,activeTab:Ee(e)}}),(function(e){return{onSetPositionsFromSearchPhrase:function(){e(vr())},onSetPositionsFromKnowledgeSelectedItem:function(){e(Lr())},onTabClicked:function(t){e(function(e){return{type:Zr,payload:e}}(t))}}}))(il),sl=n(18),cl=n.n(sl),ll=function(e){var t=e.name,n=e.onSelect,r=e.selectedIndex,i=[{id:"pip1-".concat(t),radioStyle:cl.a.radio1,pipStyle:cl.a.pip1,value:5},{id:"pip2-".concat(t),radioStyle:cl.a.radio2,pipStyle:cl.a.pip2,value:4},{id:"pip3-".concat(t),radioStyle:cl.a.radio3,pipStyle:cl.a.pip3,value:3},{id:"pip4-".concat(t),radioStyle:cl.a.radio4,pipStyle:cl.a.pip4,value:2},{id:"pip5-".concat(t),radioStyle:cl.a.radio5,pipStyle:cl.a.pip5,value:1}],o=function(e){var t=e.currentTarget;n(parseInt(t.value,10))};return Object(fi.jsx)("div",{className:cl.a.pipRating,children:Object(fi.jsx)("div",{className:cl.a.rating,children:i.map((function(e){return Object(fi.jsxs)(a.Fragment,{children:[Object(fi.jsx)("input",{type:"radio",id:e.id,name:t,value:e.value,className:e.radioStyle,onChange:o,checked:e.value===r&&r>0}),Object(fi.jsx)("label",{htmlFor:e.id,className:"".concat(cl.a.pip," ").concat(e.pipStyle),title:e.value})]},e.id)}))})})};ll.defaultProps={selectedIndex:0};var ul=ll,dl=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).state={rating:[]},a}return Object(y.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.rating;this.setState({rating:e})}},{key:"handleFinishClicked",value:function(){var e=this.props,t=e.onRateCall,n=e.rating,a=this.state.rating,r=!a.find((function(e){return 0===e.score}));JSON.stringify(n)!==JSON.stringify(a)&&r?t(a):r?window.alert("No changes were made"):window.alert("Please choose a rating for all categories.")}},{key:"handleCancelClicked",value:function(){var e=this.props,t=e.onCancelRateCall,n=e.rating,a=this.state.rating;JSON.stringify(n)!==JSON.stringify(a)?window.confirm("Warning your changes will be lost.")&&t(a):t(a)}},{key:"handleScoreChange",value:function(e,t){this.setState((function(n){return{rating:n.rating.map((function(n){var a=n.score;return n.salesforceId===t&&(a=e),Object(u.a)(Object(u.a)({},n),{},{score:a})}))}}))}},{key:"handleNoteChange",value:function(e,t){this.setState((function(n){return{rating:n.rating.map((function(n){var a=n.note;return n.salesforceId===t&&(a=e),Object(u.a)(Object(u.a)({},n),{},{note:a})}))}}))}},{key:"render",value:function(){var e=this,t=this.props.showCallRatingDialog,n=this.state.rating,a="Add note... (optional)",r=Pi()({[cl.a.mask]:!0,"ignore-nodestack":!0});return Object(fi.jsx)("div",{className:r,children:Object(fi.jsxs)("div",{className:cl.a.CallRating,style:{opacity:t?"1":"0"},children:[Object(fi.jsx)("div",{className:cl.a.modalHeader,children:Object(fi.jsx)("div",{className:cl.a.title,children:"How would you rate this call?"})}),Object(fi.jsxs)("div",{className:cl.a.modalBody,children:[Object(fi.jsx)("div",{children:"Completing this call rating helps our system to provide you with more accurate call metrics."}),Object(fi.jsx)("div",{className:cl.a.ratingRow,children:n.map((function(t){return Object(fi.jsxs)("div",{className:cl.a.ratingContainer,children:[Object(fi.jsx)("div",{className:cl.a.ratingTitle,children:t.type}),Object(fi.jsx)(ul,{name:t.salesforceId,onSelect:function(n){return e.handleScoreChange(n,t.salesforceId)},selectedIndex:t.score}),Object(fi.jsx)("textarea",{name:t.salesforceId,className:cl.a.noteDetails,rows:"3",placeholder:a,value:t.note,onChange:function(n){return e.handleNoteChange(n.target.value,t.salesforceId)},onFocus:function(e){e.target.placeholder=""},onBlur:function(e){e.target.placeholder=a}})]},t.salesforceId)}))})]}),Object(fi.jsxs)("div",{className:cl.a.modalFooter,children:[Object(fi.jsx)("button",{type:"button",className:cl.a.cancelButton,onClick:this.handleCancelClicked.bind(this),children:"CANCEL"}),Object(fi.jsx)("button",{type:"submit",className:cl.a.finishButton,onClick:this.handleFinishClicked.bind(this),children:"Finish"})]})]})})}}]),n}(a.Component);dl.defaultProps={rating:[]};var hl=dl,pl=Object(s.b)((function(e){var t=e.callRating;return{showCallRatingDialog:t.showCallRatingDialog,rating:t.rating}}),(function(e){return{onCancelRateCall:function(){e({type:Lt,payload:{showCallRatingDialog:!1}})},onRateCall:function(t){var n;e((n=t,function(e,t){if(window.parent.getVisualforce){var a=t(),r=a.auth,i=a.primaryUuid;if(r.jwtToken&&r.jwtToken.userId){var o=n.map((function(e){var t=Object(u.a)({},e);return t.salesforceId&&t.salesforceId.includes("tempID")&&delete t.salesforceId,t})),s={userId:r.jwtToken.userId,channelUuid:i,data:o};sn("saveRating",(function(t,n){if(n.status){var a=t.data?t.data:[];e({type:Rt,payload:{rating:a.map((function(e,t){return Object(u.a)(Object(u.a)({},e),{},{salesforceId:e.salesforceId?e.salesforceId:"tempID-".concat(t)})})),showCallRatingDialog:!1}})}else n.xhr.responseText?cn():window.alert("Problem saving new ratings!")}),JSON.stringify(s))}}else e({type:Rt,payload:{rating:n,showCallRatingDialog:!1}})}))}}}))(hl),ml=n(22),fl=n.n(ml),vl=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).state={selectedItem:null,selectedItemName:null,selectedItemKeywords:null},a.onClickClassification=a.onClickClassification.bind(Object(ai.a)(a)),a.onClickClose=a.onClickClose.bind(Object(ai.a)(a)),a}return Object(y.a)(n,[{key:"onClickClassification",value:function(e){var t=this.props.transcription.Categories.filter((function(t){return t.Name===e.currentTarget.dataset.metric}))[0],n=t.Keywords.map((function(e){for(var t=!1,n=!1,a=0;a<e.Mentions.length;a++)t="1"===e.Mentions[a].Channel,n="2"===e.Mentions[a].Channel;return{keyword:e.Keyword,showRightIndicator:n,showLeftIndicator:t}}));this.setState({selectedItem:e.currentTarget.dataset.metric,selectedItemName:t.DisplayName,selectedItemKeywords:n})}},{key:"onClickClose",value:function(){var e=this.props,t=e.onClose;(0,e.onItemSelected)(this.state.selectedItem),t()}},{key:"generateClassifications",value:function(e,t,n){var a=e.filter((function(e){return e.Type.toUpperCase()===t.toUpperCase()&&sc(e)})).sort((function(e,t){return cc(e)-cc(t)}));if(0===a.length)return null;var r=this.state.selectedItem;return a.map((function(e){var t=r===e.Name;return Object(fi.jsx)(dc,{category:e,isSelected:t,onClick:n},e.Name)}))}},{key:"renderKeyWordPills",value:function(e){var t=this.props.callSummary;return null===e?null:0===e.length?Object(fi.jsx)("span",{children:"No keywords found for this category"}):e.map((function(e){return Object(fi.jsx)(mc,{colors:t.keyCallers.colors,isSelected:!1,text:e.keyword,showLeftIndicator:e.showLeftIndicator,showRightIndicator:e.showRightIndicator,modalCategoryPill:!0})}))}},{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.show,a=e.transcription,r=this.state,i=r.selectedItemName,o=r.selectedItemKeywords;if(!n)return null;var s=a.Categories||[],c=this.generateClassifications(s,"Checkpoint",this.onClickClassification),l=this.generateClassifications(s,"Alert",this.onClickClassification),u=this.generateClassifications(s,"Concept",this.onClickClassification),d=this.renderKeyWordPills(o),h=null!==i?"Triggers:":null;return Object(fi.jsx)("div",{className:fl.a.mask,children:Object(fi.jsxs)("div",{className:fl.a.modal,children:[Object(fi.jsx)("div",{className:fl.a.modalHeader,children:Object(fi.jsx)("div",{className:fl.a.title,children:"Categories"})}),Object(fi.jsx)("span",{className:fl.a.selectedItemName,children:i}),Object(fi.jsxs)("div",{className:fl.a.triggers,children:[Object(fi.jsx)("span",{children:h}),Object(fi.jsx)("div",{className:fl.a.pillContainerKeywords,children:d})]}),Object(fi.jsxs)("div",{className:fl.a.categoriesContainer,children:[Object(fi.jsxs)("div",{className:fl.a.categoriesHeader,children:[Object(fi.jsxs)("div",{className:fl.a.headerTitle,children:[Object(fi.jsx)("div",{className:fl.a.title,children:"CheckPoints"}),Object(fi.jsx)("hr",{})]}),Object(fi.jsxs)("div",{className:fl.a.headerTitle,children:[Object(fi.jsx)("div",{className:fl.a.title,children:"Alerts"}),Object(fi.jsx)("hr",{})]}),Object(fi.jsxs)("div",{className:fl.a.headerTitle,children:[Object(fi.jsx)("div",{className:fl.a.title,children:"Concepts"}),Object(fi.jsx)("hr",{})]})]}),Object(fi.jsxs)("div",{className:fl.a.categoriesBody,children:[Object(fi.jsx)("div",{className:fl.a.pillContainer,children:c}),Object(fi.jsx)("div",{className:fl.a.pillContainer,children:l}),Object(fi.jsx)("div",{className:fl.a.pillContainer,children:u})]})]}),Object(fi.jsxs)("div",{className:fl.a.modalFooter,children:[Object(fi.jsx)("button",{type:"button",className:fl.a.cancelButton,onClick:t,children:"CANCEL"}),Object(fi.jsx)("button",{type:"button",className:fl.a.closeButton,onClick:this.onClickClose,disabled:null===i,children:"View Selection On Timeline"})]})]})})}}]),n}(a.Component);vl.defaultProps={show:!1};var bl=vl;var yl=Object(s.b)((function(e){var t=e.callSummary;return{show:e.knowledge.showClassificationsDialog,transcription:xe(e),callSummary:t}}),(function(e){return{onClose:function(){e({type:Er})},onItemSelected:function(t){e(Mr(t))}}}))((function(e){var t=e.onClose,n=e.onItemSelected,a=e.show,r=e.transcription,i=e.callSummary;return Object(fi.jsx)(bl,{onClose:t,onItemSelected:n,show:a,transcription:r,callSummary:i})})),gl=n(29),jl=n.n(gl),Ol=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).state={selectedItem:null,keyword:!1},a.onClickKeyword=a.onClickKeyword.bind(Object(ai.a)(a)),a.onClickClose=a.onClickClose.bind(Object(ai.a)(a)),a.onClickTopic=a.onClickTopic.bind(Object(ai.a)(a)),a.processKeywordsTopics=a.processKeywordsTopics.bind(Object(ai.a)(a)),a.generateKeywords=a.generateKeywords.bind(Object(ai.a)(a)),a.generateTopics=a.generateTopics.bind(Object(ai.a)(a)),a.generateMarkupForKeywordsTopics=a.generateMarkupForKeywordsTopics.bind(Object(ai.a)(a)),a}return Object(y.a)(n,[{key:"onClickKeyword",value:function(e){this.setState({selectedItem:e.currentTarget.dataset.metric,keyword:!0})}},{key:"onClickTopic",value:function(e){this.setState({selectedItem:e.currentTarget.dataset.metric,keyword:!1})}},{key:"processKeywordsTopics",value:function(e,t,n,a,r,i){var o={};return e[1][t].forEach((function(e){var t=o[e[n]]||Object(u.a)({},e);t[1]=!0,o[e[n]]=t})),e[2][t].forEach((function(e){var t=o[e[n]]||Object(u.a)({},e);t[2]=!0,o[e[n]]=t})),this.generateMarkupForKeywordsTopics(n,Object.values(o),a,r,i)}},{key:"generateKeywords",value:function(e,t,n){return 0===e[1].Keywords.length&&0===e[2].Keywords.length?Object(fi.jsx)("p",{className:"text-grey-primary",children:"No keywords found"}):this.processKeywordsTopics(e,"Keywords","Keyword",Sr,t,n)}},{key:"generateTopics",value:function(e,t,n){return 0===e[1].Keywords.length&&0===e[2].Keywords.length?Object(fi.jsx)("p",{className:"text-grey-primary",children:"No keywords found"}):this.processKeywordsTopics(e,"Topics","Topic",Tr,t,n)}},{key:"generateMarkupForKeywordsTopics",value:function(e,t,n){var a=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["#444","#aaa"],i=arguments.length>4?arguments[4]:void 0;return t.map((function(t){var n=a.state.selectedItem,o=!1;return null!==n&&(o=n===t.Keyword||n===t.Topic),Object(fi.jsx)(mc,{colors:r,isSelected:o,onClick:i,showLeftIndicator:!0===t[1],showRightIndicator:!0===t[2],text:t[e],modalPill:!0},"".concat(t[e]))}))}},{key:"onClickClose",value:function(){var e=this.props,t=e.onClose;(0,e.onItemSelected)(this.state),t()}},{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.show,a=e.transcription,r=e.callSummary,i=this.state.selectedItem;if(!n)return null;var o=this.generateKeywords(a,r.keyCallers.colors,this.onClickKeyword),s=this.generateTopics(a,r.keyCallers.colors,this.onClickTopic);return Object(fi.jsx)("div",{className:jl.a.mask,children:Object(fi.jsxs)("div",{className:jl.a.modal,children:[Object(fi.jsx)("div",{className:jl.a.modalHeader,children:Object(fi.jsx)("div",{className:jl.a.title,children:"All Keywords & Topics"})}),Object(fi.jsx)("div",{className:jl.a.subtitle,children:"Keywords"}),Object(fi.jsx)("hr",{}),Object(fi.jsx)("div",{className:jl.a.pillContainer,children:o}),Object(fi.jsx)("div",{className:jl.a.subtitle,children:"Topics"}),Object(fi.jsx)("hr",{}),Object(fi.jsx)("div",{className:jl.a.pillContainer,children:s}),Object(fi.jsxs)("div",{className:jl.a.modalFooter,children:[Object(fi.jsx)("button",{type:"button",className:jl.a.cancelButton,onClick:t,children:"CANCEL"}),Object(fi.jsx)("button",{type:"button",className:jl.a.closeButton,disabled:null===i,onClick:this.onClickClose,children:"View Selection On Timeline"})]})]})})}}]),n}(a.Component);Ol.defaultProps={show:!1};var _l=Ol;var xl=Object(s.b)((function(e){return{show:e.knowledge.showKeywordsTopicsDialog,transcription:xe(e),callSummary:e.callSummary}}),(function(e){return{onClose:function(){e({type:Hr})},onItemSelected:function(t){t.keyword?e(Dr(t.selectedItem)):e(Br(t.selectedItem))}}}))((function(e){var t=e.onClose,n=e.onItemSelected,a=e.show,r=e.transcription,i=e.callSummary;return Object(fi.jsx)(_l,{onClose:t,onItemSelected:n,show:a,transcription:r,callSummary:i})})),Cl=n(33),kl=n.n(Cl),wl=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).handlePrimaryClick=a.handlePrimaryClick.bind(Object(ai.a)(a)),a.handleSecondaryClick=a.handleSecondaryClick.bind(Object(ai.a)(a)),a}return Object(y.a)(n,[{key:"handlePrimaryClick",value:function(){var e=this.props,t=e.closeModal;(0,e.onPrimaryClicked)(),t()}},{key:"handleSecondaryClick",value:function(){(0,this.props.closeModal)()}},{key:"render",value:function(){var e=this.props,t=e.show,n=e.title,a=e.message,r=e.primaryButtonText,i=e.secondaryButtonText;return t?Object(fi.jsx)("div",{className:kl.a.mask,children:Object(fi.jsxs)("div",{className:kl.a.modal,children:[Object(fi.jsx)("div",{className:kl.a.modalHeader,children:Object(fi.jsx)("div",{"data-testid":"divTitle",className:kl.a.title,children:n})}),Object(fi.jsx)("div",{"data-testid":"divMessage",className:kl.a.message,children:a}),Object(fi.jsxs)("div",{className:kl.a.modalFooter,children:[i&&Object(fi.jsx)("button",{type:"button",className:kl.a.secondaryButton,onClick:this.handleSecondaryClick,children:i.toUpperCase()}),Object(fi.jsx)("button",{type:"button",className:kl.a.primaryButton,onClick:this.handlePrimaryClick,children:r})]})]})}):null}}]),n}(a.Component),Sl=Object(s.b)((function(e){var t=Ae(e);return{show:t.show,title:t.title,message:t.message,primaryButtonText:t.primaryButtonText,secondaryButtonText:t.secondaryButtonText,onPrimaryClicked:t.onPrimaryClicked}}),(function(e){return{closeModal:function(){e((function(e){e({type:Qn})}))}}}))(wl),Tl=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.onSetFocus;new $s("[data-tooltip]").onHover((function(e){return e.map((function(e){var t=new ni.a(e,{title:e.dataset.tooltip,html:!0,placement:"bottom",container:document.body,trigger:"manual"});return t.show(),"true"===e.dataset.tooltipFixedWidth&&t._tooltipNode.classList.add("fixed-width"),t}))})).onClear((function(e){e.forEach((function(e){e.dispose()}))})),new $s("[data-set-focus]").onClick((function(t){var n=Object(Fe.a)(t,1)[0].dataset.setFocus;e(n)}))}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isPlaying,a=t.scrub,r=t.playhead,i=t.onScrubberMoved;r!==e.playhead&&(n?(a.isUserModified&&e.playhead<=a.end&&r>a.end&&this.moveScrubToPlayheadArea(r),this.moveScrubToKeepPlayheadCentral(r),this.moveTranscriptionViewportToKeepPlayheadCentral(r)):i(Object(u.a)(Object(u.a)({},a),{},{isUserModified:!1})))}},{key:"moveScrubToPlayheadArea",value:function(e){var t=this.props,n=t.scrub,a=t.onScrubberMoved,r=n.end-n.start,i=Math.min(e,100-r);a({start:i,end:i+r})}},{key:"moveScrubToKeepPlayheadCentral",value:function(e){var t=this.props,n=t.scrub,a=t.onScrubberMoved,r=n.end-n.start,i=e-(n.start+r/2);if(!n.isUserModified||0===parseInt(100*i,10)){var o=Math.min(Math.max(0,n.start+i),100-r);a({start:o,end:o+r})}}},{key:"moveTranscriptionViewportToKeepPlayheadCentral",value:function(e){var t=this.props,n=t.viewport,a=t.onViewportMoved,r=n.span,i=e-(n.start+r/2);a({start:Math.min(Math.max(0,n.start+i),100-r),span:r})}},{key:"render",value:function(){var e=this.props,t=e.activeLayers,n=e.callSummary,a=e.showEditModal,r=e.showCallRatingDialog,i=e.onFinishAndRateClicked,o=e.showClassificationsDialog,s=e.showKeywordsTopicsDialog,c=e.jwtToken,l=e.showRatingButton,u=e.isRated,d=e.showErrorModal,h=n.keyCallers.colors,p=t.filter((function(e){return[Ia,Pa].includes(e)})).map((function(e){return Object(fi.jsx)(Ss,{metricType:e},e)}));return Object(fi.jsxs)("div",{className:"App",children:[Object(fi.jsx)(Ti,{onFinishAndRateClicked:i,showTransport:!0,jwtToken:c,showRatingButton:l,isRated:u}),Object(fi.jsxs)("div",{className:"appContainer container",children:[Object(fi.jsx)(ol,{activeLayers:t}),Object(fi.jsxs)("div",{className:"hideableContainer",children:[Object(fi.jsx)(Is,{id:"event-scrubber",children:Object(fi.jsx)(js,{plotWholeTimeline:!0,singleColor:"#49535c",children:Object(fi.jsx)(Bs,{plotWholeTimeline:!0})})}),Object(fi.jsx)(Hs,{}),Object(fi.jsxs)(js,{showTransport:!0,plotWholeTimeline:!1,colors:h,leftMargin:40,children:[p,Object(fi.jsx)(Bs,{plotWholeTimeline:!1})]})]}),Object(fi.jsx)(Mo,{canSetPlayHead:!0,plotWholeTimeline:!1})]}),a&&Object(fi.jsx)(Zs,{}),r&&Object(fi.jsx)(pl,{}),o&&Object(fi.jsx)(yl,{}),s&&Object(fi.jsx)(xl,{}),d&&Object(fi.jsx)(Sl,{})]})}}]),n}(a.Component);Tl.defaultProps={jwtToken:null,showRatingButton:!1,isRated:!1,showErrorModal:!1};var Nl=Object(s.b)((function(e){var t=e.primaryUuid,n=e.activeLayers,a=e.scrub,r=e.data,i=e.callSummary,o=e.playback,s=o.isPlaying,c=o.playhead,l=e.transcription.viewport,u=e.notes.showEditModal,d=e.callRating,h=d.showCallRatingDialog,p=d.rating,m=e.knowledge.showClassificationsDialog,f=e.knowledge.showKeywordsTopicsDialog,v=e.auth.jwtToken,b=p.length>0,y=!!p.find((function(e){return e.score>0}));return{primaryUuid:t,activeLayers:n,isPlaying:s,playhead:c,scrub:a,data:r,callSummary:i,timeline:Xe(e),viewport:l,showEditModal:u,showCallRatingDialog:h,showClassificationsDialog:m,showKeywordsTopicsDialog:f,jwtToken:v,showRatingButton:b,isRated:y,showErrorModal:De(e)}}),(function(e){return{onScrubberMoved:function(t){e(va(t))},onViewportMoved:function(t){e(Oa(t))},onFinishAndRateClicked:function(){e({type:Pt,payload:{showCallRatingDialog:!0}})},onSetFocus:function(t){e(wa(t))}}}))(Tl);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var El=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||c.d,Il=Object(c.e)((function(e,t){return t.type===Ca?ti({experienceOptions:e.experienceOptions,auth:e.auth,activeLayers:e.activeLayers,status:Object(u.a)(Object(u.a)({},Sa),{},{isDisplaying:e.status.isDisplaying}),scrub:Object(u.a)(Object(u.a)({},qa),{},{isVisible:e.scrub.isVisible}),eventTimeline:Object(u.a)(Object(u.a)({},Cr),{},{eventTimelineVisible:e.eventTimeline.eventTimelineVisible}),tabs:e.tabs},t):ti(e,t)}),El(Object(c.a)(l.a)));Il.dispatch(zr()),o.a.render(Object(fi.jsx)(s.a,{store:Il,children:Object(fi.jsx)(Nl,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[86,1,2]]]);
//# sourceMappingURL=main.91d67061.chunk.js.map