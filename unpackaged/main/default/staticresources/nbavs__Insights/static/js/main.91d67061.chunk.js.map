{"version":3,"sources":["components/NoteModal/NoteModal.module.scss","components/EventTimeline/EventTimeline.module.scss","components/CallSummary/CallSummary.module.scss","components/TranscriptionConversation/TranscriptionConversation.module.scss","components/CallRating/CallRating.module.scss","components/StandardChannelEventsLayer/StandardChannelEventsLayer.module.scss","components/SearchFilters/SearchFilters.module.scss","components/KnowledgeClassifications/KnowledgeClassifications.module.scss","components/Header/Header.module.scss","components/Knowledge/Knowledge.module.scss","components/TranscriptionNote/TranscriptionNote.module.scss","components/Transcription/Transcription.module.scss","components/TranscriptionNotes/TranscriptionNotes.module.scss","components/KnowledgeKeywordsTopics/KnowledgeKeywordsTopics.module.scss","components/Insights/Insights.module.scss","components/Dropdown/Dropdown.module.scss","components/Player/Player.module.scss","components/ErrorModal/ErrorModal.module.scss","components/KnowledgeClassificationPill/KnowledgeClassificationPill.module.scss","components/Search/Search.module.scss","components/OverflowMenu/OverflowMenu.module.scss","components/MetricsTimelineLayer/MetricsTimelineLayer.module.scss","components/KnowledgeKeywordTopicPill/KnowledgeKeywordTopicPill.module.scss","components/ResultNavigator/ResultNavigator.module.scss","components/NotesFilterSelector/NotesFilterSelector.module.scss","components/AudioEventLayer/AudioEventLayer.module.scss","components/LayoutOptions/LayoutOptions.module.scss","components/Avatar/Avatar.module.scss","store/actions/primaryUuid.js","routes/api/Environment.js","routes/api/Token.js","routes/api/ApiClient.js","routes/api/CallFlowApiClient.js","routes/api/SapienApiClient.js","shared/utility/constants.js","shared/utility/timeline.js","shared/utility/errors.js","routes/api/App.js","store/actions/events-helpers.js","store/selectors/common-selectors.js","store/selectors/timestampWithAudioOffset.js","shared/utility/formatting.js","store/selectors/index.js","store/actions/calls.js","store/constants/data.js","store/actions/events.js","store/constants/actions.js","assets/svgs/icon-account.svg","assets/svgs/icon-contact.svg","assets/svgs/icon-user.svg","store/selectors/authSelectors.js","store/selectors/noteSelectors.js","shared/utility/processing.js","store/actions/salesforce.js","store/constants/salesforce.js","store/actions/actions.js","store/actions/experienceOptions.js","store/actions/participants.js","store/actions/status.js","store/actions/audio.js","shared/utility/url.js","store/selectors/callerWithUuid.js","store/selectors/callAtTimestamp.js","store/selectors/eventsForPrimaryParticipant.js","store/actions/callSummary.js","store/actions/errorModal.js","store/actions/errors.js","store/actions/transcription.js","store/reducers/status.js","store/reducers/events.js","store/reducers/calls.js","store/constants/metrics-layers.js","store/reducers/activeLayers.js","store/reducers/audio.js","store/reducers/data.js","store/reducers/playback.js","store/actions/scrubber.js","store/reducers/scrub.js","store/reducers/call-summary.js","store/reducers/transcription.js","store/actions/notes.js","store/reducers/notes.js","store/reducers/callRating.js","store/actions/search.js","store/reducers/search.js","store/reducers/participants.js","store/actions/eventTimeline.js","store/reducers/eventTimeline.js","store/reducers/experienceOptions.js","store/constants/knowledge.js","store/actions/knowledge.js","store/reducers/knowledge.js","store/actions/auth.js","store/reducers/auth.js","store/actions/tabs.js","store/reducers/tabs.js","store/reducers/errorModal.js","store/reducers/index.js","store/reducers/primaryUuid.js","assets/svgs/logo-linear.svg","shared/types/index.js","components/Player/Player.jsx","store/selectors/audioTransport.js","store/selectors/clock.js","containers/PlayerContainer.jsx","components/LayoutOptions/LayoutOptions.jsx","components/LayoutOptions/LayoutOptionsHooks.jsx","containers/LayoutOptionsContainer.jsx","components/Header/Header.jsx","webpack:///./src/assets/svgs/icon-user.svg?1c21","assets/svgs/timeline.svg","shared/utility/caller.js","shared/utility/colors.js","components/TranscriptionConversation/TranscriptionConversation.jsx","store/selectors/selectedExperienceOption.js","store/selectors/emptyDataText.js","containers/TranscriptionConversationContainer.jsx","assets/svgs/icon-plus.svg","components/OverflowMenu/OverflowMenuHooks.js","components/OverflowMenu/OverflowMenu.jsx","store/constants/notes.js","components/TranscriptionNote/TranscriptionNoteHooks.jsx","components/TranscriptionNote/TranscriptionNote.jsx","containers/TranscriptionNoteContainer.jsx","components/NotesFilterSelector/NotesFilterSelector.jsx","components/NotesFilterSelector/NotesFilterSelectorHooks.jsx","containers/NotesFilterSelectorContainer.jsx","components/TranscriptionNotes/TranscriptionNotes.jsx","containers/TranscriptionNotesContainer.jsx","assets/svgs/icon-zigzag.svg","assets/svgs/icon-playback.svg","assets/svgs/icon-pause-white.svg","components/Transcription/Transcription.jsx","containers/TranscriptionContainer.jsx","assets/svgs/icon-customer-service.svg","assets/svgs/icon-urgent.svg","assets/svgs/icon-multiple.svg","assets/svgs/icon-note-unknown.svg","assets/svgs/icon-search-black.svg","assets/svgs/icon-on-hold.svg","assets/svgs/icon-down.svg","assets/svgs/icon-up.svg","assets/svgs/icon-conference.svg","assets/svgs/icon-pause.svg","assets/svgs/icon-transfer.svg","assets/svgs/icon-user-event.svg","store/constants/audio-events.js","components/AudioEventLayer/AudioEventLayer.jsx","store/selectors/callersAtTimestamp.js","containers/AudioEventLayerContainer.jsx","assets/svgs/icon-pause-skip.svg","store/constants/avatar.js","components/Avatar/Avatar.jsx","components/EventTimeline/EventTimeline.jsx","containers/EventTimelineContainer.jsx","components/MetricsTimelineLayer/Metrics.jsx","components/MetricsTimelineLayer/MetricsTimelineLayer.jsx","containers/MetricsTimelineLayerContainer.jsx","components/Scrubber/Scrubber.jsx","containers/ScrubberContainer.jsx","assets/svgs/icon-answer.svg","assets/svgs/icon-waiting.svg","components/StandardChannelEventsLayer/StandardChannelEventsLayer.jsx","containers/StandardChannelEventsLayerContainer.jsx","components/AuxiliaryScrubbers/AuxiliaryScrubbers.jsx","containers/AuxiliaryScrubbersContainer.jsx","components/NoteModal/TimeDropDown.jsx","components/NoteModal/RelatingToDropdown.jsx","components/NoteModal/TypeDropdown.jsx","components/NoteModal/NoteModal.jsx","store/selectors/participantSelectors.js","containers/NoteModalContainer.jsx","shared/utility/NodeStack.js","shared/utility/classifications.js","components/KnowledgeClassificationPill/KnowledgeClassificationPill.jsx","components/KnowledgeKeywordTopicPill/KnowledgeKeywordTopicPill.jsx","components/Knowledge/Knowledge.jsx","containers/KnowledgeContainer.jsx","components/Insights/Insights.jsx","containers/InsightsContainer.jsx","components/Dropdown/Dropdown.jsx","containers/FocusSwitcherContainer.jsx","components/CallSummary/CallSummary.jsx","containers/CallSummaryContainer.jsx","assets/svgs/up-chevron-white.svg","assets/svgs/down-chevron-white.svg","components/Search/Search.jsx","containers/SearchContainer.jsx","assets/svgs/close.svg","assets/svgs/up-chevron-disabled.svg","assets/svgs/down-chevron-disabled.svg","components/ResultNavigator/ResultNavigator.jsx","containers/ResultNavigatorContainer.jsx","components/SearchFilters/SearchFilters.jsx","containers/SearchFiltersContainer.jsx","components/CallRating/RatingPicker/RatingPicker.jsx","components/CallRating/CallRating.jsx","containers/CallRatingContainer.jsx","components/KnowledgeClassifications/KnowledgeClassifications.jsx","containers/KnowledgeClassificationsContainer.jsx","components/KnowledgeKeywordsTopics/KnowledgeKeywordsTopics.jsx","containers/KnowledgeKeywordsTopicsContainer.jsx","components/ErrorModal/ErrorModal.jsx","containers/ErrorModalContainer.jsx","App.jsx","serviceWorker.js","index.js"],"names":["module","exports","SET_PRIMARY_UUID","BASE_URL","process","CALLFLOW_URL","GATEKEEPER_URL","AGENT_TITLE","CUSTOMER_TITLE","Token","accessToken","userId","organisationId","this","ApiClient","baseUrl","auth","ClientOAuth2","clientId","clientSecret","accessTokenUri","tokenBaseUrl","a","token","owner","getToken","fetch","headers","Accept","Authorization","then","response","json","user","url","jwtToken","accept","includes","CallFlowApiClient","sfEnv","JSON","parse","localStorage","getItem","callflowUrl","SapienApiClient","sapienUrl","AUDIO_FORMAT","calculatePositionPercentage","position","timeline","rangeFactor","range","start","calculatePositionPercentageWithOffset","offsetPosition","transcriptionStart","calculateWidthPercentage","end","layerStyleWithScrubBounds","plotWholeTimeline","scrub","style","width","marginLeft","viewBoxForRange","Math","floor","join","scale","num","inMin","inMax","outMin","outMax","eventFlags","eventToProcess","event","csChange","isCsStateChange","isChannelStart","isChannelRing","isChannelAnswer","isChannelEnd","isChannelComplete","isBridge","isParkedTransfer","isQueuing","isRouting","isSecondary","isUnBridge","isConferenceIn","isConferenceOut","isRecordStart","isRecordStop","isHold","isUnHold","isListenIn","isListenInWhisper","isListenInBarge","isListenInDisconnect","console","log","eventName","flags","Object","keys","InsightsError","message","status","displayMessage","Error","LoadingError","BlockingInsightsError","statusMessage","blockingMessage","getCallList","client","doGet","ok","getCallForUuid","uuid","filterAndSortCallsByUniqueTimestamp","calls","filter","times","call","timeStart","push","filterCallsWithDuplicateStartTimes","flat","sort","b","Date","getTime","getCallsRelatedToUuids","uuids","getCallForUuidApiCall","Promise","resolve","forEach","data","length","eventsTruncatedToAudioDuration","events","duration","Array","isArray","Number","MAX_SAFE_INTEGER","remainingDuration","threshold","timestamp","map","min","callflowShimAddMissingEvents","callflow","newEvents","firstEvent","concat","lastEvent","callflowWithEventFlags","durationThreshold","getEvents","alert","getTranscription","getAudioAnalysis","getAudioRecording","onChunkReceived","reader","body","getReader","audioDuration","get","contentLength","receivedLength","chunks","read","done","value","blob","Blob","round","eventsWithParsedDataObjects","parsedData","e","warn","getAssociatedUuidsFromEvents","primaryUuid","extractedUuids","index","array","indexOf","getItemWithUuidFromArray","find","item","getPrimaryUuid","state","getParticipants","participants","getEventsState","getUuidFromEventsState","getEventsFromEventsState","getEventsByParticipants","eventsByParticipants","getCallsState","getCalls","getStatus","getLoadProgress","progress","getAudioState","audio","getAudioDuration","getTranscriptionState","transcription","getRawDataFromTranscriptionState","rawData","getUuidFromTranscriptionState","getSentencesFromTranscriptionState","sentences","getDataState","getChannelsFromDataState","channels","getScrubberVisibility","isVisible","getEventTimelineVisibility","eventTimeline","eventTimelineVisible","getActiveTab","tabs","activeTab","getExperienceOptions","experienceOptions","getSearchState","search","getStatusState","getIsDisplayingRoutingState","isDisplaying","getIsDisplayingState","routing","getKeyCallers","callSummary","getCallSummaryState","keyCallers","getErrorModal","errorModal","showErrorModal","show","getTimestampWithAudioOffsetFunc","createSelector","offsetEvent","timelineStop","shift","timelineStart","pop","offset","formatTime","seconds","h","parseInt","m","s","toString","padStart","displayTimeAndDate","time","date","mm","getMonth","dd","getDate","hours","getHours","mins","getMinutes","stringTime","getFullYear","uuidv4","replace","c","crypto","getRandomValues","Uint8Array","decode","str","match","dec","String","fromCharCode","timeAndDate","timeAsText","split","JSONParsedIfStringified","returnObject","html","txt","document","createElement","innerHTML","decodeHtml","error","localDescription","getTimeline","audioState","eventsState","timestampWithAudioOffset","isDisplayRouting","helpers","timestampAtPlayhead","playhead","sentenceTimestampAtPlayhead","playheadAtTimestamp","formattedTimeAtPlayhead","playSeconds","routingSeconds","routingOffset","isPlayheadInUnrecordedTime","abs","pausedPropertiesAtPlayhead","eventsForPrimaryParticipant","properties","isPaused","timeAtPauseEnd","playheadAtPauseEnd","timeStampAtPlayhead","recordStopEvent","startFlags","undefined","transcriptionOffsetPercentage","unrecordedOffset","source","isNonAudioTimeline","channelStart","unrecordedTime","timelineEnd","REQUEST_CALLS","requestCalls","type","payload","isLoading","INVALIDATE_CALLS","invalidateCalls","RECEIVE_CALLS","receiveCalls","isRecorded","isRecordingFlagFoundInCalls","isRecordedFlagFound","aFlags","bFlags","processCalls","STATUS_LOADING","STATUS_OK","STATUS_EMPTY","REQUEST_EVENTS","requestEvents","INVALIDATE_EVENTS","invalidateEvents","RECEIVE_EVENTS","receiveEvents","filterAndSortEvents","PROCESS_EVENTS","eventGroups","id","openEvents","processors","addGroup","group","openIf","closeIf","participantPhoneNumber","processedEvents","currentOpenEvents","key","newEvent","current","endFlags","closeEvents","processEvents","eventsToProcess","completeEvent","INITIAL_LOAD","PLAY","PLAY_FROM_START","PAUSE","SKIP_BACK","SKIP_FORWARD","MOVE_SCRUBBER","MOVE_PLAY_HEAD","SET_PLAYBACK_SPEED","TOGGLE_METRICS_LAYER","SHOW_METRICS_LAYER","HIDE_METRICS_LAYER","SET_AUDIO","MOVE_TRANSCRIPTION_PLAY_SCRUB","UPDATE_TRANSCRIPTION_VIEWPORT","UPDATE_TRANSCRIPTION_CONFIDENCE","SET_NOTE_VISIBILITY","IMPORT_NOTES","OPEN_RATE_CALL","CANCEL_RATE_CALL","RATE_CALL","SET_EVENT_TYPES","SET_JWT_TOKEN","SET_PARTICIPANT_NAMES","SET_CAN_SHARE","getAuth","getAuthenticatedUserId","getAuthenticatedUserName","displayName","userName","getNotesState","notes","getUnreadNoteAndCommentIdsForCurrentUser","unread","getNoteWithIdSelector","obj","noteId","getUnreadNoteAndCommentIdsForUser","reduce","thread","userActivity","noteModified","lastUserActivity","activity","lastRead","unreadComments","comment","modified","NotesFilter","all","onlyUnread","onlyAcknowledged","onlyUnAcknowledged","onlyMyNotes","onlyOpenNotes","closedNotes","getFilteredNotes","authenticatedUserId","note","isClosed","isAcknowledged","foundUnread","author","updatedUserActivityForUser","logTime","toISOString","compareObjectProperties","objectA","objectB","equal","DELETE_NOTE","deleteNote","REFRESH_UNREAD_NOTES","refreshUnreadNotes","dispatch","getState","ids","SET_NOTES","UPDATE_NOTE","updateNote","details","invokeSFAction","invoke","callBack","param","window","parent","getVisualforce","Manager","remoteAction","getAction","escape","invokeAction","handleTimeout","loadEventType","result","eventTypes","xhr","responseText","SET_PARTICIPANT_IMAGE","loadNotes","allNotes","eventType","isNoteEdited","newNote","oldNote","notesPropertiesAreEqual","isNaN","updateNotes","actionType","existingNote","timeInSeconds","minutes","timeVar","currentTime","authorName","text","eventTime","channelUuid","isShared","canShare","noteCreated","stringify","polarity","version","method","onDeleteNote","confirm","CREATE_EXPERIENCE_OPTIONS","addUuidToParticipant","participant","relatedUuids","numberOfAgents","isAgent","nextAgentColor","nextCustomerColor","numberOfCustomers","newParticipant","isPrimary","image","userIcon","initials","title","agentNumber","agents","classes","color","isInternalOnly","SET_PARTICIPANTS","buildParticipantsArray","participantNames","startTime","endTime","timeTalking","fromNumber","aUuid","fromSipDeviceId","fromUserId","newFromParticipant","participantNameItem","phoneNum","name","photoUrl","toNumber","bUuid","toSipDeviceId","toUserId","newToParticipant","dataParticipants","noOfAgents","number","prefix","fullNumber","fullTitle","addParticipantClassificationData","createParticipants","participantsWithClassificationData","channelEvents","isCallStart","isCallEnd","eventsFor","options","agent","agentName","toUpperCase","viewName","icon","avatar","customerName","createExperienceOptions","accountIcon","contactIcon","TOGGLE_ROUTING","LOAD_PROGRESS","setLoadProgress","percentage","SET_STATUS","setStatus","description","SET_NOTES_WIDTH","REQUEST_AUDIO","requestAudio","INVALIDATE_AUDIO","invalidateAudio","RECEIVE_AUDIO","receiveAudio","NO_AUDIO","noAudio","createAudioEvents","channel","startEvent","endEvent","channelLength","audioEvents","playTime","playEvent","playEvents","audioStart","stop","audioStop","playheadAtMediaPosition","media","mediaPositionAtPlayhead","getQuery","location","substring","query","callerWithUuid","callAtTimestamp","getNumberForPrimaryParticipant","getEventsForPrimaryParticipant","primaryNumber","eventsMatchingGroup","durationOfEventGroup","groupEventDurations","total","ringDuration","ringingStart","ringingEnd","max","eventsSummary","bridgedEvents","durations","talking","listening","overtalk","silent","sentencesForParticipant","durationKey","sentencesToCheckForOverlap","secondary","sentence","sentenceEnd","sentenceStart","clippedStart","clippedEnd","bridgeDuration","transcriptionDurationsWithinBridgedEvents","holding","queuing","ringing","SET_CALL_SUMMARY","setCallSummary","summary","ERROR_MODAL_SHOW","ERROR_MODAL_CLEAR","showBlockingErrorMessage","blockingInsightsError","onPrimaryClicked","showFetchError","REQUEST_TRANSCRIPTION","requestTranscription","RECEIVE_TRANSCRIPTION","receiveTranscription","analysis","normalised","mapMentionsToPositions","keyword","Mentions","mention","Pos","pos","Channel","processCategory","category","positions","phrases","keywords","Keywords","Phrases","Positions","phrase","Start","End","parseAndProcessTranscription","Categories","processTranscription","mainUser","recordingId","showAll","earliestCallIndex","maxTime","selectCallerWithUuid","callAtTimestampFunc","transcriptionFocus","Sentences","sentenceTimelineStart","sentenceTimelineEnd","isSentenceRunningToNextCall","aCaller","bCaller","processedSentence","callIndex","opposing","nextCall","aUuidNextCall","bUuidNextCall","aCallerNextCall","bCallerNextCall","startWithOffset","endWithOffset","Sentence","sortedSentences","sentencesFor","earliest","isInEarliestCall","i","splice","loadTranscription","getTranscriptionFromApi","currentUuid","currentSentences","blockingError","processChannels","channelData","talkTime","previous","timelineRange","processTalkTime","1","2","initialLoad","REQUEST_DATA","RECEIVE_DATA","play","pause","moveScrubber","setPlaybackSpeed","speed","movePlayHead","isUserAction","playback","getPlaybackState","toggleMetricsLayer","layer","moveTranscriptionPlayScrub","transcriptionPlayScrub","updateTranscriptionViewport","viewport","SET_COMPLETED_NOTES_VISIBILITY","focusOnPosition","span","getTimestampWithAudioOffset","scrubWidth","scrubDiff","scrubStart","scrubEnd","vpDiff","vpStart","RESET_STATE","validateAudioAndCalls","reject","blockingErrorFromLoading","initialiseWithPrimaryUuid","setPrimaryUuid","callCount","repeater","setInterval","clearInterval","simulateProgress","getAudioRecordingApiCall","createObjectURL","URL","updateProgress","cappedProgress","fetchAudio","getEventsApiCall","currentEvents","fetchEvents","getCallsRelatedToUuidApiCall","fetchCalls","loadCanShareRecording","ratingData","salesforceId","rating","loadRatings","participantsData","loadParticipantsName","loadData","catch","initialState","notesWidth","statusForState","BACKGROUND_NOISE_LEVEL","TRANSCRIPTION_CONFIDENCE","SHOW_NOTES","CLASH_WINS","AFFIRMATIONS","INTERRUPTIONS","STEALS","FILTER_HOLD_UNHOLD","FILTER_TRANSFER","FILTER_LISTEN_IN","FILTER_CALL_QUEUING","FILTER_NEW_PARTY","isPlaying","availableSpeeds","SET_SCRUBBER_VISIBILITY","setScrubberVisibility","visibility","isUserModified","direction","from","to","images","metrics","colors","titles","numbers","fullNumbers","fullTitles","names","fullNameNumbers","confidence","modifyNoteWithId","modification","selector","acknowledgeNote","closeNote","deleteComment","commentId","OPEN_NOTE_EDITOR","NoteEditMode","newComment","existingComment","isExistingItem","editMode","isNote","isComment","isNew","CLOSE_NOTE_EDITOR","closeNoteEditor","MARK_NOTE_AS_READ","SET_NOTES_FILTER","setNotesFilter","initialNoteState","relatedToTitle","showOnTimeline","showCompletedNotes","showEditModal","noteToEdit","commentToEdit","polarityTypes","showCallRatingDialog","SET_CURRENT_MATCH_POSITION_INDEX","setCurrentMatchPositionIndex","currentPosition","SET_MATCH_POSITIONS","setMatchPositions","setPositionsFromSearchPhrase","Words","words","searchWords","checkword","lastMatchingIndex","word","emptyWords","wordsLeftToSearch","w","substr","positionsMatchingSearchPhraseInTranscription","searchPhrase","getSearchPhrase","SET_SEARCH_PHRASE","setCurrentMatch","currentMatch","setMatches","matches","matchCount","positionCount","currentPositionIndex","SET_EVENTTIMELINE_VISIBILITY","setEventTimelineVisibility","KNOWLEDGE_TYPE_CLASSIFICATION","KNOWLEDGE_TYPE_KEYWORD","KNOWLEDGE_TYPE_TOPIC","OPEN_CLASSIFICATIONS_DIALOG","CLOSE_CLASSIFICATIONS_DIALOG","keywordPositionsForChannelMatchingIdentifier","items","identifier","topicPositionsForChannelMatchingIdentifier","topic","setPositionsFromKnowledgeSelectedItem","selectedItem","knowledge","getKnowledgeState","channel1","channel2","topicPositionsMatchingIdentifier","keywordPositionsMatchingIdentifier","SELECT_KNOWLEDGE_CLASSIFICATION","selectKnowledgeClassification","Name","SELECT_KNOWLEDGE_KEYWORD","selectKnowledgeKeyword","SELECT_KNOWLEDGE_TOPIC","selectKnowledgeTopic","CLEAR_SELECTED_KNOWLEDGE_ITEM","OPEN_KEYWORDS_TOPICS_DIALOG","CLOSE_KEYWORDS_TOPICS_DIALOG","showClassificationsDialog","showKeywordsTopicsDialog","autoRenewToken","tokenTimer","SET_AUTH_DISPLAY_NAME","getJWTToken","storedSfSessionId","gatekeeperUrl","namespace","namespaceParam","gatekeeperHeaders","Headers","authorization","jwt","Base64","jwtData","scope","exp","iat","nbf","setItem","getUserName","err","getAuthToken","getSessionId","orgUrls","isSalesforce","isProd","SapienHostUrl","GatekeeperHostUrl","callFlowHostUrl","clearTimeout","setTimeout","TOGGLE_TAB","primaryButtonText","secondaryButtonText","allReducers","combineReducers","action","newState","activeLayers","adjustment","callDirection","caller","processMetrics","callers","metricData","holdEvents","pauseEvents","Metrics","metric","metricKey","visible","some","callRating","activeLayersType","PropTypes","arrayOf","string","userActivityType","shape","object","bool","func","eventAtPlayhead","eventAtMediaPosition","commentType","created","noteType","noteList","quality","qualityNote","politeness","politenessNote","customerExperience","customerExperienceNote","agentKnowledge","agentKnowledgeNote","Player","props","clock","clockHandler","mediaPlayer","onMovePlayhead","updatePlaybackSpeed","startUpdatingPlayhead","updatePlayerState","createMediaPlayer","stopUpdatingPlayhead","playbackRate","callback","interval","audioTransport","onPauseClick","mediaPlayhead","paused","onPlayClick","onSkipBackClick","onSkipForwardClick","onRestartPlayHeadClick","onSetPlaybackSpeed","showTransport","playMode","styles","playDisabled","playFunction","isDisabled","className","tabIndex","onClick","disabled","skipBack","skipForward","changeSpeed","onChange","parseFloat","target","webSound","Howl","src","html5","format","html5sound","sound","timer","timerStartTime","lastCurrentTime","lastPlaybackRate","timerHandler","rate","seek","now","Component","getAudioTransport","getClock","connect","LayoutOptions","isScrubVisible","isTimelineVisible","onSetScrubVisibility","onSetTimelineVisibility","useState","isOpen","setIsOpen","label","handleToggleOpen","useLayoutOptionsHooks","container","button","role","onMouseDown","Header","callList","React","createRef","onCallListClicked","bind","showCallList","hideCallList","addEventListener","handleClickOutsideDropdown","removeEventListener","setState","callListItem","itemIndex","href","toLocaleString","toNumberDialled","display","onFinishAndRateClicked","showRatingButton","isRated","HeaderContainer","Branding","logo","alt","Exit","finish","ref","data-testid","callListContainer","defaultProps","_path","onSetScrubberVisibility","onSetEventTimelineVisibility","_extends","assign","arguments","prototype","hasOwnProperty","apply","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgIconUser","_ref","svgRef","titleId","xmlns","xmlnsXlink","height","viewBox","fill","d","ForwardRef","sortSentences","lhs","rhs","sortWords","textColorForBackground","hex","exec","red","green","blue","brightness","TranscriptionConversation","conversationRef","scrollTimeoutHandler","handleMouseDown","handleScrollWheel","updateViewport","sentences1","sentences2","shortestSentence","ret","timeScaling","intersectingPositions","wordsInSentence","matchingWords","isWordIntersectingPosition","textColor","isMatchingWord","nextWord","isMatchingNextWord","spanClass","classNames","isCurrentMatch","background","backgroundSize","backgroundColor","borderRadius","matchingClassName","matchFill","matchFillAnimate","isScrolling","playHeads","getElementsByClassName","playHead","element","rect","getBoundingClientRect","currentScroll","scrollTop","playHeadTop","top","midPoint","difference","person1","person","person2","merged","participantSentences","rows","styledSentence","styleSentence","tabStyle","borderBottom","iconStyle","initialsStyle","initialHtml","isFirstSentenceInRow","styling","primary","row","previousRow","isPlayHeadInRow","spacerRange","isPlayHeadInSpacer","spacerLocatorClass","playheadLocation","rowLocatorClass","conversationRow","spacer","data-timestamp-start","data-timestamp-end","playHeadMarker","conversationRowLinked","conversationRowRight","every","htmlIcon","htmlSentence","sentenceBody","htmlBlanking","blanking","contents","acc","el","secondaryLinked","dataset","timestampStart","timestampEnd","x","clientX","left","isOverPlayButton","y","clientY","onSetPlayHeadPosition","setPaused","onClickPlay","children","emptyText","conversation","getConversation","backgroundImage","timelineImage","backgroundRepeat","backgroundPosition","right","bottom","marginTop","noAgentDataOverlay","noAgentDataText","onWheel","transcriptionEventContainer","playHeadLine","playHeadStartText","conversationContainer","loadingScreen","loadingClasses","onTop","preserveAspectRatio","x1","y1","x2","y2","spreadMethod","stopColor","stopOpacity","opacity","radius","strokeWidth","stroke","strokeDasharray","timeString","size","onSetTranscriptionViewport","selectedExperienceOption","getEmptyDataText","getSelectedExperienceOption","perspective","toLowerCase","TranscriptionConversationContainer","useOverflowMenuHooks","onSelectOption","setPosition","useRef","animationCallback","activeElement","requestAnimationFrame","blur","handleOptionSelected","option","handleOnFocus","OverflowMenu","isLocked","locked","onFocus","popover","data-overflow-menu-popover","menu","GENERAL_NOTE_UUID","Action","edit","reply","delete","DisplayMode","useUserHooks","viewingUserId","isNoteAuthor","isGeneralNote","relatingToUserOrYou","idToMatch","youUserIfUserIdMatches","relatingToUserId","relatingToTitle","isCommentAuthor","isRelatingToUser","useTranscriptionNoteHooks","displayMode","interactive","showThread","setShowThread","isLastItem","isUnread","isEmptyThread","isEdited","useThreadHooks","onAcknowledge","onEditNote","onEditComment","onDeleteComment","onCloseNote","onNoteClick","onUpdateUserActivity","handleNoteClicked","handleDefaultAction","useMenuHooks","overflowOptions","createOverflowOptions","showThreadSection","toggleShowThread","relatingTo","showDefaultAction","showRelatingTo","showOverflowMenu","TranscriptionNote","borderLeft","borderLeftColor","onMouseUp","heading","subject","noteText","edited","overflowMenu","actionButton","acknowledged","closed","toggleThreadButton","TranscriptionNoteContainer","updateUserActivity","NotesFilterSelector","onSelectFilter","isFiltering","handleClickButton","parentElement","preventDefault","useNotesFilterSelectorHooks","highlighted","TranscriptionNotes","cachedNoteIds","filteredNotes","nextProps","nextState","nextContext","userList","listOfNotes","handleNoteClick","handleEditNote","handleEditComment","onNoteClicked","onOpenNoteEditor","getNoteWithId","setPlayHeadPosition","getNotes","NewNoteSection","newNoteContainer","handleNewNote","newNoteIcon","iconPlus","newNoteText","checkboxContainer","checkbox","handleShowNotesChecked","checked","checkboxLabel","htmlFor","onSetNoteVisibility","onToggleLayer","onSetCompletedNotesVisibility","addNewNoteDiv","showNotes","bottomMenuSpacer","TranscriptionNotesContainer","setNoteVisibility","visibile","openNoteEditor","SvgIconZigzag","Transcription","sliderRef","hide","playScrub","iconPause","iconPlayback","playButton","cx","cy","r","xlinkHref","playScrubLine","playScrubStyle","boxSizing","LayerContent","onSetConfidence","hidden","confidenceContainer","confidenceText","slider","valueAsNumber","onSetTranscriptionPlayScrub","currentTarget","clientHeight","transcriptionContainer","onMouseLeave","handleHideTranscriptionPlayHeadLayerOnMouseLeave","sections","onMouseMove","handleTranscriptionPlayHeadLayerMouseMove","channelColors","playHeadLayer","confidenceGauge","isVertical","TranscriptionContainer","updateTranscriptionConfidence","CLASH_WIN","AFFIRMATION","INTERRUPTION","STEAL","MULTIPLE_EVENTS","NOTE_EVENT","SEARCH_EVENT","CALL_EVENT","AudioEventLayer","preRenderedEventsKey","preRenderedEvents","subtype","iconUnknownNote","iconUrgent","iconMultiple","getNoteIcon","iconSearch","getCallEventIcon","iconCustomerService","callersAtTimestamp","knowledgeSelectedItem","eventsKey","isEqual","generateEvents","generateNoteEvents","generateSearchEvents","generateClassificationEvents","generateKeywordEvents","generateTopicEvents","callEvents","generateCallEvents","secondaryCallEvents","elements","generateEventList","eventItem","groupedEvents","channelNumber","labelForEventType","groupSize","subType","timestampThreshold","groupingFunction","consolidateEvents","tmpGroup","onLastItem","nextItemBeyondThreshold","groupedItem","filteredEvents","isEventTypeInActiveLayers","filterInvisibleEvents","callSummaryAtTime","ClashLine","consolidatedEvents","groupEvents","scrubAsTime","clusterThreshold","clusterEvents","iconForEventType","channelClassName","lineStyle","iconClasses","ClashIcon","lineClasses","clusterItem","data-tooltip","clusterSize","textAnchor","eventList","findIndex","wordList","generateKnowledgeEvents","classification","DisplayName","Keyword","Topics","Topic","callEventIconLabel","isStart","layerClasses","generateOrUsePreRenderedEvents","node","isLayerMatchingEventType","iconOnHold","iconConference","iconUserEvent","iconTransfer","callEventIconImage","callAtTimeStampFunc","AudioEventLayerContainer","callersAtTimestampFunc","callerWithUuidFunc","AVATAR_MEDIUM","AVATAR_LARGE","Avatar","sizes","isAvatar","svgStyle","imgStyle","svg","iconx","icony","img","aria-label","svgIcon","EventTimeline","isEntryExitLayerDismissed","preRenderedSentencesKey","preRenderedSentences","hideEntryExitLayerHandler","handleClickReviewNotes","prevProps","prevState","snapshot","singleColor","padding","isSub","sentenceWidth","markerPosition","markersShown","callerStyle","eventsForSentence","callerStyleForSentence","marker","isConference","isShowConference","conferenceClass","conference","sentenceStyle","conferencePattern","callerName","markerText","markerKey","firstUuidForCaller","avatarStyle","sentenceMarkerAvatarTop","sentenceMarkerAvatarBottom","setFocusStyle","focusSwitcherTop","focusSwitcherBottom","sentenceMarker","data-marker-title","data-set-focus","data-tooltip-fixed-width","sentenceKey","createSentences","leftMargin","firstSentence","lastSentence","startOfFirst","endOfLast","leftPercentage","avatarOpacity","fadeIn","leftPercentageDifference","zIndex","paddingLeft","canSetPlayhead","pausedProperties","handlePlayheadLayerMouseMove","playheadTop","playheadTime","playheadBottom","createSkipPauseHandler","pauseSkipIcon","scrubRange","numberOfStampsDisplayed","timeGapDuration","numberOfStamps","timeStamps","xPos","timeStamp","timeStampLine","timeStampText","onHideScrubAndTimeline","onStartPlaying","onRestartPlaying","displayedExperienceOption","showEntryExitLayer","isPlayheadAtStart","buttonText","buttonType","restart","leftIndent","overlay","overlayContentFlex","channelLabel","unreadNotes","notificationBell","notificationCount","reviewButton","closeButton","onSetPlayhead","stopPropagation","enabled","bounds","pageX","hideSentenceLayer","isStatusOk","sentenceLayer","showGradient","EventLayer","avatarLayer","timestampsLayer","gradientLayer","playheadLayer","entryExitLayer","loadingOverlay","rx","gradientClasses","gradientStart","gradientEnd","offsets","overlayMargin","hexColor","EventTimelineContainer","transcriptionData","errorCallback","nameForKey","paths","pathsForData","lines","linesForKey","line","isStepped","isFloating","isCurved","isInverted","path","plot","pen","lastPlot","controlWidth","bezier","first","second","plotPoints","confidenceDataForChannel","noiseDataForChannel","MetricsTimelineLayer","metricType","useData","forKey","plotline","pathForMetric","MetricsTimelineLayerContainer","Scrubber","isDragging","isMoving","didDrag","handleClick","handleScroll","handleMouseMove","dragStart","dragEnd","moveScrub","clicked","onScrubDragged","pointerOffset","updateScrubState","onScrubPositionChange","isUserModifyingScrub","setScrub","HTMLElement","minX","clickX","clickPercent","scrubPercentage","distanceFromStart","distanceFromEnd","setDragState","buttons","hold","updatePlayhead","zoom","deltaY","newScrub","noAgentDataState","marginRight","ry","ScrubberContainer","StandardChannelEventsLayer","isDisplayingRouting","microClusterThreshold","filterRoutingEvents","filterSelectedEvents","isStartFullHeight","isEndFullHeight","subHeightTop","containerClass","markerLineClasses","small","eventContainer","leftMost","rightMost","containerStyle","markerLineStyles","textAlign","eventClass","transfer","ring","bridge","wholeTimeline","eventStyle","startIconStyle","endIconStyle","shouldMicroCluster","startIcon","iconImageForEvent","endIcon","iconLevel","primaryClass","secondaryClass","event1","event2","overlayStyle","primaryChannelStyle","borderColor","secondaryChannelStyle","routingOverlay","unrecordedTimeLabel","eventElements","isStartIcon","iconAnswer","iconWaiting","isParkOtherForTransfer","isRequestOnHold","isRequestUnHold","iconImage","microClusteredEndIcon","iconLabel","startLabel","containerClassName","microClusteredEndIconContainer","markerLines","leftLine","rightLine","borderRightColor","isAlwaysShown","filterRequiredForEvent","StandardChannelEventsLayerContainer","AuxiliaryScrubbers","onScrubberMoved","infoSection","scrubLegend","propTypes","isRequired","TimeDropDown","dropDownOpen","timePickerConfig","toggleDropDown","handleClickOutside","contains","setTime","timeChecked","canEdit","config","newValue","storedValue","timeOfEvent","dropdown","timeDropdown","timePicker","numberPicker","upButton","increment","numberInput","defaultValue","onInput","handleTextChange","onKeyDown","handleKeyPress","onBlur","handleLoseFocus","downButton","decrement","RelatingToDropdown","selectedUser","handleUserClick","dropdownItem","dropdownItemWithIcon","dropdownItemIcon","userButton","dropdownButtonWithIcon","dropdownButtonIcon","dropdownButton","createUserButton","dropdownContent","relatingToList","TypeDropdown","typeId","handleTypeClicked","typeButton","selectedTypeId","selectedType","eventTypesList","handleTypeClick","createTypeButton","renderTypeList","NoteModal","meId","meName","selectedNote","timeInUSeconds","createUserList","shareChecked","acknowledgeChecked","canAcknowledge","typeList","handleAddNoteClicked","handleDeleteNoteClicked","handlePolarityClick","handleSubmitClicked","handleAddCommentClicked","handleDeleteCommentClicked","onUpdateNote","totalTime","newThread","getParticipantById","threadUpToCommentToEdit","threadContainer","onCloseNoteEditor","noteTitle","titleForEditMode","addNoteButton","buttonTextForEditMode","canShareNote","placeholderText","disableStyle","modalBodyDisabled","maskClasses","mask","modalHeader","modalBody","noteDetailsContainer","detailColumn","timeDetailColumn","handleEventTimeChecked","userDetailColumn","relatingToDetailColumn","polarityDetailColumn","commentToReplyTo","noteTextContainer","noteDetails","handleTextUpdate","placeholder","shareContainer","checkbox2","handleAcknowledgeNote","handleShareNote","modalFooter","deleteButton","cancelButton","addButton","getParticipantByIdSelector","found","relativeUuid","NodeStack","hover","handler","clear","click","elementsMatchingSelectorAndEvent","filterElements","querySelectorAll","pageY","classificationIsPositive","Trigger","CategoryValue","classificationIsWarning","classificationIsNegative","classificationIsException","classificationIsInfoThatHappened","classificationIsTriggered","classificationWeighting","KnowledgeClassificationPill","isSelected","classificationPill","indicatorClasses","classificationIndicator","positive","negative","warning","info","tooltip","classificationDescription","data-metric","data-metric-selected","onKeyPress","pillText","KnowledgeKeywordTopicPill","showLeftIndicator","showRightIndicator","modalPill","modalCategoryPill","pillStyle","pill","pillModal","pillCategoryModal","pillColourContainer","Knowledge","onSetScrollToMatch","onClassificationSelected","onKeywordSelected","onTopicSelected","loadProgress","progressBarContainer","progressBarOuter","progressBar","onClickShowAllClassifications","onClickShowAllKeyWords","loadingBar","allClassifications","generateAllClassifications","generateKeywords","topics","generateTopics","totalClassifications","totalKeysAndTopics","content","column","classificationsExceptionColumn","classificationsExceptionHeader","pillContainer","hasClassificationExceptionsOrInfo","classificationContainer","classificationsEmpty","Type","handleClassificationClick","processChannelClassifications","handleKeywordClick","processKeywordsTopics","handleTopicClick","classifications","outerKey","innerKey","combined","generateMarkupForKeywordsTopics","values","onSetSearchMatch","Insights","handleInputChange","onToggleRouting","output","detail","subtitle","isSubtitled","formCheck","indicator","hasUnrecordedTime","calculateStatistics","formattedUnrecordedTime","eventMetrics","leftMetrics","thirdWidthColumn","thirdWidth","halfWidthColumn","halfWidth","separator","renderMetrics","clashWins","affirmations","interruptions","steals","InsightsContainer","Dropdown","selection","selected","handleChange","dropdownHTML","dropdownToggle","dropdownBackground","optionsList","FocusSwitcherContainer","onSetPrimaryUuid","newSelection","CallSummary","isViewExpanded","barRefs","bars","labels","toggleExpandedView","plotLabelLines","proportionalWidths","callDurationFromSummary","toFixed","vectorEffect","shapeRendering","data-width","labelTextForKey","leftOffset","containerWidth","shrinkableLabels","overflow","bar","labelWidth","barWidth","barWidthAsPercentage","labelWidthAsPercentage","useableOverflow","leftBarPosition","xLinePos","leftLabelPosition","lineWidth","classList","add","flip","remove","section","header","headerItem","buttonShowMore","summaryBar","showAlternativeStatus","conversations","numberOfConversations","silenceDurations","slice","SilenceRatio","buttonStyle","buttonShowLess","summaryLines","summaryLabels","metricsSection","metricsTable","sectionColumns","metricsHeader","metricsRow","totals","bigDigits","turnSwaps","totalValue","proportionalValues","factor","rowTitle","borderTop","figure","currentTalker","swaps","listenTime","timeKey","CallSummaryContainer","Search","handleSearchInputChange","handlePreviousClicked","handleNextClicked","handleClearClicked","onSearchPhraseChanged","onSetMatchPositionIndex","showSearchNavigator","searchTextBox","searchNavigation","chevron","upChevron","downChevron","clearButton","SearchContainer","ResultNavigator","onPreviousClicked","onNextClicked","onClear","channelIndicatorsForPositions","resultNavigator","close","searchItemContainer","upChevronGrey","downChevronGrey","ResultNavigatorContainer","onSetMatches","onSetMatch","onSetMatchPositions","TAB_SEARCH","TAB_CALL_SUMMARY","TAB_KNOWLEDGE","TAB_INSIGHTS","SearchFilters","handleTabClick","toggleTab","tab","onSetPositionsFromSearchPhrase","onSetPositionsFromKnowledgeSelectedItem","isValidSearchPhrase","searchTabClasses","active","inuse","callSummaryTabClasses","knowledgeTabClasses","knowledgeLayersInUse","insightsTabClasses","insightsLayersInUse","searchContentStyle","callSummaryContentStyle","knowledgeContentStyle","insightsContentStyle","insights","SearchFiltersContainer","onTabClicked","RatingPicker","onSelect","selectedIndex","radioButtons","radioStyle","radio1","pipStyle","pip1","radio2","pip2","radio3","pip3","radio4","pip4","radio5","pip5","handleRadioSelected","pipRating","pip","CallRating","onRateCall","oldRaing","newRating","isAllRated","score","onCancelRateCall","sfId","newScore","ratingRow","ratingContainer","ratingTitle","handleScoreChange","evt","handleNoteChange","handleCancelClicked","finishButton","handleFinishClicked","newData","newItem","newRatings","KnowledgeClassifications","selectedItemName","selectedItemKeywords","onClickClassification","onClickClose","onClose","onItemSelected","categories","checkpoints","generateClassifications","alerts","concepts","keyWords","renderKeyWordPills","triggersTitle","modal","triggers","pillContainerKeywords","categoriesContainer","categoriesHeader","headerTitle","categoriesBody","KnowledgeKeywordsTopics","onClickKeyword","onClickTopic","ErrorModal","handlePrimaryClick","handleSecondaryClick","closeModal","secondaryButton","primaryButton","App","onSetFocus","onHover","Tooltip","placement","trigger","tooltipFixedWidth","_tooltipNode","tooltips","dispose","setFocus","moveScrubToPlayheadArea","moveScrubToKeepPlayheadCentral","moveTranscriptionViewportToKeepPlayheadCentral","diff","onViewportMoved","graphLayers","canSetPlayHead","CallRatingContainer","ErrorModalContainer","port","Boolean","hostname","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","scrubInitialState","eventTimelineInitialState","applyMiddleware","thunk","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.91d67061.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"mask\":\"NoteModal_mask__1sUur\",\"NoteModal\":\"NoteModal_NoteModal__1CEpf\",\"modalHeader\":\"NoteModal_modalHeader__G3xba\",\"title\":\"NoteModal_title__W7Jhu\",\"modalBody\":\"NoteModal_modalBody__3C9UD\",\"modalBodyDisabled\":\"NoteModal_modalBodyDisabled__3Q1R5\",\"noteDetailsContainer\":\"NoteModal_noteDetailsContainer__2Uque\",\"threadContainer\":\"NoteModal_threadContainer__2rgPO\",\"detailColumn\":\"NoteModal_detailColumn__3j5i8\",\"timeDetailColumn\":\"NoteModal_timeDetailColumn__3oSOl\",\"userDetailColumn\":\"NoteModal_userDetailColumn__3873S\",\"relatingToDetailColumn\":\"NoteModal_relatingToDetailColumn__1pydu\",\"polarityDetailColumn\":\"NoteModal_polarityDetailColumn__S5HQY\",\"timeInput\":\"NoteModal_timeInput__A0BE8\",\"dropdown\":\"NoteModal_dropdown__190h9\",\"timeDropdown\":\"NoteModal_timeDropdown__34kHu\",\"dropdownButton\":\"NoteModal_dropdownButton__3vsAb\",\"dropdownButtonWithIcon\":\"NoteModal_dropdownButtonWithIcon__14PCC\",\"dropdownButtonIcon\":\"NoteModal_dropdownButtonIcon__1UAVK\",\"typeToggle\":\"NoteModal_typeToggle__10u6g\",\"dropdownContent\":\"NoteModal_dropdownContent__Qsz7N\",\"timeToggle\":\"NoteModal_timeToggle__1-Dbp\",\"dropdownItem\":\"NoteModal_dropdownItem__o06A4\",\"dropdownItemWithIcon\":\"NoteModal_dropdownItemWithIcon__11Y9K\",\"dropdownItemIcon\":\"NoteModal_dropdownItemIcon__2lT0D\",\"dropdownBackground\":\"NoteModal_dropdownBackground__VLJmq\",\"noteTextContainer\":\"NoteModal_noteTextContainer__2Q5uZ\",\"noteDetails\":\"NoteModal_noteDetails__2QRGe\",\"shareContainer\":\"NoteModal_shareContainer__1YoJG\",\"modalFooter\":\"NoteModal_modalFooter__1gKrE\",\"closeButton\":\"NoteModal_closeButton__3LD5c\",\"cancelButton\":\"NoteModal_cancelButton__KgG6g\",\"addButton\":\"NoteModal_addButton__EWZrV\",\"deleteButton\":\"NoteModal_deleteButton__3Y1ib\",\"timePicker\":\"NoteModal_timePicker__1pzBZ\",\"numberPicker\":\"NoteModal_numberPicker__22GIX\",\"numberInput\":\"NoteModal_numberInput__1Y-YM\",\"upButton\":\"NoteModal_upButton__2eVrI\",\"downButton\":\"NoteModal_downButton__NNB7z\",\"checkboxContainer\":\"NoteModal_checkboxContainer__3ZLxn\",\"checkboxLabel\":\"NoteModal_checkboxLabel__24vPa\",\"checkbox\":\"NoteModal_checkbox__7QcMD\",\"checkbox2\":\"NoteModal_checkbox2__2xXfi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"EventTimeline\":\"EventTimeline_EventTimeline__33wCA\",\"ControlLayer\":\"EventTimeline_ControlLayer__3I9iP\",\"EventLayer\":\"EventTimeline_EventLayer__2vguG\",\"LayerContent\":\"EventTimeline_LayerContent__755Wd\",\"overlayMargin\":\"EventTimeline_overlayMargin__3Y6ok\",\"gradientLayer\":\"EventTimeline_gradientLayer__2bcZi\",\"gradientStart\":\"EventTimeline_gradientStart__fe28T\",\"gradientEnd\":\"EventTimeline_gradientEnd__1FIgX\",\"sentenceMarker\":\"EventTimeline_sentenceMarker__210VZ\",\"focusSwitcherTop\":\"EventTimeline_focusSwitcherTop__1LiA0\",\"focusSwitcherBottom\":\"EventTimeline_focusSwitcherBottom__1loOO\",\"sentenceMarkerAvatarTop\":\"EventTimeline_sentenceMarkerAvatarTop__1O-ia\",\"sentenceMarkerAvatarBottom\":\"EventTimeline_sentenceMarkerAvatarBottom__3Ph4J\",\"sentence\":\"EventTimeline_sentence__jg4lB\",\"conference\":\"EventTimeline_conference__2Eby2\",\"top\":\"EventTimeline_top__2Wmfw\",\"bottom\":\"EventTimeline_bottom__1jFB9\",\"playhead\":\"EventTimeline_playhead__AyxS7\",\"playheadTop\":\"EventTimeline_playheadTop__3Q8LR\",\"playheadBottom\":\"EventTimeline_playheadBottom__2Vz-9\",\"playheadTime\":\"EventTimeline_playheadTime__3MIEW\",\"timeStamp\":\"EventTimeline_timeStamp__2ot5c\",\"timeStampLine\":\"EventTimeline_timeStampLine__hoyPZ\",\"timeStampText\":\"EventTimeline_timeStampText__3KcwP\",\"overlay\":\"EventTimeline_overlay__2aUBd\",\"transport-container\":\"EventTimeline_transport-container__1JTo3\",\"transport-button\":\"EventTimeline_transport-button__1qMlf\",\"start\":\"EventTimeline_start__18fGt\",\"restart\":\"EventTimeline_restart__1SD5f\",\"overlayContentFlex\":\"EventTimeline_overlayContentFlex__25gAH\",\"info-box\":\"EventTimeline_info-box__2tBxX\",\"info-displaying-text\":\"EventTimeline_info-displaying-text__3zglK\",\"channelLines\":\"EventTimeline_channelLines__2PYg_\",\"channelLabel\":\"EventTimeline_channelLabel__17jRE\",\"tinyNumber\":\"EventTimeline_tinyNumber__298XW\",\"hideEventTimeline\":\"EventTimeline_hideEventTimeline__1Ts_P\",\"showEventTimeline\":\"EventTimeline_showEventTimeline__6kP7r\",\"showEventTimelineContent\":\"EventTimeline_showEventTimelineContent__OyRJo\",\"showIcon\":\"EventTimeline_showIcon__3LR3W\",\"pauseSkipIcon\":\"EventTimeline_pauseSkipIcon__1Z7lW\",\"progressBarContainer\":\"EventTimeline_progressBarContainer__me3sx\",\"progressBarOuter\":\"EventTimeline_progressBarOuter__2amQO\",\"progressBar\":\"EventTimeline_progressBar__6AoIF\",\"closeButton\":\"EventTimeline_closeButton__w6MsB\",\"unreadNotes\":\"EventTimeline_unreadNotes__2oRWZ\",\"notificationBell\":\"EventTimeline_notificationBell__3J2q2\",\"notificationCount\":\"EventTimeline_notificationCount__336nT\",\"reviewButton\":\"EventTimeline_reviewButton__3hWjI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"CallSummary_header__1BrBi\",\"summaryBar\":\"CallSummary_summaryBar__29dIH\",\"summaryLines\":\"CallSummary_summaryLines__1o5UL\",\"summaryLabels\":\"CallSummary_summaryLabels__O3NWb\",\"label\":\"CallSummary_label__1Ad0x\",\"line\":\"CallSummary_line__1ABtQ\",\"group\":\"CallSummary_group__2Snbk\",\"flip\":\"CallSummary_flip__nesyS\",\"section\":\"CallSummary_section__1TjqM\",\"sectionColumns\":\"CallSummary_sectionColumns__2exPN\",\"talking\":\"CallSummary_talking__1fO-y\",\"listening\":\"CallSummary_listening__2mQKD\",\"overtalk\":\"CallSummary_overtalk__Ez4YV\",\"silent\":\"CallSummary_silent__22eJS\",\"holding\":\"CallSummary_holding__10Wlo\",\"queuing\":\"CallSummary_queuing__3noF0\",\"routing\":\"CallSummary_routing__2xLTH\",\"ringing\":\"CallSummary_ringing__3dJg9\",\"agent\":\"CallSummary_agent__HcXtE\",\"customer\":\"CallSummary_customer__M0Ach\",\"headerItem\":\"CallSummary_headerItem__3Kfka\",\"buttonShowLess\":\"CallSummary_buttonShowLess__2u-v-\",\"buttonShowMore\":\"CallSummary_buttonShowMore__q9TAD\",\"metricsSection\":\"CallSummary_metricsSection__Bmdci\",\"metricsTable\":\"CallSummary_metricsTable__3tBLo\",\"totals\":\"CallSummary_totals__3S669\",\"figure\":\"CallSummary_figure__2TdLL\",\"rowTitle\":\"CallSummary_rowTitle__1Lho5\",\"bigDigits\":\"CallSummary_bigDigits__2s6yo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"onTop\":\"TranscriptionConversation_onTop__H7ZcM\",\"TranscriptionConversation\":\"TranscriptionConversation_TranscriptionConversation__Hm7sm\",\"transcriptionEventContainer\":\"TranscriptionConversation_transcriptionEventContainer__3j7RN\",\"container\":\"TranscriptionConversation_container__d2bFK\",\"playHead\":\"TranscriptionConversation_playHead__10vuv\",\"start\":\"TranscriptionConversation_start__28y7S\",\"conversation\":\"TranscriptionConversation_conversation__9LZ36\",\"conversationContainer\":\"TranscriptionConversation_conversationContainer__3GZbJ\",\"conversationRow\":\"TranscriptionConversation_conversationRow__3FWdD\",\"conversationRowLinked\":\"TranscriptionConversation_conversationRowLinked__YmrvP\",\"conversationRowRight\":\"TranscriptionConversation_conversationRowRight__1hJHF\",\"spacer\":\"TranscriptionConversation_spacer__1P6IX\",\"sentence\":\"TranscriptionConversation_sentence__3Yd0S\",\"primary\":\"TranscriptionConversation_primary__3s7C6\",\"playheadMarker\":\"TranscriptionConversation_playheadMarker__2IF7x\",\"sentenceBody\":\"TranscriptionConversation_sentenceBody__2qhuW\",\"person\":\"TranscriptionConversation_person__1lwBb\",\"blanking\":\"TranscriptionConversation_blanking__2y-h2\",\"secondary\":\"TranscriptionConversation_secondary__2k82J\",\"initials\":\"TranscriptionConversation_initials__11w8E\",\"playHeadLine\":\"TranscriptionConversation_playHeadLine__1ir2G\",\"playHeadStartText\":\"TranscriptionConversation_playHeadStartText__2Bhe6\",\"confidence\":\"TranscriptionConversation_confidence__3QVNg\",\"matchFill\":\"TranscriptionConversation_matchFill__3n50E\",\"matchFillAnimate\":\"TranscriptionConversation_matchFillAnimate__1KxgR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mask\":\"CallRating_mask__2Zwb0\",\"CallRating\":\"CallRating_CallRating__1tqJB\",\"modalHeader\":\"CallRating_modalHeader__NQG1W\",\"title\":\"CallRating_title__2Icpr\",\"modalBody\":\"CallRating_modalBody__xjR-2\",\"ratingRow\":\"CallRating_ratingRow__2z4ST\",\"ratingContainer\":\"CallRating_ratingContainer__3toSc\",\"ratingTitle\":\"CallRating_ratingTitle__2cE1f\",\"noteDetails\":\"CallRating_noteDetails__2XJ4E\",\"pipRating\":\"CallRating_pipRating__15oOm\",\"rating\":\"CallRating_rating__ClyMx\",\"pip\":\"CallRating_pip__1RnoO\",\"pip5\":\"CallRating_pip5__3tMFu\",\"active\":\"CallRating_active__wbvz3\",\"radio5\":\"CallRating_radio5__yIA_p\",\"pip4\":\"CallRating_pip4__2th7s\",\"radio4\":\"CallRating_radio4__3KLED\",\"pip3\":\"CallRating_pip3__vIrFG\",\"radio3\":\"CallRating_radio3__2OTA4\",\"pip2\":\"CallRating_pip2__1he_W\",\"radio2\":\"CallRating_radio2__LLg-u\",\"pip1\":\"CallRating_pip1__3fhyr\",\"radio1\":\"CallRating_radio1__1kD5j\",\"modalFooter\":\"CallRating_modalFooter__3hk2T\",\"closeButton\":\"CallRating_closeButton__ENewE\",\"cancelButton\":\"CallRating_cancelButton__2tfav\",\"finishButton\":\"CallRating_finishButton__2XxMi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"small\":\"StandardChannelEventsLayer_small__1cz35\",\"startIcon\":\"StandardChannelEventsLayer_startIcon__saU_x\",\"endIcon\":\"StandardChannelEventsLayer_endIcon__uu9yc\",\"eventContainer\":\"StandardChannelEventsLayer_eventContainer__C4qVC\",\"event\":\"StandardChannelEventsLayer_event__3V-VD\",\"LayerContent\":\"StandardChannelEventsLayer_LayerContent__1PL5F\",\"transfer\":\"StandardChannelEventsLayer_transfer__1lZVx\",\"scrubber\":\"StandardChannelEventsLayer_scrubber__1D3au\",\"pause\":\"StandardChannelEventsLayer_pause__1RSEJ\",\"start\":\"StandardChannelEventsLayer_start__3RgZE\",\"ring\":\"StandardChannelEventsLayer_ring__1sQ7b\",\"bridge\":\"StandardChannelEventsLayer_bridge__k8UYG\",\"wholeTimeline\":\"StandardChannelEventsLayer_wholeTimeline__1pwqa\",\"hold\":\"StandardChannelEventsLayer_hold__2xXdl\",\"microClusteredEndIconContainer\":\"StandardChannelEventsLayer_microClusteredEndIconContainer__inN4v\",\"microClusteredEndIcon\":\"StandardChannelEventsLayer_microClusteredEndIcon__3RFBa\",\"markerLines\":\"StandardChannelEventsLayer_markerLines__Gu0Eq\",\"leftLine\":\"StandardChannelEventsLayer_leftLine__yYz6W\",\"rightLine\":\"StandardChannelEventsLayer_rightLine__1BGwr\",\"routingOverlay\":\"StandardChannelEventsLayer_routingOverlay__InWyN\",\"routing\":\"StandardChannelEventsLayer_routing__3eXD8\",\"primary\":\"StandardChannelEventsLayer_primary__2UeZx\",\"secondary\":\"StandardChannelEventsLayer_secondary__33HtG\",\"iconLevel\":\"StandardChannelEventsLayer_iconLevel__12BAC\",\"unrecordedTimeLabel\":\"StandardChannelEventsLayer_unrecordedTimeLabel__1Q3g4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SearchFilters\":\"SearchFilters_SearchFilters__357Sq\",\"tabs\":\"SearchFilters_tabs__2YMo0\",\"button\":\"SearchFilters_button__cLFyv\",\"active\":\"SearchFilters_active__173Mt\",\"inuse\":\"SearchFilters_inuse__2hUDP\",\"spacer\":\"SearchFilters_spacer__1zssF\",\"search\":\"SearchFilters_search__Drw9T\",\"callSummary\":\"SearchFilters_callSummary__2My5R\",\"knowledge\":\"SearchFilters_knowledge__2vUtq\",\"insights\":\"SearchFilters_insights__2Et2o\",\"chevron\":\"SearchFilters_chevron__2PbAp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mask\":\"KnowledgeClassifications_mask__1WKQO\",\"modal\":\"KnowledgeClassifications_modal__1QIuP\",\"modalHeader\":\"KnowledgeClassifications_modalHeader__2w6Aq\",\"title\":\"KnowledgeClassifications_title__1iCPt\",\"modalFooter\":\"KnowledgeClassifications_modalFooter__NR1DA\",\"categoriesContainer\":\"KnowledgeClassifications_categoriesContainer__Stq-p\",\"categoriesHeader\":\"KnowledgeClassifications_categoriesHeader__LFc_1\",\"categoriesBody\":\"KnowledgeClassifications_categoriesBody__2J2G9\",\"headerTitle\":\"KnowledgeClassifications_headerTitle__flmR3\",\"pillContainer\":\"KnowledgeClassifications_pillContainer__2PJxO\",\"pillContainerKeywords\":\"KnowledgeClassifications_pillContainerKeywords__ElOMm\",\"selectedItemName\":\"KnowledgeClassifications_selectedItemName__2s8Fe\",\"triggers\":\"KnowledgeClassifications_triggers__1IY6a\",\"closeButton\":\"KnowledgeClassifications_closeButton__3BDhi\",\"cancelButton\":\"KnowledgeClassifications_cancelButton__3dCyB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"callListContainer\":\"Header_callListContainer__3V3Yf\",\"callListItem\":\"Header_callListItem__3ZYY-\",\"uuid\":\"Header_uuid__29XWB\",\"itemIndex\":\"Header_itemIndex__6xdhU\",\"Header\":\"Header_Header__1CTzX\",\"HeaderContainer\":\"Header_HeaderContainer__1lPul\",\"Branding\":\"Header_Branding__3-ssE\",\"logo\":\"Header_logo__3T0lc\",\"Player\":\"Header_Player__3mMx8\",\"LayoutOptions\":\"Header_LayoutOptions__uuRgn\",\"Exit\":\"Header_Exit__3Zmim\",\"visibilityButton\":\"Header_visibilityButton__2fe1C\",\"dropdownContent\":\"Header_dropdownContent__1iGTI\",\"regularCheckbox\":\"Header_regularCheckbox__3Mc9e\",\"dropdownItem\":\"Header_dropdownItem__1lTVZ\",\"finish\":\"Header_finish__2O8pu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"Knowledge_content__SqQhv\",\"column\":\"Knowledge_column__Ozm__\",\"title\":\"Knowledge_title__2OvnU\",\"topics\":\"Knowledge_topics__2vmDc\",\"spacer\":\"Knowledge_spacer__3sa6z\",\"pillContainer\":\"Knowledge_pillContainer__2fixs\",\"classificationContainer\":\"Knowledge_classificationContainer__3epfS\",\"classificationsExceptionHeader\":\"Knowledge_classificationsExceptionHeader__1nYgL\",\"classificationsExceptionColumn\":\"Knowledge_classificationsExceptionColumn__2OBgk\",\"classificationsEmpty\":\"Knowledge_classificationsEmpty__343P2\",\"noPointerEvents\":\"Knowledge_noPointerEvents__2uKBo\",\"searchNavigation\":\"Knowledge_searchNavigation__UuGYG\",\"showAll\":\"Knowledge_showAll__mBv5l\",\"progressBarContainer\":\"Knowledge_progressBarContainer__ng3g5\",\"progressBarOuter\":\"Knowledge_progressBarOuter__31YuM\",\"progressBar\":\"Knowledge_progressBar__iUN4Q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"actionButton\":\"TranscriptionNote_actionButton__269-z\",\"overflowMenu\":\"TranscriptionNote_overflowMenu__3ybh5\",\"acknowledged\":\"TranscriptionNote_acknowledged__2GXoK\",\"toggleThreadButton\":\"TranscriptionNote_toggleThreadButton__27ZFe\",\"edited\":\"TranscriptionNote_edited__2fkGM\",\"locked\":\"TranscriptionNote_locked__1Oel1\",\"note\":\"TranscriptionNote_note__3SnEO\",\"comment\":\"TranscriptionNote_comment__2_9kK\",\"closed\":\"TranscriptionNote_closed__2wrrn\",\"heading\":\"TranscriptionNote_heading__24j7C\",\"subject\":\"TranscriptionNote_subject__2VwZG\",\"author\":\"TranscriptionNote_author__3_4Rr\",\"time\":\"TranscriptionNote_time__1-g5E\",\"noteText\":\"TranscriptionNote_noteText__1B-l1\",\"unread\":\"TranscriptionNote_unread__25WDG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"transcriptionContainer\":\"Transcription_transcriptionContainer__OfTBP\",\"Transcription\":\"Transcription_Transcription__5sUXw\",\"sections\":\"Transcription_sections__3y7Hr\",\"LayerContent\":\"Transcription_LayerContent__3-m_O\",\"playScrub\":\"Transcription_playScrub__1RgEc\",\"playScrubLine\":\"Transcription_playScrubLine__1XA-7\",\"playButton\":\"Transcription_playButton__939mV\",\"playHead\":\"Transcription_playHead__3ktpg\",\"notes\":\"Transcription_notes__28nDa\",\"conversation\":\"Transcription_conversation__3Vogj\",\"confidenceContainer\":\"Transcription_confidenceContainer__IUiZE\",\"confidenceHighlight\":\"Transcription_confidenceHighlight__H7Vyc\",\"confidenceText\":\"Transcription_confidenceText__1iM-r\",\"slider\":\"Transcription_slider__3gJr4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"TranscriptionNotes\":\"TranscriptionNotes_TranscriptionNotes__2SeRv\",\"NewNoteSection\":\"TranscriptionNotes_NewNoteSection__ra53G\",\"newNoteContainer\":\"TranscriptionNotes_newNoteContainer__K0dDS\",\"newNoteText\":\"TranscriptionNotes_newNoteText__2rKR2\",\"newNoteIcon\":\"TranscriptionNotes_newNoteIcon__WGBma\",\"checkboxContainer\":\"TranscriptionNotes_checkboxContainer__3c2aO\",\"checkboxLabel\":\"TranscriptionNotes_checkboxLabel__1rHpr\",\"checkbox\":\"TranscriptionNotes_checkbox__1IkkD\",\"note\":\"TranscriptionNotes_note__nH8_D\",\"heading\":\"TranscriptionNotes_heading__3oU5F\",\"time\":\"TranscriptionNotes_time__1pqGi\",\"noteText\":\"TranscriptionNotes_noteText__3eHkg\",\"editButton\":\"TranscriptionNotes_editButton__SiSVX\",\"bottomMenuSpacer\":\"TranscriptionNotes_bottomMenuSpacer__1nUEP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mask\":\"KnowledgeKeywordsTopics_mask__3tGa-\",\"modal\":\"KnowledgeKeywordsTopics_modal__2Zeaj\",\"modalHeader\":\"KnowledgeKeywordsTopics_modalHeader__12uxf\",\"title\":\"KnowledgeKeywordsTopics_title__Z41_g\",\"subtitle\":\"KnowledgeKeywordsTopics_subtitle__2ed4A\",\"modalFooter\":\"KnowledgeKeywordsTopics_modalFooter__1BRyY\",\"columnContainer\":\"KnowledgeKeywordsTopics_columnContainer__1uO-U\",\"pillContainer\":\"KnowledgeKeywordsTopics_pillContainer__1yuPX\",\"classificationPill\":\"KnowledgeKeywordsTopics_classificationPill__73Y_w\",\"light\":\"KnowledgeKeywordsTopics_light__2nTR6\",\"dark\":\"KnowledgeKeywordsTopics_dark__1kTN4\",\"pillText\":\"KnowledgeKeywordsTopics_pillText__3u4JU\",\"classificationIndicator\":\"KnowledgeKeywordsTopics_classificationIndicator__3SXfQ\",\"red\":\"KnowledgeKeywordsTopics_red__3gxmE\",\"orange\":\"KnowledgeKeywordsTopics_orange__rJbPG\",\"green\":\"KnowledgeKeywordsTopics_green__a3zG0\",\"grey\":\"KnowledgeKeywordsTopics_grey__3Ep5x\",\"closeButton\":\"KnowledgeKeywordsTopics_closeButton__2zTH8\",\"cancelButton\":\"KnowledgeKeywordsTopics_cancelButton__22Ydx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Insights_container__tixkw\",\"title\":\"Insights_title__2p7eg\",\"subtitle\":\"Insights_subtitle__2cDow\",\"formCheck\":\"Insights_formCheck__3v1Y9\",\"indicator\":\"Insights_indicator__3ot-J\",\"separator\":\"Insights_separator__G8ClD\",\"thirdWidth\":\"Insights_thirdWidth__yWkcT\",\"halfWidth\":\"Insights_halfWidth__28ltv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dropdown\":\"Dropdown_dropdown__2ms-9\",\"dropdownToggle\":\"Dropdown_dropdownToggle__2e8Ib\",\"dropdownBackground\":\"Dropdown_dropdownBackground__284-1\",\"dropdownContent\":\"Dropdown_dropdownContent__3v-qe\",\"fadeIn\":\"Dropdown_fadeIn__3EmcY\",\"dropdownButton\":\"Dropdown_dropdownButton__3eMEJ\",\"dropdownItem\":\"Dropdown_dropdownItem__2IaVy\",\"selected\":\"Dropdown_selected__2KC1A\",\"viewName\":\"Dropdown_viewName__fPHuV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Player\":\"Player_Player__2Y5lJ\",\"skipBack\":\"Player_skipBack__2B606\",\"playback\":\"Player_playback__1QNHd\",\"skipForward\":\"Player_skipForward__3mvfF\",\"play\":\"Player_play__3iaw4\",\"playDisabled\":\"Player_playDisabled__261XM\",\"pause\":\"Player_pause__3i8vL\",\"changeSpeed\":\"Player_changeSpeed__1nV3t\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mask\":\"ErrorModal_mask__1iinA\",\"modal\":\"ErrorModal_modal__3DSmd\",\"modalHeader\":\"ErrorModal_modalHeader__3noKu\",\"title\":\"ErrorModal_title__20LRH\",\"message\":\"ErrorModal_message__1siCE\",\"modalFooter\":\"ErrorModal_modalFooter__6Vgf2\",\"secondaryButton\":\"ErrorModal_secondaryButton__2ATbd\",\"primaryButton\":\"ErrorModal_primaryButton__1KUs3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"classificationPill\":\"KnowledgeClassificationPill_classificationPill__3r7bf\",\"dark\":\"KnowledgeClassificationPill_dark__1u4sR\",\"classificationIndicator\":\"KnowledgeClassificationPill_classificationIndicator__10E2O\",\"positive\":\"KnowledgeClassificationPill_positive__3NkmP\",\"negative\":\"KnowledgeClassificationPill_negative__1T4AJ\",\"warning\":\"KnowledgeClassificationPill_warning__2yPbF\",\"info\":\"KnowledgeClassificationPill_info__sVvVr\",\"pillText\":\"KnowledgeClassificationPill_pillText__2PbXm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Search\":\"Search_Search__2wNw2\",\"searchTextBox\":\"Search_searchTextBox__1XTgg\",\"searchNavigation\":\"Search_searchNavigation__gvy74\",\"chevron\":\"Search_chevron__2pcu0\",\"spacer\":\"Search_spacer__OM0E8\",\"clearButton\":\"Search_clearButton__18xL2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"OverflowMenu_button__2JaCa\",\"locked\":\"OverflowMenu_locked__oj3aS\",\"popover\":\"OverflowMenu_popover__178h3\",\"menu\":\"OverflowMenu_menu__Li1f5\",\"item\":\"OverflowMenu_item__1xBO4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"info-box\":\"MetricsTimelineLayer_info-box__2mv6g\",\"key-info-box\":\"MetricsTimelineLayer_key-info-box__1qu8Z\",\"transcription-confidence\":\"MetricsTimelineLayer_transcription-confidence__2_7Us\",\"background-noise-level\":\"MetricsTimelineLayer_background-noise-level__pMkDu\",\"LayerContent\":\"MetricsTimelineLayer_LayerContent__2dmql\",\"plotline\":\"MetricsTimelineLayer_plotline__CEqVm\",\"confidence\":\"MetricsTimelineLayer_confidence__2Fesv\",\"caller\":\"MetricsTimelineLayer_caller__9_6-d\",\"agent\":\"MetricsTimelineLayer_agent__2uZ2h\",\"noise\":\"MetricsTimelineLayer_noise__XMWu5\",\"noise-primary\":\"MetricsTimelineLayer_noise-primary__2FFQq\",\"noise-secondary\":\"MetricsTimelineLayer_noise-secondary__30XHG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pill\":\"KnowledgeKeywordTopicPill_pill__3gVG5\",\"pillModal\":\"KnowledgeKeywordTopicPill_pillModal__3mstZ\",\"pillCategoryModal\":\"KnowledgeKeywordTopicPill_pillCategoryModal__27JUc\",\"pillText\":\"KnowledgeKeywordTopicPill_pillText__3hCWf\",\"pillColourContainer\":\"KnowledgeKeywordTopicPill_pillColourContainer__jQNrN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"resultNavigator\":\"ResultNavigator_resultNavigator__2de3B\",\"button\":\"ResultNavigator_button__3LA5-\",\"searchItemContainer\":\"ResultNavigator_searchItemContainer__3Lcb1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"filter\":\"NotesFilterSelector_filter__39c6L\",\"popover\":\"NotesFilterSelector_popover__6Ahbx\",\"item\":\"NotesFilterSelector_item__27MiK\",\"highlighted\":\"NotesFilterSelector_highlighted__3IDw-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LayerContent\":\"AudioEventLayer_LayerContent__1wCHN\",\"LayerContentVertical\":\"AudioEventLayer_LayerContentVertical__1_LDe\",\"eventContainer\":\"AudioEventLayer_eventContainer__61Q3N\",\"ClashLine\":\"AudioEventLayer_ClashLine__3aXBK\",\"ClashLineHorizontal\":\"AudioEventLayer_ClashLineHorizontal__1PnCw\",\"ClashIcon\":\"AudioEventLayer_ClashIcon__jIbuW\",\"Primary\":\"AudioEventLayer_Primary__pimRL\",\"Secondary\":\"AudioEventLayer_Secondary__3wL-C\",\"Cluster\":\"AudioEventLayer_Cluster__14ML6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"LayoutOptions_container__SnRJV\",\"button\":\"LayoutOptions_button__2hfc6\",\"popover\":\"LayoutOptions_popover__12o3_\",\"item\":\"LayoutOptions_item__ih14T\",\"regularCheckbox\":\"LayoutOptions_regularCheckbox__1NGBi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"avatar\":\"Avatar_avatar__33rUO\",\"svgIcon\":\"Avatar_svgIcon__1m2Hf\"};","export const SET_PRIMARY_UUID = 'SET_PRIMARY_UUID';\n\nexport function setPrimaryUuid(uuid) {\n    return {\n        type: SET_PRIMARY_UUID,\n        payload: {\n            uuid,\n        },\n    };\n}\n","export const CLIENT_ID = process.env.REACT_APP_CLIENT_ID;\nexport const CLIENT_SECRET = process.env.REACT_APP_CLIENT_SECRET;\nexport const USERNAME = process.env.REACT_APP_USERNAME;\nexport const PASSWORD = process.env.REACT_APP_PASSWORD;\nexport const BASE_URL = process.env.REACT_APP_BASE_URL;\nexport const CALLFLOW_URL = process.env.REACT_APP_CALLFLOW_URL;\nexport const GATEKEEPER_URL = process.env.REACT_APP_GATEKEEPER_URL;\nexport const AGENT_TITLE = process.env.REACT_APP_AGENT_TITLE;\nexport const CUSTOMER_TITLE = process.env.REACT_APP_CUSTOMER_TITLE;\n","export default class Token {\n    constructor(accessToken, userId, organisationId) {\n        this.accessToken = accessToken;\n        this.userId = userId;\n        this.organisationId = organisationId;\n    }\n}\n","import ClientOAuth2 from 'client-oauth2';\n/* eslint-disable import/no-unresolved */\nimport {\n    CLIENT_ID,\n    CLIENT_SECRET,\n    PASSWORD,\n    USERNAME,\n    BASE_URL,\n} from './Environment';\n/* eslint-enable import/no-unresolved */\nimport Token from './Token';\n\nexport default class ApiClient {\n    static get tokenBaseUrl() {\n        return BASE_URL;\n    }\n\n    constructor(baseUrl) {\n        this.BASE_URL = baseUrl;\n        this.auth = new ClientOAuth2({\n            clientId: CLIENT_ID,\n            clientSecret: CLIENT_SECRET,\n            accessTokenUri: `${ApiClient.tokenBaseUrl}/auth/token`,\n        });\n    }\n\n    async getToken() {\n        if (typeof this.token !== 'undefined') {\n            return this.token;\n        }\n\n        const token = await this.auth.owner.getToken(USERNAME, PASSWORD);\n\n        const user = await fetch(`${ApiClient.tokenBaseUrl}/v1/user/me`, {\n            headers: {\n                Accept: 'application/json',\n                Authorization: `Bearer ${token.accessToken}`,\n            },\n        }).then(response => response.json());\n\n        this.token = new Token(token.accessToken, user.userId, user.organisationId);\n        return this.token;\n    }\n\n    async doGet(url, jwtToken, headers = {}) {\n        let accept = headers.Accept || 'application/json';\n        if (!accept.includes('application/json')) {\n            accept = `${headers.Accept}, application/json`;\n        }\n\n        let token = null;\n        if (jwtToken) token = { accessToken: jwtToken };\n        else token = await this.getToken();\n\n        return fetch(`${this.BASE_URL}/${url}`, {\n            headers: {\n                ...headers,\n                Accept: accept,\n                Authorization: `Bearer ${token.accessToken}`,\n            },\n        });\n    }\n}\n","import ApiClient from './ApiClient';\nimport { CALLFLOW_URL } from './Environment';\n\nexport default class CallFlowApiClient extends ApiClient {\n    constructor() {\n        const sfEnv = JSON.parse(localStorage.getItem('ENV_URLS'));\n        let url = CALLFLOW_URL;\n        if (sfEnv && sfEnv.callflowUrl) {\n            url = sfEnv.callflowUrl;\n        }\n        super(url);\n    }\n}\n","import ApiClient from './ApiClient';\nimport { BASE_URL } from './Environment';\n\nexport default class SapienApiClient extends ApiClient {\n    constructor() {\n        const sfEnv = JSON.parse(localStorage.getItem('ENV_URLS'));\n        let url = BASE_URL;\n        if (sfEnv && sfEnv.sapienUrl) {\n            url = sfEnv.sapienUrl;\n        }\n        super(url);\n    }\n}\n","/* eslint-disable import/prefer-default-export */\nexport const TRANSCRIPTION_START_OFFSET = 50;\nexport const AUDIO_FORMAT = 'mp3';\n","export function calculatePositionPercentage(position, timeline) {\n    const rangeFactor = (100 / timeline.range);\n    return `${rangeFactor * (position - timeline.start)}%`;\n}\n\nexport function calculatePositionPercentageWithOffset(position, timeline) {\n    const unrecordedOffset = timeline.transcriptionStart - timeline.start;\n    const offsetPosition = position + unrecordedOffset;\n    const rangeFactor = (100 / timeline.range);\n    return `${rangeFactor * (offsetPosition - timeline.start)}%`;\n}\n\nexport function calculateWidthPercentage(start, end, timeline) {\n    const rangeFactor = (100 / timeline.range);\n    return `${rangeFactor * (end - start)}%`;\n}\n\nexport function layerStyleWithScrubBounds(plotWholeTimeline, scrub, style = {}) {\n    if (plotWholeTimeline) {\n        return {\n            ...style,\n            width: '100%',\n            marginLeft: '0%',\n        };\n    }\n\n    const width = 100 / (scrub.end - scrub.start) * 100;\n    const marginLeft = width / 100 * scrub.start;\n    return {\n        ...style,\n        width: `${width}%`,\n        marginLeft: `${-marginLeft}%`,\n    };\n}\n\nexport function viewBoxForRange(timeline) {\n    return [0, 0, Math.floor(timeline.range / 1000), 100].join(' ');\n}\n\nexport function scale(num, inMin, inMax, outMin, outMax) {\n    return (num - inMin) * (outMax - outMin) / (inMax - inMin) + outMin;\n}\n\nexport function eventFlags(eventToProcess) {\n    const { event } = eventToProcess;\n    const csChange = { isCsStateChange: true };\n    switch (event) {\n        case 'CHANNEL_START':\n            return { isChannelStart: true };\n        case 'CHANNEL_RING':\n            return { isChannelRing: true };\n        case 'CHANNEL_ANSWER':\n            return { isChannelAnswer: true };\n        case 'CHANNEL_END':\n            return { isChannelEnd: true };\n        case 'CHANNEL_COMPLETE':\n            return { isChannelComplete: true };\n        case 'CS_BRIDGE':\n            return { ...csChange, isBridge: true };\n        case 'CS_PARKED_TRANSFER':\n            return { ...csChange, isParkedTransfer: true };\n        case 'CS_QUEUING':\n            return { ...csChange, isQueuing: true };\n        case 'CS_ROUTING':\n            return { ...csChange, isRouting: true };\n        case 'PARK_OTHER_FOR_TRANSFER':\n            return { ...csChange, isParkedTransfer: true, isSecondary: true };\n        case 'UNBRIDGE':\n            return { ...csChange, isUnBridge: true };\n        case 'CONFERENCE_IN':\n            return { isConferenceIn: true };\n        case 'CONFERENCE_OUT':\n            return { isConferenceOut: true };\n        case 'RECORD_START':\n            return { isRecordStart: true };\n        case 'RECORD_STOP':\n            return { isRecordStop: true };\n        case 'HOLD':\n            return { isHold: true };\n        case 'UN_HOLD':\n            return { isUnHold: true };\n        case 'REQUEST_HOLD':\n            return { isHold: true, isSecondary: true };\n        case 'REQUEST_UN_HOLD':\n            return { isUnHold: true, isSecondary: true };\n        case 'LISTEN_IN':\n            return { isListenIn: true };\n        case 'LISTEN_IN_WHISPER':\n            return { isListenInWhisper: true };\n        case 'LISTEN_IN_BARGE':\n            return { isListenInBarge: true };\n        case 'LISTEN_IN_DISCONNECT':\n            return { isListenInDisconnect: true };\n        default: {\n            console.log(`New event found: ${event.event}`);\n            return {};\n        }\n    }\n}\n\nexport function eventName(flags) {\n    return Object.keys(flags).join(' ');\n}\n","export class InsightsError extends Error {\n    constructor(message = '', status = null, displayMessage = null) {\n        super(message);\n        this.status = status;\n        this.displayMessage = displayMessage;\n    }\n}\n\nexport class LoadingError extends Error {\n    constructor(message = '', response = null) {\n        super(message);\n        this.response = response;\n    }\n}\n\nexport class BlockingInsightsError {\n    constructor(status = null, statusMessage = null, blockingMessage = null) {\n        this.status = status;\n        this.statusMessage = statusMessage;\n        this.blockingMessage = blockingMessage;\n    }\n}\n","import CallFlowApiClient from './CallFlowApiClient';\nimport SapienApiClient from './SapienApiClient';\nimport { AUDIO_FORMAT } from '../../shared/utility/constants';\nimport { eventFlags } from '../../shared/utility/timeline';\nimport { LoadingError } from '../../shared/utility/errors';\n\nexport async function getCallList(jwtToken) {\n    const client = new SapienApiClient();\n    let token = null;\n    if (jwtToken) {\n        token = jwtToken;\n    } else {\n        token = await client.getToken();\n    }\n    return client.doGet(`v1/organisation/${token.organisationId}/log/call`, (jwtToken) ? jwtToken.token : null)\n        .then((response) => {\n            if (!response.ok) {\n                // throw Error('Request failed');\n                return [];\n            }\n\n            return response.json();\n        });\n}\n\nexport async function getCallForUuid(uuid, jwtToken) {\n    const client = new SapienApiClient();\n    let token = null;\n    if (jwtToken) {\n        token = jwtToken;\n    } else {\n        token = await client.getToken();\n    }\n    return client.doGet(`v1/organisation/${token.organisationId}/log/call?uuid=${uuid}`, (jwtToken) ? jwtToken.token : null)\n        .then((response) => {\n            if (!response.ok) {\n                // throw Error('Request failed');\n                return [];\n            }\n\n            return response.json();\n        });\n}\n\nexport function filterCallsWithDuplicateStartTimes() {\n    const times = [];\n    return (call) => {\n        if (times.includes(call.timeStart)) {\n            return false;\n        }\n        times.push(call.timeStart);\n        return true;\n    };\n}\n\nexport function filterAndSortCallsByUniqueTimestamp(calls) {\n    const filter = filterCallsWithDuplicateStartTimes();\n    return calls\n        .flat()\n        .filter(filter)\n        .sort((a, b) => new Date(a.timeStart).getTime() - new Date(b.timeStart).getTime());\n}\n\nexport function getCallsRelatedToUuids(\n    uuids,\n    jwtToken,\n    getCallForUuidApiCall = getCallForUuid,\n) {\n    return new Promise((resolve) => {\n        const calls = [];\n        uuids.forEach((uuid) => {\n            getCallForUuidApiCall(uuid, jwtToken)\n                .then((call) => {\n                    calls.push(call.data);\n                    if (calls.length === uuids.length) {\n                        resolve(filterAndSortCallsByUniqueTimestamp(calls));\n                    }\n                });\n        });\n    });\n}\n\n// TODO: TEMPORARY SHIM START (remove when RECORD events match audio duration)\n// TODO: Change \"shift()\" to \"pop()\" in data.js (see TODO not in file)\nexport function eventsTruncatedToAudioDuration(events, duration = null) {\n    if (duration === null || !Array.isArray(events) || events.length === 0) {\n        return events;\n    }\n    let start = Number.MAX_SAFE_INTEGER;\n    let remainingDuration = duration;\n    let threshold = Number.MAX_SAFE_INTEGER;\n    events.forEach((event) => {\n        if ((\n            event.flags.isRecordStart === true\n            || (event.flags.isSecondary === true && event.flags.isUnHold === true)\n        ) && event.timestamp < start) {\n            start = event.timestamp;\n        }\n        if (\n            event.flags.isRecordStop === true\n            || (event.flags.isSecondary === true && event.flags.isHold === true)\n        ) {\n            remainingDuration -= event.timestamp - start;\n            start = Number.MAX_SAFE_INTEGER;\n            if (remainingDuration < 0 && threshold === Number.MAX_SAFE_INTEGER) {\n                threshold = event.timestamp + remainingDuration;\n            }\n        }\n    });\n    return events.map((event) => {\n        if (\n            event.flags.isRecordStop === true\n            || (event.flags.isSecondary === true && event.flags.isHold === true)\n        ) {\n            return {\n                ...event,\n                timestamp: Math.min(threshold, event.timestamp),\n            };\n        }\n        return event;\n    });\n}\n\nexport function callflowShimAddMissingEvents(callflow) {\n    const { events } = callflow;\n    let newEvents = events;\n\n    const isMissingChannelStart = events\n        .filter(event => event.event === 'CHANNEL_START').length === 0;\n\n    if (isMissingChannelStart) {\n        const firstEvent = events\n            .sort((a, b) => a.timestamp - b.timestamp)[0];\n        newEvents = newEvents.concat({\n            event: 'CHANNEL_START',\n            timestamp: firstEvent.timestamp,\n        });\n    }\n\n    const isMissingChannelEnd = events\n        .filter(event => event.event === 'CHANNEL_END').length === 0;\n\n    if (isMissingChannelEnd) {\n        const lastEvent = events\n            .sort((a, b) => b.timestamp - a.timestamp)[0];\n\n        newEvents = newEvents.concat({\n            event: 'CHANNEL_END',\n            timestamp: lastEvent.timestamp,\n        });\n    }\n\n    return {\n        ...callflow,\n        events: newEvents,\n    };\n}\n\nexport function callflowWithEventFlags(callflow, durationThreshold) {\n    const { events } = callflow;\n    return {\n        ...callflow,\n        events: eventsTruncatedToAudioDuration(events.map(event => ({\n            ...event,\n            flags: eventFlags(event),\n        })), durationThreshold),\n    };\n}\n\nexport async function getEvents(uuid, durationThreshold, jwtToken) {\n    if (uuid === null) {\n        alert('UUID cannot be null');\n        return [];\n    }\n    const client = new CallFlowApiClient();\n    let token = null;\n    if (jwtToken) {\n        token = jwtToken;\n    } else {\n        token = await client.getToken();\n    }\n    return client.doGet(`organisation/${token.organisationId}/callflow/${uuid}`, (jwtToken) ? jwtToken.token : null)\n        .then((response) => {\n            if (!response.ok) {\n                throw Error('Request failed');\n            }\n            return response.json()\n                .then(events => callflowShimAddMissingEvents(events))\n                .then(events => callflowWithEventFlags(events, durationThreshold));\n        });\n}\n\nexport async function getTranscription(uuid, jwtToken) {\n    if (uuid === null) {\n        alert('UUID cannot be null');\n        return [];\n    }\n    const client = new SapienApiClient();\n    let token = null;\n    if (jwtToken) {\n        token = jwtToken;\n    } else {\n        token = await client.getToken();\n    }\n    return client.doGet(\n        `v1/organisation/${token.organisationId}/archive/recording/${uuid}/analytics/transcription`,\n        (jwtToken) ? jwtToken.token : null,\n    )\n        .then((response) => {\n            if (!response.ok) {\n                // throw Error('Request failed');\n                return [];\n            }\n\n            return response.json();\n        });\n}\n\nexport async function getAudioAnalysis(uuid, jwtToken) {\n    if (uuid === null) {\n        alert('UUID cannot be null');\n        return [];\n    }\n    const client = new SapienApiClient();\n    let token = null;\n    if (jwtToken) {\n        token = jwtToken;\n    } else {\n        token = await client.getToken();\n    }\n    return client.doGet(\n        `v1/organisation/${token.organisationId}/archive/recording/${uuid}/analytics/talkTime`,\n        (jwtToken) ? jwtToken.token : null,\n    )\n        .then((response) => {\n            if (!response.ok) {\n                // throw Error('Request failed');\n                return [];\n            }\n\n            return response.json();\n        });\n}\n\nexport async function getAudioRecording(uuid, jwtToken, onChunkReceived = () => {}) {\n    if (uuid === null) {\n        alert('UUID cannot be null');\n        return [];\n    }\n    const client = new SapienApiClient();\n    let token = null;\n    if (jwtToken) {\n        token = jwtToken;\n    } else {\n        token = await client.getToken();\n    }\n    const response = await client.doGet(\n        `v1/organisation/${token.organisationId}/archive/recording/${uuid}`,\n        (jwtToken) ? jwtToken.token : null, {\n            Accept: `audio/${AUDIO_FORMAT}`,\n        },\n    );\n\n    if (!response.ok) {\n        throw new LoadingError('Request failed', response);\n    }\n\n    const reader = response.body.getReader();\n\n    let audioDuration;\n    let contentLength;\n\n    if (response.headers) {\n        audioDuration = response.headers.get('X-Audio-duration');\n        contentLength = response.headers.get('Content-Length');\n    }\n\n    if (!audioDuration) {\n        audioDuration = 1000;\n    }\n\n    // If the API didn't return a Content Length, estimate one using a figure that appears to be close enough\n    if (!contentLength) {\n        const estimatedLengthPerAudioSecond = 4388;\n        contentLength = audioDuration * estimatedLengthPerAudioSecond;\n    }\n\n    let receivedLength = 0; // received that many bytes at the moment\n    const chunks = []; // array of received binary chunks (comprises the body)\n    while (true) {\n        const { done, value } = await reader.read(); // eslint-disable-line no-await-in-loop\n\n        if (done) {\n            break;\n        }\n\n        chunks.push(value);\n        receivedLength += value.length;\n\n        const percentage = (receivedLength / contentLength) * 100;\n        onChunkReceived(percentage);\n    }\n\n    const blob = new Blob(chunks);\n\n    return {\n        duration: Math.round(Number(audioDuration) * 1000000),\n        blob,\n    };\n}\n\nexport async function getNotes(uuid) {\n    // TODO call API to get notes\n    console.log(uuid);\n    return [];\n}\n","export function eventsWithParsedDataObjects(events) {\n    return events\n        .map((event) => {\n            const { data } = event;\n            let parsedData = data ? { data } : null;\n            if (typeof data === 'string') {\n                try {\n                    parsedData = {\n                        data: JSON.parse(data),\n                    };\n                } catch (e) {\n                    console.warn('Unable to parse the data');\n                }\n            }\n            return {\n                ...event,\n                ...parsedData,\n            };\n        });\n}\n\nexport function getAssociatedUuidsFromEvents(events = [], primaryUuid) {\n    let extractedUuids = eventsWithParsedDataObjects(events)\n        .filter(event => event.data && event.data.uuid)\n        .map(event => event.data.uuid);\n    if (typeof primaryUuid === 'string' && primaryUuid.length > 0) {\n        extractedUuids = [primaryUuid, ...extractedUuids];\n    }\n    return extractedUuids\n        .filter((uuid, index, array) => array.indexOf(uuid) === index);\n}\n","// Common repository of selectors relating to direct state hierarchy\n\nexport const getItemWithUuidFromArray = (array, uuid) => array.find(item => item.uuid === uuid);\n\nexport const getPrimaryUuid = state => state.primaryUuid;\nexport const getParticipants = state => state.participants;\n\n// Events Selectors\nexport const getEventsState = state => state.events;\nexport const getUuidFromEventsState = state => getEventsState(state).uuid;\nexport const getEventsFromEventsState = state => getEventsState(state).events;\nexport const getEventsByParticipants = state => getEventsState(state).eventsByParticipants;\n\n// Calls Selectors\nexport const getCallsState = state => state.calls;\nexport const getCalls = state => getCallsState(state).calls;\n\n// Status Selectors\nexport const getStatus = state => state.status.status;\nexport const getLoadProgress = state => state.status.progress;\n\n// Audio Selectors\nexport const getAudioState = state => state.audio;\nexport const getAudioDuration = state => getAudioState(state).duration;\nexport const getAudioEvents = state => getAudioState(state).events;\n\n// Transcription Selectors\nexport const getTranscriptionState = state => state.transcription;\nexport const getRawDataFromTranscriptionState = state => getTranscriptionState(state).rawData;\nexport const getUuidFromTranscriptionState = state => getTranscriptionState(state).uuid;\nexport const getSentencesFromTranscriptionState = state => getTranscriptionState(state).sentences;\n\n// Data Selectors\nexport const getDataState = state => state.data;\nexport const getChannelsFromDataState = state => getDataState(state).channels;\nexport const getParticipantNames = state => getDataState(state).participantNames;\n\n// Scrubber\nexport const getScrubberVisibility = state => state.scrub.isVisible;\n\n// EventTimeline\nexport const getEventTimelineVisibility = state => state.eventTimeline.eventTimelineVisible;\n\n// Tab Selectors\nexport const getActiveTab = state => state.tabs.activeTab;\n\n// Experience options\nexport const getExperienceOptions = state => state.experienceOptions;\n\n// Search\nexport const getSearchState = state => state.search;\nexport const getCurrentPosition = state => getSearchState(state).currentPosition;\nexport const getSearchPhrase = state => getSearchState(state).searchPhrase;\n\n// Knowledge\nexport const getKnowledgeState = state => state.knowledge;\nexport const getKnowledgeSelectedItem = state => getKnowledgeState(state).selectedItem;\n\n// Status\nexport const getStatusState = state => state.status;\nexport const getIsDisplayingState = state => getStatusState(state).isDisplaying;\nexport const getIsDisplayingRoutingState = state => getIsDisplayingState(state).routing;\n\n// Call Summary\nexport const getCallSummaryState = state => state.callSummary;\nexport const getKeyCallers = state => getCallSummaryState(state).keyCallers;\n\n// Playback\nexport const getPlaybackState = state => state.playback;\nexport const getPlaybackSpeed = state => getPlaybackState(state).speed;\n\n// Error Modal\nexport const getErrorModal = state => state.errorModal;\nexport const showErrorModal = state => getErrorModal(state).show;\n","import { createSelector } from 'reselect';\nimport { getAudioEvents } from './common-selectors';\n\nconst getTimestampWithAudioOffsetFunc = createSelector(\n    [getAudioEvents],\n    events => (timestamp) => {\n        let offsetEvent = events.filter(event => timestamp < event.timelineStop).shift();\n        if (offsetEvent) {\n            return timestamp + offsetEvent.offset;\n        }\n        offsetEvent = events.filter(event => timestamp > event.timelineStart).pop();\n        if (offsetEvent) {\n            return timestamp + offsetEvent.offset;\n        }\n        return timestamp;\n    },\n);\n\nexport default getTimestampWithAudioOffsetFunc;\n","/* eslint-disable import/prefer-default-export */\nexport function formatTime(seconds) {\n    const h = parseInt(Math.floor(seconds / 3600), 10);\n    const m = parseInt(Math.floor((seconds % 3600) / 60), 10);\n    const s = parseInt(seconds % 60, 10);\n    return [\n        h,\n        (h === 0) ? m.toString() : m.toString().padStart(2, '0'),\n        s.toString().padStart(2, '0'),\n    ].filter(a => a).join(':');\n}\n\nexport function displayTimeAndDate(time) {\n    const date = new Date(time / 1000);\n    const mm = date.getMonth() + 1; // getMonth() is zero-based\n    const dd = date.getDate();\n    const hours = date.getHours();\n    const mins = date.getMinutes();\n    const stringTime = [\n        (hours > 9 ? '' : '0') + hours,\n        (mins > 9 ? '' : '0') + mins,\n    ].join(':');\n    const stringDate = [\n        (dd > 9 ? '' : '0') + dd,\n        (mm > 9 ? '' : '0') + mm,\n        date.getFullYear(),\n    ].join('/');\n    return [\n        stringDate,\n        stringTime,\n    ].join(' ');\n}\n\nexport function uuidv4() {\n    // eslint-disable-next-line max-len,no-bitwise,no-mixed-operators\n    return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c => (c ^ (crypto.getRandomValues(new Uint8Array(1))[0]) & 15 >> c / 4).toString(16));\n}\n\nexport const decode = str => str.replace(/&#(\\d+);/g, (match, dec) => String.fromCharCode(dec));\n\nexport const timeAndDate = (timeAsText) => {\n    if (!timeAsText) {\n        return {\n            time: '--:--',\n            date: '--/--/--/',\n        };\n    }\n    // TODO: Update function or remove this comment depending on time format changes when connected to API\n    // The docs do not currently show ISO formatted timestamp\n    const convertedTime = (new Date(Date.parse(timeAsText.replace(' ', 'T')))) * 1000;\n    const [date, time] = displayTimeAndDate(convertedTime).split(' ');\n    return {\n        time,\n        date,\n    };\n};\n\nexport function decodeHtml(html) {\n    const txt = document.createElement('textarea');\n    txt.innerHTML = html;\n    return txt.value;\n}\n\nexport const JSONParsedIfStringified = (json) => {\n    if (typeof json !== 'string') {\n        return json;\n    }\n    let returnObject;\n    try {\n        returnObject = JSON.parse(decodeHtml(json));\n    } catch (error) {\n        console.warn(`Could not parse JSON (${error.localDescription})`);\n    }\n    return returnObject;\n};\n","import { createSelector } from 'reselect';\nimport { getEventsState, getIsDisplayingRoutingState, getAudioState } from './common-selectors';\nimport getTimestampWithAudioOffsetFunc from './timestampWithAudioOffset';\nimport { formatTime } from '../../shared/utility/formatting';\n\n/* eslint-disable-next-line import/prefer-default-export */\nexport const getTimeline = createSelector(\n    [getAudioState, getEventsState, getTimestampWithAudioOffsetFunc, getIsDisplayingRoutingState],\n    (audioState, eventsState, timestampWithAudioOffset, isDisplayRouting) => {\n        const helpers = {\n            timestampAtPlayhead(playhead) {\n                return this.start + this.range / 100 * playhead;\n            },\n            sentenceTimestampAtPlayhead(playhead) {\n                const { transcriptionStart } = this;\n                return (timestampWithAudioOffset(this.timestampAtPlayhead(playhead) - transcriptionStart)) / 1000;\n            },\n            playheadAtTimestamp(timestamp) {\n                return 100 / this.range * timestamp;\n            },\n            formattedTimeAtPlayhead(playhead) {\n                const { range, routingOffset } = this;\n                const playSeconds = range * playhead / 100000000;\n                const routingSeconds = routingOffset / 1000000;\n                const isPlayheadInUnrecordedTime = (routingSeconds - playSeconds) > 0;\n                const seconds = new Date(Math.abs(routingSeconds - playSeconds));\n                return `${isPlayheadInUnrecordedTime ? '-' : ''}${formatTime(seconds)}`;\n            },\n            pausedPropertiesAtPlayhead(playhead, eventsForPrimaryParticipant) {\n                const properties = {\n                    isPaused: false,\n                    timeAtPauseEnd: null,\n                    playheadAtPauseEnd: null,\n                };\n\n                if (eventsForPrimaryParticipant && eventsForPrimaryParticipant.events) {\n                    const timeStampAtPlayhead = this.timestampAtPlayhead(playhead);\n                    const recordStopEvent = eventsForPrimaryParticipant.events\n                        .filter(event => event.startFlags && event.startFlags.isRecordStop === true\n                            && timeStampAtPlayhead >= event.start && timeStampAtPlayhead <= event.end)\n                        .shift();\n\n                    if (recordStopEvent !== undefined) {\n                        properties.isPaused = true;\n                        properties.timeAtPauseEnd = recordStopEvent.end;\n                        properties.playheadAtPauseEnd = this.playheadAtTimestamp(recordStopEvent.end - this.start);\n                    }\n                }\n                return properties;\n            },\n            transcriptionOffsetPercentage() {\n                const unrecordedOffset = this.transcriptionStart - this.start;\n                return 100 / this.range * unrecordedOffset;\n            },\n        };\n        const { source } = audioState;\n        if (source === null || eventsState.events === null) {\n            return {\n                ...helpers,\n                start: 0,\n                end: 0,\n                range: 0,\n            };\n        }\n        const isNonAudioTimeline = eventsState.events\n            .filter(event => event.flags.isRecordStart === true).length === 0;\n\n        const transcriptionStart = eventsState.events\n            .filter(event => (isNonAudioTimeline ? event.flags.isChannelAnswer : event.flags.isRecordStart === true))\n            .shift()\n            .timestamp;\n\n        const channelStart = eventsState.events\n            .filter(event => event.flags.isChannelStart)\n            .shift()\n            .timestamp;\n\n        const timelineStart = isDisplayRouting ? channelStart : transcriptionStart;\n        const unrecordedTime = transcriptionStart - channelStart;\n        const routingOffset = transcriptionStart - timelineStart;\n\n        const timelineEnd = eventsState.events\n            .filter(event => (isNonAudioTimeline ? event.flags.isChannelComplete : event.flags.isRecordStop === true))\n            .sort((a, b) => a.timestamp - b.timestamp)\n            .pop()\n            .timestamp;\n\n        return {\n            ...helpers,\n            start: timelineStart,\n            end: timelineEnd,\n            range: timelineEnd - timelineStart,\n            transcriptionStart,\n            routingOffset,\n            unrecordedTime,\n        };\n    },\n);\n","import { getCallsRelatedToUuids } from '../../routes/api/App';\nimport { getAssociatedUuidsFromEvents } from './events-helpers';\nimport { getEventsFromEventsState, getPrimaryUuid } from '../selectors/common-selectors';\nimport { getTimeline } from '../selectors';\n\nexport const REQUEST_CALLS = 'REQUEST_CALLS';\n\nexport function requestCalls(uuids) {\n    return {\n        type: REQUEST_CALLS,\n        payload: {\n            isLoading: true,\n            uuids,\n        },\n    };\n}\n\nexport const INVALIDATE_CALLS = 'INVALIDATE_CALLS';\n\nexport function invalidateCalls() {\n    return {\n        type: INVALIDATE_CALLS,\n        payload: {\n            calls: null,\n        },\n    };\n}\n\nexport const RECEIVE_CALLS = 'RECEIVE_CALLS';\n\nexport function receiveCalls(uuids, calls, isRecorded) {\n    return {\n        type: RECEIVE_CALLS,\n        payload: {\n            isLoading: false,\n            uuids,\n            calls,\n            isRecorded,\n        },\n    };\n}\n\nexport function isRecordingFlagFoundInCalls(calls = []) {\n    let isRecordedFlagFound = false;\n    calls.forEach((call) => {\n        const aFlags = Array.isArray(call.aFlags) ? call.aFlags : [];\n        const bFlags = Array.isArray(call.bFlags) ? call.bFlags : [];\n        if (aFlags.includes('RECORDED') || bFlags.includes('RECORDED')) {\n            isRecordedFlagFound = true;\n        }\n    });\n    return isRecordedFlagFound;\n}\n\nfunction processCalls(calls, timeline) {\n    return calls\n        .sort((a, b) => {\n            if (a.timeStart < b.timeStart) {\n                return -1;\n            }\n            if (a.timeStart > b.timeStart) {\n                return 1;\n            }\n            return 0;\n        })\n        .map((call, index, array) => {\n            const time = {\n                start: (new Date(call.timeStart)).getTime() * 1000,\n                end: timeline.end * 1000,\n            };\n            const isLastCall = index === array.length - 1;\n            if (!isLastCall) {\n                time.end = ((new Date(array[index + 1].timeStart)).getTime() * 1000) - 1;\n            }\n            return { ...call, time, index };\n        });\n}\n\nexport function fetchCalls(\n    getCallsRelatedToUuidApiCall = getCallsRelatedToUuids,\n) {\n    return (dispatch, getState) => {\n        const state = getState();\n        const uuids = getAssociatedUuidsFromEvents(getEventsFromEventsState(state), getPrimaryUuid(state));\n        const timeline = getTimeline(state);\n        dispatch(requestCalls(uuids));\n        dispatch(invalidateCalls());\n        return getCallsRelatedToUuidApiCall(uuids, state.auth.jwtToken)\n            .then((calls) => {\n                dispatch(receiveCalls(uuids, processCalls(calls, timeline), isRecordingFlagFoundInCalls(calls)));\n            });\n    };\n}\n","export const STATUS_LOADING = 'STATUS_LOADING';\nexport const STATUS_OK = 'STATUS_OK';\nexport const STATUS_EMPTY = 'STATUS_EMPTY';\nexport const STATUS_ERROR = 'STATUS_ERROR';\n","import { getEvents } from '../../routes/api/App';\nimport {\n    getPrimaryUuid,\n    getUuidFromEventsState,\n    getEventsFromEventsState,\n    getAudioDuration,\n} from '../selectors/common-selectors';\nimport { eventName } from '../../shared/utility/timeline';\nimport { formatTime } from '../../shared/utility/formatting';\nimport { BlockingInsightsError } from '../../shared/utility/errors';\nimport { STATUS_EMPTY } from '../constants/data';\n\nexport const REQUEST_EVENTS = 'REQUEST_EVENTS';\n\nexport function requestEvents(uuid) {\n    return {\n        type: REQUEST_EVENTS,\n        payload: {\n            isLoading: true,\n            uuid,\n        },\n    };\n}\n\nexport const INVALIDATE_EVENTS = 'INVALIDATE_EVENTS';\n\nexport function invalidateEvents() {\n    return {\n        type: INVALIDATE_EVENTS,\n        payload: {\n            events: null,\n        },\n    };\n}\n\nexport const RECEIVE_EVENTS = 'RECEIVE_EVENTS';\n\nexport function receiveEvents(uuid, events) {\n    return {\n        type: RECEIVE_EVENTS,\n        payload: {\n            isLoading: false,\n            uuid,\n            events,\n        },\n    };\n}\n\nexport function fetchEvents(\n    getEventsApiCall = getEvents,\n) {\n    return (dispatch, getState) => {\n        const state = getState();\n        const uuid = getPrimaryUuid(state);\n        dispatch(requestEvents(uuid));\n        const currentUuid = getUuidFromEventsState(state);\n        const currentEvents = getEventsFromEventsState(state);\n        if (currentUuid !== uuid || !Array.isArray(currentEvents) || currentEvents.length === 0) {\n            dispatch(invalidateEvents());\n            const duration = getAudioDuration(getState());\n            return getEventsApiCall(uuid, duration, state.auth.jwtToken)\n                .then((response) => {\n                    const { events } = response;\n                    return dispatch(receiveEvents(uuid, events));\n                }, () => Promise.reject(\n                    new BlockingInsightsError(STATUS_EMPTY,\n                        'Unable to load call flow for this call.',\n                        'Unable to load call flow for this call.'\n                        + ' Please ensure you are accessing via the correct account, and that the call has not been deleted.'),\n                ));\n        }\n        dispatch(receiveEvents(uuid, currentEvents));\n        return Promise.resolve();\n    };\n}\n\n/* eslint-disable no-param-reassign */\nexport function startEvents(participantPhoneNumber, processedEvents, currentOpenEvents) {\n    return (keys, eventToProcess) => {\n        const { flags, timestamp } = eventToProcess;\n        keys.forEach((key) => {\n            const newEvent = {\n                event: eventName(flags),\n                group: key,\n                start: timestamp,\n                startFlags: flags,\n            };\n            currentOpenEvents[key] = newEvent;\n            if (typeof processedEvents[participantPhoneNumber] === 'undefined') {\n                processedEvents[participantPhoneNumber] = {};\n                processedEvents[participantPhoneNumber].events = [];\n            }\n            processedEvents[participantPhoneNumber].events.push(newEvent);\n        });\n    };\n}\n\nexport function closeEvents(currentOpenEvents) {\n    return (keys, eventToProcess) => {\n        const { flags, timestamp } = eventToProcess;\n        keys.forEach((key) => {\n            if (!currentOpenEvents[key]) {\n                return;\n            }\n            const current = currentOpenEvents[key];\n            current.end = timestamp;\n            current.endFlags = flags;\n            current.duration = current.end - current.start;\n            current.timeline = {\n                start: new Date(current.start / 1000),\n                end: new Date(current.end / 1000),\n                duration: formatTime(current.duration / 1000000),\n            };\n            currentOpenEvents[key] = null;\n        });\n    };\n}\n\n/* eslint-enable no-param-reassign */\n\nexport function filterAndSortEvents(events) {\n    return events\n        .sort((a, b) => {\n            if (a.start < b.start) {\n                return -1;\n            }\n            if (a.start > b.start) {\n                return 1;\n            }\n            return 0;\n        });\n}\n\nexport const PROCESS_EVENTS = 'PROCESS_EVENTS';\n\nfunction eventGroups(id) {\n    const events = {};\n    const openEvents = {};\n    const processors = [];\n    const helpers = {\n        addGroup(group, openIf, closeIf) {\n            openEvents[group] = null;\n            processors.push((event) => {\n                if (typeof openIf !== 'function' || typeof closeIf !== 'function') {\n                    return;\n                }\n                if (openIf(event.flags) === true && !openEvents[group]) {\n                    startEvents(id, events, openEvents)([group], event);\n                }\n                if (closeIf(event.flags) === true && openEvents[group]) {\n                    closeEvents(openEvents)([group], event);\n                }\n            });\n            return helpers;\n        },\n        processEvents(eventsToProcess = []) {\n            eventsToProcess.forEach(event => processors.forEach(process => process(event)));\n            return {\n                events: events[id].events.filter(completeEvent => completeEvent.endFlags !== undefined),\n            };\n        },\n    };\n    return helpers;\n}\n\nexport function eventsFor(participants, channels, calls = []) {\n    const eventsByParticipants = {};\n    Object.keys(participants).forEach((participantPhoneNumber) => {\n        eventsByParticipants[participantPhoneNumber] = { events: [] };\n        const participant = participants[participantPhoneNumber];\n        const channelEvents = channels[Object.keys(channels)[0]].events;\n        if (participant.isPrimary) {\n            let processedEvents = eventGroups(participantPhoneNumber)\n                .addGroup(\n                    'bridge',\n                    flags => flags.isBridge === true,\n                    flags => flags.isBridge !== true\n                        && flags.isCsStateChange === true,\n                )\n                .addGroup(\n                    'start',\n                    flags => flags.isChannelStart === true,\n                    flags => flags.isChannelRing === true,\n                )\n                .addGroup(\n                    'ring',\n                    flags => flags.isChannelRing === true,\n                    flags => flags.isChannelAnswer === true,\n                )\n                .addGroup(\n                    'recording',\n                    flags => flags.isRecordStart === true,\n                    flags => flags.isRecordStop === true,\n                )\n                .addGroup(\n                    'conference',\n                    flags => flags.isConferenceIn === true,\n                    flags => flags.isConferenceOut === true,\n                )\n                .addGroup(\n                    'transfer',\n                    flags => flags.isParkedTransfer === true,\n                    flags => flags.isBridge === true,\n                )\n                .addGroup(\n                    'pause',\n                    flags => flags.isRecordStop === true,\n                    flags => flags.isRecordStart === true,\n                )\n                .addGroup(\n                    'hold',\n                    flags => flags.isHold === true,\n                    flags => flags.isUnHold === true,\n                )\n                .addGroup(\n                    'routing',\n                    flags => flags.isRouting === true,\n                    flags => flags.isRouting !== true\n                        && flags.isCsStateChange === true,\n                )\n                .addGroup(\n                    'queuing',\n                    flags => flags.isQueuing === true,\n                    flags => flags.isQueuing !== true\n                        && flags.isCsStateChange === true,\n                )\n                .processEvents(channelEvents);\n            processedEvents = {\n                events: processedEvents.events.concat(calls\n                    .map((call, index) => ({\n                        event: 'CALL',\n                        style: `call${index}`,\n                        group: 'call',\n                        start: call.time.start,\n                        end: call.time.end / 1000,\n                        startFlags: {\n                            isCallStart: true,\n                        },\n                        endFlags: {\n                            isCallEnd: true,\n                        },\n                    }))),\n            };\n            eventsByParticipants[participantPhoneNumber] = processedEvents;\n        }\n    });\n    Object.keys(eventsByParticipants).forEach((key) => {\n        filterAndSortEvents(eventsByParticipants[key].events);\n    });\n    return {\n        type: PROCESS_EVENTS,\n        payload: {\n            eventsByParticipants,\n        },\n    };\n}\n","export const INITIAL_LOAD = 'INITIAL_LOAD';\nexport const PLAY = 'PLAY';\nexport const PLAY_FROM_START = 'PLAY_FROM_START';\nexport const PAUSE = 'PAUSE';\nexport const SKIP_BACK = 'SKIP_BACK';\nexport const SKIP_FORWARD = 'SKIP_FORWARD';\nexport const MOVE_SCRUBBER = 'MOVE_SCRUBBER';\nexport const MOVE_PLAY_HEAD = 'MOVE_PLAY_HEAD';\nexport const SET_PLAYBACK_SPEED = 'SET_PLAYBACK_SPEED';\nexport const TOGGLE_METRICS_LAYER = 'TOGGLE_METRICS_LAYER';\nexport const SHOW_METRICS_LAYER = 'SET_METRICS_LAYER';\nexport const HIDE_METRICS_LAYER = 'HIDE_METRICS_LAYER';\nexport const SET_AUDIO = 'SET_AUDIO';\nexport const MOVE_TRANSCRIPTION_PLAY_SCRUB = 'MOVE_TRANSCRIPTION_PLAY_SCRUB';\nexport const UPDATE_TRANSCRIPTION_VIEWPORT = 'UPDATE_TRANSCRIPTION_VIEWPORT';\nexport const UPDATE_TRANSCRIPTION_CONFIDENCE = 'UPDATE_TRANSCRIPTION_CONFIDENCE';\nexport const SET_NOTE_VISIBILITY = 'SET_NOTE_VISIBILITY';\nexport const IMPORT_NOTES = 'IMPORT_NOTES';\nexport const OPEN_RATE_CALL = 'OPEN_RATE_CALL';\nexport const CANCEL_RATE_CALL = 'CANCEL_RATE_CALL';\nexport const RATE_CALL = 'RATE_CALL';\nexport const SET_EVENT_TYPES = 'SET_EVENT_TYPES';\nexport const SET_NOTES = 'SET_NOTES';\nexport const SET_PARTICIPANTS = 'SET_PARTICIPANTS';\nexport const SET_JWT_TOKEN = 'SET_JWT_TOKEN';\nexport const SET_PARTICIPANT_NAMES = 'SET_PARTICIPANT_NAMES';\nexport const SET_CAN_SHARE = 'SET_CAN_SHARE';\n","export default __webpack_public_path__ + \"static/media/icon-account.f2b6ece7.svg\";","export default __webpack_public_path__ + \"static/media/icon-contact.e3ec6d62.svg\";","export default __webpack_public_path__ + \"static/media/icon-user.33a39f8c.svg\";","import { createSelector } from 'reselect';\n\nexport const getAuth = state => state.auth;\n\nexport const getAuthenticatedUserId = createSelector(\n    [getAuth],\n    auth => (auth && auth.jwtToken ? auth.jwtToken.userId : ''),\n);\n\nexport const getAuthenticatedUserName = createSelector(\n    [getAuth],\n    (auth) => {\n        if (auth && auth.displayName) {\n            return auth.displayName;\n        }\n        return auth && auth.jwtToken ? auth.jwtToken.userName : '';\n    },\n);\n","import { createSelector } from 'reselect';\nimport { getAuthenticatedUserId } from './authSelectors';\n\nexport const getNotesState = state => state.notes;\nexport const getUnreadNoteAndCommentIdsForCurrentUser = state => getNotesState(state).unread;\n\nexport const getNoteWithIdSelector = createSelector(\n    [getNotesState],\n    notes => id => notes.notes.find(obj => obj.noteId === id),\n);\n\nexport const getUnreadNoteAndCommentIdsForUser = createSelector(\n    [getNotesState],\n    notes => userId => (notes || { notes: [] }).notes.reduce((unread, {\n        noteId, thread, userActivity, noteModified,\n    }) => {\n        const lastUserActivity = (userActivity || []).find(activity => Number(activity.user) === Number(userId));\n        return [\n            ...unread,\n            ...(\n                !lastUserActivity || (new Date(lastUserActivity.lastRead)) < (new Date(noteModified))\n                    ? [noteId]\n                    : []\n            ),\n            ...(thread.reduce((unreadComments, comment) => [\n                ...unreadComments,\n                ...(\n                    !lastUserActivity || (new Date(lastUserActivity.lastRead)) < (new Date(comment.modified))\n                        ? [comment.uuid]\n                        : []\n                ),\n            ], [])),\n        ];\n    }, []),\n);\n\nexport const NotesFilter = {\n    all: 'Show All',\n    onlyUnread: 'Only unread notes',\n    onlyAcknowledged: 'Only acknowledged notes',\n    onlyUnAcknowledged: 'Only un-acknowledged notes',\n    onlyMyNotes: 'Only my notes',\n    onlyOpenNotes: 'Only open notes',\n    closedNotes: 'Only closed notes',\n};\n\nexport const getFilteredNotes = createSelector(\n    [getNotesState, getAuthenticatedUserId],\n    ({ notes, filter, unread }, authenticatedUserId) => {\n        switch (filter) {\n            case NotesFilter.closedNotes:\n                return notes.filter(note => note.isClosed);\n            case NotesFilter.onlyOpenNotes:\n                return notes.filter(note => !note.isClosed);\n            case NotesFilter.onlyAcknowledged:\n                return notes.filter(note => note.isAcknowledged);\n            case NotesFilter.onlyUnAcknowledged:\n                return notes.filter(note => !note.isAcknowledged);\n            case NotesFilter.onlyUnread:\n                return notes.filter(note => unread.includes(note.noteId) || note.thread.reduce(\n                    (foundUnread, comment) => unread.includes(comment.uuid),\n                    false,\n                ));\n            case NotesFilter.onlyMyNotes:\n                return notes.filter(note => Number(note.author) === Number(authenticatedUserId));\n            default:\n                return notes;\n        }\n    },\n);\n","export const updatedUserActivityForUser = (userActivity, userId, logTime = null) => [\n    ...(userActivity || []).filter(activity => Number(activity.user) !== Number(userId)),\n    {\n        user: userId,\n        lastRead: logTime || (new Date()).toISOString(),\n    },\n];\n\nexport const compareObjectProperties = (objectA, objectB) => keys => keys.reduce(\n    (equal, key) => equal && objectA[key] === objectB[key],\n    true,\n);\n\nexport default {\n    updatedUserActivityForUser,\n    compareObjectProperties,\n};\n","/* eslint-disable import/no-cycle */\n/* eslint-disable no-alert */\n/* eslint-disable quote-props */\n/* eslint-disable quotes */\nimport { setEventTypes } from './actions';\nimport { RATE_CALL, SET_CAN_SHARE, SET_PARTICIPANT_NAMES } from '../constants/actions';\nimport { SF_ACCOUNT_TYPE, TIMEOUT_MESSAGE } from '../constants/salesforce';\nimport { decode, JSONParsedIfStringified } from '../../shared/utility/formatting';\nimport accountIcon from '../../assets/svgs/icon-account.svg';\nimport contactIcon from '../../assets/svgs/icon-contact.svg';\nimport userIcon from '../../assets/svgs/icon-user.svg';\nimport { getNoteWithIdSelector, getUnreadNoteAndCommentIdsForUser } from '../selectors/noteSelectors';\nimport { getAuthenticatedUserId } from '../selectors/authSelectors';\nimport { compareObjectProperties, updatedUserActivityForUser } from '../../shared/utility/processing';\nimport { getPrimaryUuid } from \"../selectors/common-selectors\";\n\n// Salesforce remote actions\n// getAction\n// case 'getNamespace': return '{!$RemoteAction.InsightsController.getNamespace}';\n// case 'getEventTypes': return '{!$RemoteAction.InsightsController.getEventTypes}';\n// case 'getNotes': return '{!$RemoteAction.InsightsController.getNotes}';\n// case 'createNewNote': return '{!$RemoteAction.InsightsController.createNewNote}';\n// case 'EditNote': return '{!$RemoteAction.InsightsController.EditNote}';\n// case 'DeleteNote': return '{!$RemoteAction.InsightsController.DeleteNote}';\n// case 'getParticipantsInfo': return '{!$RemoteAction.InsightsController.getParticipantInfo}';\n// case 'canShareRecording': return '{!$RemoteAction.InsightsController.canShareRecording}';\n// case 'getOrgUrl': return '{!$RemoteAction.InsightsController.getOrgUrl}';\n// case 'getRatingDetails': return '{!$RemoteAction.InsightsController.getRatingDetails}';\n// case 'saveRating': return '{!$RemoteAction.InsightsController.saveRating}';\n\nexport const DELETE_NOTE = 'DELETE_NOTE';\nconst deleteNote = id => ({\n    type: DELETE_NOTE,\n    payload: {\n        noteId: id,\n    },\n});\n\nexport const REFRESH_UNREAD_NOTES = 'REFRESH_UNREAD_NOTES';\nexport function refreshUnreadNotes() {\n    return (dispatch, getState) => {\n        const state = getState();\n        const userId = getAuthenticatedUserId(state);\n        const ids = getUnreadNoteAndCommentIdsForUser(state)(userId);\n        dispatch({\n            type: REFRESH_UNREAD_NOTES,\n            payload: {\n                ids,\n            },\n        });\n    };\n}\n\nexport const SET_NOTES = 'SET_NOTES';\nexport const setNotes = allNotes => (dispatch) => {\n    // TODO call add note api\n    const notes = allNotes.map(note => ({\n        ...note,\n        timestamp: Number(note.timestamp),\n        eventType: Number(note.eventType),\n        thread: JSONParsedIfStringified(note.thread) || [],\n        userActivity: JSONParsedIfStringified(note.userActivity) || [],\n    }));\n    dispatch({\n        type: SET_NOTES,\n        payload: {\n            notes,\n        },\n    });\n    dispatch(refreshUnreadNotes());\n};\n\nexport const UPDATE_NOTE = 'UPDATE_NOTE';\nexport function updateNote(details) {\n    // TODO call add note api\n    return (dispatch) => {\n        dispatch({\n            type: UPDATE_NOTE,\n            payload: {\n                note: {\n                    ...details,\n                    thread: JSONParsedIfStringified(details.thread) || [],\n                    userActivity: JSONParsedIfStringified(details.userActivity) || [],\n                },\n            },\n        });\n        dispatch(refreshUnreadNotes());\n    };\n}\n\nconst invokeSFAction = (invoke, callBack, param) => {\n    if (window.parent.getVisualforce) {\n        const Manager = window.parent.getVisualforce();\n        const remoteAction = window.parent.getAction(invoke);\n        const escape = { escape: true };\n        if (param) Manager.invokeAction(remoteAction, param, callBack, escape);\n        else Manager.invokeAction(remoteAction, callBack, escape);\n    } else {\n        console.log('Warning: no salesforce parent');\n    }\n};\n\nconst handleTimeout = () => {\n    window.alert(TIMEOUT_MESSAGE);\n};\n\nexport const loadOrgUrl = () => new Promise((resolve, reject) => {\n    invokeSFAction('getOrgUrl', (result, event) => {\n        if (event.status) {\n            resolve(result);\n        } else if (event.xhr.responseText) {\n            handleTimeout();\n        } else {\n            reject(new Error(`${event.message}`));\n        }\n    });\n    // For standlone mode\n    if (!window.parent.getVisualforce) {\n        resolve();\n    }\n});\n\nexport const getNamespace = () => new Promise((resolve, reject) => {\n    invokeSFAction('getNamespace', (result, event) => {\n        if (event.status) {\n            resolve(result);\n        } else if (event.xhr.responseText) {\n            handleTimeout();\n        } else {\n            reject(new Error(`${event.message}`));\n        }\n    });\n});\n\nexport const getUserName = userId => new Promise((resolve, reject) => {\n    invokeSFAction('getUserName', (result, event) => {\n        if (event.status) {\n            resolve(result);\n        } else if (event.xhr.responseText) {\n            handleTimeout();\n        } else {\n            reject(new Error('Unable to fetch display name for user!'));\n        }\n    }, userId);\n});\n\nexport const loadEventType = () => (dispatch) => {\n    invokeSFAction('getEventTypes', (result, event) => {\n        if (event.status) {\n            dispatch(setEventTypes(result));\n        } else if (event.xhr.responseText) {\n            handleTimeout();\n        } else {\n            window.alert('Problem loading event types!');\n        }\n    });\n};\n\nexport const loadCanShareRecording = uuid => (dispatch) => {\n    if (uuid) {\n        invokeSFAction('canShareRecording', (result, event) => {\n            if (event.status) {\n                dispatch({ type: SET_CAN_SHARE, payload: result });\n            } else if (event.xhr.responseText) {\n                handleTimeout();\n            } else {\n                window.alert('Problem loading notes!');\n            }\n        }, uuid);\n    }\n};\n\nexport const loadParticipantsName = calls => (dispatch) => {\n    const participantsData = [];\n    calls.forEach((call) => {\n        participantsData.push({\n            userId: call.fromUserId,\n            phoneNum: call.fromNumber,\n        });\n        participantsData.push({\n            userId: call.toUserId,\n            phoneNum: call.toNumber,\n        });\n    });\n    // simulate get participant name\n    return new Promise((resolve, reject) => {\n        invokeSFAction('getParticipantsInfo', (result, event) => {\n            if (event.status) {\n                resolve(dispatch({ type: SET_PARTICIPANT_NAMES, payload: result }));\n            } else if (event.xhr.responseText) {\n                handleTimeout();\n            } else {\n                window.alert('Problem loading Participants Info!');\n                reject(new Error('Problem loading Participants Info!'));\n            }\n        }, participantsData);\n\n        // For standlone mode\n        if (!window.parent.getVisualforce) {\n            resolve();\n        }\n    });\n};\n\nexport const SET_PARTICIPANT_IMAGE = 'SET_PARTICIPANT_IMAGE';\nexport const setParticipantImage = participant => (dispatch) => {\n    const {\n        number, relatedUuids, type, userId,\n    } = participant;\n    const [uuid] = relatedUuids;\n    // TODO: Add salesforce code here to retrieve URL for user avatar\n    // For performance reasons, it will be better to link to a URL rather than embed base64 data\n    // though it should handle either if required.\n    let image;\n    if (userId) {\n        image = userIcon;\n    } else if (typeof type === 'string' && type.toUpperCase() === SF_ACCOUNT_TYPE) {\n        image = accountIcon;\n    } else {\n        image = contactIcon;\n    }\n    return new Promise((resolve) => {\n        resolve(dispatch({\n            type: SET_PARTICIPANT_IMAGE,\n            payload: { number, image, uuid },\n        }));\n    });\n};\n\nexport const loadNotes = uuid => (dispatch) => {\n    if (uuid) {\n        invokeSFAction('getNotes', (result, event) => {\n            if (event.status) {\n                dispatch(setNotes(result));\n            } else if (event.xhr.responseText) {\n                handleTimeout();\n            } else {\n                window.alert('Problem loading notes!');\n            }\n        }, uuid);\n    }\n};\n\nexport const isNoteEdited = (newNote, oldNote) => {\n    if (!oldNote) {\n        return true;\n    }\n    const notesPropertiesAreEqual = compareObjectProperties(newNote, oldNote);\n    if (Number.isNaN(newNote.timestamp) && Number.isNaN(oldNote.timestamp)) {\n        return !notesPropertiesAreEqual([\n            'text',\n            'channelUuid',\n            'polarity',\n            'eventType',\n        ]);\n    }\n    return !notesPropertiesAreEqual([\n        'timestamp',\n        'text',\n        'channelUuid',\n        'polarity',\n        'eventType',\n    ]);\n};\n\nexport const updateNotes = (note, logTime = null) => (dispatch, getState) => {\n    const state = getState();\n    const userId = getAuthenticatedUserId(state);\n    let actionType = 'createNewNote';\n    const existingNote = getNoteWithIdSelector(state)(note.noteId);\n    const timeInUSeconds = parseInt(note.timestamp, 10);\n    const timeInSeconds = timeInUSeconds / 1000000;\n    const hours = Math.floor(timeInSeconds / 3600);\n    const minutes = Math.floor((timeInSeconds % 3600) / 60);\n    const seconds = Math.floor(timeInSeconds % 60);\n\n    const timeVar = (note.timestamp)\n        ? `${String(hours).padStart(2, 0)}:${String(minutes).padStart(2, 0)}:${String(seconds).padStart(2, 0)}` : null;\n\n    const currentTime = logTime || (new Date()).toISOString();\n\n    const newNote = {\n        author: note.author,\n        authorName: note.authorName,\n        eventType: (parseInt(note.eventType, 10)).toString(),\n        text: decode(note.text),\n        timestamp: (parseInt(note.timestamp, 10)).toString(),\n        eventTime: timeVar,\n        uuid: note.uuid,\n        channelUuid: note.channelUuid,\n        isShared: note.isShared,\n        isAcknowledged: note.isAcknowledged,\n        isClosed: note.isClosed,\n        canShare: note.canShare,\n        noteCreated: existingNote ? existingNote.noteCreated : currentTime,\n        noteModified: isNoteEdited(note, existingNote) ? currentTime : existingNote.noteModified,\n        thread: JSON.stringify(note.thread || []),\n        polarity: note.polarity,\n        userActivity: JSON.stringify(\n            userId\n                ? updatedUserActivityForUser(note.userActivity || [], userId, currentTime)\n                : note.userActivity || [],\n        ),\n        version: note.version,\n    };\n\n    if (existingNote) {\n        actionType = 'EditNote';\n        newNote.noteId = note.noteId;\n    }\n    invokeSFAction(actionType, (result, event) => {\n        if (event.status) {\n            if (event.method === 'createNewNote') {\n                newNote.noteId = result;\n            }\n            dispatch(updateNote({\n                ...newNote,\n                timestamp: parseInt(newNote.timestamp, 10),\n                eventType: parseInt(newNote.eventType, 10),\n                eventTime: timeVar,\n                uuid: note.uuid,\n            }));\n\n            // Refresh notes to update note version numbers\n            loadNotes(getPrimaryUuid(state));\n        } else if (event.xhr.responseText) {\n            handleTimeout();\n        } else {\n            window.alert('Problem saving note!');\n        }\n    }, JSON.stringify(newNote));\n\n    // For standlone testing mode\n    if (!window.parent.getVisualforce) {\n        dispatch(updateNote({\n            ...newNote,\n            noteId: note.noteId,\n            timestamp: parseInt(newNote.timestamp, 10),\n            eventType: parseInt(newNote.eventType, 10),\n            eventTime: timeVar,\n            uuid: note.uuid,\n        }));\n    }\n};\n\nexport const onDeleteNote = noteId => (dispatch) => {\n    if (window.confirm(\"Delete this note?\")) {\n        invokeSFAction('DeleteNote', (result, event) => {\n            if (event.status) {\n                if ((result.includes(noteId))) {\n                    dispatch(deleteNote(noteId));\n                }\n            } else if (event.xhr.responseText) {\n                handleTimeout();\n            } else {\n                window.alert('Problem deleting note!');\n            }\n        }, noteId);\n\n        // For standlone mode\n        if (!window.parent.getVisualforce) {\n            dispatch(deleteNote(noteId));\n        }\n    }\n};\n\nexport const loadRatings = uuid => (dispatch) => {\n    if (uuid) {\n        invokeSFAction('getRatingDetails', (result, event) => {\n            if (event.status) {\n                let ratingData = result.data;\n                if (result.data && !result.data[0].salesforceId) {\n                    ratingData = result.data.map((item, index) => ({\n                        ...item,\n                        salesforceId: item.salesforceId ? item.salesforceId : `tempID-${index}`,\n                        note: '',\n                    }));\n                }\n                dispatch({ type: RATE_CALL, payload: { rating: ratingData } });\n            } else if (event.xhr.responseText) {\n                handleTimeout();\n            } else {\n                window.alert('Problem loading ratings!');\n            }\n        }, uuid);\n    }\n};\n\nexport const saveRatings = rating => (dispatch, getState) => {\n    // For standlone mode\n    if (!window.parent.getVisualforce) {\n        dispatch({\n            type: RATE_CALL,\n            payload: {\n                rating,\n                showCallRatingDialog: false,\n            },\n        });\n    } else {\n        const { auth, primaryUuid } = getState();\n\n        if (auth.jwtToken && auth.jwtToken.userId) {\n            const newData = rating.map((item) => {\n                const newItem = { ...item };\n                if (newItem.salesforceId && newItem.salesforceId.includes('tempID')) {\n                    delete newItem.salesforceId;\n                }\n                return newItem;\n            });\n            const newRatings = {\n                userId: auth.jwtToken.userId,\n                channelUuid: primaryUuid,\n                data: newData,\n            };\n            invokeSFAction('saveRating', (result, event) => {\n                if (event.status) {\n                    const ratingData = result.data ? result.data : [];\n                    dispatch({\n                        type: RATE_CALL,\n                        payload: {\n                            rating: ratingData.map((item, index) => (\n                                {\n                                    ...item,\n                                    salesforceId: item.salesforceId ? item.salesforceId : `tempID-${index}`,\n                                }\n                            )),\n                            showCallRatingDialog: false,\n                        },\n                    });\n                } else if (event.xhr.responseText) {\n                    handleTimeout();\n                } else {\n                    window.alert('Problem saving new ratings!');\n                }\n            }, JSON.stringify(newRatings));\n        }\n    }\n};\n","export const SF_ACCOUNT_TYPE = 'ACCOUNT';\nexport const SF_CONTACT_TYPE = 'CONTACT';\nexport const TIMEOUT_MESSAGE = 'Sorry, your session has timed out. Please refresh your page to try again';\n","/* eslint-disable import/no-cycle */\nimport {\n    CANCEL_RATE_CALL,\n    HIDE_METRICS_LAYER,\n    IMPORT_NOTES,\n    INITIAL_LOAD,\n    MOVE_PLAY_HEAD,\n    MOVE_SCRUBBER,\n    MOVE_TRANSCRIPTION_PLAY_SCRUB,\n    OPEN_RATE_CALL,\n    PAUSE,\n    PLAY,\n    PLAY_FROM_START,\n    RATE_CALL,\n    SET_AUDIO,\n    SET_EVENT_TYPES,\n    SET_NOTE_VISIBILITY,\n    SET_PLAYBACK_SPEED,\n    SHOW_METRICS_LAYER,\n    SKIP_BACK,\n    SKIP_FORWARD,\n    TOGGLE_METRICS_LAYER,\n    UPDATE_TRANSCRIPTION_CONFIDENCE,\n    UPDATE_TRANSCRIPTION_VIEWPORT,\n} from '../constants/actions';\nimport { getAudioAnalysis } from '../../routes/api/App';\nimport { getTimeline } from '../selectors';\nimport { createParticipants } from './participants';\nimport { setPrimaryUuid } from './primaryUuid';\nimport { fetchEvents } from './events';\nimport { fetchCalls } from './calls';\nimport { createAudioEvents, fetchAudio } from './audio';\nimport {\n    loadCanShareRecording, loadEventType, loadNotes, loadParticipantsName, loadRatings, refreshUnreadNotes,\n} from './salesforce';\nimport {\n    getAudioState,\n    getCalls,\n    getCallsState,\n    getEventsFromEventsState,\n    getLoadProgress,\n    getParticipantNames,\n    getPlaybackSpeed,\n    getPrimaryUuid,\n} from '../selectors/common-selectors';\nimport { loadTranscription } from './transcription';\nimport { setLoadProgress } from './status';\nimport { logSilentError, showFetchError } from './errors';\nimport { BlockingInsightsError, LoadingError } from '../../shared/utility/errors';\nimport getTimestampWithAudioOffsetFunc from '../selectors/timestampWithAudioOffset';\nimport { STATUS_EMPTY } from '../constants/data';\n\nfunction processChannels(primaryUuid, channelData) {\n    // TODO: this should be removed once processdata has been refactored\n    const channels = {};\n    channelData.events.forEach((item) => {\n        const channel = channels[item.uuid] || {};\n        channel.events = item.events;\n        channels[item.uuid] = channel;\n    });\n\n    channelData.talkTime.forEach((item) => {\n        const [, uuid] = item.data.recordingId.split('/');\n        const channel = channels[uuid] || {};\n        channel.talkTime = item.data.analysis.data;\n        channels[uuid] = channel;\n    });\n\n    // TODO: Change \"shift()\" to \"pop()\" when RECORD_EVENTS are fixed\n    Object.keys(channels).forEach((key) => {\n        channels[key].isPrimary = key === primaryUuid;\n        const event = channels[key].events\n            .filter(item => item.flags.isRecordStart === true)\n            .sort((a, b) => a.timestamp - b.timestamp)\n            .shift();\n        if (event !== undefined) {\n            channels[key].start = event.timestamp;\n        } else {\n            // TODO: STATUS IS 'EMPTY' under this condition. Add a property or indicator in the root status.\n        }\n        channels[key].end = channels[key].events\n            .filter(item => item.flags.isRecordStop === true)\n            .sort((a, b) => a.timestamp - b.timestamp)\n            .pop()\n            .timestamp;\n    });\n\n    const timelineStart = Object.keys(channels)\n        .map(key => channels[key])\n        .filter(channel => channel.isPrimary === true)\n        .reduce((previous, current) => Math.min(previous, current.start), Number.MAX_SAFE_INTEGER);\n    const timelineEnd = Object.keys(channels)\n        .map(key => channels[key])\n        .filter(channel => channel.isPrimary === true)\n        .reduce((previous, current) => Math.max(previous, current.end), 0);\n    const timelineRange = timelineEnd - timelineStart;\n\n    return {\n        timelineRange,\n        timelineStart,\n        timelineEnd,\n        channels,\n    };\n}\n\n// TODO: Once API sends talktime data, replace this fabrication method with data processing method\nexport function processTalkTime(channels) {\n    const timelineStart = Object.keys(channels)\n        .map(key => channels[key])\n        .filter(channel => channel.isPrimary === true)\n        .reduce((previous, current) => Math.min(previous, current.start), Number.MAX_SAFE_INTEGER);\n    const timelineEnd = Object.keys(channels)\n        .map(key => channels[key])\n        .filter(channel => channel.isPrimary === true)\n        .reduce((previous, current) => Math.max(previous, current.end), 0);\n\n    // TODO: Replace with data from API\n    const timelineRange = timelineEnd - timelineStart;\n    return {\n        1: [\n            {\n                event: 'CLASH_WIN',\n                timestamp: timelineStart + (timelineRange * 0.2),\n            },\n            {\n                event: 'CLASH_WIN',\n                timestamp: timelineStart + (timelineRange * 0.3),\n            },\n            {\n                event: 'STEAL',\n                timestamp: timelineStart + (timelineRange * 0.4),\n            },\n            {\n                event: 'INTERRUPTION',\n                timestamp: timelineStart + (timelineRange * 0.5),\n            },\n        ],\n        2: [\n            {\n                event: 'CLASH_WIN',\n                timestamp: timelineStart + (timelineRange * 0.8),\n            },\n            {\n                event: 'AFFIRMATION',\n                timestamp: timelineStart + (timelineRange * 0.7),\n            },\n            {\n                event: 'INTERRUPTION',\n                timestamp: timelineStart + (timelineRange * 0.6),\n            },\n        ],\n    };\n}\n\nexport function initialLoad(channels, talkTime) {\n    return {\n        type: INITIAL_LOAD,\n        payload: {\n            channels,\n            talkTime,\n        },\n    };\n}\n\nexport const REQUEST_DATA = 'REQUEST_DATA';\nexport const RECEIVE_DATA = 'RECEIVE_DATA';\n\nexport function loadData(primaryUuid, calls) {\n    /* eslint-disable no-await-in-loop, no-loop-func */\n    return async (dispatch, getState) => {\n        dispatch({ type: REQUEST_DATA, payload: { isLoading: true } });\n        const data = {\n            events: [{\n                uuid: primaryUuid,\n                events: getEventsFromEventsState(getState()),\n            }],\n            channelData: [],\n            talkTime: [],\n        };\n        /*\n            TODO: Notes - Populate getNotes(uuid) method to retrieve the correct data from Salesforce\n            suggestion: uuid can either be the primaryUuid or the list of all linked uuids (orderedUuids)\n            depending on how the notes are stored.\n\n            Then call dispatch(importNotes(noteArray));\n         */\n\n        /* dispatch in the app.js to load notes is already handled by salesforce actions */\n        // const notes = await getNotes(primaryUuid);\n        // dispatch(importNotes(notes));\n\n        try {\n            const talkTime = await getAudioAnalysis(primaryUuid, getState().auth.jwtToken);\n            talkTime.data.analysis.data = JSON.parse(talkTime.data.analysis.data);\n            data.talkTime.push(talkTime);\n        } catch (error) {\n            // TODO: Handle errors\n            console.log(error);\n            // TODO We don't currently use this data so errors don't need to be blocking\n            // window.alert('Unable to load audio analysis');\n            // return;\n        }\n\n        const {\n            channels,\n        } = processChannels(primaryUuid, data);\n        const talkTime = processTalkTime(channels);\n        dispatch(createParticipants(primaryUuid, calls, channels, getParticipantNames(getState())));\n        dispatch(initialLoad(channels, talkTime));\n        dispatch(createAudioEvents());\n        dispatch(loadTranscription(primaryUuid, calls, data));\n        dispatch({ type: RECEIVE_DATA, payload: { isLoading: false } });\n    };\n    /* eslint-enable no-await-in-loop, no-loop-func */\n}\n\nexport function importNotes(notes) {\n    return {\n        type: IMPORT_NOTES,\n        payload: {\n            notes,\n        },\n    };\n}\n\nexport function play() {\n    return { type: PLAY };\n}\n\nexport function playFromStart() {\n    return { type: PLAY_FROM_START };\n}\n\nexport function pause() {\n    return { type: PAUSE };\n}\n\nexport function skipBack() {\n    return (dispatch, getState) => {\n        // Calculate 10 seconds (in microseconds) as a percentage of the timeline\n        const adjustment = 10000000 / getTimeline(getState()).range * 100;\n        dispatch({\n            type: SKIP_BACK,\n            payload: {\n                adjustment,\n            },\n        });\n    };\n}\n\nexport function skipForward() {\n    return (dispatch, getState) => {\n        // Calculate 30 seconds (in microseconds) as a percentage of the timeline\n        const adjustment = 30000000 / getTimeline(getState()).range * 100;\n        dispatch({\n            type: SKIP_FORWARD,\n            payload: {\n                adjustment,\n            },\n        });\n    };\n}\n\nexport function moveScrubber(scrub) {\n    return {\n        type: MOVE_SCRUBBER,\n        payload: {\n            scrub,\n        },\n    };\n}\n\nexport function setPlaybackSpeed(speed) {\n    return {\n        type: SET_PLAYBACK_SPEED,\n        payload: {\n            speed,\n        },\n    };\n}\n\nexport function movePlayHead(position, isUserAction) {\n    return (dispatch, getState) => {\n        const speed = getPlaybackSpeed(getState());\n        if (isUserAction && speed !== 1) {\n            dispatch(setPlaybackSpeed(1));\n        }\n        dispatch({\n            type: MOVE_PLAY_HEAD,\n            payload: {\n                position,\n            },\n        });\n    };\n}\n\nexport function toggleMetricsLayer(layer) {\n    return {\n        type: TOGGLE_METRICS_LAYER,\n        payload: {\n            layer,\n        },\n    };\n}\n\nexport const TOGGLE_FILTER_LAYER = 'TOGGLE_FILTER_LAYER';\nexport function toggleFilterLayer(layer, filter) {\n    return {\n        type: TOGGLE_FILTER_LAYER,\n        payload: {\n            layer,\n            filter,\n        },\n    };\n}\n\nexport function showMetricsLayer(layer) {\n    return {\n        type: SHOW_METRICS_LAYER,\n        payload: {\n            layer,\n        },\n    };\n}\n\nexport function hideMetricsLayer(layer) {\n    return {\n        type: HIDE_METRICS_LAYER,\n        payload: {\n            layer,\n        },\n    };\n}\n\nexport function setAudio(events) {\n    return {\n        type: SET_AUDIO,\n        payload: {\n            events,\n        },\n    };\n}\n\nexport function moveTranscriptionPlayScrub(transcriptionPlayScrub) {\n    return {\n        type: MOVE_TRANSCRIPTION_PLAY_SCRUB,\n        payload: {\n            transcriptionPlayScrub,\n        },\n    };\n}\n\nexport function updateTranscriptionViewport(viewport) {\n    return {\n        type: UPDATE_TRANSCRIPTION_VIEWPORT,\n        payload: {\n            viewport,\n        },\n    };\n}\n\nexport function updateTranscriptionConfidence(confidence) {\n    return {\n        type: UPDATE_TRANSCRIPTION_CONFIDENCE,\n        payload: {\n            confidence,\n        },\n    };\n}\n\nexport function setNoteVisibility(visible) {\n    return {\n        type: SET_NOTE_VISIBILITY,\n        payload: {\n            visible,\n        },\n    };\n}\n\nexport const SET_COMPLETED_NOTES_VISIBILITY = 'SET_COMPLETED_NOTES_VISIBILITY';\n\nexport function setCompletedNotesVisibility(visible) {\n    return {\n        type: SET_COMPLETED_NOTES_VISIBILITY,\n        payload: {\n            visible,\n        },\n    };\n}\n\nexport function openRateCall() {\n    return {\n        type: OPEN_RATE_CALL,\n        payload: {\n            showCallRatingDialog: true,\n        },\n    };\n}\n\nexport function cancelRateCall() {\n    return {\n        type: CANCEL_RATE_CALL,\n        payload: {\n            showCallRatingDialog: false,\n        },\n    };\n}\n\nexport function rateCall(details) {\n    // TODO call rate call api\n    return {\n        type: RATE_CALL,\n        payload: {\n            showCallRatingDialog: false,\n            rating: details,\n        },\n    };\n}\n\nexport function focusOnPosition(position) {\n    return (dispatch, getState) => {\n        const { scrub, transcription } = getState();\n        const { viewport } = transcription;\n        const { span } = viewport;\n        const timeline = getTimeline(getState());\n\n        const getTimestampWithAudioOffset = getTimestampWithAudioOffsetFunc(getState());\n        const sentencePosition = (position * 1000) + timeline.start;\n        const sentencePositionWithOffset = getTimestampWithAudioOffset(sentencePosition) - timeline.start;\n        const pos = sentencePositionWithOffset * 100 / timeline.range;\n\n        // Timeline\n        const scrubWidth = (scrub.end - scrub.start);\n        const scrubMiddle = scrub.start + (scrubWidth / 2);\n        const scrubDiff = pos - scrubMiddle;\n        const scrubStart = Math.min(Math.max(0, scrub.start + scrubDiff), 100 - scrubWidth);\n        const scrubEnd = scrubStart + scrubWidth;\n\n        // Transcription\n        const vpMiddle = viewport.start + (span / 2);\n        const vpDiff = pos - vpMiddle;\n        const vpStart = Math.min(Math.max(0, viewport.start + vpDiff), 100 - span);\n\n        dispatch(movePlayHead(pos, true));\n        dispatch(moveScrubber({ start: scrubStart, end: scrubEnd }));\n        dispatch(updateTranscriptionViewport({ start: vpStart, span }));\n    };\n}\n\nexport function setEventTypes(lstresult) {\n    return {\n        type: SET_EVENT_TYPES,\n        payload: {\n            eventTypes: lstresult,\n        },\n    };\n}\n\nexport const RESET_STATE = 'RESET_STATE';\n\nexport function resetState() {\n    return {\n        type: RESET_STATE,\n        payload: null,\n    };\n}\n\nexport function audioErrorMessageFromLoading(error) {\n    const status = error instanceof LoadingError ? error.response.status : 0;\n    if (status === 403) {\n        return 'Unable to load recording. You may not have permission to access this file.';\n    }\n    return 'Unable to load recording. The recording is not yet available or may have been purged.';\n}\n\nfunction blockingErrorFromLoading(error) {\n    const status = error instanceof LoadingError ? error.response.status : 0;\n    let blockingMessage = 'Unable to load recording. The recording is not yet available or may have been purged.';\n    if (status === 403) {\n        blockingMessage = 'Unable to load recording. You may not have permission to access this file.';\n    } else if (status >= 500) {\n        blockingMessage = 'We were unable to fetch the audio file at this time. Please try again later.';\n    }\n    return new BlockingInsightsError(STATUS_EMPTY,\n        'Unable to load recording.',\n        blockingMessage);\n}\n\nexport function validateAudioAndCalls() {\n    return (dispatch, getState) => {\n        const state = getState();\n        const { error } = getAudioState(state);\n        const { isRecorded } = getCallsState(state);\n        if (error) {\n            if (isRecorded) {\n                return Promise.reject(blockingErrorFromLoading(error));\n            }\n            const blockingError = new BlockingInsightsError(STATUS_EMPTY,\n                'No recording was made.',\n                'A recording was not made for this experience.');\n            return Promise.reject(blockingError);\n        }\n        return Promise.resolve();\n    };\n}\n\nconst simulateProgress = (dispatch, getState) => {\n    let callCount = 1;\n    const repeater = setInterval(() => {\n        if (callCount < 10) {\n            const state = getState();\n            const loadProgress = getLoadProgress(state);\n            // once audio is loaded, progress is at 20% so we clear\n            if (loadProgress > 19) {\n                clearInterval(repeater);\n            } else {\n                dispatch(setLoadProgress(10 + callCount));\n                callCount += 1;\n            }\n        } else {\n            clearInterval(repeater);\n        }\n    }, 1000);\n};\n\nexport function initialiseWithPrimaryUuid(uuid) {\n    if (typeof uuid !== 'string' || uuid.length === 0) {\n        return (dispatch) => {\n            dispatch(logSilentError('Invalid PrimaryUUID'));\n            return Promise.reject();\n        };\n    }\n    return (dispatch, getState) => {\n        if (uuid === getPrimaryUuid(getState())) {\n            return null;\n        }\n        const errorHandler = error => dispatch(showFetchError(error));\n        dispatch(resetState());\n        dispatch(setPrimaryUuid(uuid));\n        simulateProgress(dispatch, getState);\n        dispatch(pause());\n        return dispatch(fetchAudio())\n            .then(() => dispatch(fetchEvents()))\n            .then(() => dispatch(fetchCalls()))\n            .then(() => dispatch(validateAudioAndCalls()))\n            .then(() => {\n                const state = getState();\n                const primaryUuid = getPrimaryUuid(state);\n                const calls = getCalls(state);\n                dispatch(loadCanShareRecording(primaryUuid));\n                dispatch(loadRatings(primaryUuid));\n                dispatch(loadParticipantsName(calls)).then(() => {\n                    dispatch(loadData(primaryUuid, calls));\n                    dispatch(loadEventType());\n                    dispatch(loadNotes(primaryUuid));\n                    return dispatch(refreshUnreadNotes());\n                });\n            })\n            .then(() => dispatch(movePlayHead(0)))\n            .catch(errorHandler);\n    };\n}\n","import { AGENT_TITLE, CUSTOMER_TITLE } from '../../routes/api/Environment';\n\nexport const CREATE_EXPERIENCE_OPTIONS = 'SET_EXPERIENCE_OPTIONS';\nexport function createExperienceOptions(participants) {\n    if (Object.keys(participants).length > 0) {\n        const options = {};\n        let agent = 1;\n        const data = Object.keys(participants);\n        data.forEach((number) => {\n            const participant = participants[number];\n            const [uuid] = participant.relatedUuids;\n            if (!participant.isAgent) {\n                const customerName = (participant.name) ? `${participant.name.toUpperCase()}'S` : CUSTOMER_TITLE;\n                options[uuid] = {\n                    type: CUSTOMER_TITLE,\n                    viewName: `${customerName} Experience`,\n                    icon: participant.image,\n                    color: participant.color,\n                    avatar: participant.photoUrl,\n                };\n            } else {\n                const agentName = (participant.name) ? `${participant.name.toUpperCase()}'S` : `${AGENT_TITLE} ${agent}`;\n                options[uuid] = {\n                    type: AGENT_TITLE,\n                    viewName: `${agentName} View`,\n                    icon: participant.image,\n                    color: participant.color,\n                    avatar: participant.photoUrl,\n                };\n                agent += 1;\n            }\n        });\n        return {\n            type: CREATE_EXPERIENCE_OPTIONS,\n            payload: options,\n        };\n    }\n    return {\n        type: CREATE_EXPERIENCE_OPTIONS,\n        payload: {},\n    };\n}\n","/* eslint-disable import/no-cycle */\nimport { eventsFor } from './events';\nimport { setParticipantImage } from './salesforce';\nimport { createExperienceOptions } from './experienceOptions';\nimport { AGENT_TITLE, CUSTOMER_TITLE } from '../../routes/api/Environment';\nimport userIcon from '../../assets/svgs/icon-user.svg';\n\nexport function addUuidToParticipant(participant, uuid) {\n    if (!participant.relatedUuids.includes(uuid)) {\n        participant.relatedUuids.push(uuid);\n    }\n}\n\nexport function numberOfAgents(participants) {\n    return Object.keys(participants).filter(key => participants[key].isAgent).length;\n}\n\nexport function nextAgentColor(participants) {\n    return numberOfAgents(participants) === 0 ? '#00A9CE' : '#64CCC9';\n}\n\nexport function numberOfCustomers(participants) {\n    return Object.keys(participants).filter(key => !participants[key].isAgent).length;\n}\n\nexport function nextCustomerColor(participants) {\n    return numberOfCustomers(participants) === 0 ? '#FFC72C' : '#FFA12C';\n}\n\nexport function newParticipant(isPrimary, isAgent, userId = null, participants) {\n    return {\n        isPrimary,\n        isAgent,\n        userId,\n        image: userIcon,\n        relatedUuids: [],\n        start: Number.MAX_SAFE_INTEGER,\n        end: 0,\n        initials: null,\n        title: '',\n        agentNumber: isAgent ? numberOfAgents(participants) + 1 : null,\n        agents: 0,\n        classes: isAgent ? 'local-caller' : 'remote-caller',\n        color: isAgent ? nextAgentColor(participants) : nextCustomerColor(participants),\n        call: {\n            isInternalOnly: false,\n        },\n        type: null,\n    };\n}\n\nexport function newFromParticipant(uuid, call, participants) {\n    const isPrimary = call.aUuid === uuid;\n    const isAgent = call.fromSipDeviceId !== null || call.fromUserId !== null;\n    return newParticipant(isPrimary, isAgent, call.fromUserId, participants);\n}\n\nexport function newToParticipant(uuid, call, participants) {\n    const isPrimary = call.bUuid === uuid;\n    const isAgent = call.toSipDeviceId !== null || call.toUserId !== null;\n    return newParticipant(isPrimary, isAgent, call.toUserId, participants);\n}\n\n\nexport function addParticipantClassificationData(participants) {\n    const dataParticipants = participants;\n    const noOfAgents = numberOfAgents(participants);\n    Object.keys(participants).forEach((key) => {\n        const { isAgent, agentNumber } = participants[key];\n        dataParticipants[key].agents = noOfAgents;\n        dataParticipants[key].number = key;\n        dataParticipants[key].call.isInternalOnly = noOfAgents === Object.keys(dataParticipants).length;\n        let prefix = '';\n        if (!isAgent) {\n            prefix = '+';\n            dataParticipants[key].title = CUSTOMER_TITLE;\n        } else if (noOfAgents > 1) {\n            dataParticipants[key].title = `${AGENT_TITLE} ${agentNumber}`;\n            dataParticipants[key].classes = `local-caller-${agentNumber === 1 ? 'a' : 'b'}`;\n        } else {\n            dataParticipants[key].title = AGENT_TITLE;\n        }\n        const { title, number } = dataParticipants[key];\n        dataParticipants[key].fullNumber = `${prefix}${number}`;\n        const { fullNumber } = dataParticipants[key];\n        dataParticipants[key].fullTitle = `${title} (${fullNumber})`;\n    });\n    return dataParticipants;\n}\n\nexport const SET_PARTICIPANTS = 'SET_PARTICIPANTS';\nexport function setParticipants(participants) {\n    return {\n        type: SET_PARTICIPANTS,\n        payload: participants,\n    };\n}\n\nexport function buildParticipantsArray(primaryUuid, calls, channels, participantNames) {\n    const participants = {};\n    calls.forEach((call) => {\n        const startTime = (new Date(call.timeStart)).getTime() * 1000;\n        const endTime = ((new Date(call.timeStart)).getTime() + call.timeTalking * 1000) * 1000;\n        if (!participants[call.fromNumber]) {\n            participants[call.fromNumber] = newFromParticipant(primaryUuid, call, participants);\n            const participantNameItem = participantNames && participantNames.find(item => call.fromNumber === item.phoneNum);\n            if (participantNameItem) {\n                participants[call.fromNumber].name = participantNameItem.name || null;\n                participants[call.fromNumber].initials = participantNameItem.initials || null;\n                participants[call.fromNumber].photoUrl = participantNameItem.photoUrl || null;\n                participants[call.fromNumber].type = participantNameItem.type || null;\n            }\n        }\n        if (!participants[call.toNumber]) {\n            participants[call.toNumber] = newToParticipant(primaryUuid, call, participants);\n            const participantNameItem = participantNames && participantNames.find(item => call.toNumber === item.phoneNum);\n            if (participantNameItem) {\n                participants[call.toNumber].name = participantNameItem.name || null;\n                participants[call.toNumber].initials = participantNameItem.initials || null;\n                participants[call.toNumber].photoUrl = participantNameItem.photoUrl || null;\n                participants[call.toNumber].type = participantNameItem.type || null;\n            }\n        }\n        addUuidToParticipant(participants[call.fromNumber], call.aUuid);\n        addUuidToParticipant(participants[call.toNumber], call.bUuid);\n        participants[call.toNumber].start = Math.min(participants[call.toNumber].start, startTime);\n        participants[call.fromNumber].start = Math.min(participants[call.fromNumber].start, startTime);\n        participants[call.toNumber].end = endTime || 0;\n        participants[call.fromNumber].end = endTime || 0;\n    });\n    return addParticipantClassificationData(participants);\n}\n\nexport function createParticipants(primaryUuid, calls, channels, participantNames) {\n    const participantsWithClassificationData = buildParticipantsArray(primaryUuid, calls, channels, participantNames);\n    return (dispatch) => {\n        dispatch(setParticipants(participantsWithClassificationData));\n        dispatch(eventsFor(participantsWithClassificationData, channels, calls));\n        dispatch(createExperienceOptions(participantsWithClassificationData));\n        Object.keys(participantsWithClassificationData).forEach((key) => {\n            dispatch(setParticipantImage(participantsWithClassificationData[key]));\n        });\n    };\n}\n","export const TOGGLE_ROUTING = 'TOGGLE_ROUTING';\nexport const LOAD_PROGRESS = 'LOAD_PROGRESS';\n\nexport function toggleRouting() {\n    return {\n        type: TOGGLE_ROUTING,\n    };\n}\n\nexport function setLoadProgress(percentage) {\n    return {\n        type: LOAD_PROGRESS,\n        payload: percentage,\n    };\n}\n\nexport const SET_STATUS = 'SET_STATUS';\n\nexport function setStatus(status, description = null) {\n    return {\n        type: SET_STATUS,\n        payload: {\n            status,\n            description,\n        },\n    };\n}\n\nexport const SET_NOTES_WIDTH = 'SET_NOTES_WIDTH';\n\nexport const setNotesWidth = width => ({\n    type: SET_NOTES_WIDTH,\n    payload: width,\n});\n","import { getChannelsFromDataState, getPrimaryUuid } from '../selectors/common-selectors';\nimport { getAudioRecording } from '../../routes/api/App';\nimport { scale } from '../../shared/utility/timeline';\nimport { SET_AUDIO } from '../constants/actions';\nimport { getTimeline } from '../selectors';\nimport { setLoadProgress } from './status';\n\nexport const REQUEST_AUDIO = 'REQUEST_AUDIO';\n\nexport function requestAudio() {\n    return {\n        type: REQUEST_AUDIO,\n        payload: {\n            isLoading: true,\n        },\n    };\n}\n\nexport const INVALIDATE_AUDIO = 'INVALIDATE_AUDIO';\n\nexport function invalidateAudio() {\n    return {\n        type: INVALIDATE_AUDIO,\n        payload: {\n            source: null,\n            duration: null,\n        },\n    };\n}\n\nexport const RECEIVE_AUDIO = 'RECEIVE_AUDIO';\n\nexport function receiveAudio(source, duration) {\n    return {\n        type: RECEIVE_AUDIO,\n        payload: {\n            isLoading: false,\n            source,\n            duration,\n        },\n    };\n}\n\nexport const NO_AUDIO = 'NO_AUDIO';\n\nexport function noAudio(error) {\n    return {\n        type: NO_AUDIO,\n        payload: {\n            error,\n        },\n    };\n}\n\nexport function fetchAudio(\n    getAudioRecordingApiCall = getAudioRecording,\n    createObjectURL = window.URL.createObjectURL,\n) {\n    return async (dispatch, getState) => {\n        dispatch(requestAudio());\n        dispatch(invalidateAudio());\n        const primaryUuid = getPrimaryUuid(getState());\n        try {\n            const updateProgress = (percentage) => {\n                const progress = Math.round(percentage);\n                // limit to 99 just in case\n                const cappedProgress = Math.min(99, Math.max(20, progress));\n                dispatch(setLoadProgress(cappedProgress));\n            };\n            const { blob, duration } = await getAudioRecordingApiCall(primaryUuid, getState().auth.jwtToken, updateProgress);\n            const source = createObjectURL(await blob);\n            dispatch(receiveAudio(source, duration));\n        } catch (error) {\n            dispatch(noAudio(error));\n        }\n        return Promise.resolve();\n    };\n}\n\nexport function createAudioEvents() {\n    return (dispatch, getState) => {\n        const state = getState();\n        const primaryUuid = getPrimaryUuid(state);\n        const channels = getChannelsFromDataState(state);\n        const { start, end } = getTimeline(state);\n        const channel = channels[primaryUuid];\n        if (!channel) {\n            return;\n        }\n        const startEvent = {\n            flags: { isRecordStop: true },\n            timestamp: start,\n        };\n        const endEvent = {\n            flags: { isRecordStop: true },\n            timestamp: end,\n        };\n        const channelLength = endEvent.timestamp - startEvent.timestamp;\n        const audioEvents = [\n            startEvent,\n            channel.events.filter(event => (\n                event.flags.isRecordStart === true\n                || event.flags.isRecordStop === true\n                || (event.flags.isSecondary && (event.flags.isHold || event.flags.isUnHold))\n            )),\n            endEvent,\n        ].flat().map(event => ({\n            ...event,\n            position: 100 / channelLength * (event.timestamp - startEvent.timestamp),\n        }));\n        let playTime = 0;\n        let lastEvent = startEvent;\n        let playEvent = null;\n        let playEvents = [];\n        let offset = 0;\n        audioEvents.forEach((event) => {\n            const { flags, position } = event;\n            if (!playEvent && (\n                flags.isRecordStart === true\n                || (flags.isSecondary && flags.isUnHold)\n            )) {\n                offset += event.timestamp - lastEvent.timestamp;\n                playEvent = {\n                    audioStart: playTime,\n                    start: event.position,\n                    timelineStart: event.timestamp,\n                    offset,\n                };\n            } else if (playEvent && (\n                flags.isRecordStop === true\n                || (flags.isSecondary && flags.isHold)\n            )) {\n                playTime += position - lastEvent.position;\n                playEvent.stop = position;\n                playEvent.audioStop = playTime;\n                playEvent.timelineStop = event.timestamp;\n                playEvents.push(playEvent);\n                playEvent = null;\n            }\n            lastEvent = event;\n        });\n        playEvents = playEvents.map(event => ({\n            ...event,\n            audioStart: 100 / playTime * event.audioStart,\n            audioStop: 100 / playTime * event.audioStop,\n        }))\n            .map(event => ({\n                ...event,\n                timeline: {\n                    start: new Date(event.timelineStart / 1000),\n                    stop: new Date(event.timelineStop / 1000),\n                },\n            }));\n        playEvents = playEvents.map(event => ({\n            ...event,\n            playheadAtMediaPosition(media) {\n                const {\n                    stop,\n                    audioStart,\n                    audioStop,\n                } = event;\n                const { duration, currentTime } = media;\n                const currentTimeAsPercentageOfAudio = 100 / duration * currentTime;\n                return scale(currentTimeAsPercentageOfAudio, audioStart, audioStop, event.start, stop);\n            },\n            mediaPositionAtPlayhead(playhead, media) {\n                const {\n                    stop,\n                    audioStart,\n                    audioStop,\n                } = event;\n                const { duration } = media;\n                const playheadAsPercentageOfAudio = scale(playhead, event.start, stop, audioStart, audioStop);\n                return duration / 100 * playheadAsPercentageOfAudio;\n            },\n        }));\n        dispatch({\n            type: SET_AUDIO,\n            payload: {\n                events: playEvents,\n            },\n        });\n    };\n}\n","/* eslint-disable import/prefer-default-export */\nexport function getQuery() {\n    const search = window.location.search.substring(1);\n    if (search.length === 0) {\n        return {};\n    }\n\n    const query = {};\n\n    search.split('&').forEach((item) => {\n        const [key, value] = item.split('=');\n        query[key] = value;\n    });\n\n    return query;\n}\n","import { createSelector } from 'reselect';\nimport { getParticipants } from './common-selectors';\n\nconst callerWithUuid = createSelector(\n    [getParticipants],\n    participants => (uuid) => {\n        if (!participants || !Object.keys(participants).length) {\n            return null;\n        }\n        return Object.keys(participants)\n            .filter(key => participants[key].relatedUuids.includes(uuid))\n            .map(key => participants[key])\n            .shift() || null;\n    },\n);\n\nexport default callerWithUuid;\n","import { createSelector } from 'reselect';\nimport { getCalls } from './common-selectors';\n\nconst callAtTimestamp = createSelector(\n    [getCalls],\n    calls => (timestamp, participant = null) => {\n        if (!Array.isArray(calls) || !calls.length) {\n            return null;\n        }\n        return calls\n            .map(call => call)\n            .sort((a, b) => a.time.start - b.time.start)\n            .filter((call, index, array) => {\n                if (participant) {\n                    return call.toNumber === participant.number;\n                }\n                if (timestamp >= call.time.start && timestamp < call.time.end) {\n                    return true;\n                }\n                if (index === 0) {\n                    return timestamp < call.time.start;\n                }\n                if (index < array.length - 1) {\n                    return timestamp >= call.time.end && timestamp < array[index + 1].time.start;\n                }\n                return false;\n            }).pop() || calls.map(call => call).pop();\n    },\n);\n\nexport default callAtTimestamp;\n","import { createSelector } from 'reselect';\nimport { getEventsByParticipants, getParticipants } from './common-selectors';\n\nexport const getNumberForPrimaryParticipant = createSelector(\n    [getParticipants],\n    participants => Object.keys(participants || {}).filter(key => participants[key].isPrimary).shift(),\n);\n\nexport const getEventsForPrimaryParticipant = createSelector(\n    [getNumberForPrimaryParticipant, getEventsByParticipants],\n    (primaryNumber, eventsByParticipants) => {\n        if (!primaryNumber || !eventsByParticipants[primaryNumber]) {\n            return [];\n        }\n        return eventsByParticipants[primaryNumber].events;\n    },\n);\n","import {\n    getCalls,\n    getChannelsFromDataState, getParticipants,\n    getRawDataFromTranscriptionState,\n    getSentencesFromTranscriptionState,\n} from '../selectors/common-selectors';\nimport {\n    getEventsForPrimaryParticipant,\n    getNumberForPrimaryParticipant,\n} from '../selectors/eventsForPrimaryParticipant';\nimport { getTimeline } from '../selectors';\n\nexport function eventsMatchingGroup(group, events = []) {\n    return events.filter(event => event.group === group);\n}\n\nexport function durationOfEventGroup(group, events = []) {\n    const groupEventDurations = eventsMatchingGroup(group, events)\n        .map(event => event.end - event.start);\n    if (groupEventDurations.length === 0) {\n        return 0;\n    }\n    return groupEventDurations.reduce((duration, total) => total + duration) / 1000000;\n}\n\nexport function ringDuration(events) {\n    let ringingStart = 0;\n    let ringingEnd = Number.MAX_SAFE_INTEGER;\n    events.forEach((event) => {\n        if (event.startFlags.isCallStart === true) {\n            ringingStart = event.start;\n        }\n        if (event.startFlags.isCsStateChange === true) {\n            ringingEnd = Math.min(ringingEnd, event.start);\n        }\n    });\n    if (ringingEnd === Number.MAX_SAFE_INTEGER) {\n        ringingEnd = ringingStart;\n    }\n    return Math.max(0, ringingEnd - ringingStart) / 1000000;\n}\n\nexport function transcriptionDurationsWithinBridgedEvents(state) {\n    const primaryNumber = getNumberForPrimaryParticipant(state);\n    const events = getEventsForPrimaryParticipant(state);\n    const sentences = getSentencesFromTranscriptionState(state);\n    const bridgedEvents = eventsMatchingGroup('bridge', events);\n    const durations = {\n        talking: 0,\n        listening: 0,\n        overtalk: 0,\n        silent: 0,\n    };\n    bridgedEvents.forEach((event) => {\n        const { start, end } = event;\n        Object.keys(sentences).forEach((key) => {\n            const isPrimary = key === primaryNumber;\n            const sentencesForParticipant = sentences[key];\n            const durationKey = isPrimary ? 'talking' : 'listening';\n            let sentencesToCheckForOverlap = [];\n            if (isPrimary) {\n                sentencesToCheckForOverlap = Object.keys(sentences)\n                    .filter(secondary => secondary !== primaryNumber)\n                    .map(secondary => sentences[secondary])\n                    .flat();\n            }\n            sentencesForParticipant.forEach((sentence) => {\n                const sentenceEnd = Math.max(start, Math.min(end, sentence.timelineEnd));\n                const sentenceStart = Math.min(end, Math.max(start, sentence.timelineStart));\n                if (isPrimary) {\n                    sentencesToCheckForOverlap.forEach((secondary) => {\n                        if (secondary.timelineStart < sentenceEnd && secondary.timelineEnd > sentenceStart) {\n                            const clippedStart = Math.max(sentenceStart, secondary.timelineStart);\n                            const clippedEnd = Math.min(sentenceEnd, secondary.timelineEnd);\n                            durations.overtalk += (clippedEnd - clippedStart) / 1000000;\n                        }\n                    });\n                }\n                const duration = (sentenceEnd - sentenceStart) / 1000000;\n                durations[durationKey] += duration;\n            });\n        });\n    });\n    const bridgeDuration = durationOfEventGroup('bridge', events);\n    durations.talking -= durations.overtalk;\n    durations.listening -= durations.overtalk;\n    durations.silent = bridgeDuration - durations.talking - durations.listening - durations.overtalk;\n    return durations;\n}\n\nfunction eventsSummary(state) {\n    const events = getEventsForPrimaryParticipant(state);\n    return {\n        ...transcriptionDurationsWithinBridgedEvents(state),\n        holding: durationOfEventGroup('hold', events),\n        queuing: durationOfEventGroup('queuing', events),\n        routing: durationOfEventGroup('routing', events),\n        ringing: ringDuration(events),\n    };\n}\n\nexport const SET_CALL_SUMMARY = 'SET_CALL_SUMMARY';\nexport function setCallSummary() {\n    return (dispatch, getState) => {\n        const state = getState();\n        const participants = getParticipants(state);\n        return dispatch({\n            type: SET_CALL_SUMMARY,\n            payload: {\n                calls: getCalls(state),\n                timeline: getTimeline(state),\n                channels: getChannelsFromDataState(state),\n                transcription: getRawDataFromTranscriptionState(state),\n                participants,\n                summary: eventsSummary(state),\n            },\n        });\n    };\n}\n","export const ERROR_MODAL_SHOW = 'ERROR_MODAL_SHOW';\nexport const ERROR_MODAL_CLEAR = 'ERROR_MODAL_CLEAR';\n\nexport function showErrorModal(title, message, onPrimaryClicked = () => {}) {\n    return {\n        type: ERROR_MODAL_SHOW,\n        payload: {\n            title,\n            message,\n            onPrimaryClicked,\n        },\n    };\n}\n\nexport function showRetryableErrorModal(\n    title,\n    message,\n    onPrimaryClicked = () => {},\n    primaryButtonText = 'Retry',\n    secondaryButtonText = 'Dismiss',\n) {\n    return {\n        type: ERROR_MODAL_SHOW,\n        payload: {\n            title,\n            message,\n            onPrimaryClicked,\n            primaryButtonText,\n            secondaryButtonText,\n        },\n    };\n}\n\nexport function closeErrorModal() {\n    return (dispatch) => {\n        dispatch({\n            type: ERROR_MODAL_CLEAR,\n        });\n    };\n}\n","// TODO: Future design / dev task to implement a UI and reducer for error handling to avoid using alerts\nimport { setStatus } from './status';\nimport { BlockingInsightsError, InsightsError } from '../../shared/utility/errors';\nimport { showErrorModal } from './errorModal';\n\nexport function showBlockingErrorMessage(blockingInsightsError) {\n    return (dispatch) => {\n        dispatch(\n            setStatus(blockingInsightsError.status,\n                blockingInsightsError.statusMessage || blockingInsightsError.blockingMessage),\n        );\n        dispatch(showErrorModal('Error', blockingInsightsError.blockingMessage || blockingInsightsError.statusMessage));\n    };\n}\n\nexport const SHOW_VALIDATION_ERROR = 'SHOW_VALIDATION_ERROR';\n\nexport function showValidationError(error) {\n    return (dispatch) => {\n        if (error instanceof InsightsError && error.status) {\n            console.warn(error.message);\n        } else {\n            window.alert(error.message);\n            dispatch({\n                type: SHOW_VALIDATION_ERROR,\n                payload: {\n                    error,\n                },\n            });\n        }\n    };\n}\n\nexport const SHOW_FETCH_ERROR = 'SHOW_FETCH_ERROR';\n\nexport function showFetchError(error) {\n    return (dispatch) => {\n        if (error instanceof BlockingInsightsError) {\n            dispatch(showBlockingErrorMessage(error));\n        } else if (error instanceof InsightsError && error.status) {\n            console.warn(error.message);\n            dispatch(setStatus(error.status, error.displayMessage));\n        } else {\n            window.alert(error.message);\n            dispatch({\n                type: SHOW_FETCH_ERROR,\n                payload: {\n                    error,\n                },\n            });\n        }\n    };\n}\n\nexport const LOG_SILENT_ERROR = 'LOG_SILENT_ERROR';\n\nexport function logSilentError(error) {\n    return (dispatch) => {\n        if (error instanceof InsightsError && error.status) {\n            dispatch(setStatus(error.status, error.displayMessage));\n        }\n        console.warn(error.message);\n        dispatch({\n            type: LOG_SILENT_ERROR,\n            payload: {\n                error,\n            },\n        });\n    };\n}\n","import { getQuery } from '../../shared/utility/url';\nimport callerWithUuid from '../selectors/callerWithUuid';\nimport { getTimeline } from '../selectors/index';\nimport callAtTimestamp from '../selectors/callAtTimestamp';\nimport { getTranscription } from '../../routes/api/App';\nimport {\n    getParticipants,\n    getSentencesFromTranscriptionState,\n    getUuidFromTranscriptionState,\n} from '../selectors/common-selectors';\nimport { setCallSummary } from './callSummary';\nimport getTimestampWithAudioOffsetFunc from '../selectors/timestampWithAudioOffset';\nimport { showFetchError } from './errors';\nimport { BlockingInsightsError } from '../../shared/utility/errors';\nimport { STATUS_EMPTY } from '../constants/data';\n\nexport const REQUEST_TRANSCRIPTION = 'REQUEST_TRANSCRIPTION';\n\nexport function requestTranscription(uuid) {\n    return {\n        type: REQUEST_TRANSCRIPTION,\n        payload: {\n            isLoading: true,\n            uuid,\n        },\n    };\n}\n\nexport const RECEIVE_TRANSCRIPTION = 'RECEIVE_TRANSCRIPTION';\n\nexport function receiveTranscription(uuid, transcription, sentences) {\n    return {\n        type: RECEIVE_TRANSCRIPTION,\n        payload: {\n            isLoading: false,\n            uuid,\n            data: transcription.data.analysis.normalised.data,\n            sentences,\n        },\n    };\n}\n\n// Exported for tests\nexport function sortedSentences(sentences) {\n    return sentences\n        .sort((a, b) => {\n            if (a.Start < b.Start) {\n                return -1;\n            }\n            if (a.Start > b.Start) {\n                return 1;\n            }\n            return 0;\n        });\n}\n\nfunction sentencesFor(state, participant, data, recordingId, isAgent) {\n    const id = recordingId.split('/').pop();\n    const selectCallerWithUuid = callerWithUuid(state);\n    const callAtTimestampFunc = callAtTimestamp(state);\n    const transcriptionFocus = selectCallerWithUuid(id);\n    const sentences = [];\n    const { start } = getTimeline(state);\n    const timestampWithAudioOffset = getTimestampWithAudioOffsetFunc(state);\n    [1, 2].forEach((channel) => {\n        if (channel === 1 && transcriptionFocus !== participant) {\n            return;\n        }\n        if (channel === 2 && transcriptionFocus === participant) {\n            return;\n        }\n        data[channel].Sentences.forEach((sentence) => {\n            const sentenceTimelineStart = timestampWithAudioOffset((sentence.Start * 1000) + start);\n            const sentenceTimelineEnd = timestampWithAudioOffset((sentence.End * 1000) + start);\n            const sentenceStart = (sentenceTimelineStart - start) / 1000;\n            const sentenceEnd = (sentenceTimelineEnd - start) / 1000;\n            let call;\n            if (participant.start <= sentenceTimelineStart && participant.end > sentenceTimelineStart && !isAgent) {\n                call = callAtTimestampFunc(sentenceTimelineStart, participant);\n            } else if (isAgent) {\n                call = callAtTimestampFunc(sentenceTimelineStart);\n            }\n            if (call !== undefined && call !== null) {\n                const isSentenceRunningToNextCall = sentenceTimelineEnd > call.time.end;\n                const { aUuid, bUuid } = call;\n                const aCaller = selectCallerWithUuid(aUuid);\n                const bCaller = selectCallerWithUuid(bUuid);\n                const processedSentence = {};\n                if (aCaller === participant) {\n                    processedSentence.callIndex = call.index;\n                    processedSentence.uuid = aUuid;\n                    processedSentence.number = aCaller.number;\n                    processedSentence.opposing = {\n                        uuid: bUuid,\n                        number: bCaller.number,\n                    };\n                } else if (bCaller === participant) {\n                    processedSentence.callIndex = call.index;\n                    processedSentence.uuid = bUuid;\n                    processedSentence.number = bCaller.number;\n                    processedSentence.opposing = {\n                        uuid: aUuid,\n                        number: aCaller.number,\n                    };\n                } else if (isSentenceRunningToNextCall) {\n                    const nextCall = callAtTimestampFunc(sentenceTimelineEnd);\n                    const { aUuid: aUuidNextCall, bUuid: bUuidNextCall } = nextCall;\n                    const aCallerNextCall = selectCallerWithUuid(aUuidNextCall);\n                    const bCallerNextCall = selectCallerWithUuid(bUuidNextCall);\n                    processedSentence.callIndex = nextCall.index;\n                    processedSentence.uuid = aUuidNextCall;\n                    processedSentence.number = aCallerNextCall.number;\n                    processedSentence.opposing = {\n                        uuid: bUuidNextCall,\n                        number: bCallerNextCall.number,\n                    };\n                } else {\n                    return;\n                }\n                sentences.push({\n                    ...processedSentence,\n                    channel,\n                    Start: sentence.Start,\n                    End: sentence.End,\n                    startWithOffset: sentenceStart,\n                    endWithOffset: sentenceEnd,\n                    timelineStart: sentenceTimelineStart,\n                    timelineEnd: sentenceTimelineEnd,\n                    Sentence: sentence.Sentence,\n                    timeline: {\n                        start: new Date(sentenceTimelineStart / 1000),\n                        end: new Date(sentenceTimelineEnd / 1000),\n                    },\n                });\n            }\n        });\n    });\n    return sortedSentences(sentences);\n}\n\nfunction mapMentionsToPositions(keyword) {\n    return keyword.Mentions.map(mention => mention.Pos.map(\n        pos => ({\n            channel: parseInt(mention.Channel, 10),\n            start: pos,\n            end: null,\n        }),\n    )).flat();\n}\n\nfunction mapPositionsFromKeywords(keywords) {\n    return keywords.map(mapMentionsToPositions).flat();\n}\n\nfunction mapPositionsFromPhrases(phrases) {\n    return phrases.map(phrase => ({\n        channel: parseInt(phrase.Channel, 10),\n        start: phrase.Start,\n        end: phrase.End,\n    }));\n}\n\nfunction combineAndSortPositions(positions) {\n    return positions.flat()\n        .sort((a, b) => a.start - b.start);\n}\n\nfunction processCategory(category) {\n    const Keywords = category.Keywords || [];\n    const Phrases = category.Phrases || [];\n    return {\n        ...category,\n        Keywords,\n        Phrases,\n        Positions: combineAndSortPositions([\n            mapPositionsFromKeywords(Keywords),\n            mapPositionsFromPhrases(Phrases),\n        ]),\n    };\n}\n\nfunction parseAndProcessTranscription(data) {\n    const parsedData = JSON.parse(data);\n    return {\n        ...parsedData,\n        Categories: (parsedData.Categories || []).map(processCategory),\n    };\n}\n\nfunction processTranscription(transcription, primaryUuid, participants, state) {\n    const { data } = transcription.data.analysis.normalised;\n    const { data: { recordingId } } = transcription;\n    const result = {};\n    const { showAll } = getQuery();\n    let earliestCallIndex = Number.MAX_SAFE_INTEGER;\n    let mainUser;\n    let agent;\n    let maxTime = 0;\n    Object.keys(participants)\n        .forEach(key => {\n            const duration = participants[key].end - participants[key].start;\n            if (maxTime < duration && !participants[key].isAgent) {\n                maxTime = duration;\n                mainUser = key;\n            } else if (participants[key].isAgent) {\n                agent = key;\n            }\n        });\n    Object.keys(participants)\n        .forEach((key) => {\n            const participant = participants[key];\n            const sentences = sentencesFor(state, participant, data, recordingId, agent === key)\n                .filter((sentence) => {\n                    if (participant.relatedUuids.includes(primaryUuid)) {\n                        return true;\n                    }\n                    if (participants[sentence.opposing.number].isPrimary) {\n                        return true;\n                    }\n                    return showAll;\n                });\n            if (Array.isArray(sentences) && sentences.length > 0) {\n                earliestCallIndex = Math.min(sentences\n                    .map(sentence => sentence.callIndex)\n                    .reduce((sentence, earliest) => Math.min(sentence, earliest)), earliestCallIndex);\n            }\n            result[key] = sentences;\n        });\n    Object.keys(result).forEach((key) => {\n        result[key] = result[key].map(sentence => ({\n            ...sentence,\n            isInEarliestCall: sentence.callIndex === earliestCallIndex,\n        }));\n    });\n    Object.keys(result).forEach(key => {\n        if (key !== agent && key !== mainUser && result[mainUser]) {\n            for (let index = 0; index < result[mainUser].length; index++) {\n                for (let i = 0; i < result[key].length; i++) {\n                    if (result[mainUser][index].timelineStart === result[key][i].timelineStart) {\n                        result[mainUser].splice(index, 1);\n                        index -= 1;\n                        break;\n                    }\n                }\n            }\n        }\n    });\n    return result;\n}\n\nexport function loadTranscription(primaryUuid, calls, data, getTranscriptionFromApi = getTranscription) {\n    return (dispatch, getState) => {\n        // TODO: Remove this if not desired for production version\n        const state = getState();\n        const currentUuid = getUuidFromTranscriptionState(state);\n        const currentSentences = getSentencesFromTranscriptionState(state);\n        const participants = getParticipants(state);\n        if (currentUuid !== primaryUuid || !Array.isArray(currentSentences) || currentSentences.length === 0) {\n            dispatch(requestTranscription(primaryUuid));\n            return getTranscriptionFromApi(primaryUuid, state.auth.jwtToken)\n                .then((response) => {\n                    if (typeof response.data !== 'undefined') {\n                        const { data: { analysis: { normalised } } } = response;\n                        normalised.data = parseAndProcessTranscription(normalised.data);\n                        const result = processTranscription(response, primaryUuid, participants, state);\n                        dispatch(receiveTranscription(primaryUuid, response, result));\n                        dispatch(setCallSummary());\n                    } else {\n                        const blockingError = new BlockingInsightsError(STATUS_EMPTY,\n                            'There is no transcription for this caller experience',\n                            'There is no transcription for this caller experience.');\n                        dispatch(showFetchError(blockingError));\n                    }\n                });\n        }\n        dispatch(setCallSummary());\n        return Promise.resolve();\n    };\n}\n","import { REQUEST_CALLS, RECEIVE_CALLS } from '../actions/calls';\nimport { REQUEST_EVENTS, RECEIVE_EVENTS } from '../actions/events';\nimport { REQUEST_DATA, RECEIVE_DATA } from '../actions/actions';\nimport { STATUS_LOADING, STATUS_OK } from '../constants/data';\nimport { REQUEST_AUDIO, RECEIVE_AUDIO, NO_AUDIO } from '../actions/audio';\nimport {\n    TOGGLE_ROUTING, LOAD_PROGRESS, SET_STATUS, SET_NOTES_WIDTH,\n} from '../actions/status';\n\nexport const initialState = {\n    status: STATUS_LOADING,\n    description: null,\n    isDisplaying: {\n        routing: false,\n    },\n    isLoading: {\n        calls: false,\n        events: false,\n        data: false,\n        audio: false,\n    },\n    progress: 0,\n    notesWidth: 25,\n};\n\nexport function statusForState(state) {\n    const { isLoading } = state;\n    const numberOfLoadingItems = Object.keys(isLoading).filter(key => isLoading[key]).length;\n    return numberOfLoadingItems ? STATUS_LOADING : STATUS_OK;\n}\n\nexport function status(state = initialState, action) {\n    let newState = state;\n    switch (action.type) {\n        case REQUEST_CALLS:\n        case RECEIVE_CALLS:\n            newState = {\n                ...state,\n                isLoading: {\n                    ...state.isLoading,\n                    calls: action.payload.isLoading,\n                },\n            };\n            break;\n        case REQUEST_EVENTS:\n        case RECEIVE_EVENTS:\n            newState = {\n                ...state,\n                isLoading: {\n                    ...initialState.isLoading,\n                    events: action.payload.isLoading,\n                },\n            };\n            break;\n        case REQUEST_DATA:\n        case RECEIVE_DATA:\n            newState = {\n                ...state,\n                isLoading: {\n                    ...initialState.isLoading,\n                    data: action.payload.isLoading,\n                },\n            };\n            break;\n        case REQUEST_AUDIO:\n        case RECEIVE_AUDIO:\n            newState = {\n                ...state,\n                isLoading: {\n                    ...initialState.isLoading,\n                    audio: action.payload.isLoading,\n                },\n            };\n            break;\n        case NO_AUDIO:\n            newState = {\n                ...state,\n                isLoading: {\n                    ...initialState.isLoading,\n                    audio: false,\n                },\n            };\n            break;\n        case TOGGLE_ROUTING:\n            newState = {\n                ...state,\n                isDisplaying: {\n                    ...state.isDisplaying,\n                    routing: !state.isDisplaying.routing,\n                },\n            };\n            break;\n        case LOAD_PROGRESS:\n            newState = {\n                ...state,\n                progress: action.payload,\n            };\n            break;\n        case SET_STATUS:\n            return {\n                ...state,\n                status: action.payload.status,\n                description: action.payload.description,\n            };\n        case SET_NOTES_WIDTH:\n            return {\n                ...state,\n                notesWidth: action.payload,\n            };\n        default:\n            return state;\n    }\n    return {\n        ...newState,\n        status: statusForState(newState),\n    };\n}\n","import {\n    REQUEST_EVENTS, INVALIDATE_EVENTS, RECEIVE_EVENTS, PROCESS_EVENTS,\n} from '../actions/events';\n\nconst initialState = {\n    isLoading: false,\n    uuid: null,\n    events: null,\n    eventsByParticipants: null,\n};\n\nexport default function events(state = initialState, action) {\n    switch (action.type) {\n        case REQUEST_EVENTS:\n        case RECEIVE_EVENTS:\n        case INVALIDATE_EVENTS:\n        case PROCESS_EVENTS:\n            return {\n                ...state,\n                ...action.payload,\n            };\n        default:\n            return state;\n    }\n}\n","import { REQUEST_CALLS, INVALIDATE_CALLS, RECEIVE_CALLS } from '../actions/calls';\n\nconst initialState = {\n    isLoading: false,\n    uuids: null,\n    calls: null,\n    isRecorded: false,\n};\n\nexport default function calls(state = initialState, action) {\n    switch (action.type) {\n        case REQUEST_CALLS:\n        case INVALIDATE_CALLS:\n        case RECEIVE_CALLS:\n            return {\n                ...state,\n                ...action.payload,\n            };\n        default:\n            return state;\n    }\n}\n","export const BACKGROUND_NOISE_LEVEL = 'background-noise-level';\nexport const TRANSCRIPTION_CONFIDENCE = 'transcription-confidence';\nexport const SHOW_NOTES = 'show-notes';\nexport const CLASH_WINS = 'clash-wins';\nexport const AFFIRMATIONS = 'affirmations';\nexport const INTERRUPTIONS = 'interruptions';\nexport const STEALS = 'steals';\nexport const SHOW_SEARCH_RESULTS = 'show-search-results';\n\nexport const FILTER_HOLD_UNHOLD = 'FILTER_HOLD_UNHOLD';\nexport const FILTER_TRANSFER = 'FILTER_TRANSFER';\nexport const FILTER_LISTEN_IN = 'FILTER_LISTEN_IN';\nexport const FILTER_CALL_QUEUING = 'FILTER_CALL_QUEUING';\nexport const FILTER_NEW_PARTY = 'FILTER_NEW_PARTY';\n","import { SHOW_METRICS_LAYER, HIDE_METRICS_LAYER, TOGGLE_METRICS_LAYER } from '../constants/actions';\nimport { FILTER_HOLD_UNHOLD, FILTER_TRANSFER, SHOW_NOTES } from '../constants/metrics-layers';\n\nconst initialState = [\n    FILTER_HOLD_UNHOLD,\n    FILTER_TRANSFER,\n    SHOW_NOTES,\n];\n\nexport default function activeLayers(state = initialState, action) {\n    switch (action.type) {\n        case TOGGLE_METRICS_LAYER: {\n            const { layer } = action.payload;\n\n            if (state.includes(layer)) {\n                return state.filter(item => item !== layer);\n            }\n\n            return state.concat([layer]);\n        }\n        case SHOW_METRICS_LAYER: {\n            const { layer } = action.payload;\n            if (state.includes(layer)) {\n                return state;\n            }\n            return state.concat([layer]);\n        }\n        case HIDE_METRICS_LAYER: {\n            const { layer } = action.payload;\n            return state.filter(item => item !== layer);\n        }\n        default:\n            return state;\n    }\n}\n","import { SET_AUDIO } from '../constants/actions';\nimport { INVALIDATE_AUDIO, NO_AUDIO, RECEIVE_AUDIO } from '../actions/audio';\n\nconst initialState = {\n    source: null,\n    events: [],\n    error: null,\n};\n\nexport default function audio(state = initialState, action) {\n    switch (action.type) {\n        case RECEIVE_AUDIO: {\n            const { source, duration } = action.payload;\n            return {\n                ...state,\n                source,\n                duration,\n                error: null,\n            };\n        }\n        case INVALIDATE_AUDIO: {\n            const { source, duration } = action.payload;\n            return {\n                ...state,\n                source,\n                duration,\n                error: null,\n            };\n        }\n        case SET_AUDIO: {\n            const { events } = action.payload;\n            return {\n                ...state,\n                events,\n            };\n        }\n        case NO_AUDIO: {\n            const { error } = action.payload;\n            return {\n                ...state,\n                source: null,\n                duration: 0,\n                events: [],\n                error,\n            };\n        }\n        default:\n            return state;\n    }\n}\n","import { INITIAL_LOAD, SET_PARTICIPANT_NAMES } from '../constants/actions';\n\nconst initialState = {\n    channels: {},\n    talkTime: null,\n    participantNames: [],\n};\n\nexport default function data(state = initialState, action) {\n    switch (action.type) {\n        case SET_PARTICIPANT_NAMES: {\n            return {\n                ...state,\n                participantNames: action.payload,\n            };\n        }\n        case INITIAL_LOAD: {\n            const { channels, talkTime } = action.payload;\n            return {\n                ...state,\n                channels: {\n                    ...state.channels,\n                    ...channels,\n                },\n                talkTime,\n            };\n        }\n        default:\n            return state;\n    }\n}\n","import {\n    MOVE_PLAY_HEAD,\n    PAUSE,\n    PLAY,\n    PLAY_FROM_START, SET_PLAYBACK_SPEED,\n    SKIP_BACK,\n    SKIP_FORWARD,\n} from '../constants/actions';\n\nconst initialState = {\n    isPlaying: false,\n    speed: 1,\n    availableSpeeds: [0.5, 1, 1.5, 2, 3],\n    playhead: 0,\n};\n\nexport default function playback(state = initialState, action) {\n    switch (action.type) {\n        case PLAY:\n            return {\n                ...state,\n                isPlaying: true,\n            };\n        case PLAY_FROM_START:\n            return {\n                ...state,\n                isPlaying: true,\n                playhead: 0,\n            };\n        case PAUSE:\n            return {\n                ...state,\n                isPlaying: false,\n            };\n        case SKIP_BACK: {\n            return {\n                ...state,\n                playhead: Math.max(0.01, state.playhead - action.payload.adjustment),\n            };\n        }\n        case SKIP_FORWARD: {\n            return {\n                ...state,\n                playhead: Math.min(100, state.playhead + action.payload.adjustment),\n            };\n        }\n        case MOVE_PLAY_HEAD:\n            return {\n                ...state,\n                playhead: action.payload.position,\n            };\n        case SET_PLAYBACK_SPEED:\n            return {\n                ...state,\n                speed: action.payload.speed,\n            };\n        default:\n            return state;\n    }\n}\n","export const SET_SCRUBBER_VISIBILITY = 'SET_SCRUBBER_VISIBILITY';\nexport function setScrubberVisibility(visibility) {\n    return {\n        type: SET_SCRUBBER_VISIBILITY,\n        payload: {\n            isVisible: visibility,\n        },\n    };\n}\n","import { MOVE_SCRUBBER } from '../constants/actions';\nimport { SET_SCRUBBER_VISIBILITY } from '../actions/scrubber';\n\nexport const initialState = {\n    start: 0,\n    end: 30,\n    isUserModified: false,\n    isVisible: false,\n};\n\nexport default function scrub(state = initialState, action) {\n    switch (action.type) {\n        case MOVE_SCRUBBER: {\n            return {\n                ...state,\n                start: action.payload.scrub.start,\n                end: action.payload.scrub.end,\n            };\n        }\n        case SET_SCRUBBER_VISIBILITY: {\n            return {\n                ...state,\n                isVisible: action.payload.isVisible,\n            };\n        }\n        default:\n            return state;\n    }\n}\n","import { SET_CALL_SUMMARY } from '../actions/callSummary';\nimport { AGENT_TITLE, CUSTOMER_TITLE } from '../../routes/api/Environment';\n\nconst initialState = {\n    startTime: 0,\n    duration: 0,\n    direction: null,\n    from: '',\n    to: '',\n    images: [],\n    metrics: [],\n    summary: {},\n    keyCallers: {\n        colors: [],\n        titles: [],\n        numbers: [],\n        fullNumbers: [],\n        fullTitles: [],\n        names: [],\n        fullNameNumbers: [],\n    },\n};\n\nexport default function callSummary(state = initialState, action) {\n    function numberOfAgents(participants) {\n        return Object.keys(participants).filter(key => participants[key].isAgent).length;\n    }\n\n    function callDirection(participants, calls) {\n        const [firstCall] = calls;\n        const { direction } = firstCall;\n        const prefix = numberOfAgents(participants) < Object.keys(participants).length ? '' : 'Internal ';\n        return `${prefix}${direction === 'OUTBOUND' ? 'Outbound' : 'Inbound'}`;\n    }\n\n    function getKeyCallers(participants) {\n        const keyCallers = Object.keys(participants)\n            .sort(key => (participants[key].isPrimary ? -1 : 0))\n            .map(key => participants[key]);\n        return {\n            images: keyCallers.map(caller => caller.image),\n            avatar: keyCallers.map(caller => caller.photoUrl),\n            colors: keyCallers.map(caller => caller.color),\n            titles: keyCallers.map(caller => caller.title),\n            numbers: keyCallers.map(caller => caller.number),\n            fullNumbers: keyCallers.map(caller => caller.fullNumber),\n            fullTitles: keyCallers.map(caller => caller.fullTitle),\n            names: keyCallers.map(caller => caller.name),\n            fullNameNumbers: keyCallers.map(caller => (\n                (caller.name) ? `${caller.name} (${caller.fullNumber})` : caller.fullTitle)),\n        };\n    }\n\n    function processMetrics(transcription, keyCallers, callers, channels) {\n        return Object.keys(transcription)\n        // Remove non-numeric keys (data object includes Categories key)\n            .filter(key => parseInt(key, 10) > 0)\n            .map((key, index) => {\n                const number = keyCallers.numbers[index];\n                const { isAgent, relatedUuids } = callers[number];\n                const metricData = {\n                    holdEvents: 0,\n                    pauseEvents: 0,\n                    uuid: null,\n                };\n                [metricData.uuid] = relatedUuids;\n                const uuid = Object.keys(channels)[0];\n                const channel = channels[uuid];\n                channels[uuid].events.forEach((event) => {\n                    const {\n                        isHold,\n                        isRecordStop,\n                    } = event.flags;\n                    if (isRecordStop && event.timestamp < channel.end) {\n                        metricData.pauseEvents += 1;\n                    }\n                    if (isHold) {\n                        metricData.holdEvents += 1;\n                    }\n                });\n                transcription[key].Metrics.forEach((metric) => {\n                    const [metricKey] = Object.keys(metric);\n                    metricData[metricKey] = metric[metricKey];\n                });\n                return {\n                    title: isAgent ? AGENT_TITLE : CUSTOMER_TITLE,\n                    color: isAgent ? '#00A9CE' : '#FFC72C',\n                    isAgent,\n                    data: metricData,\n                };\n            });\n    }\n\n    switch (action.type) {\n        case SET_CALL_SUMMARY: {\n            const {\n                calls, timeline, channels, transcription, participants, summary,\n            } = action.payload;\n            const { start, range } = timeline;\n            if (!calls) {\n                return initialState;\n            }\n            const keyCallers = getKeyCallers(participants);\n            const metrics = Object.keys(participants).length < 1\n                ? null : processMetrics(transcription, keyCallers, participants, channels);\n            const direction = Object.keys(participants).length < 1\n                ? null : callDirection(participants, calls);\n            return {\n                ...state,\n                startTime: start,\n                duration: range,\n                direction,\n                metrics,\n                summary,\n                keyCallers,\n            };\n        }\n        default:\n            return state;\n    }\n}\n","import {\n    UPDATE_TRANSCRIPTION_VIEWPORT,\n    MOVE_TRANSCRIPTION_PLAY_SCRUB,\n    UPDATE_TRANSCRIPTION_CONFIDENCE,\n} from '../constants/actions';\nimport { RECEIVE_TRANSCRIPTION, REQUEST_TRANSCRIPTION } from '../actions/transcription';\n\nconst initialState = {\n    transcriptionPlayScrub: {\n        position: 0,\n        offsetPosition: 0,\n    },\n    viewport: {\n        start: 0,\n        span: 100,\n    },\n    confidence: 0,\n    isLoading: false,\n    uuid: null,\n    rawData: {\n        1: null,\n        2: null,\n    },\n    sentences: null,\n};\n\nexport default function transcription(state = initialState, action) {\n    switch (action.type) {\n        case MOVE_TRANSCRIPTION_PLAY_SCRUB:\n            return {\n                ...state,\n                transcriptionPlayScrub: action.payload.transcriptionPlayScrub,\n            };\n        case UPDATE_TRANSCRIPTION_VIEWPORT:\n            return {\n                ...state,\n                viewport: action.payload.viewport,\n            };\n        case UPDATE_TRANSCRIPTION_CONFIDENCE:\n            return {\n                ...state,\n                confidence: action.payload.confidence,\n            };\n        case REQUEST_TRANSCRIPTION:\n            return {\n                ...state,\n                isLoading: action.payload.isLoading,\n                uuid: action.payload.uuid,\n            };\n        case RECEIVE_TRANSCRIPTION:\n            return {\n                ...state,\n                isLoading: action.payload.isLoading,\n                uuid: action.payload.uuid,\n                rawData: action.payload.data,\n                sentences: action.payload.sentences,\n            };\n        default:\n            return state;\n    }\n}\n","import { updateNotes } from './salesforce';\nimport { getNoteWithIdSelector } from '../selectors/noteSelectors';\n\nexport const modifyNoteWithId = (noteId, modification = {}) => (dispatch, getState) => {\n    const state = getState();\n    const selector = getNoteWithIdSelector(state);\n    const note = selector(noteId);\n    if (!note) {\n        return;\n    }\n    dispatch(updateNotes({\n        ...note,\n        ...(typeof modification === 'function' ? modification(note) : modification),\n    }));\n};\n\nexport const acknowledgeNote = id => dispatch => dispatch(modifyNoteWithId(id, {\n    isAcknowledged: true,\n}));\n\nexport const closeNote = id => dispatch => dispatch(modifyNoteWithId(id, {\n    isClosed: true,\n}));\n\nexport const updateUserActivity = noteId => dispatch => dispatch(modifyNoteWithId(noteId));\n\nexport const deleteComment = (noteId, commentId) => (dispatch) => {\n    if (window.confirm('Delete this reply?')) {\n        dispatch(modifyNoteWithId(noteId, note => ({\n            isAcknowledged: false,\n            thread: note.thread.filter(comment => comment.uuid !== commentId),\n        })));\n    }\n};\n\nexport const OPEN_NOTE_EDITOR = 'OPEN_NOTE_EDITOR';\n\nexport const NoteEditMode = {\n    newNote: 'newNote',\n    existingNote: 'existingNote',\n    newComment: 'newComment',\n    existingComment: 'existingComment',\n    isExistingItem(editMode) {\n        return editMode === NoteEditMode.existingNote || editMode === NoteEditMode.existingComment;\n    },\n    isNote(editMode) {\n        return editMode === NoteEditMode.newNote || editMode === NoteEditMode.existingNote;\n    },\n    isComment(editMode) {\n        return editMode === NoteEditMode.newComment || editMode === NoteEditMode.existingComment;\n    },\n    isNew(editMode) {\n        return editMode === NoteEditMode.newNote || editMode === NoteEditMode.newComment;\n    },\n};\n\nexport function openNoteEditor(editMode = NoteEditMode.newNote, noteId = null, commentId = null) {\n    // TODO call add note api\n    return {\n        type: OPEN_NOTE_EDITOR,\n        payload: {\n            editMode,\n            noteToEdit: noteId,\n            commentToEdit: commentId,\n        },\n    };\n}\n\nexport const CLOSE_NOTE_EDITOR = 'CLOSE_NOTE_EDITOR';\n\nexport function closeNoteEditor() {\n    return {\n        type: CLOSE_NOTE_EDITOR,\n    };\n}\n\nexport const MARK_NOTE_AS_READ = 'MARK_NOTE_AS_READ';\n\nexport function markNoteAsRead(id) {\n    return {\n        type: MARK_NOTE_AS_READ,\n        payload: {\n            id,\n        },\n    };\n}\n\nexport const SET_NOTES_FILTER = 'SET_NOTES_FILTER';\n\nexport function setNotesFilter(filter) {\n    return {\n        type: SET_NOTES_FILTER,\n        payload: {\n            filter,\n        },\n    };\n}\n\nexport default {\n    acknowledgeNote,\n    closeNote,\n    deleteComment,\n    NoteEditMode,\n    setNotesFilter,\n};\n","import {\n    SET_NOTE_VISIBILITY,\n    IMPORT_NOTES,\n    SET_EVENT_TYPES,\n    SET_CAN_SHARE,\n} from '../constants/actions';\nimport {\n    DELETE_NOTE, UPDATE_NOTE, SET_NOTES, REFRESH_UNREAD_NOTES,\n} from '../actions/salesforce';\nimport { SET_COMPLETED_NOTES_VISIBILITY } from '../actions/actions';\nimport {\n    CLOSE_NOTE_EDITOR,\n    MARK_NOTE_AS_READ, OPEN_NOTE_EDITOR, SET_NOTES_FILTER,\n} from '../actions/notes';\nimport { NotesFilter } from '../selectors/noteSelectors';\n\nconst initialNoteState = {\n    author: 0,\n    authorName: '',\n    canShare: true,\n    channelUuid: '',\n    isClosed: false,\n    eventTime: '',\n    eventType: '',\n    isAcknowledged: false,\n    noteId: '',\n    noteCreated: null,\n    noteModified: null,\n    polarity: 'Neutral',\n    relatedToTitle: '',\n    text: '',\n    timestamp: 0,\n    uuid: '',\n    userActivity: [],\n    thread: [],\n    version: 1.0,\n};\n\nconst initialState = {\n    showOnTimeline: true,\n    showCompletedNotes: true,\n    filter: NotesFilter.all,\n    showEditModal: false,\n    editMode: null,\n    noteToEdit: null,\n    commentToEdit: null,\n    canShare: false,\n    unread: [],\n    notes: [],\n    // TODO get eventTypes from API\n    eventTypes: [\n        /* eslint-disable max-len */\n        // { id: 0, text: 'General Note', icon: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iIzAwMCI+ICAgIDxwYXRoIGZpbGw9ImZpbGwiIGlkPSJhIiBkPSJNNiAxNGEyIDIgMCAxIDEgMC00IDIgMiAwIDAgMSAwIDR6bTYgMGEyIDIgMCAxIDEgMC00IDIgMiAwIDAgMSAwIDR6bTYgMGEyIDIgMCAxIDEgMC00IDIgMiAwIDAgMSAwIDR6Ii8+PC9zdmc+' },\n        // { id: 1, text: 'Excellent Behaviour', icon: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iIzAwMCI+ICAgIDxwYXRoIGZpbGw9ImZpbGwiIGlkPSJhIiBkPSJNMTIgMTYuNWwtMy40OTcgMS44MzhhMSAxIDAgMCAxLTEuNDUtMS4wNTRsLjY2Ny0zLjg5My0yLjgyOS0yLjc1OGExIDEgMCAwIDEgLjU1NS0xLjcwNmwzLjkwOS0uNTY4IDEuNzQ4LTMuNTQyYTEgMSAwIDAgMSAxLjc5NCAwbDEuNzQ4IDMuNTQyIDMuOTEuNTY4YTEgMSAwIDAgMSAuNTU0IDEuNzA2bC0yLjgzIDIuNzU4LjY2OSAzLjg5M2ExIDEgMCAwIDEtMS40NTEgMS4wNTRMMTIgMTYuNXoiLz48L3N2Zz4=' },\n        // { id: 2, text: 'Offensive Behaviour', icon: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iIzAwMCI+ICAgIDxwYXRoIGZpbGw9ImZpbGwiIGlkPSJhIiBkPSJNMTIgMjFhMiAyIDAgMSAxIDAtNCAyIDIgMCAwIDEgMCA0em0wLTZjLTIgMC0yIDAtMi0xMGEyIDIgMCAxIDEgNCAwYzAgMTAgMCAxMC0yIDEweiIvPjwvc3ZnPg==' },\n        /* eslint-enable max-len */\n        {\n            icon: '',\n            id: 0,\n            text: 'General Note',\n        }, {\n            icon: '',\n            id: 1,\n            text: 'Offensive Behaviour',\n        }, {\n            icon: '',\n            id: 2,\n            text: 'Excellent Behaviour',\n        }, {\n            icon: '',\n            id: 3,\n            text: 'Neutral',\n        },\n    ],\n    polarityTypes: [\n        {\n            icon: '',\n            id: 'Negative',\n            text: 'Negative',\n        }, {\n            icon: '',\n            id: 'Neutral',\n            text: 'Neutral',\n        }, {\n            icon: '',\n            id: 'Positive',\n            text: 'Positive',\n        },\n    ],\n};\n\nexport default function notes(state = initialState, action) {\n    const { type, payload } = action;\n    switch (type) {\n        case SET_CAN_SHARE:\n            return {\n                ...state,\n                canShare: payload,\n            };\n        case SET_EVENT_TYPES:\n            return {\n                ...state,\n                eventTypes: payload.eventTypes,\n            };\n        case SET_NOTE_VISIBILITY:\n            return {\n                ...state,\n                showOnTimeline: payload.visible,\n            };\n        case SET_COMPLETED_NOTES_VISIBILITY:\n            return {\n                ...state,\n                showCompletedNotes: payload.visible,\n            };\n        case DELETE_NOTE:\n            return {\n                ...state,\n                notes: state.notes.filter(note => note.noteId !== payload.noteId),\n            };\n        case SET_NOTES:\n            return {\n                ...state,\n                notes: payload.notes,\n                unread: [],\n            };\n        case UPDATE_NOTE:\n            if (state.notes.some(note => note.noteId === payload.note.noteId)) {\n                // Update item\n                return {\n                    ...state,\n                    notes: state.notes.map((note) => {\n                        if (note.noteId === payload.note.noteId) {\n                            return { ...note, ...payload.note };\n                        }\n                        return note;\n                    }),\n                };\n            }\n            // Insert item\n            return {\n                ...state,\n                notes: [\n                    ...state.notes,\n                    {\n                        ...initialNoteState,\n                        ...payload.note,\n                    }],\n            };\n        case OPEN_NOTE_EDITOR:\n            return {\n                ...state,\n                showEditModal: true,\n                editMode: payload.editMode,\n                noteToEdit: payload.noteToEdit,\n                commentToEdit: payload.commentToEdit,\n            };\n        case CLOSE_NOTE_EDITOR:\n            return {\n                ...state,\n                showEditModal: false,\n                editMode: null,\n                noteToEdit: null,\n                commentToEdit: null,\n            };\n        case IMPORT_NOTES:\n            return {\n                ...state,\n                notes: payload.notes,\n            };\n        case REFRESH_UNREAD_NOTES:\n            return {\n                ...state,\n                unread: payload.ids,\n            };\n        case MARK_NOTE_AS_READ:\n            return {\n                ...state,\n                unread: state.unread.filter(id => id !== payload.id),\n            };\n        case SET_NOTES_FILTER:\n            return {\n                ...state,\n                filter: payload.filter,\n            };\n        default:\n            return state;\n    }\n}\n","import { CANCEL_RATE_CALL, OPEN_RATE_CALL, RATE_CALL } from '../constants/actions';\n\nconst initialState = {\n    showCallRatingDialog: false,\n    rating: [],\n};\n\nexport default function callRating(state = initialState, action) {\n    const { type, payload } = action;\n    switch (type) {\n        case OPEN_RATE_CALL:\n            return {\n                ...state,\n                showCallRatingDialog: payload.showCallRatingDialog,\n            };\n        case CANCEL_RATE_CALL:\n            return {\n                ...state,\n                showCallRatingDialog: payload.showCallRatingDialog,\n            };\n        case RATE_CALL:\n            return {\n                ...state,\n                showCallRatingDialog: payload.showCallRatingDialog,\n                rating: payload.rating,\n            };\n        default:\n            return state;\n    }\n}\n","import { getCurrentPosition, getRawDataFromTranscriptionState, getSearchPhrase } from '../selectors/common-selectors';\nimport { focusOnPosition } from './actions';\n\nfunction matchingWords(a, b, matchPartialWord) {\n    if (matchPartialWord && a.length > 0 && a.length < b.length) {\n        return a.toUpperCase() === b.toUpperCase().substr(0, a.length);\n    }\n    return a.toUpperCase() === b.toUpperCase();\n}\n\nfunction positionsMatchingSearchPhraseInTranscription(phrase, transcription) {\n    if (typeof phrase !== 'string' || phrase.length === 0) {\n        return [];\n    }\n    const positions = [];\n    Object.keys(transcription)\n        .filter(key => parseInt(key, 10) > 0)\n        .forEach((key) => {\n            const channel = transcription[key];\n            if (channel === null || !Array.isArray(channel.Words)) {\n                return;\n            }\n            const { Words: words } = channel;\n            let searchWords = phrase.split(' ');\n            let checkword = searchWords.shift();\n            let position = null;\n            let lastMatchingIndex = 0;\n            words.forEach((word, index) => {\n                const emptyWords = searchWords.filter(item => item.length === 0).length;\n                const wordsLeftToSearch = searchWords.length;\n                if (matchingWords(checkword, word.w, wordsLeftToSearch === emptyWords)) {\n                    if (position === null) {\n                        position = {\n                            channel: parseInt(key, 10),\n                            start: word.s,\n                        };\n                    } else if (lastMatchingIndex < index - 1) {\n                        position = null;\n                        lastMatchingIndex = null;\n                        searchWords = phrase.split(' ');\n                    }\n                    lastMatchingIndex = index;\n                    if (position !== null && wordsLeftToSearch === emptyWords) {\n                        position = {\n                            ...position,\n                            end: word.s,\n                        };\n                        positions.push(position);\n                        position = null;\n                        searchWords = phrase.split(' ');\n                    }\n                    checkword = searchWords.shift();\n                }\n            });\n        });\n    return positions.sort((a, b) => a.start - b.start);\n}\n\nexport const SET_CURRENT_MATCH_POSITION_INDEX = 'SET_CURRENT_MATCH_POSITION_INDEX';\n\nexport function setCurrentMatchPositionIndex(index) {\n    return (dispatch, getState) => {\n        dispatch({\n            type: SET_CURRENT_MATCH_POSITION_INDEX,\n            payload: {\n                index,\n            },\n        });\n        const currentPosition = getCurrentPosition(getState());\n        if (currentPosition) {\n            dispatch(focusOnPosition(currentPosition.start));\n        }\n    };\n}\n\nexport const SET_MATCH_POSITIONS = 'SET_MATCH_POSITIONS';\n\nexport function setMatchPositions(positions) {\n    return (dispatch) => {\n        dispatch({\n            type: SET_MATCH_POSITIONS,\n            payload: {\n                positions,\n            },\n        });\n        dispatch(setCurrentMatchPositionIndex(0));\n    };\n}\n\nexport function setPositionsFromSearchPhrase() {\n    return (dispatch, getState) => {\n        const state = getState();\n        const searchPhrase = getSearchPhrase(state);\n        const transcription = getRawDataFromTranscriptionState(state);\n        const positions = positionsMatchingSearchPhraseInTranscription(searchPhrase, transcription);\n        dispatch(setMatchPositions(positions));\n    };\n}\n\nexport const SET_SEARCH_PHRASE = 'SET_SEARCH_PHRASE';\n\nexport function setSearchPhrase(searchPhrase) {\n    return {\n        type: SET_SEARCH_PHRASE,\n        payload: {\n            searchPhrase,\n        },\n    };\n}\n\nexport const SET_CURRENT_MATCH = 'SET_CURRENT_MATCH';\n\nexport function setCurrentMatch(match) {\n    return {\n        type: SET_CURRENT_MATCH,\n        payload: {\n            currentMatch: match,\n        },\n    };\n}\n\nexport const SET_MATCHES = 'SET_MATCHES';\n\nexport function setMatches(matches) {\n    return {\n        type: SET_MATCHES,\n        payload: {\n            matches,\n        },\n    };\n}\n","import {\n    SET_SEARCH_PHRASE,\n    SET_MATCH_POSITIONS,\n    SET_CURRENT_MATCH_POSITION_INDEX,\n} from '../actions/search';\n\nconst initialState = {\n    searchPhrase: null,\n    matches: [],\n    matchCount: 20,\n    currentMatch: 0,\n    positions: [],\n    positionCount: 0,\n    currentPosition: null,\n    currentPositionIndex: 0,\n};\n\nexport default function search(state = initialState, action) {\n    switch (action.type) {\n        case SET_SEARCH_PHRASE:\n            return {\n                ...state,\n                searchPhrase: action.payload.searchPhrase,\n            };\n        case SET_MATCH_POSITIONS:\n            return {\n                ...state,\n                positions: action.payload.positions,\n                positionCount: (action.payload.positions || []).length,\n                currentPosition: (action.payload.positions || [])[0],\n                currentPositionIndex: 0,\n            };\n        case SET_CURRENT_MATCH_POSITION_INDEX:\n            return {\n                ...state,\n                currentPosition: state.positions[action.payload.index],\n                currentPositionIndex: action.payload.index,\n            };\n        default:\n            return state;\n    }\n}\n","import { SET_PARTICIPANTS } from '../actions/participants';\nimport { SET_PARTICIPANT_IMAGE } from '../actions/salesforce';\n\nconst initialState = {};\n\nexport default function participants(state = initialState, action) {\n    switch (action.type) {\n        case SET_PARTICIPANTS: {\n            return action.payload;\n        }\n        case SET_PARTICIPANT_IMAGE: {\n            const { payload: { number, image } } = action;\n            return {\n                ...state,\n                [number]: {\n                    ...state[number],\n                    image,\n                },\n            };\n        }\n        default: {\n            return state;\n        }\n    }\n}\n","export const SET_EVENTTIMELINE_VISIBILITY = 'SET_EVENTTIMELINE_VISIBILITY';\nexport function setEventTimelineVisibility(visibility) {\n    return {\n        type: SET_EVENTTIMELINE_VISIBILITY,\n        payload: {\n            eventTimelineVisible: visibility,\n        },\n    };\n}\n","import { SET_EVENTTIMELINE_VISIBILITY } from '../actions/eventTimeline';\n\nexport const initialState = {\n    eventTimelineVisible: false,\n};\n\nexport default function eventTimeline(state = initialState, action) {\n    switch (action.type) {\n        case SET_EVENTTIMELINE_VISIBILITY: {\n            return {\n                eventTimelineVisible: action.payload.eventTimelineVisible,\n            };\n        }\n        default:\n            return state;\n    }\n}\n","import { CREATE_EXPERIENCE_OPTIONS } from '../actions/experienceOptions';\nimport { SET_PARTICIPANT_IMAGE } from '../actions/salesforce';\n\nconst initialState = {};\n\nexport default function experienceOptions(state = initialState, action) {\n    switch (action.type) {\n        case CREATE_EXPERIENCE_OPTIONS: {\n            return action.payload;\n        }\n        case SET_PARTICIPANT_IMAGE: {\n            const { payload: { image, uuid } } = action;\n            return {\n                ...state,\n                [uuid]: {\n                    ...state[uuid],\n                    icon: image,\n                },\n            };\n        }\n        default: {\n            return state;\n        }\n    }\n}\n","export const KNOWLEDGE_TYPE_CLASSIFICATION = 'classification';\nexport const KNOWLEDGE_TYPE_KEYWORD = 'keyword';\nexport const KNOWLEDGE_TYPE_TOPIC = 'topic';\nexport const TRANSCRIPTION_KEY_KEYWORDS = 'Keywords';\nexport const TRANSCRIPTION_KEY_KEYWORD = 'Keyword';\nexport const TRANSCRIPTION_KEY_TOPICS = 'Topics';\nexport const TRANSCRIPTION_KEY_TOPIC = 'Topic';\n","import { getKnowledgeSelectedItem, getRawDataFromTranscriptionState } from '../selectors/common-selectors';\nimport { setMatchPositions } from './search';\nimport {\n    TRANSCRIPTION_KEY_KEYWORDS,\n    TRANSCRIPTION_KEY_KEYWORD,\n    TRANSCRIPTION_KEY_TOPICS,\n    TRANSCRIPTION_KEY_TOPIC,\n} from '../constants/knowledge';\n\nexport const OPEN_CLASSIFICATIONS_DIALOG = 'OPEN_CLASSIFICATIONS_DIALOG';\nexport function openClassificationsDialog() {\n    return {\n        type: OPEN_CLASSIFICATIONS_DIALOG,\n    };\n}\n\nexport const CLOSE_CLASSIFICATIONS_DIALOG = 'CLOSE_CLASSIFICATIONS_DIALOG';\nexport function closeClassificationsDialog() {\n    return {\n        type: CLOSE_CLASSIFICATIONS_DIALOG,\n    };\n}\n\nfunction keywordPositionsForChannelMatchingIdentifier(channel, items, identifier) {\n    return items.filter(item => item[TRANSCRIPTION_KEY_KEYWORD] === identifier)\n        .map(item => item.Pos.map(pos => ({\n            channel,\n            start: pos,\n            end: null,\n        }))).flat();\n}\n\nfunction keywordPositionsMatchingIdentifier(transcription, identifier) {\n    const { 1: { [TRANSCRIPTION_KEY_KEYWORDS]: channel1 }, 2: { [TRANSCRIPTION_KEY_KEYWORDS]: channel2 } } = transcription;\n    return [\n        keywordPositionsForChannelMatchingIdentifier(1, channel1, identifier),\n        keywordPositionsForChannelMatchingIdentifier(2, channel2, identifier),\n    ].flat();\n}\n\nfunction topicPositionsForChannelMatchingIdentifier(channel, items, identifier) {\n    return items.filter(item => item[TRANSCRIPTION_KEY_TOPIC] === identifier)\n        .map(topic => topic[TRANSCRIPTION_KEY_KEYWORDS]\n            .map(item => item.Pos.map(pos => ({\n                channel,\n                start: pos,\n                end: null,\n            }))).flat()).flat();\n}\n\nfunction topicPositionsMatchingIdentifier(transcription, identifier) {\n    const { 1: { [TRANSCRIPTION_KEY_TOPICS]: channel1 }, 2: { [TRANSCRIPTION_KEY_TOPICS]: channel2 } } = transcription;\n    return [\n        topicPositionsForChannelMatchingIdentifier(1, channel1, identifier),\n        topicPositionsForChannelMatchingIdentifier(2, channel2, identifier),\n    ].flat();\n}\n\nexport function setPositionsFromKnowledgeSelectedItem() {\n    return (dispatch, getState) => {\n        const selectedItem = getKnowledgeSelectedItem(getState());\n        const { identifier, type, category } = selectedItem;\n        if (typeof identifier === 'string' && identifier.length > 0) {\n            const transcription = getRawDataFromTranscriptionState(getState());\n            let positions;\n            switch (type) {\n                case 'classification':\n                    positions = category.Positions;\n                    break;\n                case 'topic':\n                    positions = topicPositionsMatchingIdentifier(transcription, identifier);\n                    break;\n                case 'keyword':\n                    positions = keywordPositionsMatchingIdentifier(transcription, identifier);\n                    break;\n                default:\n                    return;\n            }\n            dispatch(setMatchPositions(positions));\n        }\n    };\n}\n\nexport const SELECT_KNOWLEDGE_CLASSIFICATION = 'SELECT_KNOWLEDGE_CLASSIFICATION';\nexport function selectKnowledgeClassification(identifier) {\n    return (dispatch, getState) => {\n        const { Categories: categories } = getRawDataFromTranscriptionState(getState());\n        const [category] = categories.filter(item => item.Name === identifier);\n        dispatch({\n            type: SELECT_KNOWLEDGE_CLASSIFICATION,\n            payload: {\n                identifier,\n                category,\n            },\n        });\n        dispatch(setPositionsFromKnowledgeSelectedItem());\n    };\n}\n\nexport const SELECT_KNOWLEDGE_KEYWORD = 'SELECT_KNOWLEDGE_KEYWORD';\nexport function selectKnowledgeKeyword(identifier) {\n    return (dispatch) => {\n        dispatch({\n            type: SELECT_KNOWLEDGE_KEYWORD,\n            payload: {\n                identifier,\n            },\n        });\n        dispatch(setPositionsFromKnowledgeSelectedItem());\n    };\n}\n\nexport const SELECT_KNOWLEDGE_TOPIC = 'SELECT_KNOWLEDGE_TOPIC';\nexport function selectKnowledgeTopic(identifier) {\n    return (dispatch) => {\n        dispatch({\n            type: SELECT_KNOWLEDGE_TOPIC,\n            payload: {\n                identifier,\n            },\n        });\n        dispatch(setPositionsFromKnowledgeSelectedItem());\n    };\n}\n\nexport const CLEAR_SELECTED_KNOWLEDGE_ITEM = 'CLEAR_SELECTED_KNOWLEDGE_ITEM';\nexport function clearSelectedKnowledgeItem() {\n    return {\n        type: CLEAR_SELECTED_KNOWLEDGE_ITEM,\n    };\n}\n\nexport const OPEN_KEYWORDS_TOPICS_DIALOG = 'OPEN_KEYWORDS_TOPICS_DIALOG';\nexport function openKeywordsTopicsDialog() {\n    return {\n        type: OPEN_KEYWORDS_TOPICS_DIALOG,\n    };\n}\n\nexport const CLOSE_KEYWORDS_TOPICS_DIALOG = 'CLOSE_KEYWORDS_TOPICS_DIALOG';\nexport function closeKeywordsTopicsDialog() {\n    return {\n        type: CLOSE_KEYWORDS_TOPICS_DIALOG,\n    };\n}\n","import {\n    CLEAR_SELECTED_KNOWLEDGE_ITEM,\n    CLOSE_CLASSIFICATIONS_DIALOG,\n    OPEN_CLASSIFICATIONS_DIALOG,\n    SELECT_KNOWLEDGE_CLASSIFICATION,\n    SELECT_KNOWLEDGE_KEYWORD,\n    SELECT_KNOWLEDGE_TOPIC,\n    OPEN_KEYWORDS_TOPICS_DIALOG,\n    CLOSE_KEYWORDS_TOPICS_DIALOG,\n} from '../actions/knowledge';\nimport { KNOWLEDGE_TYPE_CLASSIFICATION, KNOWLEDGE_TYPE_KEYWORD, KNOWLEDGE_TYPE_TOPIC } from '../constants/knowledge';\n\nconst initialState = {\n    currentMatch: 0,\n    selectedItem: {\n        identifier: null,\n        type: null,\n        category: null,\n    },\n    showClassificationsDialog: false,\n    showKeywordsTopicsDialog: false,\n};\n\nexport default function knowledge(state = initialState, action) {\n    switch (action.type) {\n        case OPEN_CLASSIFICATIONS_DIALOG:\n            return {\n                ...state,\n                showClassificationsDialog: true,\n            };\n        case CLOSE_CLASSIFICATIONS_DIALOG:\n            return {\n                ...state,\n                showClassificationsDialog: false,\n            };\n        case SELECT_KNOWLEDGE_CLASSIFICATION:\n            return {\n                ...state,\n                selectedItem: {\n                    identifier: action.payload.identifier,\n                    type: KNOWLEDGE_TYPE_CLASSIFICATION,\n                    category: action.payload.category,\n                },\n            };\n        case SELECT_KNOWLEDGE_KEYWORD:\n            return {\n                ...state,\n                selectedItem: {\n                    identifier: action.payload.identifier,\n                    type: KNOWLEDGE_TYPE_KEYWORD,\n                    category: null,\n                },\n            };\n        case SELECT_KNOWLEDGE_TOPIC:\n            return {\n                ...state,\n                selectedItem: {\n                    identifier: action.payload.identifier,\n                    type: KNOWLEDGE_TYPE_TOPIC,\n                    category: null,\n                },\n            };\n        case CLEAR_SELECTED_KNOWLEDGE_ITEM:\n            return {\n                ...state,\n                currentMatch: 0,\n                selectedItem: {\n                    identifier: null,\n                    type: null,\n                    category: null,\n                },\n            };\n        case OPEN_KEYWORDS_TOPICS_DIALOG:\n            return {\n                ...state,\n                showKeywordsTopicsDialog: true,\n            };\n        case CLOSE_KEYWORDS_TOPICS_DIALOG:\n            return {\n                ...state,\n                showKeywordsTopicsDialog: false,\n\n            };\n        default:\n            return state;\n    }\n}\n","import { Base64 } from 'js-base64';\nimport { SET_JWT_TOKEN } from '../constants/actions';\nimport { getQuery } from '../../shared/utility/url';\nimport { initialiseWithPrimaryUuid } from './actions';\nimport { CALLFLOW_URL, GATEKEEPER_URL, BASE_URL } from '../../routes/api/Environment';\nimport { loadOrgUrl, getNamespace, getUserName } from './salesforce';\nimport { STATUS_EMPTY } from '../constants/data';\nimport { setStatus } from './status';\n\nlet autoRenewToken;\nlet tokenTimer = null;\n\nexport const SET_AUTH_DISPLAY_NAME = 'SET_AUTH_DISPLAY_NAME';\nconst setAuthDisplayName = name => ({\n    type: SET_AUTH_DISPLAY_NAME,\n    payload: name,\n});\n\n/* eslint-disable no-unused-vars */\nconst checkAuth = () => {\n    const jwtToken = JSON.parse(localStorage.getItem('jwtToken'));\n    if (!jwtToken) return false;\n    try {\n        const { exp, iat } = jwtToken;\n        const duration = (Number(exp) - Number(iat)) / 2;\n        if ((Number(iat) + duration) < new Date().getTime() / 1000) {\n            return false;\n        }\n    } catch (e) {\n        return false;\n    }\n    return true;\n};\n/* eslint-enable no-unused-vars */\n\nconst getJWTToken = storedSfSessionId => (dispatch) => {\n    const sfEnv = JSON.parse(localStorage.getItem('ENV_URLS'));\n    const { gatekeeperUrl, namespace } = sfEnv;\n    const url = (sfEnv) ? gatekeeperUrl : GATEKEEPER_URL;\n    const namespaceParam = (namespace) ? `&namespace=${namespace}` : '';\n    const gatekeeperHeaders = new Headers({\n        Accept: 'application/json',\n        'content-type': 'application/json',\n        authorization: `Bearer ${storedSfSessionId}`,\n    });\n    fetch(\n        `${url}/token/salesforce?scope=insights:basic&hastoken=true${namespaceParam}`,\n        {\n            method: 'get',\n            headers: gatekeeperHeaders,\n        },\n    )\n        .then(response => response.json())\n        .then((data = {}) => {\n            if (!data.jwt) {\n                window.alert('Sorry, your session has timed out. Please refresh your page to try again');\n                return;\n            }\n            const s = data.jwt.split('.');\n            const details = Base64.decode(s[1]);\n            const jwtData = JSON.parse(details);\n            const organisationId = jwtData['https://natterbox.com/claim/orgId'];\n            const userId = jwtData['https://natterbox.com/claim/userId'];\n            const userName = jwtData['https://natterbox.com/claim/username'];\n            const {\n                scope, exp, iat, nbf,\n            } = jwtData;\n\n            const payload = {\n                token: data.jwt,\n                organisationId,\n                userName,\n                userId,\n                scope,\n                exp,\n                iat,\n                nbf,\n            };\n            localStorage.setItem('jwtToken', JSON.stringify(payload));\n            // schedule renew token\n            dispatch(autoRenewToken(payload));\n            dispatch({ type: SET_JWT_TOKEN, payload });\n            dispatch(initialiseWithPrimaryUuid(getQuery().uuid));\n            return userId;\n        })\n        .then((userId) => {\n            if (!userId) return;\n            getUserName(userId)\n                .then(displayName => dispatch(setAuthDisplayName(displayName)))\n                .catch(error => console.log(`Error fetching display name: ${error}`));\n        })\n        .catch((err) => {\n            dispatch(setStatus(\n                STATUS_EMPTY,\n                'Unable to load recording. You may not have permission to access this file',\n            ));\n            console.log('ERROR GETTING JWT:', err);\n            window.alert('Sorry, your session has timed out. Please refresh your page to try again');\n        });\n};\n\nconst getAuthToken = () => async (dispatch) => {\n    if (window.parent.getSessionId) {\n        try {\n            const namespace = await getNamespace();\n            const orgUrls = await loadOrgUrl();\n            if (orgUrls) {\n                const payload = {\n                    isSalesforce: true,\n                    isProd: orgUrls.isProd,\n                    sapienUrl: orgUrls.SapienHostUrl,\n                    gatekeeperUrl: orgUrls.GatekeeperHostUrl,\n                    callflowUrl: orgUrls.callFlowHostUrl,\n                    namespace,\n                };\n                localStorage.setItem('ENV_URLS', JSON.stringify(payload));\n            }\n            console.log('Auth expired getting new SF session ID');\n            dispatch(getJWTToken(window.parent.getSessionId()));\n        } catch (err) {\n            // eslint-disable-next-line no-alert\n            window.alert(err);\n        }\n    } else {\n        /*\n        See README for details how to invoke the different standalone modes using the environment variables\n        */\n        const manualSfToken = process.env.REACT_APP_SF_TOKEN;\n        const isProduction = process.env.REACT_APP_SF_IS_PRODUCTION_VERSION === 'TRUE';\n        if (typeof manualSfToken === 'string' && manualSfToken.length > 0) {\n            console.log(`Warning: no salesforce parent, running in linked standalone mode using token: '${manualSfToken}'`);\n            const sfToken = manualSfToken;\n            const namespace = '';\n            const payload = {\n                isSalesforce: true,\n                isProd: isProduction,\n                sapienUrl: BASE_URL,\n                gatekeeperUrl: GATEKEEPER_URL,\n                callflowUrl: CALLFLOW_URL,\n                namespace,\n            };\n            localStorage.setItem('ENV_URLS', JSON.stringify(payload));\n            dispatch(getJWTToken(sfToken));\n        } else {\n            console.log('Warning: no salesforce parent, running in full standalone mode');\n            dispatch(initialiseWithPrimaryUuid(getQuery().uuid));\n        }\n    }\n};\n\nautoRenewToken = jwtToken => (dispatch) => {\n    if (tokenTimer) clearTimeout(tokenTimer);\n    const duration = (Number(jwtToken.exp) - Number(jwtToken.iat)) / 2;\n    tokenTimer = setTimeout(() => {\n        dispatch(getAuthToken());\n    }, duration * 1000);\n};\n\nexport default getAuthToken;\n","import { SET_JWT_TOKEN } from '../constants/actions';\nimport { SET_AUTH_DISPLAY_NAME } from '../actions/auth';\n\nconst initialState = {\n    jwtToken: null,\n    displayName: null,\n};\n\nexport default (state = initialState, action) => {\n    switch (action.type) {\n        case SET_JWT_TOKEN:\n            return {\n                ...state,\n                jwtToken: action.payload,\n            };\n        case SET_AUTH_DISPLAY_NAME:\n            return {\n                ...state,\n                displayName: action.payload,\n            };\n        default:\n            return state;\n    }\n};\n","export const TOGGLE_TAB = 'TOGGLE_TAB';\n\nexport function toggleTab(tab) {\n    return {\n        type: TOGGLE_TAB,\n        payload: tab,\n    };\n}\n","import { TOGGLE_TAB } from '../actions/tabs';\n\nexport const initialState = {\n    activeTab: 'tab-knowledge',\n};\n\nexport default function tabs(state = initialState, action) {\n    switch (action.type) {\n        case TOGGLE_TAB: {\n            let activeTab = action.payload;\n            if (activeTab === state.activeTab) {\n                activeTab = 'none';\n            }\n            return {\n                ...state,\n                activeTab,\n            };\n        }\n        default:\n            return state;\n    }\n}\n","import { ERROR_MODAL_CLEAR, ERROR_MODAL_SHOW } from '../actions/errorModal';\n\nconst initialState = {\n    show: false,\n    title: 'Error',\n    message: 'An error occurred.',\n    primaryButtonText: 'Ok',\n    secondaryButtonText: undefined,\n    onPrimaryClicked: () => {},\n};\n\nexport default function errorModal(state = initialState, action) {\n    switch (action.type) {\n        case ERROR_MODAL_SHOW: {\n            const {\n                title,\n                message,\n                primaryButtonText,\n                secondaryButtonText,\n                onPrimaryClicked,\n            } = action.payload;\n            return {\n                show: true,\n                title: title || initialState.title,\n                message: message || initialState.message,\n                primaryButtonText: primaryButtonText || initialState.primaryButtonText,\n                secondaryButtonText,\n                onPrimaryClicked,\n            };\n        }\n        case ERROR_MODAL_CLEAR:\n            return {\n                ...initialState,\n            };\n        default:\n            return state;\n    }\n}\n","import { combineReducers } from 'redux';\nimport primaryUuid from './primaryUuid';\nimport { initialState, status } from './status';\nimport events from './events';\nimport calls from './calls';\nimport activeLayers from './activeLayers';\nimport audio from './audio';\nimport data from './data';\nimport playback from './playback';\nimport scrub, { initialState as scrubInitialState } from './scrub';\nimport callSummary from './call-summary';\nimport transcription from './transcription';\nimport notes from './notes';\nimport callRating from './callRating';\nimport search from './search';\nimport participants from './participants';\nimport eventTimeline, { initialState as eventTimelineInitialState } from './eventTimeline';\nimport experienceOptions from './experienceOptions';\nimport knowledge from './knowledge';\nimport auth from './auth';\nimport { RESET_STATE } from '../actions/actions';\nimport tabs from './tabs';\nimport errorModal from './errorModal';\n\nconst allReducers = combineReducers({\n    primaryUuid,\n    status,\n    events,\n    eventTimeline,\n    experienceOptions,\n    calls,\n    activeLayers,\n    audio,\n    data,\n    playback,\n    scrub,\n    callSummary,\n    participants,\n    transcription,\n    notes,\n    callRating,\n    search,\n    knowledge,\n    auth,\n    tabs,\n    errorModal,\n});\n\nexport default (state, action) => {\n    if (action.type === RESET_STATE) {\n        // Reset the state, but retain experience options so that the focus dropdown remains available\n        return allReducers({\n            experienceOptions: state.experienceOptions,\n            auth: state.auth,\n            activeLayers: state.activeLayers,\n            status: {\n                ...initialState,\n                isDisplaying: state.status.isDisplaying,\n            },\n            scrub: {\n                ...scrubInitialState,\n                isVisible: state.scrub.isVisible,\n            },\n            eventTimeline: {\n                ...eventTimelineInitialState,\n                eventTimelineVisible: state.eventTimeline.eventTimelineVisible,\n            },\n            tabs: state.tabs,\n        }, action);\n    }\n    return allReducers(state, action);\n};\n","import { SET_PRIMARY_UUID } from '../actions/primaryUuid';\n\nconst initialState = null;\n\nexport default function primaryUuid(state = initialState, action) {\n    if (action.type === SET_PRIMARY_UUID) {\n        return action.payload.uuid;\n    }\n    return state;\n}\n","export default __webpack_public_path__ + \"static/media/logo-linear.f69f4348.svg\";","import PropTypes from 'prop-types';\n\nexport const activeLayersType = PropTypes.arrayOf(PropTypes.string);\n\nexport const dataType = PropTypes.shape({\n    primaryUuid: PropTypes.string,\n    channels: PropTypes.object,\n    transcription: PropTypes.object,\n    talkTime: PropTypes.object,\n});\n\nexport const transcriptionType = PropTypes.shape({\n    1: PropTypes.object,\n    2: PropTypes.object,\n});\n\nexport const scrubType = PropTypes.shape({\n    start: PropTypes.number,\n    end: PropTypes.number,\n});\n\nexport const timelineType = PropTypes.shape({\n    start: PropTypes.number,\n    end: PropTypes.number,\n    range: PropTypes.number,\n    routingOffset: PropTypes.number,\n    unrecordedTime: PropTypes.number,\n});\n\nexport const participantsType = PropTypes.object;\n\nexport const userType = PropTypes.object;\n\nexport const userListType = PropTypes.array;\n\nexport const noteEventListType = PropTypes.array;\n\nexport const sentencesType = PropTypes.object;\n\nexport const eventsType = PropTypes.object;\n\nexport const dropDownOptionsType = PropTypes.object;\n\nexport const statusType = PropTypes.object;\n\nexport const clockType = PropTypes.object;\n\nexport const timeType = PropTypes.object;\n\nexport const transcriptionDataType = PropTypes.object;\n\nexport const keyCallersType = PropTypes.object;\n\nexport const participantType = PropTypes.shape({\n    isPrimary: PropTypes.bool,\n    isAgent: PropTypes.bool,\n    userId: PropTypes.bool,\n    image: PropTypes.string,\n    relatedUuids: PropTypes.array,\n    start: PropTypes.number,\n    end: PropTypes.number,\n    title: PropTypes.string,\n    agentNumber: PropTypes.number,\n    agents: PropTypes.number,\n    classes: PropTypes.string,\n    color: PropTypes.string,\n    sentences: PropTypes.array,\n    events: PropTypes.array,\n    call: PropTypes.object,\n});\n\nexport const audioType = PropTypes.shape({\n    source: PropTypes.string,\n    events: PropTypes.array,\n});\n\nexport const transcriptionWidthsType = PropTypes.shape({\n    notes: PropTypes.string,\n    transcription: PropTypes.string,\n});\n\nexport const audioTransportType = PropTypes.shape({\n    start: PropTypes.func,\n    stop: PropTypes.func,\n    duration: PropTypes.func,\n    eventAtPlayhead: PropTypes.func,\n    eventAtMediaPosition: PropTypes.func,\n    playheadAtMediaPosition: PropTypes.func,\n});\n\nexport const callSummaryType = PropTypes.shape({\n    startTime: PropTypes.number,\n    duration: PropTypes.number,\n    calls: PropTypes.array,\n    direction: PropTypes.string,\n    from: PropTypes.string,\n    to: PropTypes.string,\n    images: PropTypes.array,\n    channels: PropTypes.array,\n    participants: PropTypes.object,\n    callers: PropTypes.object,\n    metrics: PropTypes.array,\n    keyCallers: PropTypes.object,\n});\n\nexport const viewportType = PropTypes.shape({\n    start: PropTypes.number,\n    span: PropTypes.number,\n});\n\nexport const transcriptionPlayScrubType = PropTypes.shape({\n    position: PropTypes.number,\n    offsetPosition: PropTypes.number,\n});\n\nexport const userActivityType = PropTypes.shape({\n    user: PropTypes.string,\n    lastRead: PropTypes.string,\n});\n\nexport const commentType = PropTypes.shape({\n    uuid: PropTypes.string,\n    comment: PropTypes.string,\n    created: PropTypes.string,\n    modified: PropTypes.string,\n    author: PropTypes.string,\n});\n\nexport const noteType = PropTypes.shape({\n    noteId: PropTypes.string,\n    uuid: PropTypes.string,\n    timestamp: PropTypes.number,\n    eventType: PropTypes.number,\n    author: PropTypes.string,\n    text: PropTypes.string,\n    channelUuid: PropTypes.string,\n    isAcknowledged: PropTypes.bool,\n    isClosed: PropTypes.bool,\n    noteCreated: PropTypes.string,\n    noteModified: PropTypes.string,\n    polarity: PropTypes.string,\n    userActivity: PropTypes.arrayOf(userActivityType),\n    thread: PropTypes.arrayOf(commentType),\n});\n\nexport const noteList = PropTypes.arrayOf(noteType);\n\nexport const notesType = PropTypes.shape({\n    showOnTimeline: PropTypes.bool,\n    showCompletedNotes: PropTypes.bool,\n    showEditModal: PropTypes.bool,\n    editMode: PropTypes.string,\n    noteToEdit: PropTypes.string,\n    commentToEdit: PropTypes.string,\n    notes: noteList,\n});\n\nexport const callSummaryChannelType = PropTypes.arrayOf(PropTypes.shape({\n    direction: PropTypes.string,\n    start: PropTypes.number,\n    end: PropTypes.number,\n    data: PropTypes.array,\n}));\n\nexport const callRatingType = PropTypes.shape({\n    quality: PropTypes.number,\n    qualityNote: PropTypes.string,\n    politeness: PropTypes.number,\n    politenessNote: PropTypes.string,\n    customerExperience: PropTypes.number,\n    customerExperienceNote: PropTypes.string,\n    agentKnowledge: PropTypes.number,\n    agentKnowledgeNote: PropTypes.string,\n});\n\nexport const searchType = PropTypes.shape({\n    searchPhrase: PropTypes.string,\n    matches: PropTypes.array,\n    matchCount: PropTypes.number,\n    currentMatch: PropTypes.number,\n    positions: PropTypes.array,\n    positionCount: PropTypes.number,\n    currentPosition: PropTypes.object,\n    currentPositionIndex: PropTypes.number,\n});\n\nexport const playbackType = PropTypes.shape({\n    isPlaying: PropTypes.bool,\n    speed: PropTypes.number,\n    availableSpeeds: PropTypes.array,\n    playhead: PropTypes.number,\n});\n\nexport const knowledgeSelectedItemType = PropTypes.shape({\n    identifier: PropTypes.string,\n    type: PropTypes.string,\n});\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Howl } from 'howler';\nimport {\n    audioType, audioTransportType, statusType, clockType,\n} from '../../shared/types';\nimport styles from './Player.module.scss';\nimport { AUDIO_FORMAT } from '../../shared/utility/constants';\nimport { STATUS_OK } from '../../store/constants/data';\n\nclass Player extends Component {\n    static createMediaPlayer(audio) {\n        const { source, duration } = audio;\n        const webSound = new Howl({\n            src: [source],\n            html5: false,\n            format: AUDIO_FORMAT,\n        });\n        const html5sound = new Howl({\n            src: [source],\n            html5: true,\n            format: AUDIO_FORMAT,\n        });\n        let sound = webSound;\n        let timer = null;\n        let timerStartTime = 0;\n        let lastCurrentTime = 0;\n        let lastPlaybackRate = 1;\n        let timerHandler = null;\n        return {\n            pause() {\n                if (this.paused) {\n                    return;\n                }\n                clearTimeout(timerHandler);\n                timerHandler = null;\n                timer = null;\n                this.paused = true;\n                sound.pause();\n            },\n            play() {\n                if (this.paused || lastCurrentTime !== this.currentTime || lastPlaybackRate !== this.playbackRate) {\n                    sound.pause();\n                    timer = new Date().getTime();\n                    timerStartTime = this.currentTime;\n                    lastPlaybackRate = this.playbackRate;\n                    sound = this.playbackRate === 1 ? webSound : html5sound;\n                    this.paused = false;\n                    sound.rate(this.playbackRate);\n                    sound.seek(this.currentTime);\n                    sound.play();\n                }\n                const now = new Date().getTime();\n                this.currentTime = timerStartTime + (((now - timer) / 1000) * this.playbackRate);\n                lastCurrentTime = this.currentTime;\n                timerHandler = setTimeout(() => {\n                    this.play();\n                }, 10);\n            },\n            duration: duration / 1000000,\n            currentTime: 0,\n            paused: true,\n            playbackRate: 1,\n        };\n    }\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            clock: 0.1,\n            start: null,\n        };\n        this.clockHandler = null;\n        this.mediaPlayer = null;\n    }\n\n    componentDidMount() {\n        const { speed, onMovePlayhead } = this.props;\n        this.updatePlaybackSpeed(speed);\n        this.startUpdatingPlayhead(onMovePlayhead);\n    }\n\n    componentDidUpdate(props, state) {\n        const previous = { props, state };\n        const {\n            audio,\n            isPlaying,\n            playhead,\n            speed,\n        } = this.props;\n        if (isPlaying !== previous.props.isPlaying) {\n            this.updatePlayerState(playhead);\n        }\n        if (playhead !== previous.props.playhead) {\n            this.updatePlayerState(playhead);\n        }\n        if (speed !== previous.props.speed) {\n            this.updatePlaybackSpeed(speed);\n        }\n        if (audio !== previous.props.audio) {\n            this.mediaPlayer = Player.createMediaPlayer(audio);\n        }\n    }\n\n    componentWillUnmount() {\n        this.stopUpdatingPlayhead();\n    }\n\n    updatePlaybackSpeed(speed) {\n        if (!this.mediaPlayer) {\n            return;\n        }\n        this.mediaPlayer.playbackRate = speed;\n    }\n\n    startUpdatingPlayhead(callback) {\n        const { isPlaying, clock } = this.props;\n        setTimeout(() => {\n            this.startUpdatingPlayhead(callback);\n        }, clock.interval);\n\n        if (!isPlaying) {\n            return;\n        }\n        const { playhead, speed, audioTransport } = this.props;\n        const event = audioTransport.eventAtPlayhead(playhead);\n        if (!event) {\n            callback(playhead + (clock.speed * speed));\n        } else {\n            if (!this.mediaPlayer) {\n                return;\n            }\n            callback(event.playheadAtMediaPosition(this.mediaPlayer));\n        }\n    }\n\n    stopUpdatingPlayhead() {\n        if (this.clockHandler !== null) {\n            clearTimeout(this.clockHandler);\n        }\n        this.clockHandler = null;\n    }\n\n    updatePlayerState(playhead) {\n        if (!this.mediaPlayer) {\n            return;\n        }\n        const {\n            isPlaying,\n            onMovePlayhead,\n            onPauseClick,\n            audioTransport,\n        } = this.props;\n        if (Math.min(playhead, 99.9) === 99.9) {\n            onMovePlayhead(100);\n            onPauseClick();\n        }\n        if (!isPlaying) {\n            if (!this.mediaPlayer.paused) {\n                this.mediaPlayer.pause();\n            }\n            return;\n        }\n        const event = audioTransport.eventAtPlayhead(playhead);\n        if (!event) {\n            if (!this.mediaPlayer.paused) {\n                this.mediaPlayer.pause();\n            }\n        } else {\n            const mediaPlayhead = event.playheadAtMediaPosition(this.mediaPlayer);\n            if (playhead > mediaPlayhead + 0.5 || playhead < mediaPlayhead - 0.5) {\n                this.mediaPlayer.currentTime = event.mediaPositionAtPlayhead(playhead, this.mediaPlayer);\n            }\n            if (this.mediaPlayer.paused) {\n                this.mediaPlayer.play();\n            }\n        }\n    }\n\n    render() {\n        const {\n            isPlaying,\n            onPauseClick,\n            onPlayClick,\n            onSkipBackClick,\n            onSkipForwardClick,\n            onRestartPlayHeadClick,\n            availableSpeeds,\n            speed,\n            onSetPlaybackSpeed,\n            playhead,\n            showTransport,\n            status: {\n                status,\n            },\n        } = this.props;\n        let playMode = isPlaying ? styles.pause : styles.play;\n        if (showTransport && playhead === 100) {\n            playMode = styles.playDisabled;\n        }\n        const playFunction = isPlaying ? onPauseClick : onPlayClick;\n        const isDisabled = status !== STATUS_OK;\n        const setSpeedFunction = event => onSetPlaybackSpeed(parseFloat(event.target.value, 10));\n        return (\n            <div className={styles.Player}>\n                <button\n                    tabIndex={0}\n                    type=\"button\"\n                    className={styles.playback}\n                    onClick={onRestartPlayHeadClick}\n                    disabled={isDisabled}\n                />\n                <button\n                    tabIndex={0}\n                    type=\"button\"\n                    className={styles.skipBack}\n                    onClick={onSkipBackClick}\n                    disabled={isDisabled}\n                />\n                <button\n                    tabIndex={0}\n                    type=\"button\"\n                    className={playMode}\n                    onClick={playFunction}\n                    disabled={isDisabled}\n                />\n                <button\n                    tabIndex={0}\n                    type=\"button\"\n                    className={styles.skipForward}\n                    onClick={onSkipForwardClick}\n                    disabled={isDisabled}\n                />\n                <select\n                    tabIndex={0}\n                    type=\"button\"\n                    className={styles.changeSpeed}\n                    value={speed}\n                    onChange={setSpeedFunction}\n                    disabled={isDisabled}\n                >\n                    {availableSpeeds.map(value => (\n                        <option key={value} value={value}>\n                            {value}\n                            x\n                        </option>\n                    ))}\n                </select>\n            </div>\n        );\n    }\n}\n\n/* eslint-disable react/forbid-prop-types */\nPlayer.propTypes = {\n    isPlaying: PropTypes.bool.isRequired,\n    playhead: PropTypes.number.isRequired,\n    onSkipBackClick: PropTypes.func.isRequired,\n    onPlayClick: PropTypes.func.isRequired,\n    onPauseClick: PropTypes.func.isRequired,\n    onSkipForwardClick: PropTypes.func.isRequired,\n    onRestartPlayHeadClick: PropTypes.func.isRequired,\n    availableSpeeds: PropTypes.array.isRequired,\n    speed: PropTypes.number.isRequired,\n    onSetPlaybackSpeed: PropTypes.func.isRequired,\n    onMovePlayhead: PropTypes.func.isRequired,\n    audio: audioType.isRequired,\n    audioTransport: audioTransportType.isRequired,\n    showTransport: PropTypes.bool.isRequired,\n    status: statusType.isRequired,\n    clock: clockType.isRequired,\n};\n/* eslint-enable react/forbid-prop-types */\n\nexport default Player;\n","import { createSelector } from 'reselect';\nimport { getAudioState } from './common-selectors';\n\nconst getAudioTransport = createSelector(\n    [getAudioState],\n    (audioState) => {\n        const start = () => (audioState.events[0] || { start: 0 }).start;\n        const stop = () => (audioState.events[audioState.events.length - 1] || { stop: 100 }).stop;\n        const duration = () => {\n            const { events } = audioState;\n            if (!Array.isArray(events) || events.length === 0) {\n                return stop() - start();\n            }\n            return audioState.events\n                .map(event => (event.stop - event.start))\n                .reduce((value, total) => total + value);\n        };\n        const eventAtPlayhead = playhead => audioState.events\n            .filter(event => playhead >= event.start && playhead <= event.stop)[0] || null;\n        const eventAtMediaPosition = (media) => {\n            const { currentTime } = media;\n            const mediaDuration = media.duration;\n            const position = 100 / mediaDuration * currentTime;\n            return audioState.events\n                .filter(event => position >= event.audioStart && position <= event.audioStop)[0] || null;\n        };\n        const playheadAtMediaPosition = (media) => {\n            const event = eventAtMediaPosition(media);\n            if (!event) {\n                return 0;\n            }\n            return event.playheadAtMediaPosition(media);\n        };\n        return {\n            start,\n            stop,\n            duration,\n            eventAtPlayhead,\n            eventAtMediaPosition,\n            playheadAtMediaPosition,\n        };\n    },\n);\n\nexport default getAudioTransport;\n","import { createSelector } from 'reselect';\nimport { getTimeline } from './index';\n\nconst getClock = createSelector(\n    [getTimeline],\n    (timeline) => {\n        if (!timeline.range) {\n            return {\n                speed: 0,\n                interval: 20,\n            };\n        }\n        const duration = timeline.range / 1000000;\n        // These values have been calibrated for the best\n        // performance and accuracy within the browser\n        return {\n            speed: 100 / duration / 47.5,\n            interval: 20,\n        };\n    },\n);\n\nexport default getClock;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport {\n    audioTransportType,\n    audioType,\n    statusType,\n    clockType,\n} from '../shared/types';\nimport {\n    movePlayHead,\n    moveTranscriptionPlayScrub,\n    pause,\n    play,\n    setPlaybackSpeed,\n    skipBack,\n    skipForward,\n} from '../store/actions/actions';\nimport Player from '../components/Player/Player';\nimport getAudioTransport from '../store/selectors/audioTransport';\nimport getClock from '../store/selectors/clock';\n\nfunction PlayerContainer(props) {\n    const {\n        isPlaying,\n        playhead,\n        onSkipBackClick,\n        onPlayClick,\n        onPauseClick,\n        onSkipForwardClick,\n        onRestartPlayHeadClick,\n        availableSpeeds,\n        speed,\n        onSetPlaybackSpeed,\n        onMovePlayhead,\n        audio,\n        audioTransport,\n        showTransport,\n        status,\n        clock,\n    } = props;\n    return (\n        <Player\n            isPlaying={isPlaying}\n            playhead={playhead}\n            onSkipBackClick={onSkipBackClick}\n            onPlayClick={onPlayClick}\n            onPauseClick={onPauseClick}\n            onSkipForwardClick={onSkipForwardClick}\n            onRestartPlayHeadClick={onRestartPlayHeadClick}\n            availableSpeeds={availableSpeeds}\n            speed={speed}\n            onSetPlaybackSpeed={onSetPlaybackSpeed}\n            onMovePlayhead={onMovePlayhead}\n            audio={audio}\n            audioTransport={audioTransport}\n            showTransport={showTransport}\n            status={status}\n            clock={clock}\n        />\n    );\n}\n\n/* eslint-disable react/forbid-prop-types */\nPlayerContainer.propTypes = {\n    isPlaying: PropTypes.bool.isRequired,\n    playhead: PropTypes.number.isRequired,\n    onSkipBackClick: PropTypes.func.isRequired,\n    onPlayClick: PropTypes.func.isRequired,\n    onPauseClick: PropTypes.func.isRequired,\n    onSkipForwardClick: PropTypes.func.isRequired,\n    onRestartPlayHeadClick: PropTypes.func.isRequired,\n    availableSpeeds: PropTypes.array.isRequired,\n    speed: PropTypes.number.isRequired,\n    onSetPlaybackSpeed: PropTypes.func.isRequired,\n    onMovePlayhead: PropTypes.func.isRequired,\n    audio: audioType.isRequired,\n    audioTransport: audioTransportType.isRequired,\n    showTransport: PropTypes.bool.isRequired,\n    status: statusType.isRequired,\n    clock: clockType.isRequired,\n};\n/* eslint-enable react/forbid-prop-types */\n\nconst mapStateToProps = (state) => {\n    const {\n        audio,\n        status,\n    } = state;\n\n    const {\n        isPlaying,\n        availableSpeeds,\n        speed,\n        playhead,\n    } = state.playback;\n\n    return {\n        isPlaying,\n        availableSpeeds,\n        speed,\n        playhead,\n        audio,\n        audioTransport: getAudioTransport(state),\n        status,\n        clock: getClock(state),\n    };\n};\n\nconst mapDispatchToProps = dispatch => ({\n    onSkipBackClick: () => {\n        dispatch(skipBack());\n    },\n    onPlayClick: () => {\n        dispatch(play());\n    },\n    onPauseClick: () => {\n        dispatch(pause());\n    },\n    onSkipForwardClick: () => {\n        dispatch(skipForward());\n    },\n    onRestartPlayHeadClick: () => {\n        dispatch(moveTranscriptionPlayScrub({ position: 0, offsetPosition: 0 }));\n        dispatch(movePlayHead(0.01));\n    },\n    onSetPlaybackSpeed: (speed) => {\n        dispatch(setPlaybackSpeed(speed));\n    },\n    onMovePlayhead: (position) => {\n        dispatch(movePlayHead(position));\n    },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PlayerContainer);\n","import React from 'react';\nimport { useLayoutOptionsHooks } from './LayoutOptionsHooks';\nimport styles from './LayoutOptions.module.scss';\n\nconst LayoutOptions = (props) => {\n    const {\n        label,\n        handleToggleOpen,\n    } = useLayoutOptionsHooks(props);\n    return (\n        <div className={styles.container}>\n            <div\n                className={styles.button}\n                role=\"button\"\n                onMouseDown={handleToggleOpen}\n            >\n                { label }\n            </div>\n        </div>\n    );\n};\n\nexport default LayoutOptions;\n","import { useState } from 'react';\n\nexport const useLayoutOptionsHooks = ({\n    isScrubVisible,\n    isTimelineVisible,\n    onSetScrubVisibility,\n    onSetTimelineVisibility,\n}) => {\n    const [isOpen, setIsOpen] = useState(false);\n\n    const handleToggleOpen = () => {\n        onSetScrubVisibility(!isScrubVisible);\n        onSetTimelineVisibility(!isTimelineVisible);\n        setIsOpen(!isOpen);\n    };\n\n    return {\n        label: isOpen ? 'Hide timeline' : 'Show timeline',\n        handleToggleOpen,\n    };\n};\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport LayoutOptions from '../components/LayoutOptions/LayoutOptions';\nimport { getEventTimelineVisibility, getScrubberVisibility } from '../store/selectors/common-selectors';\nimport { setScrubberVisibility } from '../store/actions/scrubber';\nimport { setEventTimelineVisibility } from '../store/actions/eventTimeline';\n\nconst LayoutOptionsContainer = props => (<LayoutOptions {...props} />);\n\nconst mapStateToProps = state => ({\n    isScrubVisible: getScrubberVisibility(state),\n    isTimelineVisible: getEventTimelineVisibility(state),\n});\n\nconst mapDispatchToProps = dispatch => ({\n    onSetScrubVisibility: (visibility) => {\n        dispatch(setScrubberVisibility(visibility));\n    },\n    onSetTimelineVisibility: (visibility) => {\n        dispatch(setEventTimelineVisibility(visibility));\n    },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LayoutOptionsContainer);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport logo from '../../assets/svgs/logo-linear.svg';\nimport PlayerContainer from '../../containers/PlayerContainer';\nimport { getCallList } from '../../routes/api/App';\nimport styles from './Header.module.scss';\nimport { setScrubberVisibility } from '../../store/actions/scrubber';\nimport { setEventTimelineVisibility } from '../../store/actions/eventTimeline';\nimport LayoutOptionsContainer from '../../containers/LayoutOptionsContainer';\n\n/* eslint-disable react/prefer-stateless-function */\nclass Header extends Component {\n    constructor(props) {\n        super(props);\n\n        this.callList = React.createRef();\n        this.state = {\n            calls: null,\n        };\n        this.onCallListClicked = this.onCallListClicked.bind(this);\n        this.showCallList = this.showCallList.bind(this);\n        this.hideCallList = this.hideCallList.bind(this);\n    }\n\n    componentDidMount() {\n        document.addEventListener('mousedown', this.handleClickOutsideDropdown);\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('mousedown', this.handleClickOutsideDropdown);\n    }\n\n    async onCallListClicked() {\n        const { calls } = this.state;\n        const { jwtToken } = this.props;\n        if (calls) {\n            this.showCallList();\n            return;\n        }\n\n        const result = await getCallList(jwtToken);\n        if (result) {\n            this.setState({\n                calls: result.data\n                    .map((call, index) => (\n                        <div className={styles.callListItem} key={`${call.aUuid}-${index}`}>\n                            <div className={styles.itemIndex}>{index + 1}</div>\n                            <div className={styles.uuid}>\n                                {call.fromNumber}\n                                <br />\n                                <a href={`?uuid=${call.aUuid}`}>{call.aUuid || 'unavailable'}</a>\n                            </div>\n                            <div className={styles.description}>\n                                {new Date(call.timeStart).toLocaleString()}\n                            </div>\n                            <div className={styles.uuid}>\n                                {call.toNumber || call.toNumberDialled}\n                                <br />\n                                {call.bUuid && (<a href={`?uuid=${call.bUuid}`}>{call.bUuid}</a>)}\n                            </div>\n                        </div>\n                    )),\n            });\n            this.showCallList();\n        }\n\n    }\n\n    showCallList() {\n        this.callList.current.style.display = 'block';\n    }\n\n    hideCallList() {\n        this.callList.current.style.display = 'none';\n    }\n\n    render() {\n        const {\n            calls,\n        } = this.state;\n        const { onFinishAndRateClicked, showRatingButton, isRated } = this.props;\n        return (\n            <header className={styles.Header}>\n                <div className={`container ${styles.HeaderContainer}`}>\n                    <div className={styles.Branding}>\n                        <img src={logo} className={styles.logo} alt=\"natterbox\" />\n                    </div>\n                    <div className=\"spacer\" />\n                    <div className={styles.Player}>\n                        <PlayerContainer showTransport />\n                    </div>\n                    <div className={styles.LayoutOptions}>\n                        <LayoutOptionsContainer />\n                    </div>\n                    <div className={styles.Exit}>\n                        {/* TODO This button is for testing purposes only */}\n                        { !window.parent.getSessionId && (\n                            <button\n                                id=\"call-list\"\n                                type=\"button\"\n                                className=\"button button--state-primary\"\n                                onClick={this.onCallListClicked}\n                            >\n                                Call List\n                            </button>\n                        )}\n                        { showRatingButton && (\n                            <button\n                                type=\"button\"\n                                className={`button button--state-primary ${styles.finish}`}\n                                onClick={onFinishAndRateClicked}\n                            >\n                                {isRated ? 'Review Rating' : 'Finish & Rate'}\n                            </button>\n                        )}\n                    </div>\n                </div>\n                {/* TODO Testing purposes only */}\n                <div\n                    ref={this.callList}\n                    data-testid=\"divCallList\"\n                    className=\"container\"\n                    style={{ display: 'none', color: '#FFFFFF' }}\n                >\n                    <button type=\"button\" onClick={this.hideCallList}>Close</button>\n                    <div className={styles.callListContainer}>\n                        <div className={styles.callListItem}>\n                            <div className={styles.itemIndex} />\n                            <div className={styles.uuid}>\n                                Primary\n                            </div>\n                            <div>Date and Time</div>\n                            <div className={styles.uuid}>\n                                Secondary\n                            </div>\n                        </div>\n                        {calls}\n                    </div>\n                </div>\n            </header>\n        );\n    }\n}\n\nconst mapDispatchToProps = dispatch => ({\n    onSetScrubberVisibility: (visibility) => {\n        dispatch(setScrubberVisibility(visibility));\n    },\n    onSetEventTimelineVisibility: (visibility) => {\n        dispatch(setEventTimelineVisibility(visibility));\n    },\n});\n\nHeader.defaultProps = {\n    jwtToken: null,\n    isRated: false,\n};\nHeader.propTypes = {\n    onFinishAndRateClicked: PropTypes.func.isRequired,\n    jwtToken: PropTypes.shape({\n        token: PropTypes.string,\n        organisationId: PropTypes.string,\n    }),\n    onSetScrubberVisibility: PropTypes.func.isRequired,\n    onSetEventTimelineVisibility: PropTypes.func.isRequired,\n    showRatingButton: PropTypes.bool.isRequired,\n    isRated: PropTypes.bool,\n};\n\n/* eslint-enable react/prefer-stateless-function */\n\nexport default connect(null, mapDispatchToProps)(Header);\n","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgIconUser(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"#49535C\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"fill\",\n    id: \"a\",\n    d: \"M21 18.36v.84c0 .99-.81 1.8-1.8 1.8H4.8c-.99 0-1.8-.81-1.8-1.8v-.84c0-2.19 2.55-3.51 4.95-4.56.09-.03.15-.06.24-.12.18-.09.39-.09.57.03.96.63 2.07.99 3.24.99 1.17 0 2.28-.36 3.24-.96.18-.12.39-.12.57-.03.09.03.15.06.24.12 2.4 1.02 4.95 2.34 4.95 4.53zm-9-5.46c-2.469 0-4.47-2.216-4.47-4.95S9.531 3 12 3s4.47 2.216 4.47 4.95S14.469 12.9 12 12.9z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgIconUser);\nexport default __webpack_public_path__ + \"static/media/icon-user.33a39f8c.svg\";\nexport { ForwardRef as ReactComponent };","export default __webpack_public_path__ + \"static/media/timeline.ac675505.svg\";","export function sortSentences(lhs, rhs) {\n    if (lhs.Start < rhs.Start) {\n        return -1;\n    }\n    if (lhs.Start > rhs.Start) {\n        return 1;\n    }\n    return 0;\n}\n\nexport function sortWords(lhs, rhs) {\n    if (lhs.s < rhs.s) {\n        return -1;\n    }\n    if (lhs.s > rhs.s) {\n        return 1;\n    }\n    return 0;\n}\n\nexport function sortSearchMatches(lhs, rhs) {\n    if (lhs.wordList[0].s < rhs.wordList[0].s) {\n        return -1;\n    }\n    if (lhs.wordList[0].s > rhs.wordList[0].s) {\n        return 1;\n    }\n    return 0;\n}\n","/* eslint-disable import/prefer-default-export */\nexport function textColorForBackground(hex, colors = ['#000', '#fff']) {\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    if (!result) {\n        return colors[1];\n    }\n    const red = parseInt(result[1], 16);\n    const green = parseInt(result[2], 16);\n    const blue = parseInt(result[3], 16);\n\n    const brightness = ((red * 299) + (green * 587) + (blue * 114)) / 255000;\n\n    if (brightness >= 0.5) {\n        return colors[0];\n    }\n    return colors[1];\n}\n","/* eslint-disable max-len */\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport {\n    callSummaryType,\n    participantsType,\n    playbackType,\n    searchType,\n    sentencesType,\n    timelineType,\n    transcriptionPlayScrubType,\n    transcriptionType,\n    viewportType,\n} from '../../shared/types';\nimport { ReactComponent as UserIcon } from '../../assets/svgs/icon-user.svg';\nimport styles from './TranscriptionConversation.module.scss';\nimport { STATUS_EMPTY, STATUS_LOADING } from '../../store/constants/data';\nimport timelineImage from '../../assets/svgs/timeline.svg';\nimport { sortSentences, sortWords } from '../../shared/utility/caller';\nimport { textColorForBackground } from '../../shared/utility/colors';\n\nclass TranscriptionConversation extends Component {\n    static loadingScreen(show) {\n        const loadingClasses = `${styles.onTop} loading-overlay ${show ? '' : 'fade-out'}`;\n        return (\n            <svg className={loadingClasses} width=\"100%\" height=\"100%\" viewBox=\"0 0 300 300\" preserveAspectRatio=\"none\">\n                <defs>\n                    <linearGradient\n                        id=\"bottom-top-gradient\"\n                        x1=\"0%\"\n                        y1=\"100%\"\n                        x2=\"0%\"\n                        y2=\"0%\"\n                        spreadMethod=\"pad\"\n                    >\n                        <stop stopColor=\"#fff\" stopOpacity=\"1\" offset=\"0%\" />\n                        <stop stopColor=\"#fff\" stopOpacity=\"0\" offset=\"100%\" />\n                    </linearGradient>\n                </defs>\n                <g opacity=\"0.033\">\n                    <rect x=\"20\" y=\"10\" width=\"30\" height=\"20\" radius=\"4\" />\n                    <rect x=\"35\" y=\"10\" width=\"100\" height=\"40\" radius=\"4\" />\n                    <rect x=\"170\" y=\"60\" width=\"30\" height=\"20\" radius=\"4\" />\n                    <rect x=\"185\" y=\"60\" width=\"100\" height=\"30\" radius=\"4\" />\n                    <rect x=\"20\" y=\"100\" width=\"30\" height=\"20\" radius=\"4\" />\n                    <rect x=\"35\" y=\"100\" width=\"100\" height=\"80\" radius=\"4\" />\n                    <rect x=\"170\" y=\"200\" width=\"30\" height=\"20\" radius=\"4\" />\n                    <rect x=\"185\" y=\"200\" width=\"100\" height=\"180\" radius=\"4\" />\n                </g>\n                <rect x=\"0\" y=\"150\" width=\"300\" height=\"150\" fill=\"url(#bottom-top-gradient)\" />\n                <line x1=\"0\" x2=\"0\" y1=\"0\" y2=\"300\" strokeWidth=\"1\" stroke=\"#000\" opacity=\"0.5\" />\n                <line\n                    x1=\"15\"\n                    x2=\"15\"\n                    y1=\"0\"\n                    y2=\"300\"\n                    strokeWidth=\"1\"\n                    stroke=\"#000\"\n                    opacity=\"0.125\"\n                    strokeDasharray=\"4 4\"\n                />\n            </svg>\n        );\n    }\n\n    static noAgentDataText(text) {\n        const classes = 'noAgentDataText';\n        return (\n            <div className={classes}>\n                {text}\n            </div>\n        );\n    }\n\n    static noAgentDataOverlay() {\n        const loadingClasses = 'loading-overlay';\n        return (\n            <svg className={loadingClasses} width=\"100%\" height=\"100%\" viewBox=\"0 0 300 300\" preserveAspectRatio=\"none\">\n                <defs>\n                    <linearGradient\n                        id=\"bottom-top-gradient\"\n                        x1=\"0%\"\n                        y1=\"100%\"\n                        x2=\"0%\"\n                        y2=\"0%\"\n                        spreadMethod=\"pad\"\n                    >\n                        <stop stopColor=\"#fff\" stopOpacity=\"1\" offset=\"0%\" />\n                        <stop stopColor=\"#fff\" stopOpacity=\"0\" offset=\"100%\" />\n                    </linearGradient>\n                </defs>\n                <g opacity=\"0.033\">\n                    <rect x=\"20\" y=\"10\" width=\"30\" height=\"20\" radius=\"4\" />\n                    <rect x=\"35\" y=\"10\" width=\"100\" height=\"40\" radius=\"4\" />\n                    <rect x=\"170\" y=\"60\" width=\"30\" height=\"20\" radius=\"4\" />\n                    <rect x=\"185\" y=\"60\" width=\"100\" height=\"30\" radius=\"4\" />\n                    <rect x=\"20\" y=\"100\" width=\"30\" height=\"20\" radius=\"4\" />\n                    <rect x=\"35\" y=\"100\" width=\"100\" height=\"80\" radius=\"4\" />\n                    <rect x=\"170\" y=\"200\" width=\"30\" height=\"20\" radius=\"4\" />\n                    <rect x=\"185\" y=\"200\" width=\"100\" height=\"180\" radius=\"4\" />\n                </g>\n                <rect x=\"0\" y=\"150\" width=\"300\" height=\"150\" fill=\"url(#bottom-top-gradient)\" />\n                <line x1=\"0\" x2=\"0\" y1=\"0\" y2=\"300\" strokeWidth=\"1\" stroke=\"#000\" opacity=\"0.5\" />\n                <line\n                    x1=\"15\"\n                    x2=\"15\"\n                    y1=\"0\"\n                    y2=\"300\"\n                    strokeWidth=\"1\"\n                    stroke=\"#000\"\n                    opacity=\"0.125\"\n                    strokeDasharray=\"4 4\"\n                />\n            </svg>\n        );\n    }\n\n    static isWordIntersectingPosition(word, position) {\n        return word.e >= position.start && word.s <= position.end;\n    }\n\n    constructor(props) {\n        super(props);\n        this.conversationRef = React.createRef();\n        this.scrollTimeoutHandler = null;\n        this.handleMouseDown = this.handleMouseDown.bind(this);\n        this.handleScrollWheel = this.handleScrollWheel.bind(this);\n    }\n\n    componentDidUpdate() {\n        const { playback: { isPlaying } } = this.props;\n        this.updateViewport(isPlaying);\n    }\n\n    getConversationViewportScalingFactor() {\n        const { transcription, timeline } = this.props;\n        if (typeof transcription === 'undefined' || transcription == null) {\n            return 0;\n        }\n        const sentences1 = transcription[1].Sentences;\n        const sentences2 = transcription[2].Sentences;\n\n        let shortestSentence = Number.MAX_SAFE_INTEGER;\n\n        shortestSentence = sentences1.reduce((ret, sentence) => Math.min(ret, (sentence.End - sentence.Start)), shortestSentence);\n        shortestSentence = sentences2.reduce((ret, sentence) => Math.min(ret, (sentence.End - sentence.Start)), shortestSentence);\n\n        // Min transcription size should be scaled based on length of call to prevent large empty text boxes.\n        // Scaling of about time in seconds / 4 seems to be a good compromise.\n        const timeScaling = timeline.range / 4000000;\n\n        if (shortestSentence < Number.MAX_SAFE_INTEGER) {\n            // Number of milliseconds per px\n            // Smallest box size is 26px\n            return Math.max(timeScaling, shortestSentence / 26);\n        }\n        return Math.max(timeScaling, 8);\n    }\n\n    styleSentence(sentence, words, color) {\n        const {\n            confidence,\n            search: {\n                positions,\n                currentPosition,\n            },\n        } = this.props;\n        const intersectingPositions = positions\n            .filter(position => position.channel === sentence.channel)\n            .map(position => ({ ...position, end: position.end ? position.end : position.start }))\n            .filter(position => position.start <= sentence.End && position.end >= sentence.Start);\n\n        const wordsInSentence = words.filter(word => word.s >= sentence.Start && word.e <= sentence.End);\n        wordsInSentence.sort(sortWords);\n\n        if (confidence === 0 && intersectingPositions.length === 0) {\n            return sentence.Sentence;\n        }\n        const matchingWords = wordsInSentence.filter(\n            word => intersectingPositions.filter(\n                position => TranscriptionConversation.isWordIntersectingPosition(word, position),\n            ).length > 0,\n        );\n\n        const textColor = color ? textColorForBackground(color, ['#5c6770', '#ffffff']) : '#5c6770';\n\n        return wordsInSentence.map((word, index, array) => {\n            const isMatchingWord = matchingWords.indexOf(word) > -1;\n            const nextWord = index < array.length - 1 ? array[index + 1] : null;\n            const isMatchingNextWord = nextWord ? matchingWords.indexOf(nextWord) > -1 : false;\n            const spanClass = classNames({\n                [styles.confidence]: word.c < (confidence / 100),\n            });\n            if (isMatchingWord) {\n                const isCurrentMatch = TranscriptionConversation.isWordIntersectingPosition(word, currentPosition);\n                const style = isCurrentMatch ? {\n                    color: textColor,\n                    background: `linear-gradient(to right, rgba(247,247,247,0) 50%, ${color} 50%)`,\n                    backgroundSize: '200%',\n                } : { backgroundColor: color, color: textColor, borderRadius: '2px' };\n                const matchingClassName = classNames({\n                    [styles.matchFill]: isCurrentMatch,\n                    [styles.matchFillAnimate]: isCurrentMatch,\n                });\n                return (\n                    // eslint-disable-next-line react/no-array-index-key\n                    <span key={`${index}-${word}`} className={spanClass}>\n                        <span className={matchingClassName} style={style}>\n                            {`${word.w}${isMatchingNextWord ? ' ' : ''}`}\n                        </span>\n                        {!isMatchingNextWord && ' '}\n                    </span>\n                );\n            }\n            return (\n                // eslint-disable-next-line react/no-array-index-key\n                <span key={`${index}-${word}`} className={spanClass}>\n                    {`${word.w} `}\n                </span>\n            );\n        });\n    }\n\n    updateViewport(isPlaying) {\n        if (this.isScrolling()) {\n            return;\n        }\n        const playHeads = document.getElementsByClassName(styles.playHead);\n        if (playHeads.length === 0) {\n            return;\n        }\n        const playHead = playHeads[0];\n        const element = this.conversationRef.current;\n        const rect = element.getBoundingClientRect();\n        const currentScroll = element.scrollTop;\n        const playHeadTop = playHead.getBoundingClientRect().top + Math.abs(currentScroll);\n        const midPoint = rect.top + (rect.height / 2);\n        if (isPlaying) {\n            const idealNewPosition = playHeadTop - midPoint;\n            const difference = idealNewPosition - this.conversationRef.current.scrollTop;\n            this.conversationRef.current.scrollTop += difference / 10;\n        } else if (this.props.transcriptionPlayScrub.position === 0) {\n            this.conversationRef.current.scrollTop = playHeadTop - midPoint;\n        }\n    }\n\n    mergedConversation() {\n        const { transcription } = this.props;\n        if (typeof transcription === 'undefined') {\n            return [];\n        }\n\n        const person1 = [];\n        transcription[1].Sentences.forEach((element) => {\n            const item = { person: 1 };\n            Object.assign(item, element);\n            person1.push(item);\n        });\n\n        const person2 = [];\n        transcription[2].Sentences.forEach((element) => {\n            const item = { person: 2 };\n            Object.assign(item, element);\n            person2.push(item);\n        });\n\n        const merged = person1.concat(person2);\n        merged.sort(sortSentences);\n        return merged;\n    }\n\n    static playHeadMarker(timestamp, range, timeline) {\n        const playhead = 100 / timeline.range * (timestamp * 1000);\n        const timeString = timeline.formattedTimeAtPlayhead(playhead);\n        const position = Math.max(0, timestamp - range.start);\n        const size = range.end - range.start;\n        const style = {\n            top: `${100 / size * position}%`,\n        };\n        return (\n            <div className={`${styles.container} ${styles.playHead}`} style={style}>\n                <div style={{ backgroundColor: '#F7F7F7' }}>\n                    {timeString}\n                </div>\n                <div className={styles.playHeadLine} />\n            </div>\n        );\n    }\n\n    getConversation(participants) {\n        const {\n            transcription,\n            sentences: participantSentences,\n            playback: { playhead },\n            timeline,\n        } = this.props;\n        const { routingOffset } = timeline;\n        const rows = [];\n        let sentences = [];\n        let range = null;\n        let index = 1;\n        if (participantSentences === null) {\n            return;\n        }\n        Object.keys(participants).map((key) => {\n            const participant = participants[key];\n            let words = [];\n            if (transcription[1] !== null) {\n                words = participant.isPrimary ? transcription[1].Words : transcription[2].Words;\n            }\n            return participantSentences[key]\n                .map(sentence => ({\n                    ...sentence,\n                    startWithOffset: sentence.startWithOffset + (routingOffset / 1000),\n                    endWithOffset: sentence.endWithOffset + (routingOffset / 1000),\n                }))\n                .map(sentence => ({\n                    ...sentence,\n                    isPrimary: participant.isPrimary,\n                    color: participant.color,\n                    styledSentence: this.styleSentence(sentence, words, participant.color),\n                }));\n        })\n            .flat()\n            .sort((a, b) => a.startWithOffset - b.startWithOffset)\n            .forEach((sentence) => {\n                const tabStyle = {\n                    borderBottom: `4px solid ${sentence.color}`,\n                };\n                const iconStyle = {\n                    fill: `${sentence.color}`,\n                    width: '18px',\n                    height: '18px',\n                };\n                const initialsStyle = {\n                    color: `${sentence.color}`,\n                };\n                const initialHtml = participants[sentence.number].initials === null ? (\n                    <UserIcon style={iconStyle} />\n                ) : (\n                    <span style={initialsStyle}>\n                        {' '}\n                        {participants[sentence.number].initials}\n                        {' '}\n                    </span>\n                );\n\n                const isFirstSentenceInRow = range === null || sentence.startWithOffset > range.end;\n                index = isFirstSentenceInRow ? 1 : index + 1;\n                const styling = {\n                    className: sentence.isPrimary ? styles.primary : styles.secondary,\n                    initialHtml,\n                    tabStyle,\n                };\n                if (isFirstSentenceInRow) {\n                    sentences = [{ ...sentence, ...styling }];\n                    range = { start: sentence.startWithOffset, end: sentence.endWithOffset };\n                    rows.push({\n                        range,\n                        sentences,\n                    });\n                } else {\n                    range.end = Math.max(sentence.endWithOffset, range.end);\n                    sentences.push({ ...sentence, ...styling });\n                }\n            });\n        return rows.map((row, index, array) => {\n            const { range, sentences } = row;\n            const previousRow = index > 0 ? array[index - 1] : null;\n            const timestamp = timeline.sentenceTimestampAtPlayhead(playhead);\n            const isPlayHeadInRow = timestamp >= range.start && timestamp < range.end;\n            const spacerRange = {\n                start: previousRow !== null ? previousRow.range.end : 0,\n                end: range.start - 1,\n            };\n            const isPlayHeadInSpacer = timestamp >= spacerRange.start && timestamp <= spacerRange.end;\n            const spacerLocatorClass = isPlayHeadInSpacer ? styles.playheadLocation : '';\n            const rowLocatorClass = isPlayHeadInRow ? styles.playheadLocation : '';\n            const spacer = (\n                <div\n                    key={`spacer-${range.start || 0}-${range.end || 0}`}\n                    className={`${styles.conversationRow} ${spacerLocatorClass} ${styles.spacer}`}\n                    data-timestamp-start={spacerRange.start || 0}\n                    data-timestamp-end={spacerRange.end || 0}\n                >\n                    {isPlayHeadInSpacer && TranscriptionConversation.playHeadMarker(timestamp, spacerRange, timeline)}\n                </div>\n            );\n            return [\n                spacer,\n                (\n                    <div\n                        key={`row-${range.start || 0}-${range.end || 0}`}\n                        className={`\n                            ${styles.conversationRow} \n                            ${rowLocatorClass} \n                            ${sentences && sentences.length > 1 ? styles.conversationRowLinked : ''}\n                            ${sentences && sentences.length === 1 && sentences[0].channel === 2 ? styles.conversationRowRight : ''}\n                            ${sentences && sentences.length > 1 && sentences.every(e => e.channel === 2) ? styles.conversationRowRight : ''}\n                        `}\n                        data-timestamp-start={range.start || 0}\n                        data-timestamp-end={range.end || 0}\n                    >\n                        {isPlayHeadInRow && TranscriptionConversation.playHeadMarker(timestamp, range, timeline)}\n                        {\n                            sentences.length === 1 ? sentences.map((sentence) => {\n                                const htmlIcon = (\n                                    <div\n                                        key=\"icon\"\n                                        className={styles.initials}\n                                        style={sentence.tabStyle}\n                                    >\n                                        {sentence.initialHtml}\n                                    </div>\n                                );\n                                const htmlSentence = (\n                                    <div key=\"sentence\" className={styles.sentenceBody}>{sentence.styledSentence}</div>\n                                );\n                                const htmlBlanking = (\n                                    <div key=\"blanking\" className={styles.blanking} />\n                                );\n                                const contents = sentence.isPrimary ? [htmlIcon, htmlBlanking, htmlSentence] : [htmlSentence, htmlBlanking, htmlIcon];\n                                return (\n                                    <div\n                                        key={`${sentence.Start}-${sentence.End}-${sentence.Sentence}`}\n                                        className={`${styles.sentence} ${sentence.className}`}\n                                        style={sentence.style}\n                                    >\n                                        {contents}\n                                    </div>\n                                );\n                            }) : sentences.reduce((acc, value) => {\n                                if (!acc[+(!value.isPrimary)]) {\n                                    acc[+(!value.isPrimary)] = value;\n                                    acc[+(!value.isPrimary)].styledSentence = [acc[+(!value.isPrimary)].styledSentence];\n                                } else {\n                                    acc[+(!value.isPrimary)].End = value.End;\n                                    acc[+(!value.isPrimary)].endWithOffset = value.endWithOffset;\n                                    acc[+(!value.isPrimary)].timelineEnd = value.timelineEnd;\n                                    acc[+(!value.isPrimary)].timeline.end = value.timeline.end;\n                                    acc[+(!value.isPrimary)].styledSentence.push(value.styledSentence);\n                                }\n                                return acc;\n                            }, []).map((sentence) => {\n                                const htmlIcon = (\n                                    <div\n                                        key=\"icon\"\n                                        className={styles.initials}\n                                        style={sentence.tabStyle}\n                                    >\n                                        {sentence.initialHtml}\n                                    </div>\n                                );\n                                const htmlSentence = (\n                                    <div key=\"sentence\" className={styles.sentenceBody}>\n                                        {sentence.styledSentence.map(el => (<div>{el}</div>))}\n                                    </div>\n                                );\n                                const htmlBlanking = (\n                                    <div key=\"blanking\" className={styles.blanking} />\n                                );\n                                const contents = sentence.isPrimary ? [htmlIcon, htmlBlanking, htmlSentence] : [htmlSentence, htmlBlanking, htmlIcon];\n                                return (\n                                    <div\n                                        key={`${sentence.Start}-${sentence.End}-${sentence.Sentence}`}\n                                        className={`${styles.sentence} ${sentence.className} ${sentence.channel === 2 ? styles.secondaryLinked : ''}`}\n                                    >\n                                        {contents}\n                                    </div>\n                                );\n                            })\n                        }\n                    </div>\n                )];\n        });\n    }\n\n    handleMouseDown(event) {\n        const { target } = event;\n        if (target.dataset.timestampStart === undefined) {\n            return;\n        }\n        const range = {\n            start: parseInt(target.dataset.timestampStart, 10),\n            end: parseInt(target.dataset.timestampEnd, 10),\n        };\n        const rect = event.target.getBoundingClientRect();\n        const x = event.clientX - rect.left;\n        const isOverPlayButton = x > 18 && x < 42;\n        const y = event.clientY - rect.top;\n        const size = range.end - range.start;\n        const timestamp = parseInt((size / rect.height * y) + range.start, 10);\n        const {\n            timeline,\n            onSetPlayHeadPosition,\n            setPaused,\n            onClickPlay,\n            playback: { isPlaying },\n        } = this.props;\n        const position = timeline.playheadAtTimestamp(timestamp * 1000);\n        if (isOverPlayButton && !isPlaying) {\n            onSetPlayHeadPosition(position, true);\n            onClickPlay();\n        } else if (isOverPlayButton && isPlaying) {\n            setPaused();\n        } else {\n            onSetPlayHeadPosition(position, true);\n            setPaused();\n        }\n    }\n\n    isScrolling() {\n        return this.scrollTimeoutHandler !== null;\n    }\n\n    handleScrollWheel() {\n        if (this.isScrolling()) {\n            clearTimeout(this.scrollTimeoutHandler);\n        }\n        this.scrollTimeoutHandler = setTimeout(() => {\n            this.scrollTimeoutHandler = null;\n        }, 1000);\n    }\n\n    render() {\n        const {\n            status,\n            children,\n            participants,\n            emptyText,\n        } = this.props;\n\n        const conversation = this.getConversation(participants);\n\n        if (status === STATUS_EMPTY) {\n            const style = {\n                height: '100%',\n                marginTop: '0px',\n            };\n            return (\n                <div\n                    ref={this.conversationRef}\n                    style={{\n                        backgroundImage: `url(${timelineImage})`,\n                        backgroundRepeat: 'repeat-y',\n                        backgroundPosition: '14px top',\n                        position: 'absolute',\n                        left: 0,\n                        right: 0,\n                        top: 0,\n                        bottom: 0,\n                    }}\n                >\n                    <div style={style}>\n                        {TranscriptionConversation.noAgentDataOverlay()}\n                        {TranscriptionConversation.noAgentDataText(emptyText)}\n                    </div>\n                </div>\n            );\n        }\n\n        return (\n            <div\n                ref={this.conversationRef}\n                className={styles.TranscriptionConversation}\n                style={{\n                    backgroundImage: `url(${timelineImage})`,\n                    backgroundRepeat: 'repeat-y',\n                    backgroundPosition: '14px top',\n                }}\n                onWheel={this.handleScrollWheel}\n            >\n                <div className={styles.transcriptionEventContainer}>\n                    {children}\n                    <div className={`${styles.container} ${styles.start}`}>\n                        <span className={styles.playHeadLine} />\n                        <span className={styles.playHeadStartText}>\n                            Call Begins\n                        </span>\n                        <span className={styles.playHeadLine} />\n                    </div>\n                </div>\n                <div\n                    className={styles.conversationContainer}\n                    onClick={this.handleMouseDown}\n                >\n                    {conversation}\n                </div>\n                {TranscriptionConversation.loadingScreen(status === STATUS_LOADING)}\n            </div>\n        );\n    }\n}\n\nTranscriptionConversation.propTypes = {\n    viewport: viewportType,\n    onSetTranscriptionViewport: PropTypes.func,\n    timeline: timelineType.isRequired,\n    playback: playbackType.isRequired,\n    callSummary: callSummaryType.isRequired,\n    confidence: PropTypes.number.isRequired,\n    children: PropTypes.oneOfType([\n        PropTypes.arrayOf(PropTypes.node),\n        PropTypes.node,\n    ]),\n    search: searchType.isRequired,\n    setPaused: PropTypes.func.isRequired,\n    transcriptionPlayScrub: transcriptionPlayScrubType.isRequired,\n    onSetPlayHeadPosition: PropTypes.func.isRequired,\n    onClickPlay: PropTypes.func.isRequired,\n    participants: participantsType.isRequired,\n    transcription: transcriptionType.isRequired,\n    sentences: sentencesType,\n};\n\nTranscriptionConversation.defaultProps = {\n    viewport: {\n        start: 0,\n        span: 100,\n    },\n    onSetTranscriptionViewport: () => {\n    },\n    children: null,\n    sentences: null,\n};\n\nexport default TranscriptionConversation;\n","import { createSelector } from 'reselect';\nimport { getExperienceOptions, getPrimaryUuid } from './common-selectors';\n\nconst selectedExperienceOption = createSelector(\n    [getExperienceOptions, getPrimaryUuid],\n    (experienceOptions, uuid) => experienceOptions[uuid],\n);\n\nexport default selectedExperienceOption;\n","import { createSelector } from 'reselect';\nimport getSelectedExperienceOption from './selectedExperienceOption';\nimport { getStatusState } from './common-selectors';\n\nconst getEmptyDataText = createSelector(\n    [getStatusState, getSelectedExperienceOption],\n    (status, selectedExperienceOption) => {\n        const { description } = status;\n        if (typeof description === 'string' && description.length > 0) {\n            return description;\n        }\n        const perspective = selectedExperienceOption\n            ? `this ${selectedExperienceOption.type.toLowerCase()}'s perspective of the` : 'this';\n        return `There is no data for ${perspective} call.`;\n    },\n);\n\nexport default getEmptyDataText;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport {\n    viewportType,\n    timelineType,\n    callSummaryType,\n    searchType,\n    playbackType,\n    transcriptionPlayScrubType,\n    participantsType,\n    transcriptionType,\n    sentencesType,\n} from '../shared/types';\nimport TranscriptionConversation from '../components/TranscriptionConversation/TranscriptionConversation';\nimport {\n    updateTranscriptionViewport,\n    pause,\n    movePlayHead,\n    play,\n} from '../store/actions/actions';\nimport { getTimeline } from '../store/selectors';\nimport {\n    getParticipants,\n    getRawDataFromTranscriptionState,\n    getSentencesFromTranscriptionState,\n    getStatus,\n} from '../store/selectors/common-selectors';\nimport getEmptyDataText from '../store/selectors/emptyDataText';\n\nfunction TranscriptionConversationContainer(props) {\n    const {\n        status,\n        viewport,\n        onSetTranscriptionViewport,\n        timeline,\n        playback,\n        callSummary,\n        confidence,\n        children,\n        search,\n        setPaused,\n        transcriptionPlayScrub,\n        onSetPlayHeadPosition,\n        onClickPlay,\n        participants,\n        transcription,\n        sentences,\n        emptyText,\n    } = props;\n    return (\n        <TranscriptionConversation\n            status={status}\n            onClickPlay={onClickPlay}\n            viewport={viewport}\n            onSetTranscriptionViewport={onSetTranscriptionViewport}\n            timeline={timeline}\n            playback={playback}\n            callSummary={callSummary}\n            confidence={confidence}\n            search={search}\n            setPaused={setPaused}\n            transcriptionPlayScrub={transcriptionPlayScrub}\n            onSetPlayHeadPosition={onSetPlayHeadPosition}\n            participants={participants}\n            transcription={transcription}\n            sentences={sentences}\n            emptyText={emptyText}\n        >\n            {children}\n        </TranscriptionConversation>\n    );\n}\n\nTranscriptionConversationContainer.propTypes = {\n    viewport: viewportType.isRequired,\n    onSetTranscriptionViewport: PropTypes.func.isRequired,\n    timeline: timelineType.isRequired,\n    playback: playbackType.isRequired,\n    callSummary: callSummaryType.isRequired,\n    confidence: PropTypes.number.isRequired,\n    children: PropTypes.oneOfType([\n        PropTypes.arrayOf(PropTypes.node),\n        PropTypes.node,\n    ]),\n    search: searchType.isRequired,\n    status: PropTypes.string.isRequired,\n    onClickPlay: PropTypes.func.isRequired,\n    setPaused: PropTypes.func.isRequired,\n    transcriptionPlayScrub: transcriptionPlayScrubType.isRequired,\n    onSetPlayHeadPosition: PropTypes.func.isRequired,\n    participants: participantsType.isRequired,\n    transcription: transcriptionType.isRequired,\n    sentences: sentencesType,\n    emptyText: PropTypes.string,\n};\n\nTranscriptionConversationContainer.defaultProps = {\n    children: null,\n    sentences: null,\n    emptyText: null,\n};\n\nconst mapStateToProps = (state) => {\n    const {\n        callSummary,\n        search,\n        playback,\n    } = state;\n    const {\n        transcriptionPlayScrub,\n        viewport,\n        confidence,\n    } = state.transcription;\n\n    return {\n        viewport,\n        timeline: getTimeline(state),\n        playback,\n        callSummary,\n        confidence,\n        search,\n        transcriptionPlayScrub,\n        participants: getParticipants(state),\n        status: getStatus(state),\n        transcription: getRawDataFromTranscriptionState(state),\n        sentences: getSentencesFromTranscriptionState(state),\n        emptyText: getEmptyDataText(state),\n    };\n};\n\nconst mapDispatchToProps = dispatch => ({\n    onSetTranscriptionViewport: (viewport) => {\n        dispatch(updateTranscriptionViewport(viewport));\n    },\n    setPaused: () => {\n        dispatch(pause());\n    },\n    onSetPlayHeadPosition: (position, isUserAction) => {\n        dispatch(movePlayHead(position, isUserAction));\n    },\n    onClickPlay: () => {\n        dispatch(play());\n    },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TranscriptionConversationContainer);\n","export default __webpack_public_path__ + \"static/media/icon-plus.c0aef066.svg\";","import { useState, useRef } from 'react';\n\nconst useOverflowMenuHooks = ({ onSelectOption }) => {\n    const [position, setPosition] = useState({\n        top: 0,\n        left: 0,\n    });\n    const ref = useRef();\n    const handleMouseDown = () => {\n        if (!ref.current) {\n            return;\n        }\n        const { top, left } = ref.current.getBoundingClientRect();\n        setPosition({ left, top });\n    };\n    const animationCallback = () => {\n        if (!ref.current || document.activeElement !== ref.current) {\n            return;\n        }\n        const { top, left } = ref.current.getBoundingClientRect();\n        if (position.left !== left || position.top !== top) {\n            document.activeElement.blur();\n            return;\n        }\n        window.requestAnimationFrame(animationCallback);\n    };\n    const handleOnFocus = () => {\n        animationCallback();\n    };\n    const handleOptionSelected = option => () => {\n        document.activeElement.blur();\n        onSelectOption(option);\n    };\n    return {\n        ref,\n        handleOptionSelected,\n        handleMouseDown,\n        handleOnFocus,\n        position: {\n            top: `${position.top}px`,\n            left: `${position.left}px`,\n        },\n    };\n};\n\nexport default useOverflowMenuHooks;\n","import React from 'react';\nimport useOverflowMenuHooks from './OverflowMenuHooks';\n\nimport styles from './OverflowMenu.module.scss';\n\nconst OverflowMenu = (props) => {\n    const { className, options, isLocked } = props;\n    const {\n        handleOptionSelected,\n        handleMouseDown,\n        position,\n        handleOnFocus,\n        ref,\n    } = useOverflowMenuHooks(props);\n    return (\n        <div\n            className={`${className} ${styles.button} ${isLocked && styles.locked}`}\n            role=\"button\"\n            tabIndex={1}\n            ref={ref}\n            onMouseDown={handleMouseDown}\n            onFocus={handleOnFocus}\n        >\n            <div\n                className={styles.popover}\n                style={position}\n                data-overflow-menu-popover\n            >\n                <div className={styles.menu}>\n                    { options.map(\n                        option => (\n                            <div\n                                role=\"button\"\n                                className={styles.item}\n                                key={option}\n                                onClick={handleOptionSelected(option)}\n                            >\n                                {option}\n                            </div>\n                        ),\n                    )\n                    }\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default OverflowMenu;\n","export const GENERAL_NOTE_UUID = 'general';\n\nexport default {\n    GENERAL_NOTE_UUID,\n};\n","/* eslint-disable max-len */\nimport { useState } from 'react';\nimport { timeAndDate } from '../../shared/utility/formatting';\nimport { getItemWithUuidFromArray } from '../../store/selectors/common-selectors';\nimport { GENERAL_NOTE_UUID } from '../../store/constants/notes';\n\nconst Action = {\n    acknowledge: 'Mark as acknowledged',\n    close: 'Close this note',\n    note: {\n        edit: 'Edit note',\n        reply: 'Reply to note',\n        delete: 'Delete note',\n    },\n    thread: {\n        edit: 'Edit reply',\n        reply: 'Add reply',\n        delete: 'Delete reply',\n    },\n};\n\nexport const DisplayMode = {\n    noteAndCommentThread: 'NOTE_AND_COMMENT_THREAD',\n    commentOnly: 'COMMENT_ONLY',\n    noteOnly: 'NOTE_ONLY',\n};\n\nconst createOverflowOptions = ({\n    displayMode,\n    isClosed,\n    isNoteAuthor,\n    isCommentAuthor,\n}) => {\n    const options = [];\n    if (!isClosed && isNoteAuthor && displayMode !== DisplayMode.commentOnly) {\n        options.push(Action.close);\n    }\n    if (isClosed) {\n        return options;\n    }\n    options.push(displayMode === DisplayMode.commentOnly ? Action.thread.reply : Action.note.reply);\n    if (isNoteAuthor && displayMode !== DisplayMode.commentOnly) {\n        options.push(Action.note.edit, Action.note.delete);\n    }\n    if (isCommentAuthor && displayMode === DisplayMode.commentOnly) {\n        options.push(Action.thread.edit, Action.thread.delete);\n    }\n    return options;\n};\n\nconst userOrEmptyUserIfNull = user => user || {\n    title: '',\n    userId: '',\n};\n\nconst youUserIfUserIdMatches = (user, idToMatch) => ({\n    ...user,\n    ...(user.userId === idToMatch ? { name: 'You' } : {}),\n});\n\nconst useUserHooks = (props) => {\n    const {\n        commentId, viewingUserId, callerWithUuid, note: { author, uuid, thread },\n    } = props;\n    const comment = commentId ? getItemWithUuidFromArray(thread, commentId) : null;\n    const isNoteAuthor = Number(author) === Number(viewingUserId);\n    const isGeneralNote = uuid === GENERAL_NOTE_UUID;\n    const relatingToUser = isGeneralNote ? {\n        title: 'General',\n        userId: GENERAL_NOTE_UUID,\n    } : userOrEmptyUserIfNull(callerWithUuid(uuid));\n    const relatingToUserOrYou = youUserIfUserIdMatches(relatingToUser, viewingUserId);\n    const { userId: relatingToUserId } = relatingToUserOrYou;\n    const relatingToTitle = relatingToUserOrYou.name ? relatingToUserOrYou.name : relatingToUserOrYou.title;\n    return {\n        isNoteAuthor,\n        isCommentAuthor: comment ? Number(viewingUserId) === Number(comment.author) : false,\n        isRelatingToUser: !isNoteAuthor && (isGeneralNote || Number(relatingToUserId) === Number(viewingUserId)),\n        relatingToTitle,\n    };\n};\n\nconst useThreadHooks = ({\n    displayMode, unread, commentId, viewingUserId, note: {\n        noteId, thread, noteCreated, noteModified, author,\n    },\n}) => {\n    const comment = commentId ? getItemWithUuidFromArray(thread, commentId) : null;\n    const isLastItem = displayMode === DisplayMode.commentOnly ? thread.indexOf(comment) === thread.length - 1 : thread.length === 0;\n    const isUnread = displayMode === DisplayMode.commentOnly ? unread.includes(comment.uuid) : unread.includes(noteId);\n    return {\n        comment,\n        isEmptyThread: !thread || (Array.isArray(thread) && !thread.length),\n        isUnread: author !== viewingUserId && isUnread,\n        isEdited: displayMode === DisplayMode.commentOnly\n            ? comment.created !== comment.modified\n            : noteCreated !== noteModified,\n        isLastItem,\n    };\n};\n\nconst useMenuHooks = ({\n    id,\n    onAcknowledge,\n    onEditNote,\n    onEditComment,\n    onDeleteNote,\n    onDeleteComment,\n    onCloseNote,\n    onNoteClick,\n    onUpdateUserActivity,\n    commentId,\n    note: {\n        isAcknowledged,\n    },\n}) => {\n    const handleOptionSelected = (option) => {\n        switch (option) {\n            case Action.acknowledge:\n                if (!isAcknowledged) {\n                    onAcknowledge(id);\n                }\n                break;\n            case Action.note.edit:\n                onEditNote(id);\n                break;\n            case Action.note.reply:\n            case Action.thread.reply:\n                onEditComment(id);\n                break;\n            case Action.note.delete:\n                onDeleteNote(id);\n                break;\n            case Action.thread.edit:\n                onEditComment(id, commentId);\n                break;\n            case Action.thread.delete:\n                onDeleteComment(id, commentId);\n                break;\n            case Action.close:\n                onCloseNote(id);\n                break;\n            default:\n                break;\n        }\n    };\n    const handleNoteClicked = () => {\n        onUpdateUserActivity(id);\n        onNoteClick();\n    };\n    return {\n        handleNoteClicked,\n        handleDefaultAction: () => handleOptionSelected(Action.acknowledge),\n        handleOptionSelected,\n    };\n};\n\nconst useTranscriptionNoteHooks = (props) => {\n    const {\n        displayMode,\n        note,\n        event,\n        interactive,\n    } = props;\n    const {\n        authorName, thread, isAcknowledged, isClosed,\n    } = note;\n    const [showThread, setShowThread] = useState(true);\n    const {\n        isNoteAuthor, isCommentAuthor, isRelatingToUser, relatingToTitle,\n    } = useUserHooks(props);\n    const {\n        isEmptyThread, comment, isUnread, isEdited, isLastItem,\n    } = useThreadHooks(props);\n    const {\n        handleNoteClicked,\n        handleDefaultAction,\n        handleOptionSelected,\n    } = useMenuHooks(props);\n    const overflowOptions = createOverflowOptions({\n        displayMode,\n        isAcknowledged,\n        isClosed,\n        isNoteAuthor,\n        isCommentAuthor,\n        isRelatingToUser,\n        isLastItem,\n    });\n    const showThreadSection = displayMode === DisplayMode.noteAndCommentThread && !isEmptyThread;\n    return {\n        handleNoteClicked,\n        handleOptionSelected,\n        handleDefaultAction: isRelatingToUser ? handleDefaultAction : null,\n        isEmptyThread,\n        isUnread,\n        isEdited,\n        showThread: showThread && displayMode === DisplayMode.noteAndCommentThread,\n        thread: displayMode === DisplayMode.noteAndCommentThread ? thread : [],\n        toggleShowThread: () => setShowThread(!showThread),\n        author: displayMode === DisplayMode.commentOnly ? comment.authorName : authorName,\n        relatingTo: `${relatingToTitle} (${event.text})`,\n        isAcknowledged,\n        isClosed,\n        showDefaultAction: !isClosed && interactive && (isLastItem || !showThread)\n            && (isAcknowledged || isRelatingToUser),\n        showRelatingTo: displayMode === DisplayMode.noteAndCommentThread,\n        showThreadSection,\n        overflowOptions,\n        showOverflowMenu: interactive && overflowOptions.length > 0,\n        ...(displayMode === DisplayMode.commentOnly ? {\n            text: comment.comment,\n            noteCreated: timeAndDate(comment.created),\n        } : {\n            text: note.text,\n            noteCreated: timeAndDate(note.noteCreated),\n        }),\n    };\n};\n\nexport default useTranscriptionNoteHooks;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './TranscriptionNote.module.scss';\nimport { decode } from '../../shared/utility/formatting';\nimport { eventsType, noteType } from '../../shared/types';\nimport OverflowMenu from '../OverflowMenu/OverflowMenu';\nimport useTranscriptionNoteHooks, { DisplayMode } from './TranscriptionNoteHooks';\n\nconst TranscriptionNote = (props) => {\n    const {\n        id, displayMode, color, time, interactive,\n    } = props;\n    const {\n        overflowOptions,\n        handleNoteClicked,\n        handleOptionSelected,\n        handleDefaultAction,\n        noteCreated,\n        author,\n        relatingTo,\n        isAcknowledged,\n        isClosed,\n        text,\n        showThread,\n        thread,\n        toggleShowThread,\n        showDefaultAction,\n        showRelatingTo,\n        showThreadSection,\n        showOverflowMenu,\n        isEdited,\n        isUnread,\n    } = useTranscriptionNoteHooks(props);\n    const style = {\n        borderLeft: '4px solid',\n        borderLeftColor: color,\n    };\n    return (\n        <div>\n            <div\n                role=\"button\"\n                tabIndex={0}\n                key={id}\n                className={`${styles.note} ${displayMode === DisplayMode.commentOnly ? styles.comment : null}`}\n                style={style}\n                onMouseUp={interactive ? handleNoteClicked : undefined}\n            >\n                <div className={styles.heading}>\n                    <div className={styles.author}>\n                        { author }\n                    </div>\n                    <div className={styles.time}>\n                        { noteCreated.time }\n                    </div>\n                    <div className={styles.date}>\n                        { noteCreated.date }\n                    </div>\n                </div>\n                {showRelatingTo && (\n                    <div className={styles.subject}>\n                        {!!time && <div className={styles.time}>{time}</div>}\n                        <div>{ relatingTo }</div>\n                    </div>\n                )}\n                <div className={styles.noteText}>\n                    {decode(text || '')}\n                    {isEdited && (\n                        <div className={styles.edited}>(EDITED)</div>\n                    )}\n                </div>\n                {showOverflowMenu && (\n                    <OverflowMenu\n                        className={styles.overflowMenu}\n                        options={overflowOptions}\n                        isLocked={isClosed}\n                        onSelectOption={handleOptionSelected}\n                    />\n                )}\n                {showDefaultAction && (\n                    <div\n                        role=\"button\"\n                        tabIndex={2}\n                        className={`${styles.actionButton} ${isAcknowledged && styles.acknowledged}`}\n                        onClick={handleDefaultAction}\n                    />\n                )}\n                { isUnread && (\n                    <div className={styles.unread} />\n                )}\n                {(isClosed && displayMode !== DisplayMode.commentOnly) && (\n                    <div className={styles.closed}>\n                        NOTE CLOSED\n                    </div>\n                )}\n            </div>\n            { showThreadSection && (\n                <div>\n                    { showThread && thread.map(({ uuid }) => (\n                        <TranscriptionNote key={uuid} {...props} displayMode={DisplayMode.commentOnly} commentId={uuid} />\n                    ))}\n                    {interactive && (\n                        <div className={styles.toggleThreadButton} onClick={toggleShowThread}>\n                            {\n                                showThread ? 'HIDE REPLIES' : 'SHOW REPLIES'\n                            }\n                        </div>\n                    )}\n                </div>\n            )}\n        </div>\n    );\n};\n\nTranscriptionNote.propTypes = {\n    id: PropTypes.string.isRequired,\n    displayMode: PropTypes.string,\n    color: PropTypes.string.isRequired,\n    time: PropTypes.string,\n    note: noteType.isRequired,\n    commentId: PropTypes.string,\n    onNoteClick: PropTypes.func,\n    onEditNote: PropTypes.func,\n    onEditComment: PropTypes.func,\n    onAcknowledge: PropTypes.func.isRequired,\n    onDeleteNote: PropTypes.func.isRequired,\n    onDeleteComment: PropTypes.func.isRequired,\n    onCloseNote: PropTypes.func.isRequired,\n    event: eventsType.isRequired,\n    interactive: PropTypes.bool,\n    viewingUserId: PropTypes.string,\n    unread: PropTypes.arrayOf(PropTypes.string),\n    callerWithUuid: PropTypes.func.isRequired,\n};\n\nTranscriptionNote.defaultProps = {\n    displayMode: DisplayMode.noteAndCommentThread,\n    commentId: null,\n    interactive: true,\n    viewingUserId: '',\n    unread: [],\n    time: '',\n    onNoteClick: () => {},\n    onEditNote: () => {},\n    onEditComment: () => {},\n};\n\nexport default TranscriptionNote;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport TranscriptionNote from '../components/TranscriptionNote/TranscriptionNote';\nimport callerWithUuid from '../store/selectors/callerWithUuid';\nimport { eventsType, noteType } from '../shared/types';\nimport { getAuthenticatedUserId } from '../store/selectors/authSelectors';\nimport { getUnreadNoteAndCommentIdsForCurrentUser } from '../store/selectors/noteSelectors';\nimport { DisplayMode } from '../components/TranscriptionNote/TranscriptionNoteHooks';\nimport {\n    acknowledgeNote, closeNote, deleteComment, updateUserActivity,\n} from '../store/actions/notes';\nimport { onDeleteNote } from '../store/actions/salesforce';\n\nconst TranscriptionNoteContainer = props => (\n    <TranscriptionNote {...props} />\n);\n\nTranscriptionNoteContainer.propTypes = {\n    id: PropTypes.string.isRequired,\n    displayMode: PropTypes.string,\n    color: PropTypes.string.isRequired,\n    time: PropTypes.string,\n    note: noteType.isRequired,\n    commentId: PropTypes.string,\n    onNoteClick: PropTypes.func,\n    onEditNote: PropTypes.func,\n    onEditComment: PropTypes.func,\n    onAcknowledge: PropTypes.func.isRequired,\n    onDeleteNote: PropTypes.func.isRequired,\n    onDeleteComment: PropTypes.func.isRequired,\n    onCloseNote: PropTypes.func.isRequired,\n    onUpdateUserActivity: PropTypes.func.isRequired,\n    event: eventsType.isRequired,\n    interactive: PropTypes.bool,\n    viewingUserId: PropTypes.string,\n    unread: PropTypes.arrayOf(PropTypes.string),\n    callerWithUuid: PropTypes.func.isRequired,\n};\n\nTranscriptionNoteContainer.defaultProps = {\n    displayMode: DisplayMode.noteAndCommentThread,\n    commentId: null,\n    interactive: true,\n    viewingUserId: '',\n    unread: [],\n    time: '',\n    onNoteClick: () => {},\n    onEditNote: () => {},\n    onEditComment: () => {},\n};\n\nconst mapStateToProps = state => ({\n    unread: getUnreadNoteAndCommentIdsForCurrentUser(state),\n    viewingUserId: getAuthenticatedUserId(state),\n    callerWithUuid: callerWithUuid(state),\n});\n\nconst mapDispatchToProps = dispatch => ({\n    onAcknowledge: (id) => {\n        dispatch(acknowledgeNote(id));\n    },\n    onDeleteNote: (id) => {\n        dispatch(onDeleteNote(id));\n    },\n    onDeleteComment: (noteId, commentId) => {\n        dispatch(deleteComment(noteId, commentId));\n    },\n    onCloseNote: (id) => {\n        dispatch(closeNote(id));\n    },\n    onUpdateUserActivity: (noteId) => {\n        dispatch(updateUserActivity(noteId));\n    },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TranscriptionNoteContainer);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './NotesFilterSelector.module.scss';\nimport { useNotesFilterSelectorHooks } from './NotesFilterSelectorHooks';\nimport { NotesFilter } from '../../store/selectors/noteSelectors';\nimport { notesType } from '../../shared/types';\n\nconst NotesFilterSelector = (props) => {\n    const {\n        label,\n        handleOptionSelected,\n        handleClickButton,\n        isFiltering,\n    } = useNotesFilterSelectorHooks(props);\n    return (\n        <div\n            className={styles.filter}\n            role=\"button\"\n            tabIndex={1}\n            onMouseDown={handleClickButton}\n        >\n            <div className={isFiltering ? styles.highlighted : ''}>\n                { label }\n            </div>\n            <div className={styles.popover}>\n                { Object.keys(NotesFilter).map(key => (\n                    <div\n                        className={styles.item}\n                        key={key}\n                        onClick={handleOptionSelected(key)}\n                    >\n                        { NotesFilter[key] }\n                    </div>\n                ))}\n            </div>\n        </div>\n    );\n};\n\nNotesFilterSelector.propTypes = {\n    notes: notesType.isRequired,\n    onSelectFilter: PropTypes.func.isRequired,\n};\n\nexport default NotesFilterSelector;\n","import { NotesFilter } from '../../store/selectors/noteSelectors';\n\nexport const useNotesFilterSelectorHooks = ({\n    notes: {\n        filter,\n    },\n    onSelectFilter,\n}) => {\n    const handleOptionSelected = key => () => {\n        document.activeElement.blur();\n        onSelectFilter(NotesFilter[key]);\n    };\n    const handleClickButton = event => {\n        if (document.activeElement === event.target.parentElement) {\n            document.activeElement.blur();\n            event.preventDefault();\n        }\n    };\n    const isFiltering = filter !== NotesFilter.all;\n    return {\n        handleOptionSelected,\n        handleClickButton,\n        label: isFiltering ? `Showing ${filter.toLowerCase()}` : 'Showing all notes',\n        isFiltering,\n    };\n};\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport NotesFilterSelector from '../components/NotesFilterSelector/NotesFilterSelector';\nimport { getNotesState } from '../store/selectors/noteSelectors';\nimport { setNotesFilter } from '../store/actions/notes';\nimport { notesType } from '../shared/types';\n\nconst NotesFilterSelectorContainer = props => (<NotesFilterSelector {...props} />);\n\nNotesFilterSelectorContainer.propTypes = {\n    notes: notesType.isRequired,\n    onSelectFilter: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = state => ({\n    notes: getNotesState(state),\n});\n\nconst mapDispatchToProps = dispatch => ({\n    onSelectFilter: filter => dispatch(setNotesFilter(filter)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NotesFilterSelectorContainer);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './TranscriptionNotes.module.scss';\nimport {\n    notesType,\n    participantsType,\n    scrubType,\n    timelineType,\n    viewportType,\n} from '../../shared/types';\nimport { STATUS_EMPTY, STATUS_LOADING } from '../../store/constants/data';\nimport iconPlus from '../../assets/svgs/icon-plus.svg';\nimport { formatTime } from '../../shared/utility/formatting';\nimport { SHOW_NOTES } from '../../store/constants/metrics-layers';\nimport { NoteEditMode } from '../../store/actions/notes';\nimport TranscriptionNoteContainer from '../../containers/TranscriptionNoteContainer';\nimport NotesFilterContainer from '../../containers/NotesFilterSelectorContainer';\n\n/* eslint-disable react/prefer-stateless-function */\nclass TranscriptionNotes extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            // Cache used to continue displaying notes when the state of a filtered note changes.\n            // This ensures filtered notes don't disappear when a user interacts with them.\n            cachedNoteIds: this.props.filteredNotes.map(note => note.noteId),\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\n        if (nextProps.notes.filter !== this.props.notes.filter) {\n            // User has changed the filter. Override cache with new notes for display.\n            this.setState({\n                cachedNoteIds: nextProps.filteredNotes.map(note => note.noteId),\n            });\n        }\n        return true;\n    }\n\n    static loadingScreen(show) {\n        const loadingClasses = `loading-overlay ${show ? '' : 'fade-out'}`;\n        return (\n            <svg className={loadingClasses} width=\"100%\" height=\"100%\" viewBox=\"0 0 100 300\" preserveAspectRatio=\"none\">\n                <defs>\n                    <g id=\"note-shape\" opacity=\"0.4\">\n                        <rect x=\"5\" y=\"5\" width=\"90\" height=\"35\" opacity=\"0.5\" />\n                        <rect x=\"5\" y=\"5\" width=\"5\" height=\"35\" />\n                    </g>\n                </defs>\n                <use href=\"#note-shape\" x=\"0\" y=\"0\" opacity=\"0.4\" />\n                <use href=\"#note-shape\" x=\"0\" y=\"40\" opacity=\"0.2\" />\n                <use href=\"#note-shape\" x=\"0\" y=\"80\" opacity=\"0.1\" />\n            </svg>\n        );\n    }\n\n    static noAgentDataOverlay() {\n        return (\n            <svg className=\"loading-overlay\" width=\"100%\" height=\"100%\" viewBox=\"0 0 100 300\" preserveAspectRatio=\"none\">\n                <defs>\n                    <g id=\"note-shape\" opacity=\"0.4\">\n                        <rect x=\"5\" y=\"5\" width=\"90\" height=\"35\" opacity=\"0.5\" />\n                        <rect x=\"5\" y=\"5\" width=\"5\" height=\"35\" />\n                    </g>\n                </defs>\n                <use href=\"#note-shape\" x=\"0\" y=\"0\" opacity=\"0.4\" />\n                <use href=\"#note-shape\" x=\"0\" y=\"40\" opacity=\"0.2\" />\n                <use href=\"#note-shape\" x=\"0\" y=\"80\" opacity=\"0.1\" />\n            </svg>\n        );\n    }\n\n    static noAgentDataText(text) {\n        const classes = 'noAgentDataText notes';\n        return (\n            <div className={classes}>\n                {text}\n            </div>\n        );\n    }\n\n    getNotes() {\n        const { participants, notes } = this.props;\n        const userList = [];\n        Object.keys(participants).forEach((key) => {\n            const participant = participants[key];\n            userList.push({\n                uuid: participant.relatedUuids[0],\n                title: participant.title,\n                color: participant.color,\n            });\n        });\n\n        const { cachedNoteIds } = this.state;\n        let listOfNotes;\n        if (cachedNoteIds.length === 0) {\n            listOfNotes = this.props.filteredNotes;\n        } else {\n            listOfNotes = notes.notes.filter(note => cachedNoteIds.includes(note.noteId));\n        }\n        const noteList = [];\n\n        for (let i = 0; i < listOfNotes.length; i++) {\n            const note = listOfNotes[i];\n            const time = note.timestamp !== null && !Number.isNaN(note.timestamp)\n                ? formatTime(Math.floor(note.timestamp / 1000000)) : null;\n            const event = notes.eventTypes.find(obj => obj.id === note.eventType);\n            const agent = userList.find(user => user.uuid === note.uuid);\n\n            noteList.push(\n                <TranscriptionNoteContainer\n                    id={note.noteId}\n                    key={note.noteId}\n                    color={agent ? agent.color : '#adb3b7'}\n                    onNoteClick={this.handleNoteClick.bind(this, note.noteId)}\n                    onEditNote={this.handleEditNote.bind(this)}\n                    onEditComment={this.handleEditComment.bind(this)}\n                    time={time}\n                    note={note}\n                    event={event}\n                />,\n            );\n        }\n        return noteList;\n    }\n\n    setPlayHeadPosition(position) {\n        const { onNoteClicked, scrub, viewport } = this.props;\n        const { span } = viewport;\n        // Timeline\n        const scrubWidth = (scrub.end - scrub.start);\n        const scrubMiddle = scrub.start + (scrubWidth / 2);\n        const scrubDiff = position - scrubMiddle;\n        const scrubStart = Math.min(Math.max(0, scrub.start + scrubDiff), 100 - scrubWidth);\n        const scrubEnd = scrubStart + scrubWidth;\n        // Transcription\n        const vpMiddle = viewport.start + (span / 2);\n        const vpDiff = position - vpMiddle;\n        const vpStart = Math.min(Math.max(0, viewport.start + vpDiff), 100 - span);\n\n        onNoteClicked(position, { start: scrubStart, end: scrubEnd }, { start: vpStart, span });\n    }\n\n    handleEditNote(noteId = null) {\n        const { onOpenNoteEditor } = this.props;\n        const editMode = noteId !== null ? NoteEditMode.existingNote : NoteEditMode.newNote;\n        onOpenNoteEditor(editMode, noteId);\n    }\n\n    handleEditComment(noteId, comment = null) {\n        const { onOpenNoteEditor } = this.props;\n        const editMode = comment !== null ? NoteEditMode.existingComment : NoteEditMode.newComment;\n        onOpenNoteEditor(editMode, noteId, comment);\n    }\n\n    handleNoteClick(noteId) {\n        const {\n            getNoteWithId,\n            timeline,\n        } = this.props;\n        const note = getNoteWithId(noteId);\n        if (note) {\n            let position = (note.timestamp / timeline.range) * 100;\n            if (note.timestamp === null || Number.isNaN(note.timestamp)) position = 0;\n            this.setPlayHeadPosition(position);\n        }\n    }\n\n    handleNewNote() {\n        const { onOpenNoteEditor } = this.props;\n        onOpenNoteEditor(NoteEditMode.newNote);\n    }\n\n    showNotes() {\n        const notes = this.getNotes();\n        return (\n            <div>\n                {notes}\n            </div>\n        );\n    }\n\n    addNewNoteDiv() {\n        const { notes } = this.props;\n        return (\n            <div className={styles.NewNoteSection}>\n                <div>\n                    <div\n                        role=\"button\"\n                        tabIndex={0}\n                        className={styles.newNoteContainer}\n                        onMouseDown={this.handleNewNote.bind(this)}\n                    >\n                        <img className={styles.newNoteIcon} src={iconPlus} alt=\"plus icon\" />\n                        <div className={styles.newNoteText}>Add New Note</div>\n                    </div>\n                    <div className={styles.checkboxContainer}>\n                        <NotesFilterContainer />\n                    </div>\n                </div>\n                <div className={styles.checkboxContainer}>\n                    <input\n                        className={styles.checkbox}\n                        type=\"checkbox\"\n                        id=\"showNotesCheckbox\"\n                        onChange={this.handleShowNotesChecked.bind(this)}\n                        checked={notes.showOnTimeline}\n                    />\n                    <label className={styles.checkboxLabel} htmlFor=\"showNotesCheckbox\">Show notes on timeline</label>\n                </div>\n            </div>\n        );\n    }\n\n    handleShowNotesChecked(event) {\n        const { onSetNoteVisibility, onToggleLayer } = this.props;\n        onToggleLayer(SHOW_NOTES);\n        onSetNoteVisibility(event.target.checked);\n    }\n\n    handleShowCompletedNotes(event) {\n        const { onSetCompletedNotesVisibility } = this.props;\n        onSetCompletedNotesVisibility(event.target.checked);\n    }\n\n    render() {\n        const { status, emptyText } = this.props;\n        if (status === STATUS_EMPTY) {\n            return (\n                <div className={styles.TranscriptionNotes}>\n                    {TranscriptionNotes.noAgentDataOverlay()}\n                    {TranscriptionNotes.noAgentDataText(emptyText)}\n                </div>\n            );\n        }\n        return (\n            <div className={styles.TranscriptionNotes}>\n                {this.addNewNoteDiv()}\n                {this.showNotes()}\n                <div className={styles.bottomMenuSpacer} />\n                {TranscriptionNotes.loadingScreen(status === STATUS_LOADING)}\n            </div>\n        );\n    }\n}\n\nTranscriptionNotes.propTypes = {\n    notes: notesType.isRequired,\n    onSetNoteVisibility: PropTypes.func.isRequired,\n    onSetCompletedNotesVisibility: PropTypes.func.isRequired,\n    onOpenNoteEditor: PropTypes.func.isRequired,\n    timeline: timelineType.isRequired,\n    onNoteClicked: PropTypes.func.isRequired,\n    scrub: scrubType.isRequired,\n    viewport: viewportType.isRequired,\n    onToggleLayer: PropTypes.func.isRequired,\n    participants: participantsType.isRequired,\n    emptyText: PropTypes.string,\n    getNoteWithId: PropTypes.func.isRequired,\n};\n\n/* eslint-enable react/prefer-stateless-function */\nexport default TranscriptionNotes;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport {\n    callSummaryType,\n    noteList,\n    notesType,\n    participantsType,\n    scrubType,\n    timelineType,\n    viewportType,\n} from '../shared/types';\nimport TranscriptionNotes from '../components/TranscriptionNotes/TranscriptionNotes';\nimport {\n    pause,\n    setNoteVisibility,\n    movePlayHead,\n    moveScrubber, updateTranscriptionViewport, toggleMetricsLayer, setCompletedNotesVisibility,\n} from '../store/actions/actions';\nimport { getTimeline } from '../store/selectors';\nimport { getParticipants, getStatus } from '../store/selectors/common-selectors';\nimport getEmptyDataText from '../store/selectors/emptyDataText';\nimport { getFilteredNotes, getNoteWithIdSelector } from '../store/selectors/noteSelectors';\nimport { openNoteEditor } from '../store/actions/notes';\n\nconst TranscriptionNotesContainer = props => (<TranscriptionNotes {...props} />);\n\nTranscriptionNotesContainer.propTypes = {\n    notes: notesType.isRequired,\n    filteredNotes: noteList.isRequired,\n    onSetNoteVisibility: PropTypes.func.isRequired,\n    onSetCompletedNotesVisibility: PropTypes.func.isRequired,\n    onOpenNoteEditor: PropTypes.func.isRequired,\n    timeline: timelineType.isRequired,\n    onNoteClicked: PropTypes.func.isRequired,\n    scrub: scrubType.isRequired,\n    viewport: viewportType.isRequired,\n    onToggleLayer: PropTypes.func.isRequired,\n    callSummary: callSummaryType.isRequired,\n    participants: participantsType.isRequired,\n    status: PropTypes.string.isRequired,\n    emptyText: PropTypes.string,\n    getNoteWithId: PropTypes.func.isRequired,\n};\n\nTranscriptionNotesContainer.defaultProps = {\n    emptyText: null,\n};\n\nconst mapStateToProps = (state) => {\n    const {\n        scrub,\n        callSummary,\n        notes,\n    } = state;\n    const { viewport } = state.transcription;\n    return {\n        notes,\n        filteredNotes: getFilteredNotes(state),\n        timeline: getTimeline(state),\n        scrub,\n        viewport,\n        callSummary,\n        participants: getParticipants(state),\n        status: getStatus(state),\n        emptyText: getEmptyDataText(state),\n        getNoteWithId: getNoteWithIdSelector(state),\n    };\n};\n\nconst mapDispatchToProps = dispatch => ({\n    onSetNoteVisibility: (visible) => {\n        dispatch(setNoteVisibility(visible));\n    },\n    onSetCompletedNotesVisibility: (visibile) => {\n        dispatch(setCompletedNotesVisibility(visibile));\n    },\n    onOpenNoteEditor: (editMode, noteId, comment) => {\n        dispatch(pause());\n        dispatch(openNoteEditor(editMode, noteId, comment));\n    },\n    onNoteClicked: (position, scrub, viewport) => {\n        dispatch(movePlayHead(position, true));\n        dispatch(moveScrubber(scrub));\n        dispatch(updateTranscriptionViewport(viewport));\n    },\n    onToggleLayer: (id) => {\n        dispatch(toggleMetricsLayer(id));\n    },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TranscriptionNotesContainer);\n","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgIconZigzag(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"#000\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"fill\",\n    id: \"a\",\n    d: \"M7.29 11.368L3.706 14.95a1 1 0 1 1-1.414-1.414l4.243-4.243A.997.997 0 0 1 7.289 9a.997.997 0 0 1 .754.292l3.591 3.591 3.592-3.591c.202-.203.47-.3.735-.293a.997.997 0 0 1 .736.293l4.243 4.243a1 1 0 0 1-1.414 1.414l-3.565-3.564-3.564 3.564a.998.998 0 0 1-.763.291.998.998 0 0 1-.763-.291L7.29 11.368z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgIconZigzag);\nexport default __webpack_public_path__ + \"static/media/icon-zigzag.5329b142.svg\";\nexport { ForwardRef as ReactComponent };","export default __webpack_public_path__ + \"static/media/icon-playback.53bc9210.svg\";","export default __webpack_public_path__ + \"static/media/icon-pause-white.1c5f5b33.svg\";","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './Transcription.module.scss';\nimport TranscriptionConversationContainer from '../../containers/TranscriptionConversationContainer';\nimport TranscriptionNotesContainer from '../../containers/TranscriptionNotesContainer';\nimport iconPlayback from '../../assets/svgs/icon-playback.svg';\nimport iconPause from '../../assets/svgs/icon-pause-white.svg';\nimport { ReactComponent as ZigzagIcon } from '../../assets/svgs/icon-zigzag.svg';\nimport {\n    statusType, transcriptionPlayScrubType, transcriptionWidthsType, viewportType,\n} from '../../shared/types';\nimport { STATUS_EMPTY, STATUS_LOADING } from '../../store/constants/data';\nimport { TRANSCRIPTION_START_OFFSET } from '../../shared/utility/constants';\n\nclass Transcription extends Component {\n    constructor(props) {\n        super(props);\n        this.sliderRef = React.createRef();\n    }\n\n    componentDidMount() {\n        this.sliderRef.current.value = 0;\n    }\n\n    playHeadLayer(hide) {\n        const { transcriptionPlayScrub, isPlaying } = this.props;\n        let playScrub;\n        const icon = isPlaying ? iconPause : iconPlayback;\n        if (transcriptionPlayScrub.position > 0) {\n            playScrub = (\n                <div\n                    className={styles.playScrub}\n                    style={{\n                        top: `${transcriptionPlayScrub.position}%`,\n                        marginTop: '-12px',\n\n                    }}\n                >\n                    <svg className={styles.playButton}>\n                        <circle fill=\"#C4D600\" cx=\"12\" cy=\"12\" r=\"12\" />\n                        <image x=\"3\" y=\"3\" width=\"18\" height=\"18\" xlinkHref={icon} />\n                    </svg>\n                    <div className={styles.playScrubLine} />\n                </div>\n            );\n        }\n        const playScrubStyle = {\n            visibility: hide ? 'hidden' : 'visible',\n            marginLeft: '18px',\n            boxSizing: 'border-box',\n        };\n        return (\n            <div\n                role=\"button\"\n                tabIndex={-1}\n                className={styles.LayerContent}\n                style={playScrubStyle}\n            >\n                {playScrub}\n            </div>\n        );\n    }\n\n    confidenceGauge(hide) {\n        const { onSetConfidence } = this.props;\n        const iconStyle = {\n            fill: '#979797',\n            width: '24px',\n            height: '24px',\n            hidden: `${hide}`,\n        };\n        return (\n            <div\n                className={styles.confidenceContainer}\n                style={{ visibility: hide ? 'hidden' : 'visible' }}\n            >\n                <ZigzagIcon style={iconStyle} />\n                <span className={styles.confidenceText}>Confidence Level</span>\n                <input\n                    ref={this.sliderRef}\n                    type=\"range\"\n                    min=\"0\"\n                    max=\"100\"\n                    className={styles.slider}\n                    id=\"confidenceSlider\"\n                    onChange={(e) => { onSetConfidence(e.target.valueAsNumber); }}\n                />\n            </div>\n        );\n    }\n\n    handleTranscriptionPlayHeadLayerMouseMove() {\n        const { onSetTranscriptionPlayScrub } = this.props;\n        return (event) => {\n            const offset = event.clientY - event.currentTarget.getBoundingClientRect().y;\n            const position = 100 * offset / event.currentTarget.clientHeight;\n            const offsetPosition = Math.max(0, 100 * (offset - TRANSCRIPTION_START_OFFSET) / event.currentTarget.clientHeight);\n            onSetTranscriptionPlayScrub({ position, offsetPosition });\n        };\n    }\n\n    handleHideTranscriptionPlayHeadLayerOnMouseLeave() {\n        const { onSetTranscriptionPlayScrub } = this.props;\n        return () => {\n            onSetTranscriptionPlayScrub({ position: 0, offsetPosition: 0 });\n        };\n    }\n\n    render() {\n        const {\n            status: { status },\n        } = this.props;\n        return (\n            <div\n                className={styles.transcriptionContainer}\n                onMouseLeave={this.handleHideTranscriptionPlayHeadLayerOnMouseLeave()}\n            >\n                <section className={styles.Transcription}>\n                    <div className={styles.sections}>\n                        <TranscriptionNotesContainer />\n                    </div>\n                    <div\n                        className={`${styles.conversation} ${styles.sections}`}\n                        onMouseMove={this.handleTranscriptionPlayHeadLayerMouseMove()}\n                    >\n                        <TranscriptionConversationContainer\n                            colors={{\n                                channelColors: {\n                                    1: '#FFC72C',\n                                    2: '#00A9CE',\n                                },\n                            }}\n                        />\n                        {this.playHeadLayer(status === STATUS_LOADING || status === STATUS_EMPTY)}\n                    </div>\n                    {this.confidenceGauge(status === STATUS_LOADING || status === STATUS_EMPTY)}\n                </section>\n            </div>\n        );\n    }\n}\n\nTranscription.propTypes = {\n    status: statusType.isRequired,\n    transcriptionPlayScrub: transcriptionPlayScrubType.isRequired,\n    onSetTranscriptionPlayScrub: PropTypes.func,\n    viewport: viewportType.isRequired,\n    onSetConfidence: PropTypes.func,\n    plotWholeTimeline: PropTypes.bool,\n    isVertical: PropTypes.bool,\n    isPlaying: PropTypes.bool.isRequired,\n    width: transcriptionWidthsType.isRequired,\n};\n\nTranscription.defaultProps = {\n    onSetTranscriptionPlayScrub: () => {},\n    onSetConfidence: () => {},\n    plotWholeTimeline: false,\n    isVertical: true,\n    width: '',\n};\n\nexport default Transcription;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport {\n    dataType,\n    viewportType,\n    transcriptionPlayScrubType,\n    searchType, statusType,\n} from '../shared/types';\nimport Transcription from '../components/Transcription/Transcription';\nimport {\n    moveTranscriptionPlayScrub,\n    updateTranscriptionConfidence,\n} from '../store/actions/actions';\n\nexport const TranscriptionContainer = props => (<Transcription {...props} />);\n\nTranscriptionContainer.propTypes = {\n    status: statusType.isRequired,\n    data: dataType.isRequired,\n    transcriptionPlayScrub: transcriptionPlayScrubType.isRequired,\n    onSetTranscriptionPlayScrub: PropTypes.func.isRequired,\n    viewport: viewportType.isRequired,\n    onSetConfidence: PropTypes.func.isRequired,\n    plotWholeTimeline: PropTypes.bool,\n    search: searchType.isRequired,\n    isPlaying: PropTypes.bool.isRequired,\n};\n\nTranscriptionContainer.defaultProps = {\n    plotWholeTimeline: false,\n};\n\nconst mapStateToProps = (state) => {\n    const {\n        status,\n        data,\n        search,\n    } = state;\n\n    const {\n        transcriptionPlayScrub,\n        viewport,\n    } = state.transcription;\n\n    const {\n        isPlaying,\n    } = state.playback;\n\n    return {\n        status,\n        data,\n        transcriptionPlayScrub,\n        viewport,\n        search,\n        isPlaying,\n    };\n};\n\nconst mapDispatchToProps = dispatch => ({\n    onSetTranscriptionPlayScrub: (transcriptionPlayScrub) => {\n        dispatch(moveTranscriptionPlayScrub(transcriptionPlayScrub));\n    },\n    onSetConfidence: (confidence) => {\n        dispatch(updateTranscriptionConfidence(confidence));\n    },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TranscriptionContainer);\n","export default __webpack_public_path__ + \"static/media/icon-customer-service.539a0d46.svg\";","export default __webpack_public_path__ + \"static/media/icon-urgent.0ad51d65.svg\";","export default __webpack_public_path__ + \"static/media/icon-multiple.34923021.svg\";","export default __webpack_public_path__ + \"static/media/icon-note-unknown.c44385e0.svg\";","export default __webpack_public_path__ + \"static/media/icon-search-black.1502e3ca.svg\";","export default __webpack_public_path__ + \"static/media/icon-on-hold.3d2f5cb3.svg\";","export default __webpack_public_path__ + \"static/media/icon-down.a5571264.svg\";","export default __webpack_public_path__ + \"static/media/icon-up.c93e1217.svg\";","export default __webpack_public_path__ + \"static/media/icon-conference.c9fecb4f.svg\";","export default __webpack_public_path__ + \"static/media/icon-pause.f93c9c02.svg\";","export default __webpack_public_path__ + \"static/media/icon-transfer.4180c05e.svg\";","export default __webpack_public_path__ + \"static/media/icon-user-event.1314a75e.svg\";","export const CLASH_WIN = 'CLASH_WIN';\nexport const AFFIRMATION = 'AFFIRMATION';\nexport const INTERRUPTION = 'INTERRUPTION';\nexport const STEAL = 'STEAL';\nexport const MULTIPLE_EVENTS = 'MULTIPLE_EVENTS';\nexport const NOTE_EVENT = 'NOTE_EVENT';\nexport const SEARCH_EVENT = 'SEARCH_EVENT';\nexport const CALL_EVENT = 'CALL_EVENT';\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { isEqual } from 'lodash/core';\nimport styles from './AudioEventLayer.module.scss';\nimport '../../styles/_tooltip.scss';\nimport iconCustomerService from '../../assets/svgs/icon-customer-service.svg';\nimport iconUrgent from '../../assets/svgs/icon-urgent.svg';\nimport iconMultiple from '../../assets/svgs/icon-multiple.svg';\nimport iconUnknownNote from '../../assets/svgs/icon-note-unknown.svg';\nimport iconSearch from '../../assets/svgs/icon-search-black.svg';\nimport iconDown from '../../assets/svgs/icon-down.svg';\nimport iconUp from '../../assets/svgs/icon-up.svg';\nimport iconOnHold from '../../assets/svgs/icon-on-hold.svg';\nimport iconConference from '../../assets/svgs/icon-conference.svg';\nimport iconPause from '../../assets/svgs/icon-pause.svg';\nimport iconTransfer from '../../assets/svgs/icon-transfer.svg';\nimport iconUserEvent from '../../assets/svgs/icon-user-event.svg';\n\nimport { calculatePositionPercentageWithOffset, layerStyleWithScrubBounds } from '../../shared/utility/timeline';\nimport {\n    dataType,\n    notesType,\n    participantsType,\n    scrubType,\n    searchType,\n    sentencesType,\n    timelineType,\n    eventsType,\n    transcriptionType,\n    knowledgeSelectedItemType,\n} from '../../shared/types';\nimport {\n    AFFIRMATION,\n    CLASH_WIN,\n    INTERRUPTION,\n    STEAL,\n    MULTIPLE_EVENTS,\n    NOTE_EVENT,\n    SEARCH_EVENT,\n    CALL_EVENT,\n} from '../../store/constants/audio-events';\nimport {\n    AFFIRMATIONS,\n    CLASH_WINS,\n    INTERRUPTIONS,\n    STEALS,\n    SHOW_NOTES,\n    SHOW_SEARCH_RESULTS,\n} from '../../store/constants/metrics-layers';\nimport {\n    KNOWLEDGE_TYPE_CLASSIFICATION,\n    KNOWLEDGE_TYPE_KEYWORD,\n    KNOWLEDGE_TYPE_TOPIC,\n} from '../../store/constants/knowledge';\n\nclass AudioEventLayer extends Component {\n    static labelForEventType(eventType) {\n        switch (eventType) {\n            case CLASH_WIN:\n                return 'Clash Event';\n            case AFFIRMATION:\n                return 'Affirmation Event';\n            case INTERRUPTION:\n                return 'Interruption Event';\n            case STEAL:\n                return 'Steal Event';\n            case SHOW_NOTES:\n                return 'Note';\n            default:\n                return null;\n        }\n    }\n\n    static isLayerMatchingEventType(layer, eventType) {\n        switch (eventType) {\n            case CLASH_WIN:\n                return layer === CLASH_WINS;\n            case AFFIRMATION:\n                return layer === AFFIRMATIONS;\n            case INTERRUPTION:\n                return layer === INTERRUPTIONS;\n            case STEAL:\n                return layer === STEALS;\n            case NOTE_EVENT:\n                return layer === SHOW_NOTES;\n            case SEARCH_EVENT:\n                return layer === SHOW_SEARCH_RESULTS;\n            default:\n                return null;\n        }\n    }\n\n    static isEventTypeInActiveLayers(eventType, activeLayers) {\n        if (eventType === CALL_EVENT\n            || eventType === KNOWLEDGE_TYPE_CLASSIFICATION\n            || eventType === KNOWLEDGE_TYPE_KEYWORD\n            || eventType === KNOWLEDGE_TYPE_TOPIC) {\n            return true;\n        }\n        if (activeLayers.length === 0) {\n            return false;\n        }\n        return activeLayers.filter(layer => AudioEventLayer.isLayerMatchingEventType(layer, eventType)).length > 0;\n    }\n\n    static callEventIconImage(flags) {\n        const {\n            isHold,\n            isParkedTransfer,\n            isConferenceIn,\n            isRecordStart,\n            isRecordStop,\n            isChannelAnswer,\n            isChannelRing,\n        } = flags;\n        switch (true) {\n            case isParkedTransfer:\n            case isHold:\n                return iconOnHold;\n            case isConferenceIn:\n                return iconConference;\n            case isRecordStop:\n                return iconPause;\n            case isChannelRing:\n                return iconUserEvent;\n            case isRecordStart:\n            case isChannelAnswer:\n                return null;\n            default:\n                return iconTransfer;\n        }\n    }\n\n    static callEventIconLabel(flags) {\n        const {\n            isBridge,\n            isChannelStart,\n            isChannelRing,\n            isChannelAnswer,\n            isChannelEnd,\n            isChannelComplete,\n            isConferenceIn,\n            isConferenceOut,\n            isHold,\n            isListenIn,\n            isListenInBarge,\n            isListenInDisconnect,\n            isListenInWhisper,\n            isParkedTransfer,\n            isQueuing,\n            isRecordStart,\n            isRecordStop,\n            isRouting,\n            isUnBridge,\n            isUnHold,\n        } = flags;\n        switch (true) {\n            case isChannelStart:\n                return 'Channel start';\n            case isChannelRing:\n                return 'Channel ring';\n            case isChannelAnswer:\n                return 'Channel answer';\n            case isChannelEnd:\n                return 'Channel end';\n            case isChannelComplete:\n                return 'Channel complete';\n\n            case isConferenceIn:\n                return 'Conference';\n            case isConferenceOut:\n                return 'Conference end';\n\n            case isHold:\n                return 'On Hold';\n            case isUnHold:\n                return 'Un-hold';\n\n            case isRecordStart:\n                return 'Un-pause';\n            case isRecordStop:\n                return 'Pause';\n\n            case isParkedTransfer:\n                return 'Start transfer';\n\n            case isBridge:\n                return 'Transfer';\n            case isListenIn:\n                return 'Listen in';\n            case isListenInBarge:\n                return 'Barge';\n            case isListenInDisconnect:\n                return 'Listen in end';\n            case isListenInWhisper:\n                return 'Whisper';\n            case isQueuing:\n                return 'Queueing';\n            case isRouting:\n                return 'Routing';\n            case isUnBridge:\n                return 'Disconnect';\n\n            default:\n                return Object.keys(flags).join(' ');\n        }\n    }\n\n    static getCallEventIcon(subtype) {\n        const { event, isStart } = subtype;\n        const flags = isStart ? event.startFlags : event.endFlags;\n        return AudioEventLayer.callEventIconImage(flags);\n    }\n\n    static filterInvisibleEvents(event) {\n        if (event && event.subType && event.subType.event) {\n            const { subType: { event: { startFlags } } } = event;\n            switch (true) {\n                case startFlags.isConferenceIn === true:\n                case startFlags.isRecordStart === true:\n                case startFlags.isParkedTransfer === true:\n                case startFlags.isRouting === true:\n                case startFlags.isHold === true:\n                case startFlags.isUnHold === true:\n                case startFlags.isRecordStop === true:\n                case startFlags.isChannelRing === true:\n                case startFlags.isChannelStart === true:\n                    return false;\n                default:\n                    break;\n            }\n        }\n        return true;\n    }\n\n    constructor(props) {\n        super(props);\n        this.preRenderedEventsKey = null;\n        this.preRenderedEvents = null;\n    }\n\n    getNoteIcon(subtype) {\n        const { notes } = this.props;\n        const event = notes.eventTypes.find(obj => obj.id === subtype);\n        return event ? event.icon : iconUnknownNote;\n    }\n\n    iconForEventType(eventType, subtype) {\n        switch (eventType) {\n            case KNOWLEDGE_TYPE_CLASSIFICATION:\n            case KNOWLEDGE_TYPE_KEYWORD:\n            case KNOWLEDGE_TYPE_TOPIC:\n                return iconUrgent;\n            case MULTIPLE_EVENTS:\n                return iconMultiple;\n            case NOTE_EVENT:\n                return this.getNoteIcon(subtype);\n            case SEARCH_EVENT:\n                return iconSearch;\n            case CALL_EVENT:\n                return AudioEventLayer.getCallEventIcon(subtype);\n            default:\n                return iconCustomerService;\n        }\n    }\n\n    generateOrUsePreRenderedEvents() {\n        const {\n            data: { talkTime },\n            activeLayers,\n            timeline,\n            notes,\n            callersAtTimestamp,\n            callerWithUuid,\n            search,\n            participants,\n            sentences,\n            transcription,\n            knowledgeSelectedItem,\n            eventsByParticipants,\n            scrub,\n            plotWholeTimeline,\n        } = this.props;\n\n        let eventsKey = {\n            talkTime,\n            activeLayers,\n            timeline,\n            notes,\n            callersAtTimestamp,\n            callerWithUuid,\n            search,\n            participants,\n            sentences,\n            transcription,\n            knowledgeSelectedItem,\n            eventsByParticipants,\n            plotWholeTimeline,\n        };\n\n        // adding scrub to the cacheKey when !plotWholeTimeline as scrubwidth is used in generateEventList()\n        if (!plotWholeTimeline) {\n            eventsKey = {\n                ...eventsKey,\n                scrub,\n            };\n        }\n\n        // TODO: use Reselect.createSelector to call generateEvents when parameters have changed..\n        if (this.preRenderedEvents == null || !isEqual(eventsKey, this.preRenderedEventsKey)) {\n            this.preRenderedEvents = this.generateEvents();\n            this.preRenderedEventsKey = eventsKey;\n        }\n\n        return this.preRenderedEvents;\n    }\n\n    generateEvents() {\n        const {\n            data,\n            activeLayers,\n        } = this.props;\n        const { talkTime } = data;\n        const events = [];\n        if (activeLayers.length > 0 && talkTime) {\n            events.push(...talkTime[1].map(event => ({ ...event, channel: 1 })));\n            events.push(...talkTime[2].map(event => ({ ...event, channel: 2 })));\n            events.push(...this.generateNoteEvents());\n            events.push(...this.generateSearchEvents());\n        }\n        events.push(...this.generateClassificationEvents());\n        events.push(...this.generateKeywordEvents());\n        events.push(...this.generateTopicEvents());\n        const callEvents = this.generateCallEvents();\n        events.push(...callEvents.filter(item => item.channel === 1));\n        const secondaryCallEvents = callEvents.filter(item => item.channel === 2);\n\n        const elements = [];\n        elements.push(...this.generateEventList(events, true));\n        elements.push(...this.generateEventList(secondaryCallEvents, false));\n\n        return elements;\n    }\n\n    /**\n     * Returns a function that consolidates a group of events into one event.\n     * @returns {function(eventItem, groupedEvents): {eventItem, groupSize: int, groupedEvents: *}}\n     */\n    consolidateEvents() {\n        const {\n            callersAtTimestamp,\n        } = this.props;\n        return (eventItem, groupedEvents) => {\n            const consolidatedItem = {\n                ...eventItem,\n                timestamp: groupedEvents.map(obj => obj.timestamp)\n                    .reduce((total, timestamp) => total + timestamp) / groupedEvents.length,\n                label: groupedEvents.map((obj) => {\n                    const channelNumber = obj.channel === 1 ? 0 : 1;\n                    if (callersAtTimestamp(obj.timestamp) !== undefined) {\n                        const caller = callersAtTimestamp(obj.timestamp)[channelNumber];\n                        const label = obj.label || AudioEventLayer.labelForEventType(obj.event);\n                        if (groupedEvents.length === 1) {\n                            return label;\n                        }\n                        return `${caller.title}: ${label}`;\n                    }\n                    return 'caller';\n                }).join('<br>'),\n                groupSize: groupedEvents.length || 0,\n                groupedEvents,\n            };\n            return consolidatedItem;\n        };\n    }\n\n    /**\n     * Returns a function that clusters a group of events into one event.\n     */\n    clusterEvents() {\n        const {\n            callersAtTimestamp,\n        } = this.props;\n        return (eventItem, groupedEvents) => {\n            const clusteredItem = {\n                event: groupedEvents.length > 1 ? MULTIPLE_EVENTS : eventItem.event,\n                timestamp: groupedEvents.map(obj => obj.timestamp)\n                    .reduce((total, timestamp) => total + timestamp) / groupedEvents.length,\n                label: groupedEvents.map((obj) => {\n                    if (obj.groupSize > 1) {\n                        return obj.label; // if this event has already been grouped, just use its label\n                    }\n                    const channelNumber = obj.channel === 1 ? 0 : 1;\n                    if (callersAtTimestamp(obj.timestamp) !== undefined) {\n                        const caller = callersAtTimestamp(obj.timestamp)[channelNumber];\n                        const label = obj.label || AudioEventLayer.labelForEventType(obj.event);\n                        return `${caller.title}: ${label}`;\n                    }\n                    return 'caller';\n                }).join('<br>'),\n                channel: eventItem.channel,\n                color: eventItem.color || '#ADB3B7',\n                subType: eventItem.subType,\n                groupSize: groupedEvents.length,\n                groupedEvents,\n            };\n            return clusteredItem;\n        };\n    }\n\n    /**\n     * Returns an array of events, grouping those that are within a timestamp threshold of each other (nb. the events\n     * should be sorted into timestamp order first).  How the events are grouped is determined by the groupingFunction\n     * which defaults to consolidating the events.\n     * @param events - the events to process\n     * @param timestampThreshold - a threshold for determining whether to group events\n     * @param groupingFunction - a function that groups an array of events into a single event\n     * @returns {[]} An array of events, some grouped\n     */\n    groupEvents(events, timestampThreshold, groupingFunction = this.consolidateEvents()) {\n        let tmpGroup = [];\n        const groupedEvents = [];\n        events\n            .forEach((eventItem, index, array) => {\n                tmpGroup.push(eventItem);\n                const onLastItem = index === (array.length - 1);\n                let nextItemBeyondThreshold = true;\n                if (index < array.length - 1) {\n                    const timeDifference = array[index + 1].timestamp - eventItem.timestamp;\n                    if (timeDifference <= timestampThreshold) {\n                        nextItemBeyondThreshold = false;\n                    }\n                }\n                if (onLastItem || nextItemBeyondThreshold) {\n                    const groupedItem = groupingFunction(eventItem, tmpGroup);\n                    groupedEvents.push(groupedItem);\n                    tmpGroup = [];\n                }\n            });\n        return groupedEvents;\n    }\n\n    generateEventList(events, isPrimary) {\n        const {\n            scrub,\n            activeLayers,\n            timeline,\n            plotWholeTimeline,\n            callersAtTimestamp,\n        } = this.props;\n        const elements = [];\n\n        const filteredEvents = events\n            .filter(item => AudioEventLayer.isEventTypeInActiveLayers(item.event, activeLayers))\n            .filter(AudioEventLayer.filterInvisibleEvents)\n            .sort((a, b) => a.timestamp - b.timestamp);\n\n        if (plotWholeTimeline) {\n            filteredEvents\n                .forEach((eventItem, index, array) => {\n                    const key = `${eventItem.channel}${eventItem.event}${eventItem.timestamp}`;\n                    if (eventItem.event === CALL_EVENT) return;\n                    let backgroundColor = '#ADB3B7';\n                    const callSummaryAtTime = callersAtTimestamp(eventItem.timestamp);\n                    if (eventItem.channel && callSummaryAtTime !== undefined) {\n                        const channelNumber = eventItem.channel === 1 ? 0 : 1;\n                        const caller = callSummaryAtTime[channelNumber];\n                        const { color } = caller;\n                        backgroundColor = color;\n                    }\n                    const style = {\n                        left: calculatePositionPercentageWithOffset(eventItem.timestamp, timeline),\n                        backgroundColor,\n                    };\n                    elements.push(<span key={key} style={style} className={styles.ClashLine} />);\n                });\n        } else {\n            // Consolidate events\n            const consolidationThreshold = 1;\n            const consolidatedEvents = this.groupEvents(filteredEvents, consolidationThreshold, this.consolidateEvents());\n\n            // Cluster events\n            const scrubAsTime = {\n                start: timeline.start + (timeline.range * scrub.start / 100),\n                end: timeline.start + (timeline.range * scrub.end / 100),\n            };\n            const scrubWidthAsTime = scrubAsTime.end - scrubAsTime.start;\n            const clusterThreshold = scrubWidthAsTime * 0.02;\n\n            const clusteredEvents = this.groupEvents(consolidatedEvents, clusterThreshold, this.clusterEvents());\n            clusteredEvents\n                .forEach((item) => {\n                    const key = `${item.channel}${item.event}${item.timestamp}`;\n                    const style = {\n                        left: calculatePositionPercentageWithOffset(item.timestamp, timeline),\n                        top: isPrimary ? '0px' : '55%',\n                    };\n                    const icon = this.iconForEventType(item.event, item.subType);\n                    if (icon === null) {\n                        return;\n                    }\n                    let channelClassName = '';\n                    const { color } = item;\n                    let backgroundColor = color;\n                    const callSummaryAtTime = callersAtTimestamp(item.timestamp);\n                    if (item.channel && callSummaryAtTime !== undefined) {\n                        const channelNumber = item.channel === 1 ? 0 : 1;\n                        const caller = callSummaryAtTime[channelNumber];\n                        channelClassName = caller.classes;\n                        backgroundColor = item.groupSize > 1 ? '#888888' : caller.color;\n                    }\n                    const lineStyle = {\n                        ...style,\n                        backgroundColor,\n                    };\n                    const iconClasses = classNames({\n                        'translate-50': true,\n                        [styles.ClashIcon]: true,\n                        [channelClassName]: true,\n                    });\n                    const lineClasses = styles.ClashLine;\n                    if (item.groupedEvents.some(clusterItem => clusterItem.event !== CALL_EVENT)) {\n                        elements.push(<span key={key} style={lineStyle} className={lineClasses} />);\n                    }\n                    if (item.event === CALL_EVENT) {\n                        elements.push(\n                            <img\n                                key={`${key}icon`}\n                                src={icon}\n                                style={style}\n                                className={iconClasses}\n                                data-tooltip={item.label}\n                                alt={item.label}\n                            />,\n                        );\n                    } else {\n                        const clusterSize = item.groupSize > 1 ? item.groupSize : '';\n                        elements.push(\n                            <svg\n                                key={`${key}icon`}\n                                style={style}\n                                className={iconClasses}\n                                data-tooltip={`${item.label}`}\n                            >\n                                <circle strokeWidth=\"4\" cx=\"12\" cy=\"12\" r=\"10\" stroke={color} />\n                                <circle fill=\"#F7F7F7\" cx=\"12\" cy=\"12\" r=\"10\" />\n                                <image x=\"5\" y=\"5\" width=\"14\" height=\"14\" xlinkHref={icon} />\n                                <text x=\"12\" y=\"16\" width=\"14\" height=\"14\" textAnchor=\"middle\">{clusterSize}</text>\n                            </svg>,\n                        );\n                    }\n                });\n        }\n        return elements;\n    }\n\n    generateNoteEvents() {\n        const {\n            timeline,\n            activeLayers,\n            notes,\n            callersAtTimestamp,\n            callerWithUuid,\n        } = this.props;\n        const positions = [];\n        if (!activeLayers.includes(SHOW_NOTES)) {\n            return positions;\n        }\n        const eventList = notes.eventTypes;\n\n        notes.notes.forEach((note) => {\n            const { eventType, timestamp, uuid } = note;\n            const event = eventList.find(obj => obj.id === eventType);\n            if (timestamp !== null) {\n                const time = timeline.start + timestamp;\n                const callers = callersAtTimestamp(time);\n                const index = callers.findIndex(caller => caller.relatedUuids[0] === uuid);\n                const channel = (index >= 0) ? index + 1 : null; // Channels are 1 and 2\n                const { color } = uuid && callerWithUuid(uuid) ? callerWithUuid(uuid) : { color: '#000' };\n                positions.push({\n                    event: NOTE_EVENT,\n                    timestamp: timeline.start + timestamp,\n                    label: event ? event.text : 'Unknown note type',\n                    color,\n                    channel,\n                    subType: eventType,\n                });\n            }\n        });\n        return positions;\n    }\n\n    generateSearchEvents() {\n        const {\n            search,\n            timeline,\n        } = this.props;\n        const positions = [];\n        search.matches.forEach((match) => {\n            const { caller, wordList } = match;\n            const channel = caller.isPrimary ? 1 : 2;\n            positions.push({\n                event: SEARCH_EVENT,\n                timestamp: timeline.start + wordList[0].s * 1000,\n                label: 'Search match',\n                channel,\n            });\n        });\n        return positions;\n    }\n\n    generateClassificationEvents() {\n        const {\n            timeline,\n            transcription,\n        } = this.props;\n        const callback = (name, positions) => {\n            const classification = transcription.Categories\n                .filter(category => category.Name.toUpperCase() === name.toUpperCase())[0];\n            if (typeof classification === 'undefined') {\n                return;\n            }\n\n            if (typeof classification.Keywords !== 'undefined') {\n                classification.Keywords.forEach((keyword) => {\n                    keyword.Mentions.forEach((mention) => {\n                        mention.Pos.forEach((pos) => {\n                            const timestamp = timeline.start + (pos * 1000);\n                            positions.push({\n                                event: KNOWLEDGE_TYPE_CLASSIFICATION,\n                                timestamp,\n                                label: classification.DisplayName,\n                                channel: mention.Channel,\n                            });\n                        });\n                    });\n                });\n            } else {\n                classification.Keywords = [];\n            }\n        };\n\n        return this.generateKnowledgeEvents(KNOWLEDGE_TYPE_CLASSIFICATION, callback);\n    }\n\n    generateKeywordEvents() {\n        const {\n            timeline,\n            transcription,\n        } = this.props;\n        const callback = (name, positions) => {\n            [1, 2].forEach((channel) => {\n                const keyword = transcription[channel].Keywords.filter(item => item.Keyword === name)[0];\n                if (typeof keyword === 'undefined') {\n                    return;\n                }\n\n                keyword.Pos.forEach((pos) => {\n                    const timestamp = timeline.start + (pos * 1000);\n                    positions.push({\n                        event: KNOWLEDGE_TYPE_KEYWORD,\n                        timestamp,\n                        label: name,\n                        channel,\n                    });\n                });\n            });\n        };\n        return this.generateKnowledgeEvents(KNOWLEDGE_TYPE_KEYWORD, callback);\n    }\n\n    generateTopicEvents() {\n        const {\n            timeline,\n            transcription,\n        } = this.props;\n        const callback = (name, positions) => {\n            [1, 2].forEach((channel) => {\n                const topic = transcription[channel].Topics.filter(item => item.Topic === name)[0];\n                if (typeof topic === 'undefined') {\n                    return;\n                }\n\n                topic.Keywords.forEach((keyword) => {\n                    keyword.Pos.forEach((pos) => {\n                        const timestamp = timeline.start + (pos * 1000);\n                        positions.push({\n                            event: KNOWLEDGE_TYPE_TOPIC,\n                            timestamp,\n                            label: name,\n                            channel,\n                        });\n                    });\n                });\n            });\n        };\n        return this.generateKnowledgeEvents(KNOWLEDGE_TYPE_TOPIC, callback);\n    }\n\n    generateKnowledgeEvents(eventType, callback) {\n        const { knowledgeSelectedItem } = this.props;\n        if (knowledgeSelectedItem.type !== eventType) {\n            return [];\n        }\n\n        const positions = [];\n        callback(knowledgeSelectedItem.identifier, positions);\n        return positions;\n    }\n\n    generateCallEvents() {\n        const {\n            participants,\n            eventsByParticipants,\n        } = this.props;\n        const callEvents = [];\n        if (eventsByParticipants == null) {\n            return callEvents;\n        }\n        Object.keys(participants).forEach((key) => {\n            const participant = participants[key];\n            eventsByParticipants[key].events.forEach((event) => {\n                const {\n                    isBridge,\n                    isUnBridge,\n                } = event.startFlags;\n                if (isBridge || isUnBridge) return;\n                callEvents.push({\n                    event: CALL_EVENT,\n                    timestamp: event.start,\n                    label: AudioEventLayer.callEventIconLabel(event.startFlags),\n                    color: participant.color,\n                    channel: participant.isPrimary ? 1 : 2,\n                    subType: { event, isStart: true },\n                });\n                callEvents.push({\n                    event: CALL_EVENT,\n                    timestamp: event.end,\n                    label: AudioEventLayer.callEventIconLabel(event.endFlags),\n                    color: participant.color,\n                    channel: participant.isPrimary ? 1 : 2,\n                    subType: { event, isStart: false },\n                });\n            });\n        });\n        return callEvents;\n    }\n\n    render() {\n        const {\n            plotWholeTimeline,\n            scrub,\n        } = this.props;\n        const layerClasses = classNames({\n            [styles.LayerContent]: true,\n        });\n        const events = this.generateOrUsePreRenderedEvents();\n        return (\n            <div\n                ref={(node) => {\n                    this.node = node;\n                }}\n                className={layerClasses}\n                style={layerStyleWithScrubBounds(plotWholeTimeline, scrub)}\n            >\n                {events}\n            </div>\n        );\n    }\n}\n\nAudioEventLayer.propTypes = {\n    activeLayers: PropTypes.arrayOf(PropTypes.string).isRequired,\n    data: dataType.isRequired,\n    scrub: scrubType.isRequired,\n    plotWholeTimeline: PropTypes.bool,\n    timeline: timelineType.isRequired,\n    notes: notesType.isRequired,\n    search: searchType.isRequired,\n    callersAtTimestamp: PropTypes.func.isRequired,\n    participants: participantsType.isRequired,\n    sentences: sentencesType,\n    callerWithUuid: PropTypes.func.isRequired,\n    eventsByParticipants: eventsType,\n    transcription: transcriptionType.isRequired,\n    knowledgeSelectedItem: knowledgeSelectedItemType.isRequired,\n};\n\nAudioEventLayer.defaultProps = {\n    eventsByParticipants: null,\n    plotWholeTimeline: false,\n    sentences: null,\n};\n\n\nexport default AudioEventLayer;\n","import { createSelector } from 'reselect';\nimport { getCalls } from './common-selectors';\nimport callAtTimestamp from './callAtTimestamp';\nimport callerWithUuid from './callerWithUuid';\n\nconst callersAtTimestamp = createSelector(\n    [getCalls, callerWithUuid, callAtTimestamp],\n    (calls, selectCallerWithUuid, callAtTimeStampFunc) => (timestamp) => {\n        const call = callAtTimeStampFunc(timestamp);\n        if (call !== undefined && call !== null) {\n            const aCaller = selectCallerWithUuid(call.aUuid);\n            const bCaller = selectCallerWithUuid(call.bUuid);\n            if (bCaller.isPrimary) {\n                return [bCaller, aCaller];\n            }\n            return [aCaller, bCaller];\n        }\n        return undefined;\n    },\n);\n\nexport default callersAtTimestamp;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport AudioEventLayer from '../components/AudioEventLayer/AudioEventLayer';\nimport callersAtTimestampFunc from '../store/selectors/callersAtTimestamp';\nimport callerWithUuidFunc from '../store/selectors/callerWithUuid';\nimport {\n    dataType,\n    scrubType,\n    timelineType,\n    callSummaryType,\n    notesType,\n    searchType,\n    participantsType,\n    sentencesType,\n    eventsType,\n    transcriptionType,\n    knowledgeSelectedItemType,\n} from '../shared/types';\nimport { getTimeline } from '../store/selectors';\nimport {\n    getEventsByParticipants, getParticipants,\n    getRawDataFromTranscriptionState,\n    getSentencesFromTranscriptionState,\n} from '../store/selectors/common-selectors';\n\nfunction AudioEventLayerContainer(props) {\n    const {\n        activeLayers,\n        data,\n        scrub,\n        plotWholeTimeline,\n        timeline,\n        callSummary,\n        notes,\n        search,\n        callersAtTimestamp,\n        callerWithUuid,\n        participants,\n        sentences,\n        eventsByParticipants,\n        transcription,\n        knowledgeSelectedItem,\n    } = props;\n    return (\n        <AudioEventLayer\n            activeLayers={activeLayers}\n            data={data}\n            scrub={scrub}\n            plotWholeTimeline={plotWholeTimeline}\n            timeline={timeline}\n            callSummary={callSummary}\n            notes={notes}\n            search={search}\n            callersAtTimestamp={callersAtTimestamp}\n            callerWithUuid={callerWithUuid}\n            participants={participants}\n            sentences={sentences}\n            eventsByParticipants={eventsByParticipants}\n            transcription={transcription}\n            knowledgeSelectedItem={knowledgeSelectedItem}\n        />\n    );\n}\n\nconst mapStateToProps = (state) => {\n    const {\n        activeLayers,\n        data,\n        scrub,\n        callSummary,\n        knowledge,\n        notes,\n        search,\n    } = state;\n    return {\n        activeLayers,\n        data,\n        scrub,\n        callSummary,\n        knowledgeSelectedItem: knowledge.selectedItem,\n        participants: getParticipants(state),\n        timeline: getTimeline(state),\n        notes,\n        search,\n        callersAtTimestamp: callersAtTimestampFunc(state),\n        callerWithUuid: callerWithUuidFunc(state),\n        sentences: getSentencesFromTranscriptionState(state),\n        eventsByParticipants: getEventsByParticipants(state),\n        transcription: getRawDataFromTranscriptionState(state),\n    };\n};\n\nAudioEventLayerContainer.propTypes = {\n    activeLayers: PropTypes.arrayOf(PropTypes.string).isRequired,\n    data: dataType.isRequired,\n    scrub: scrubType.isRequired,\n    plotWholeTimeline: PropTypes.bool,\n    timeline: timelineType.isRequired,\n    callSummary: callSummaryType.isRequired,\n    notes: notesType.isRequired,\n    search: searchType.isRequired,\n    callersAtTimestamp: PropTypes.func.isRequired,\n    callerWithUuid: PropTypes.func.isRequired,\n    participants: participantsType.isRequired,\n    sentences: sentencesType,\n    eventsByParticipants: eventsType,\n    transcription: transcriptionType.isRequired,\n    knowledgeSelectedItem: knowledgeSelectedItemType.isRequired,\n};\n\nAudioEventLayerContainer.defaultProps = {\n    plotWholeTimeline: false,\n    sentences: null,\n    eventsByParticipants: null,\n};\n\nexport default connect(mapStateToProps)(AudioEventLayerContainer);\n","export default __webpack_public_path__ + \"static/media/icon-pause-skip.208b7558.svg\";","export const AVATAR_SMALL = 'small';\nexport const AVATAR_MEDIUM = 'medium';\nexport const AVATAR_LARGE = 'large';\n","import React from 'react';\nimport PropType from 'prop-types';\nimport styles from './Avatar.module.scss';\nimport { AVATAR_SMALL, AVATAR_MEDIUM, AVATAR_LARGE } from '../../store/constants/avatar';\n\nconst Avatar = ({\n    isAvatar, url, color, size, svgStyle, imgStyle, className,\n}) => {\n    let sizes;\n    switch (size) {\n        case AVATAR_MEDIUM:\n            sizes = {\n                svg: 32, r: '15', icon: '24px', iconx: '4px', icony: '3px', img: '30px',\n            };\n            break;\n        case AVATAR_LARGE:\n            sizes = {\n                svg: 36, r: '15', icon: '24px', iconx: '6px', icony: '4px', img: '30px',\n            };\n            break;\n        default:\n            sizes = {\n                svg: 24, r: '10', icon: '16px', iconx: '4px', icony: '3px', img: '20px',\n            };\n    }\n    return (<>\n        { !isAvatar ? (\n            <svg\n                role=\"img\"\n                aria-label=\"no avatar\"\n                style={svgStyle}\n                className={[styles.svgIcon, className].join(' ')}\n                width={`${sizes.svg}px`}\n                height={`${sizes.svg}px`}\n                viewBox={`0 0 ${sizes.svg} ${sizes.svg}`}\n            >\n                <circle\n                    fill={color}\n                    cx={`${sizes.svg / 2}`}\n                    cy={`${sizes.svg / 2}`}\n                    r={`${sizes.r}`}\n                />\n                <image\n                    width={`${sizes.icon}`}\n                    height={`${sizes.icon}`}\n                    x={`${sizes.iconx}`}\n                    y={`${sizes.icony}`}\n                    href={url}\n                />\n            </svg>\n        ) : (\n            <img\n                style={imgStyle}\n                width={`${sizes.img}`}\n                height={`${sizes.img}`}\n                alt=\"Avatar\"\n                src={url}\n                className={[styles.avatar, className].join(' ')}\n            />\n        ) }\n    </>);\n};\n\nAvatar.propTypes = {\n    isAvatar: PropType.bool,\n    url: PropType.string,\n    color: PropType.string,\n    size: PropType.string,\n    svgStyle: PropType.shape(),\n    imgStyle: PropType.shape(),\n    className: PropType.string,\n};\nAvatar.defaultProps = {\n    isAvatar: false,\n    color: 'white',\n    url: '',\n    size: AVATAR_SMALL,\n    svgStyle: {},\n    imgStyle: {},\n    className: '',\n};\nexport default Avatar;\n","/* eslint-disable max-len */\n/* eslint-disable react/jsx-one-expression-per-line */\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { isEqual } from 'lodash/core';\nimport classNames from 'classnames';\nimport AudioEventLayerContainer from '../../containers/AudioEventLayerContainer';\nimport styles from './EventTimeline.module.scss';\nimport { layerStyleWithScrubBounds } from '../../shared/utility/timeline';\nimport {\n    audioTransportType,\n    callSummaryType, dropDownOptionsType,\n    eventsType,\n    participantsType,\n    scrubType,\n    sentencesType,\n    timelineType,\n} from '../../shared/types';\nimport { STATUS_EMPTY, STATUS_LOADING, STATUS_OK } from '../../store/constants/data';\nimport pauseSkipIcon from '../../assets/svgs/icon-pause-skip.svg';\nimport Avatar from '../Avatar/Avatar';\nimport { AVATAR_MEDIUM, AVATAR_LARGE } from '../../store/constants/avatar';\n\nclass EventTimeline extends Component {\n    static loadingOverlay(show, leftMargin = 0) {\n        const classes = `loading-overlay ${show ? '' : 'fade-out'}`;\n        return (\n            <svg\n                className={classes}\n                width=\"100%\"\n                height=\"100%\"\n                viewBox=\"0 0 400 100\"\n                preserveAspectRatio=\"none\"\n                style={{ marginLeft: -leftMargin }}\n            >\n                <defs>\n                    <linearGradient id=\"left-right-gradient\">\n                        <stop stopColor=\"#fff\" offset=\"0%\" />\n                        <stop stopColor=\"#fff\" stopOpacity=\"0\" offset=\"100%\" />\n                    </linearGradient>\n                    <linearGradient id=\"right-left-gradient\">\n                        <stop stopColor=\"#fff\" stopOpacity=\"0\" offset=\"0%\" />\n                        <stop stopColor=\"#fff\" offset=\"100%\" />\n                    </linearGradient>\n                </defs>\n                <rect x=\"0\" width=\"40\" y=\"24\" height=\"16\" opacity=\"0.075\" rx=\"2\" />\n                <rect x=\"40\" width=\"48\" y=\"60\" height=\"16\" opacity=\"0.075\" rx=\"2\" />\n                <rect x=\"88\" width=\"36\" y=\"24\" height=\"16\" opacity=\"0.075\" rx=\"2\" />\n                <rect x=\"120\" width=\"48\" y=\"60\" height=\"16\" opacity=\"0.075\" rx=\"2\" />\n                <rect x=\"168\" width=\"40\" y=\"24\" height=\"16\" opacity=\"0.075\" rx=\"2\" />\n                <rect x=\"208\" width=\"40\" y=\"60\" height=\"16\" opacity=\"0.075\" rx=\"2\" />\n                <rect x=\"240\" width=\"36\" y=\"24\" height=\"16\" opacity=\"0.075\" rx=\"2\" />\n                <rect x=\"280\" width=\"40\" y=\"60\" height=\"16\" opacity=\"0.075\" rx=\"2\" />\n                <rect x=\"320\" width=\"40\" y=\"24\" height=\"16\" opacity=\"0.075\" rx=\"2\" />\n                <rect x=\"360\" width=\"40\" y=\"60\" height=\"16\" opacity=\"0.075\" rx=\"2\" />\n                <rect x=\"0\" y=\"0\" height=\"100\" width=\"40\" fill=\"url(#left-right-gradient)\" />\n                <rect x=\"360\" y=\"0\" height=\"100\" width=\"40\" fill=\"url(#right-left-gradient)\" />\n            </svg>\n        );\n    }\n\n    static gradientLayer(scrub, leftMargin = 0) {\n        const gradientClasses = classNames({\n            [styles.gradientLayer]: true,\n            [styles.gradientStart]: scrub.start !== 0,\n            [styles.gradientEnd]: scrub.end !== 100,\n        });\n        const offsets = {\n            marginLeft: -leftMargin,\n            left: `${Math.min(scrub.start, 7) - 7}%`,\n            right: `${Math.min(100 - scrub.end, 7) - 7}%`,\n        };\n        return (\n            <div className={gradientClasses} style={offsets} />\n        );\n    }\n\n    static noAgentDataOverlay() {\n        const className = classNames({\n            [styles.overlayMargin]: true,\n            'loading-overlay': true,\n        });\n        return (\n            <svg\n                className={className}\n                width=\"100%\"\n                height=\"100%\"\n                viewBox=\"0 0 400 100\"\n                preserveAspectRatio=\"none\"\n            >\n                <defs>\n                    <linearGradient id=\"left-right-gradient\">\n                        <stop stopColor=\"#fff\" offset=\"0%\" />\n                        <stop stopColor=\"#fff\" stopOpacity=\"0\" offset=\"100%\" />\n                    </linearGradient>\n                    <linearGradient id=\"right-left-gradient\">\n                        <stop stopColor=\"#fff\" stopOpacity=\"0\" offset=\"0%\" />\n                        <stop stopColor=\"#fff\" offset=\"100%\" />\n                    </linearGradient>\n                </defs>\n                <rect x=\"0\" width=\"40\" y=\"24\" height=\"16\" opacity=\"0.075\" rx=\"2\" />\n                <rect x=\"40\" width=\"48\" y=\"60\" height=\"16\" opacity=\"0.075\" rx=\"2\" />\n                <rect x=\"88\" width=\"36\" y=\"24\" height=\"16\" opacity=\"0.075\" rx=\"2\" />\n                <rect x=\"120\" width=\"48\" y=\"60\" height=\"16\" opacity=\"0.075\" rx=\"2\" />\n                <rect x=\"168\" width=\"40\" y=\"24\" height=\"16\" opacity=\"0.075\" rx=\"2\" />\n                <rect x=\"208\" width=\"40\" y=\"60\" height=\"16\" opacity=\"0.075\" rx=\"2\" />\n                <rect x=\"240\" width=\"36\" y=\"24\" height=\"16\" opacity=\"0.075\" rx=\"2\" />\n                <rect x=\"280\" width=\"40\" y=\"60\" height=\"16\" opacity=\"0.075\" rx=\"2\" />\n                <rect x=\"320\" width=\"40\" y=\"24\" height=\"16\" opacity=\"0.075\" rx=\"2\" />\n                <rect x=\"360\" width=\"40\" y=\"60\" height=\"16\" opacity=\"0.075\" rx=\"2\" />\n                <rect x=\"0\" y=\"0\" height=\"100\" width=\"40\" fill=\"url(#left-right-gradient)\" />\n                <rect x=\"360\" y=\"0\" height=\"100\" width=\"40\" fill=\"url(#right-left-gradient)\" />\n            </svg>\n        );\n    }\n\n    static noAgentDataText(text) {\n        const classes = 'noAgentDataText';\n        return (\n            <div className={classes}>\n                {text}\n            </div>\n        );\n    }\n\n    static scrubLegend(channels) {\n        return [\n            (\n                <div className={styles['info-box']} key={0}>\n                    <div>\n                        {channels[0] || '--'}\n                    </div>\n                    <div>\n                        {channels[1] || '--'}\n                    </div>\n                </div>\n            ),\n        ];\n    }\n\n    static channelLabel(title, color, image, avatar) {\n        return (\n            <div className={styles.channelLabel}>\n                <Avatar\n                    isAvatar={!!avatar}\n                    url={avatar || image}\n                    color={color}\n                    size={AVATAR_MEDIUM}\n                />\n                <div>\n                    {title}\n                </div>\n            </div>\n        );\n    }\n\n    static conferencePattern(hexColor) {\n        const color = hexColor.replace('#', '%23');\n        return [\n            'url(\"data:image/svg+xml;utf8,'\n            + '<svg xmlns=\\'http://www.w3.org/2000/svg\\' width=\\'10\\' height=\\'32\\' viewBox=\\'0 0 10 32\\'>',\n            `<rect fill='${color}' x='0' y='0' width='10' height='8' />`,\n            `<circle fill='${color}' cx='5' cy='16' r='3.5' />`,\n            `<rect fill='${color}' x='0' y='24' width='10' height='8' />`,\n            '</svg>\")',\n        ].join('');\n    }\n\n    static eventsForSentence(sentence, events) {\n        if (!Array.isArray(events) || events.length === 0) {\n            return [];\n        }\n        return events.filter(event => sentence.timelineStart >= event.start && sentence.timelineStart < event.end);\n    }\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            isEntryExitLayerDismissed: false,\n        };\n        this.preRenderedSentencesKey = null;\n        this.preRenderedSentences = null;\n        this.hideEntryExitLayerHandler = this.hideEntryExitLayerHandler.bind(this);\n        this.handleClickReviewNotes = this.handleClickReviewNotes.bind(this);\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const { isPlaying } = this.props;\n        const { isEntryExitLayerDismissed } = this.state;\n        if (isPlaying && isEntryExitLayerDismissed) {\n            this.setState({\n                isEntryExitLayerDismissed: false,\n            });\n        }\n    }\n\n    callerStyle(caller, callers, plotWholeTimeline, singleColor, timeline) {\n        const height = plotWholeTimeline ? 8 : 16;\n        const padding = plotWholeTimeline ? 33 : 24;\n        const position = caller.isPrimary ? 'top' : 'bottom';\n        return (sentence) => {\n            const opposingCaller = callers[sentence.opposing.number];\n            const isSub = opposingCaller.isAgent && caller.agentNumber > 1;\n            const { timelineStart, timelineEnd } = sentence;\n            const sentenceWidth = timelineEnd - timelineStart;\n            const start = 100 / timeline.range * Math.max(0, timelineStart - timeline.start);\n            const end = 100 / timeline.range * Math.min(timeline.range, timelineStart + sentenceWidth - timeline.start);\n            const width = Math.max(0.5, end - start);\n            const markerPosition = position === 'top' ? styles.top : styles.bottom;\n            return {\n                style: {\n                    borderRadius: '4px',\n                    backgroundColor: singleColor || caller.color,\n                    left: `${start}%`,\n                    width: `${width}%`,\n                    height: `${height * (isSub && !plotWholeTimeline ? 0.5 : 1)}%`,\n                    [position]: `${padding * (isSub && !plotWholeTimeline ? 1.95 : 1)}%`,\n                },\n                markerPosition,\n            };\n        };\n    }\n\n    createSentences(plotWholeTimeline, participants, sentences, eventsByParticipants, singleColor, timeline) {\n        const markersShown = [];\n        return Object.keys(participants).map((key) => {\n            const caller = participants[key];\n            const style = this.callerStyle(caller, participants, plotWholeTimeline, singleColor, timeline);\n            return sentences[key].map(sentence => ({\n                key,\n                style,\n                caller,\n                sentence,\n            }));\n        }).flat()\n            .sort((a, b) => a.sentence.Start - b.sentence.Start)\n            .map((item) => {\n                const {\n                    key, style, caller, sentence,\n                } = item;\n                const events = EventTimeline.eventsForSentence(sentence, eventsByParticipants[key].events);\n                const callerStyleForSentence = style(sentence);\n                let marker = null;\n                const isConference = events.filter(event => event.startFlags.isConferenceIn).length;\n                const isShowConference = !plotWholeTimeline && isConference;\n                const conferenceClass = isShowConference ? styles.conference : null;\n                const sentenceStyle = isShowConference ? {\n                    ...callerStyleForSentence.style,\n                    backgroundColor: null,\n                    backgroundImage: EventTimeline.conferencePattern(caller.color),\n                } : callerStyleForSentence.style;\n                const callerName = caller.name ? `${caller.name} (${caller.fullNumber})` : caller.fullTitle;\n                const markerText = isConference ? 'Multiple people. Hover for details' : callerName;\n                const markerKey = `${isConference ? 'conference:' : ''}${caller.number}`;\n                if (!plotWholeTimeline && !markersShown.includes(markerKey)) {\n                    const [firstUuidForCaller] = caller.relatedUuids;\n                    markersShown.push(markerKey);\n                    const avatarStyle = caller.isPrimary ? styles.sentenceMarkerAvatarTop : styles.sentenceMarkerAvatarBottom;\n                    const setFocusStyle = caller.isPrimary ? styles.focusSwitcherTop : styles.focusSwitcherBottom;\n                    marker = (\n                        <>\n                            <span className={styles.sentenceMarker} data-marker-title={markerText}>\n                                <span className={setFocusStyle} data-set-focus={firstUuidForCaller} />\n                            </span>\n                            {!!caller.photoUrl && (\n                                <Avatar\n                                    isAvatar={!!caller.photoUrl}\n                                    url={caller.photoUrl || caller.image}\n                                    color={caller.color}\n                                    className={avatarStyle}\n                                    size={AVATAR_LARGE}\n                                />\n                            )}\n                        </>\n                    );\n                }\n                return (\n                    <div\n                        key={`${key}${sentence.timelineStart}`}\n                        className={`${[styles.sentence, style(sentence).markerPosition, conferenceClass].join(' ')}`}\n                        style={sentenceStyle}\n                        data-tooltip={`${sentence.number}: \"${sentence.Sentence}\"`}\n                        data-tooltip-fixed-width\n                    >\n                        {marker}\n                    </div>\n                );\n            });\n    }\n\n    sentenceLayer() {\n        const {\n            plotWholeTimeline, participants, sentences, eventsByParticipants, scrub, singleColor, timeline,\n        } = this.props;\n\n        const sentenceKey = {\n            plotWholeTimeline,\n            participants,\n            sentences,\n            eventsByParticipants,\n            singleColor,\n            timeline,\n        };\n\n        // TODO: use Reselect.createSelector to call createSentences when parameters have changed..\n        if (this.preRenderedSentences == null || !isEqual(sentenceKey, this.preRenderedSentencesKey)) {\n            this.preRenderedSentences = this.createSentences(plotWholeTimeline, participants, sentences, eventsByParticipants, singleColor, timeline);\n            this.preRenderedSentencesKey = sentenceKey;\n        }\n\n        return (\n            <div className={styles.LayerContent} style={layerStyleWithScrubBounds(plotWholeTimeline, scrub)}>\n                {this.preRenderedSentences}\n            </div>\n        );\n    }\n\n    avatarLayer(leftMargin = 0) {\n        const {\n            participants, sentences, audioTransport, timeline, scrub, plotWholeTimeline, playhead,\n        } = this.props;\n        // avatar start of the start of sentences then pinned to screen until end of end sentences\n        if (sentences !== null) {\n            return (\n                <div className={styles.LayerContent} style={layerStyleWithScrubBounds(plotWholeTimeline, scrub)}>\n                    {Object.keys(participants).map((key) => {\n                        if (sentences[key].length > 0) {\n                            const firstSentence = sentences[key][0];\n                            const lastSentence = sentences[key][sentences[key].length - 1];\n                            const offset = audioTransport.start() / 100 * timeline.range;\n                            const startTime = firstSentence.isInEarliestCall ? 0 : firstSentence.timelineStart - timeline.start;\n                            const startOfFirst = 100 / (timeline.range - offset) * startTime;\n                            const endTime = lastSentence.timelineStart\n                                + (lastSentence.timelineEnd - lastSentence.timelineStart) - timeline.start;\n                            const endOfLast = 100 / timeline.range * endTime;\n                            const leftPercentage = Math.min(Math.max(scrub.start, startOfFirst - 0.5), endOfLast);\n                            const position = participants[key].isPrimary ? 'top' : 'bottom';\n                            const opposingCaller = participants[firstSentence.opposing.number];\n                            const isSub = opposingCaller.isAgent && participants[key].agentNumber > 1;\n                            const padding = plotWholeTimeline ? 33 : 24;\n                            const mainParticipantsPaddingMultiplier = 0.96;\n                            let avatarOpacity = 1;\n                            if (leftPercentage > scrub.start) {\n                                const scrubLength = scrub.end - scrub.start;\n                                const fadeIn = scrubLength * 0.2;\n                                if (leftPercentage > (scrub.start + fadeIn)) {\n                                    avatarOpacity = 0;\n                                } else {\n                                    const leftPercentageDifference = leftPercentage - scrub.start;\n                                    avatarOpacity = (1 - Math.max(0, leftPercentageDifference));\n                                }\n                            }\n                            const iconStyle = {\n                                style: {\n                                    opacity: avatarOpacity,\n                                    left: `${leftPercentage}%`,\n                                    marginLeft: -leftMargin,\n                                    zIndex: (playhead > 0 && playhead < 100) ? 9 : 0,\n                                    [position]: `${padding * (isSub && !plotWholeTimeline\n                                        ? 1.75 : mainParticipantsPaddingMultiplier)}%`,\n                                    paddingLeft: '4px',\n                                },\n                            };\n                            return (\n                                <Avatar\n                                    isAvatar={!!participants[key].photoUrl}\n                                    key={`avatar-${key}`}\n                                    url={participants[key].photoUrl || participants[key].image}\n                                    color={participants[key].color}\n                                    size={AVATAR_LARGE}\n                                    svgStyle={iconStyle.style}\n                                    imgStyle={{ ...iconStyle.style, paddingLeft: '6px' }}\n                                />\n                            );\n                        }\n                        return null;\n                    }).flat()}\n                </div>\n            );\n        }\n        return null;\n    }\n\n\n    playheadLayer() {\n        const {\n            canSetPlayhead,\n            playhead,\n            plotWholeTimeline,\n            scrub,\n            timeline,\n            participants,\n            eventsByParticipants,\n        } = this.props;\n        const timeString = timeline.formattedTimeAtPlayhead(playhead);\n\n        let pausedProperties = {\n            isPaused: false,\n            timeAtPauseEnd: null,\n            playheadAtPauseEnd: null,\n        };\n\n        if (!plotWholeTimeline) {\n            let eventsForPrimaryParticipant = null;\n            if (eventsByParticipants) {\n                Object.keys(participants).forEach((key) => {\n                    const caller = participants[key];\n                    if (caller.isPrimary === true) {\n                        eventsForPrimaryParticipant = eventsByParticipants[key];\n                    }\n                });\n            }\n\n            if (eventsForPrimaryParticipant && eventsForPrimaryParticipant.events) {\n                pausedProperties = timeline.pausedPropertiesAtPlayhead(playhead, eventsForPrimaryParticipant);\n            }\n        }\n        return (\n            <div\n                role=\"button\"\n                tabIndex={0}\n                className={styles.LayerContent}\n                style={layerStyleWithScrubBounds(plotWholeTimeline, scrub)}\n                onMouseDown={this.handlePlayheadLayerMouseMove(canSetPlayhead)}\n            >\n                <div\n                    className={styles.playhead}\n                    style={{\n                        left: `${playhead}%`,\n                    }}\n                >\n                    <div className={styles.playheadTop} />\n                    {!plotWholeTimeline && (\n                        <div className={styles.playheadTime}>\n                            <div>{timeString}</div>\n                        </div>\n                    )\n                    }\n                    <div className={styles.playheadBottom}>\n                        {!plotWholeTimeline && pausedProperties.isPaused && (\n                            <div\n                                role=\"button\"\n                                onMouseDown={this.createSkipPauseHandler(pausedProperties)}\n                            >\n                                <img\n                                    className={styles.pauseSkipIcon}\n                                    src={pauseSkipIcon}\n                                    alt=\"Skip Pause\"\n                                />\n                            </div>\n                        )\n                        }\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    timestampsLayer() {\n        const {\n            plotWholeTimeline, scrub, timeline,\n        } = this.props;\n        const scrubRange = scrub.end - scrub.start;\n        const numberOfStampsDisplayed = scrubRange > 10 ? 6 : 3;\n\n        const timeGapDuration = (scrubRange / 100 * timeline.range) / numberOfStampsDisplayed;\n        const numberOfStamps = timeline.range / timeGapDuration;\n        const timeStamps = [];\n        for (let i = 0; i < numberOfStamps; i++) {\n            const timeString = timeline.formattedTimeAtPlayhead(i / numberOfStamps * 100);\n            const xPos = 100 / timeline.range * (timeGapDuration * i);\n            const style = {\n                left: `${xPos}%`,\n            };\n            const timeStamp = (\n                <div className={styles.timeStamp} style={style} key={i}>\n                    <div className={styles.timeStampLine} />\n                    <div className={styles.timeStampText}>\n                        <div>{timeString}</div>\n                    </div>\n                </div>\n            );\n            timeStamps.push(timeStamp);\n        }\n        return (\n            <div className={styles.LayerContent} style={layerStyleWithScrubBounds(plotWholeTimeline, scrub)}>\n                {timeStamps.flat()}\n            </div>\n        );\n    }\n\n\n    showEntryExitLayer() {\n        const {\n            showTransport,\n            playhead,\n            isPlaying,\n        } = this.props;\n        const {\n            isEntryExitLayerDismissed,\n        } = this.state;\n        return (!isPlaying && !isEntryExitLayerDismissed && showTransport && (playhead === 0 || playhead === 100));\n    }\n\n    hideEntryExitLayerHandler() {\n        this.setState({\n            isEntryExitLayerDismissed: true,\n        });\n    }\n\n    handleClickReviewNotes() {\n        const { onHideScrubAndTimeline } = this.props;\n        onHideScrubAndTimeline();\n    }\n\n    entryExitLayer(leftMargin = 0) {\n        const {\n            callSummary,\n            playhead,\n            onStartPlaying,\n            onRestartPlaying,\n            displayedExperienceOption,\n            unread,\n        } = this.props;\n        if (!this.showEntryExitLayer()) {\n            return null;\n        }\n        const isPlayheadAtStart = playhead === 0;\n        const buttonText = isPlayheadAtStart ? 'Begin ' : 'Restart ';\n        const buttonType = isPlayheadAtStart ? styles.start : styles.restart;\n        const action = isPlayheadAtStart ? onStartPlaying : onRestartPlaying;\n        const leftIndent = isPlayheadAtStart ? leftMargin : 0;\n        const { keyCallers } = callSummary;\n        const {\n            colors, fullNameNumbers, images, avatar,\n        } = keyCallers;\n        if (!Array.isArray(colors) || !colors.length) {\n            return (<section />);\n        }\n        return (\n            <section className=\"ignore-nodestack\">\n                <div\n                    className={styles.overlay}\n                    style={{ marginLeft: -leftMargin }}\n                    onClick={this.hideEntryExitLayerHandler}\n                >\n                    <svg\n                        width=\"100%\"\n                        height=\"100%\"\n                        viewBox=\"0 0 100 100\"\n                        preserveAspectRatio=\"none\"\n                        style={{ marginLeft: leftIndent }}\n                    >\n                        <line x1=\"0\" y1=\"32\" x2=\"100\" y2=\"32\" strokeWidth=\"1\" stroke={colors[0]} />\n                        <line x1=\"0\" y1=\"68\" x2=\"100\" y2=\"68\" strokeWidth=\"1\" stroke={colors[1]} />\n                    </svg>\n                </div>\n                <div className={styles['transport-container']} style={{ marginLeft: -leftMargin }}>\n                    <div className={styles.overlayContentFlex}>\n                        {EventTimeline.channelLabel(`${fullNameNumbers[0]}`, colors[0], images[0], avatar[0])}\n                        <div className={styles['info-displaying-text']}>\n                            {'Viewing:'}\n                            <br />\n                            {displayedExperienceOption.viewName}\n                        </div>\n                    </div>\n                    <div className={styles.overlayContentFlex}>\n                        {EventTimeline.channelLabel(`${fullNameNumbers[1]}`, colors[1], images[1], avatar[1])}\n                        <button\n                            className={`${styles['transport-button']} ${buttonType}`}\n                            type=\"button\"\n                            tabIndex={0}\n                            onClick={action}\n                        >\n                            {`${buttonText} Playback`}\n                        </button>\n                    </div>\n                    { unread.length > 0 && (\n                        <div className={styles.unreadNotes}>\n                            <div className={styles.notificationBell} />\n                            <div className={styles.notificationCount}>\n                                You have {unread.length} unread Note{unread.length !== 1 ? 's' : ''}\n                            </div>\n                            <button className={styles.reviewButton} onClick={this.handleClickReviewNotes}>\n                                REVIEW NOTES\n                            </button>\n                        </div>\n                    )}\n                    <button className={styles.closeButton} onClick={this.hideEntryExitLayerHandler} />\n                </div>\n            </section>\n        );\n    }\n\n    createSkipPauseHandler(pausedProperties) {\n        const { onSetPlayhead } = this.props;\n        return (event) => {\n            if (pausedProperties.playheadAtPauseEnd) {\n                event.stopPropagation();\n                onSetPlayhead(pausedProperties.playheadAtPauseEnd, true);\n            }\n        };\n    }\n\n    handlePlayheadLayerMouseMove(enabled) {\n        if (!enabled) {\n            return null;\n        }\n        const { onSetPlayhead } = this.props;\n        return (event) => {\n            const bounds = event.target.getBoundingClientRect();\n            const position = 100 / bounds.width * (event.pageX - bounds.x);\n            onSetPlayhead(position, true);\n        };\n    }\n\n    render() {\n        const {\n            status,\n            children,\n            hideSentenceLayer,\n            plotWholeTimeline,\n            scrub,\n            sentences,\n            eventTimelineVisible,\n            leftMargin,\n            emptyText,\n        } = this.props;\n        const isStatusOk = status === STATUS_OK;\n        const isLoading = status === STATUS_LOADING;\n\n        const sentenceLayer = hideSentenceLayer || sentences === null ? null : this.sentenceLayer();\n        const showGradient = !plotWholeTimeline && !this.showEntryExitLayer();\n        const container = classNames({\n            [styles.EventLayer]: true,\n        });\n        if (status === STATUS_EMPTY) {\n            return (\n                <div className=\"Timeline\">\n                    <div className={container}>\n                        {EventTimeline.noAgentDataOverlay()}\n                        {EventTimeline.noAgentDataText(emptyText)}\n                    </div>\n                </div>\n            );\n        }\n        if (!eventTimelineVisible && !plotWholeTimeline) {\n            return null;\n        }\n        const avatarLayer = isLoading ? null : this.avatarLayer(leftMargin);\n        if (!plotWholeTimeline && eventTimelineVisible) {\n            return (\n                <section className=\"Timeline\">\n                    <div className={container} style={{ marginLeft: leftMargin }}>\n                        {this.timestampsLayer()}\n                        {isStatusOk && sentenceLayer}\n                        {showGradient && EventTimeline.gradientLayer(scrub, leftMargin)}\n                        {children}\n                        {avatarLayer}\n                        <AudioEventLayerContainer plotWholeTimeline={plotWholeTimeline} />\n                        {this.playheadLayer()}\n                        {this.entryExitLayer(leftMargin)}\n                        {EventTimeline.loadingOverlay(isLoading, leftMargin)}\n                    </div>\n                </section>\n            );\n        }\n        return (\n            <div className={container}>\n                {isStatusOk && sentenceLayer}\n                {children}\n                <AudioEventLayerContainer plotWholeTimeline={plotWholeTimeline} />\n                {this.playheadLayer()}\n                {this.entryExitLayer(leftMargin)}\n                {EventTimeline.loadingOverlay(isLoading, leftMargin)}\n            </div>\n        );\n    }\n}\n\nEventTimeline.propTypes = {\n    playhead: PropTypes.number.isRequired,\n    canSetPlayhead: PropTypes.bool,\n    onSetPlayhead: PropTypes.func,\n    onStartPlaying: PropTypes.func,\n    onRestartPlaying: PropTypes.func,\n    plotWholeTimeline: PropTypes.bool,\n    showTransport: PropTypes.bool,\n    scrub: scrubType.isRequired,\n    callSummary: callSummaryType.isRequired,\n    singleColor: PropTypes.string,\n    audioTransport: audioTransportType.isRequired,\n    children: PropTypes.oneOfType([\n        PropTypes.arrayOf(PropTypes.node),\n        PropTypes.node,\n    ]),\n    hideSentenceLayer: PropTypes.bool,\n    timeline: timelineType.isRequired,\n    participants: participantsType.isRequired,\n    sentences: sentencesType,\n    eventsByParticipants: eventsType,\n    status: PropTypes.string,\n    eventTimelineVisible: PropTypes.bool.isRequired,\n    displayedExperienceOption: dropDownOptionsType,\n    leftMargin: PropTypes.number,\n    isPlaying: PropTypes.bool,\n    unread: PropTypes.arrayOf(PropTypes.string),\n    onHideScrubAndTimeline: PropTypes.func.isRequired,\n};\n\nEventTimeline.defaultProps = {\n    canSetPlayhead: false,\n    onSetPlayhead: () => {\n    },\n    onStartPlaying: () => {\n    },\n    onRestartPlaying: () => {\n    },\n    plotWholeTimeline: false,\n    showTransport: false,\n    singleColor: null,\n    children: null,\n    hideSentenceLayer: false,\n    sentences: null,\n    eventsByParticipants: null,\n    status: undefined,\n    displayedExperienceOption: null,\n    leftMargin: 0,\n    isPlaying: false,\n    unread: [],\n};\n\nexport default EventTimeline;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { movePlayHead, play, playFromStart } from '../store/actions/actions';\nimport EventTimeline from '../components/EventTimeline/EventTimeline';\nimport {\n    scrubType,\n    audioTransportType,\n    callSummaryType,\n    timelineType,\n    participantsType,\n    sentencesType,\n    eventsType, dropDownOptionsType,\n} from '../shared/types';\nimport { getTimeline } from '../store/selectors';\nimport {\n    getEventsByParticipants, getEventTimelineVisibility,\n    getSentencesFromTranscriptionState,\n    getStatus,\n    getLoadProgress, getParticipants,\n} from '../store/selectors/common-selectors';\nimport getAudioTransport from '../store/selectors/audioTransport';\nimport selectedExperienceOption from '../store/selectors/selectedExperienceOption';\nimport getEmptyDataText from '../store/selectors/emptyDataText';\nimport {\n    getUnreadNoteAndCommentIdsForCurrentUser, NotesFilter,\n} from '../store/selectors/noteSelectors';\nimport { setScrubberVisibility } from '../store/actions/scrubber';\nimport { setEventTimelineVisibility } from '../store/actions/eventTimeline';\nimport { setNotesFilter } from '../store/actions/notes';\n\nconst EventTimelineContainer = props => (<EventTimeline {...props} />);\n\nEventTimelineContainer.propTypes = {\n    playhead: PropTypes.number.isRequired,\n    canSetPlayhead: PropTypes.bool,\n    onSetPlayhead: PropTypes.func.isRequired,\n    onStartPlaying: PropTypes.func.isRequired,\n    onRestartPlaying: PropTypes.func.isRequired,\n    plotWholeTimeline: PropTypes.bool,\n    showTransport: PropTypes.bool,\n    scrub: scrubType.isRequired,\n    callSummary: callSummaryType.isRequired,\n    singleColor: PropTypes.string,\n    colors: PropTypes.arrayOf(PropTypes.string),\n    status: PropTypes.string.isRequired,\n    children: PropTypes.oneOfType([\n        PropTypes.arrayOf(PropTypes.node),\n        PropTypes.node,\n    ]),\n    hideSentenceLayer: PropTypes.bool,\n    timeline: timelineType.isRequired,\n    participants: participantsType.isRequired,\n    sentences: sentencesType,\n    eventsByParticipants: eventsType,\n    audioTransport: audioTransportType.isRequired,\n    eventTimelineVisible: PropTypes.bool.isRequired,\n    displayedExperienceOption: dropDownOptionsType,\n    leftMargin: PropTypes.number,\n    emptyText: PropTypes.string,\n    isPlaying: PropTypes.bool,\n    unread: PropTypes.arrayOf(PropTypes.string).isRequired,\n    onHideScrubAndTimeline: PropTypes.func.isRequired,\n};\n\nEventTimelineContainer.defaultProps = {\n    canSetPlayhead: true,\n    plotWholeTimeline: false,\n    showTransport: false,\n    singleColor: null,\n    colors: [],\n    children: null,\n    hideSentenceLayer: false,\n    sentences: null,\n    eventsByParticipants: null,\n    displayedExperienceOption: null,\n    leftMargin: 0,\n    emptyText: null,\n    isPlaying: false,\n};\n\nconst mapStateToProps = (state) => {\n    const {\n        scrub,\n        callSummary,\n    } = state;\n\n    const {\n        playhead,\n        isPlaying,\n    } = state.playback;\n    return {\n        audioTransport: getAudioTransport(state),\n        playhead,\n        isPlaying,\n        scrub,\n        callSummary,\n        timeline: getTimeline(state),\n        participants: getParticipants(state),\n        status: getStatus(state),\n        sentences: getSentencesFromTranscriptionState(state),\n        eventsByParticipants: getEventsByParticipants(state),\n        eventTimelineVisible: getEventTimelineVisibility(state),\n        displayedExperienceOption: selectedExperienceOption(state),\n        emptyText: getEmptyDataText(state),\n        unread: getUnreadNoteAndCommentIdsForCurrentUser(state),\n    };\n};\n\nconst mapDispatchToProps = dispatch => ({\n    onSetPlayhead: (position, isUserAction) => {\n        dispatch(movePlayHead(position, isUserAction));\n    },\n    onStartPlaying: () => {\n        dispatch(play());\n    },\n    onRestartPlaying: () => {\n        dispatch(playFromStart());\n    },\n    onHideScrubAndTimeline: () => {\n        dispatch(setScrubberVisibility(false));\n        dispatch(setEventTimelineVisibility(false));\n        dispatch(setNotesFilter(NotesFilter.onlyUnread));\n    },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EventTimelineContainer);\n","import { BACKGROUND_NOISE_LEVEL, TRANSCRIPTION_CONFIDENCE } from '../../store/constants/metrics-layers';\n\nexport default class Metrics {\n    static nameForKey(key) {\n        switch (key) {\n            case BACKGROUND_NOISE_LEVEL:\n                return 'Noise';\n            case TRANSCRIPTION_CONFIDENCE:\n                return 'Confidence';\n            default:\n                return '';\n        }\n    }\n\n    constructor() {\n        this.transcription = {};\n    }\n\n    useData(transcriptionData, errorCallback = () => {}) {\n        if (!transcriptionData) {\n            errorCallback('Invalid data');\n            return this;\n        }\n        this.transcription = transcriptionData;\n        return this;\n    }\n\n    forKey(key) {\n        return {\n            key,\n            name: Metrics.nameForKey(key),\n            paths: this.pathsForData(key),\n        };\n    }\n\n    pathsForData(key) {\n        const lines = this.linesForKey(key);\n        const paths = {};\n        Object.keys(lines).forEach((line) => {\n            const {\n                style,\n                data,\n                isStepped,\n                isFloating,\n                isCurved,\n                isInverted,\n            } = lines[line];\n            if (data.length === 0) {\n                return;\n            }\n            const start = isFloating ? '' : `M${data[0].x - 1} ${isInverted ? 0 : 100}`;\n            const end = isFloating ? '' : `L${data[data.length - 1].x + 1} ${isInverted ? 0 : 100}`;\n            paths[line] = {\n                style,\n                path: [\n                    [start],\n                    data.map((plot, index, array) => {\n                        const path = [];\n                        const pen = isFloating && index === 0 ? 'M' : 'L';\n                        if (isStepped && index > 0) {\n                            const lastPlot = array[index - 1];\n                            path.push(`L${plot.x} ${isInverted ? lastPlot.y : 100 - lastPlot.y}`);\n                        }\n                        if (isCurved && index > 0) {\n                            const lastPlot = array[index - 1];\n                            const controlWidth = (plot.x - lastPlot.x) / 2;\n                            const bezier = {\n                                first: {\n                                    x: lastPlot.x + controlWidth,\n                                    y: isInverted ? lastPlot.y : 100 - lastPlot.y,\n                                },\n                                second: {\n                                    x: plot.x - controlWidth,\n                                    y: isInverted ? plot.y : 100 - plot.y,\n                                },\n                            };\n                            const plotPoints = [\n                                [bezier.first.x, bezier.first.y].join(' '),\n                                [bezier.second.x, bezier.second.y].join(' '),\n                                [plot.x, bezier.second.y],\n                            ];\n                            path.push(`C${plotPoints.join(', ')}`);\n                        } else {\n                            path.push(`${pen}${plot.x} ${isInverted ? plot.y : 100 - plot.y}`);\n                        }\n                        return path.join(' ');\n                    }),\n                    [end],\n                ].flat().filter(item => item).join(' '),\n            };\n        });\n        return paths;\n    }\n\n    confidenceDataForChannel(channelNumber, position) {\n        if (!this.transcription || !this.transcription[channelNumber]) {\n            return [];\n        }\n        return this.transcription[channelNumber].Words.map(word => [{\n            x: word.s,\n            y: position.top + word.c * position.height,\n        }, {\n            x: word.e,\n            y: position.top + word.c * position.height,\n        }]).flat();\n    }\n\n    noiseDataForChannel(channelNumber) {\n        if (!this.transcription || !this.transcription[channelNumber]) {\n            return [];\n        }\n        return [\n            { x: 0, y: 10 },\n            { x: 400, y: 5 },\n            { x: 2500, y: 20 },\n            { x: 5000, y: 7 },\n            { x: 60000, y: 17 },\n            { x: 900000, y: 20 },\n        ];\n    }\n\n    linesForKey(key) {\n        switch (key) {\n            case TRANSCRIPTION_CONFIDENCE:\n                return {\n                    1: {\n                        style: 'confidence',\n                        data: this.confidenceDataForChannel(1, { top: 55, height: 25 }),\n                        isStepped: true,\n                        isFloating: true,\n                    },\n                    2: {\n                        style: 'confidence',\n                        data: this.confidenceDataForChannel(2, { top: 20, height: 25 }),\n                        isStepped: true,\n                        isFloating: true,\n                    },\n                };\n            case BACKGROUND_NOISE_LEVEL:\n                return {\n                    1: {\n                        style: 'noise-primary',\n                        data: this.noiseDataForChannel(1),\n                        isCurved: true,\n                        isInverted: true,\n                    },\n                    2: {\n                        style: 'noise-secondary',\n                        data: this.noiseDataForChannel(2),\n                        isCurved: true,\n                    },\n                };\n            default:\n                return {};\n        }\n    }\n}\n","import React, { Component } from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { BACKGROUND_NOISE_LEVEL } from '../../store/constants/metrics-layers';\nimport styles from './MetricsTimelineLayer.module.scss';\nimport { layerStyleWithScrubBounds, viewBoxForRange } from '../../shared/utility/timeline';\nimport { scrubType, timelineType, transcriptionDataType } from '../../shared/types';\nimport Metrics from './Metrics';\n\nclass MetricsTimelineLayer extends Component {\n    static scrubLegend(metric) {\n        return [\n            (\n                <div className={styles['key-info-box']} key={0}>\n                    <div className={styles[metric]}>\n                        {Metrics.nameForKey(metric)}\n                    </div>\n                </div>\n            ),\n        ];\n    }\n\n    pathForMetric() {\n        const { metricType, plotWholeTimeline, transcriptionData } = this.props;\n        const metrics = new Metrics().useData(transcriptionData);\n        const metric = metrics.forKey(metricType);\n        const { name, paths } = metric;\n        if (!paths || !Object.keys(paths).length) {\n            return null;\n        }\n        return (\n            <g key={name}>\n                {Object.keys(paths).map((uuid) => {\n                    const path = paths[uuid];\n                    const style = metricType === BACKGROUND_NOISE_LEVEL && plotWholeTimeline ? 'noise' : path.style;\n                    return (\n                        <path\n                            key={uuid}\n                            className={`${styles.plotline} ${styles[style]}`}\n                            d={path.path}\n                        />\n                    );\n                })}\n            </g>\n        );\n    }\n\n    render() {\n        const {\n            scrub,\n            plotWholeTimeline,\n            timeline,\n        } = this.props;\n        const style = {\n            ...layerStyleWithScrubBounds(plotWholeTimeline, scrub),\n            marginLeft: `${timeline.transcriptionOffsetPercentage()}%`,\n        };\n        return (\n            <div className={styles.LayerContent} style={style}>\n                <svg width=\"100%\" height=\"100%\" viewBox={viewBoxForRange(timeline)} preserveAspectRatio=\"none\">\n                    {this.pathForMetric()}\n                </svg>\n            </div>\n        );\n    }\n}\n\nMetricsTimelineLayer.propTypes = {\n    plotWholeTimeline: PropTypes.bool,\n    scrub: scrubType.isRequired,\n    timeline: timelineType.isRequired,\n    metricType: PropTypes.string.isRequired,\n    transcriptionData: transcriptionDataType.isRequired,\n};\n\nMetricsTimelineLayer.defaultProps = {\n    plotWholeTimeline: false,\n};\n\nexport default MetricsTimelineLayer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { scrubType, timelineType, transcriptionDataType } from '../shared/types';\nimport MetricsTimelineLayer from '../components/MetricsTimelineLayer/MetricsTimelineLayer';\nimport { getTimeline } from '../store/selectors';\nimport { getRawDataFromTranscriptionState } from '../store/selectors/common-selectors';\n\nfunction MetricsTimelineLayerContainer(props) {\n    const {\n        metricType,\n        scrub,\n        plotWholeTimeline,\n        timeline,\n        transcriptionData,\n    } = props;\n    return (\n        <MetricsTimelineLayer\n            timeline={timeline}\n            metricType={metricType}\n            scrub={scrub}\n            plotWholeTimeline={plotWholeTimeline}\n            transcriptionData={transcriptionData}\n        />\n    );\n}\n\nMetricsTimelineLayerContainer.propTypes = {\n    plotWholeTimeline: PropTypes.bool,\n    scrub: scrubType.isRequired,\n    timeline: timelineType.isRequired,\n    metricType: PropTypes.string.isRequired,\n    transcriptionData: transcriptionDataType.isRequired,\n};\n\nMetricsTimelineLayerContainer.defaultProps = {\n    plotWholeTimeline: false,\n};\n\nconst mapStateToProps = (state) => {\n    const { scrub } = state;\n    return {\n        scrub,\n        timeline: getTimeline(state),\n        transcriptionData: getRawDataFromTranscriptionState(state),\n    };\n};\n\nexport default connect(mapStateToProps)(MetricsTimelineLayerContainer);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport './Scrubber.scss';\nimport { scrubType } from '../../shared/types';\nimport { STATUS_EMPTY, STATUS_LOADING } from '../../store/constants/data';\n\nclass Scrubber extends Component {\n    noAgentDataState(id) {\n        const { emptyText } = this.props;\n        return (\n            <section className=\"Scrubber\" id={id}>\n                <div className=\"timeline-scrubber-container empty\">\n                    {emptyText}\n                </div>\n            </section>\n        );\n    }\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            isDragging: {\n                start: false,\n                end: false,\n            },\n            isMoving: false,\n            didDrag: false,\n        };\n        this.handleMouseDown = this.handleMouseDown.bind(this);\n        this.handleClick = this.handleClick.bind(this);\n        this.handleScroll = this.handleScroll.bind(this);\n    }\n\n    componentDidMount() {\n        this.node = null;\n        window.addEventListener('mouseup', this.handleClick.bind(this));\n        window.addEventListener('mousemove', this.handleMouseMove.bind(this));\n    }\n\n    componentWillUnmount() {\n        this.node = null;\n        window.removeEventListener('mouseup', this.handleClick.bind(this));\n        window.removeEventListener('mousemove', this.handleMouseMove.bind(this));\n    }\n\n    setDragState(dragStart, dragEnd, moveScrub, didDrag) {\n        this.setState({\n            isDragging: {\n                start: dragStart,\n                end: dragEnd,\n            },\n            isMoving: moveScrub,\n            didDrag,\n        });\n    }\n\n    setScrub(percentage, clicked = false) {\n        const { isMoving, isDragging } = this.state;\n        const { scrub, onScrubDragged } = this.props;\n        if (isMoving) {\n            const width = scrub.end - scrub.start;\n            const start = clicked ? Math.max(percentage - width / 2, 0) : Math.max(percentage - this.pointerOffset, 0);\n            const end = clicked ? Math.min(percentage + width / 2, 100) : Math.min(percentage - this.pointerOffset + width, 100);\n            this.updateScrubState({\n                start: Math.min(start, 100 - width),\n                end: Math.max(end, width),\n            });\n            if (!clicked) {\n                if (typeof onScrubDragged === 'function') {\n                    onScrubDragged();\n                }\n            }\n        } else {\n            const start = isDragging.start ? Math.min(scrub.end - 0.1, percentage) : scrub.start;\n            const end = isDragging.end ? Math.max(scrub.start + 0.1, percentage) : scrub.end;\n            this.updateScrubState({\n                start: Math.max(0, start),\n                end: Math.min(100, end),\n            });\n        }\n    }\n\n    updateScrubState(scrub) {\n        const { onScrubPositionChange } = this.props;\n        if (typeof onScrubPositionChange === 'function') {\n            onScrubPositionChange({ ...scrub, isUserModified: this.isUserModifyingScrub() });\n        } else {\n            this.scrub = scrub;\n        }\n    }\n\n    updatePlayhead(event) {\n        const { onSetPlayhead } = this.props;\n        if (typeof onSetPlayhead === 'function') {\n            const bounds = this.node.getBoundingClientRect();\n            const position = 100 / bounds.width * (event.pageX - bounds.x);\n            this.setScrub(position, true);\n            onSetPlayhead(position, true);\n        }\n    }\n\n    scrubPercentage(event) {\n        if (!(this.node instanceof HTMLElement)) {\n            return 0;\n        }\n        const bounds = this.node.getBoundingClientRect();\n        const minX = bounds.x;\n        const clickX = event.pageX - minX;\n        return (100 / bounds.width) * clickX;\n    }\n\n    handleMouseDown(event) {\n        this.node = event.target;\n        const clickPercent = this.scrubPercentage(event);\n        const { scrub, onSetPlayhead } = this.props;\n        if (clickPercent < 2) {\n            onSetPlayhead(0.7, true);\n        }\n        const distanceFromStart = Math.min(clickPercent - scrub.start, 2);\n        const distanceFromEnd = Math.min(scrub.end - clickPercent, 2);\n        switch (true) {\n            case distanceFromStart < 2 && distanceFromStart > -3:\n                this.setDragState(true, false, false, true);\n                break;\n\n            case distanceFromEnd < 2 && distanceFromEnd > -3:\n                this.setDragState(false, true, false, true);\n                break;\n\n            default:\n                this.pointerOffset = clickPercent - scrub.start;\n                this.setDragState(false, false, true, false);\n                break;\n        }\n    }\n\n    handleMouseMove(event) {\n        if (!(this.node instanceof HTMLElement)) {\n            return;\n        }\n        if (event.buttons !== 0) {\n            this.setScrub(this.scrubPercentage(event));\n        }\n    }\n\n    handleClick(event) {\n        const { didDrag } = this.state;\n        if (!(this.node instanceof HTMLElement) || didDrag) {\n            this.node = null;\n            return;\n        }\n        this.hold = clearTimeout(this.hold);\n        this.updatePlayhead(event);\n        this.node = null;\n    }\n\n    handleScroll(event) {\n        const { scrub } = this.props;\n        this.handleClick(event);\n        const zoomFactor = 0.5;\n        let zoom;\n        if (event.deltaY < 0) {\n            zoom = -zoomFactor;\n        } else if (event.deltaY > 0) {\n            zoom = zoomFactor;\n        }\n        const newScrub = {\n            start: Math.max(0, scrub.start - zoom),\n            end: Math.min(100, scrub.end + zoom),\n        };\n        if (newScrub.start > newScrub.end) {\n            return;\n        }\n        this.updateScrubState(newScrub);\n    }\n\n    isUserModifyingScrub() {\n        const { isDragging, isMoving } = this.state;\n        return isDragging.left || isDragging.right || isMoving;\n    }\n\n    /* TODO: Add keyboard listeners */\n    render() {\n        /* eslint-disable jsx-a11y/click-events-have-key-events */\n        const {\n            id,\n            status,\n            scrub,\n            children,\n            isVisible,\n        } = this.props;\n        if (status === STATUS_LOADING) {\n            return null;\n        }\n        if (status === STATUS_EMPTY) {\n            return this.noAgentDataState(id);\n        }\n        if (!isVisible) {\n            return null;\n        }\n\n        const marginLeft = `${scrub.start}%`;\n        const marginRight = `${100 - scrub.end}%`;\n        return (\n            <section className=\"Scrubber\" id={id}>\n                <div\n                    role=\"button\"\n                    tabIndex={0}\n                    className=\"timeline-scrubber-container\"\n                    onMouseDown={this.handleMouseDown}\n                >\n                    <div\n                        role=\"button\"\n                        tabIndex={0}\n                        className=\"timeline-scrubber\"\n                    >\n                        <div className=\"scrub-window\" style={{ marginLeft, marginRight }} />\n                        <div className=\"scrub-content\">\n                            {children}\n                        </div>\n                        <div className=\"scrub-control\" style={{ marginLeft, marginRight }}>\n                            <div className=\"scrub-handle left\">\n                                <svg width=\"2px\" height=\"16px\" viewBox=\"0 0 2 16\">\n                                    <rect\n                                        x=\"0\"\n                                        y=\"0\"\n                                        rx=\"1\"\n                                        ry=\"1\"\n                                        width=\"2\"\n                                        height=\"16\"\n                                        style={{ fill: 'white', stroke: 'none' }}\n                                    />\n                                </svg>\n                            </div>\n                            <div className=\"scrub-handle right\">\n                                <svg width=\"2px\" height=\"16px\" viewBox=\"0 0 2 16\">\n                                    <rect\n                                        x=\"0\"\n                                        y=\"0\"\n                                        rx=\"1\"\n                                        ry=\"1\"\n                                        width=\"2\"\n                                        height=\"16\"\n                                        style={{ fill: 'white', stroke: 'none' }}\n                                    />\n                                </svg>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </section>\n        );\n        /* eslint-enable jsx-a11y/click-events-have-key-events */\n    }\n}\n\nScrubber.propTypes = {\n    id: PropTypes.string,\n    children: PropTypes.element.isRequired,\n    scrub: scrubType.isRequired,\n    status: PropTypes.string,\n    onScrubPositionChange: PropTypes.func,\n    onSetPlayhead: PropTypes.func,\n    onScrubDragged: PropTypes.func,\n    isVisible: PropTypes.bool.isRequired,\n    emptyText: PropTypes.string,\n};\n\nScrubber.defaultProps = {\n    id: undefined,\n    status: undefined,\n    onScrubPositionChange: undefined,\n    onSetPlayhead: undefined,\n    onScrubDragged: undefined,\n    emptyText: null,\n};\n\nexport default Scrubber;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { scrubType } from '../shared/types';\nimport Scrubber from '../components/Scrubber/Scrubber';\nimport { movePlayHead, moveScrubber, pause } from '../store/actions/actions';\nimport { getScrubberVisibility, getStatus } from '../store/selectors/common-selectors';\nimport getEmptyDataText from '../store/selectors/emptyDataText';\n\nfunction ScrubberContainer(props) {\n    const {\n        id,\n        children,\n        scrub,\n        status,\n        onScrubPositionChange,\n        onSetPlayhead,\n        onScrubDragged,\n        isVisible,\n        emptyText,\n    } = props;\n    return (\n        <Scrubber\n            id={id}\n            status={status}\n            scrub={scrub}\n            onScrubPositionChange={onScrubPositionChange}\n            onSetPlayhead={onSetPlayhead}\n            onScrubDragged={onScrubDragged}\n            isVisible={isVisible}\n            emptyText={emptyText}\n        >\n            {children}\n        </Scrubber>\n    );\n}\n\nScrubberContainer.propTypes = {\n    id: PropTypes.string,\n    children: PropTypes.element.isRequired,\n    scrub: scrubType.isRequired,\n    status: PropTypes.string.isRequired,\n    onScrubPositionChange: PropTypes.func.isRequired,\n    onSetPlayhead: PropTypes.func.isRequired,\n    onScrubDragged: PropTypes.func.isRequired,\n    isVisible: PropTypes.bool.isRequired,\n    emptyText: PropTypes.string,\n};\n\nScrubberContainer.defaultProps = {\n    id: undefined,\n    emptyText: null,\n};\n\nconst mapStateToProps = (state) => {\n    const { scrub } = state;\n    return {\n        scrub,\n        status: getStatus(state),\n        isVisible: getScrubberVisibility(state),\n        emptyText: getEmptyDataText(state),\n    };\n};\n\nconst mapDispatchToProps = dispatch => ({\n    onSetPlayhead: (position, isUserAction) => {\n        dispatch(movePlayHead(position, isUserAction));\n    },\n    onScrubPositionChange: (scrub) => {\n        dispatch(moveScrubber(scrub));\n    },\n    onScrubDragged: () => {\n        dispatch(pause());\n    },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ScrubberContainer);\n","export default __webpack_public_path__ + \"static/media/icon-answer.b4e2108d.svg\";","export default __webpack_public_path__ + \"static/media/icon-waiting.88d74cc5.svg\";","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport styles from './StandardChannelEventsLayer.module.scss';\nimport iconOnHold from '../../assets/svgs/icon-on-hold.svg';\nimport iconConference from '../../assets/svgs/icon-conference.svg';\nimport iconPause from '../../assets/svgs/icon-pause.svg';\nimport iconTransfer from '../../assets/svgs/icon-transfer.svg';\nimport iconAnswer from '../../assets/svgs/icon-answer.svg';\nimport iconWaiting from '../../assets/svgs/icon-waiting.svg';\nimport {\n    calculatePositionPercentage,\n    calculatePositionPercentageWithOffset,\n    calculateWidthPercentage,\n    layerStyleWithScrubBounds,\n} from '../../shared/utility/timeline';\nimport {\n    dataType,\n    eventsType,\n    participantsType,\n    scrubType,\n    timelineType,\n    statusType,\n    keyCallersType, activeLayersType,\n} from '../../shared/types';\nimport {\n    FILTER_CALL_QUEUING,\n    FILTER_HOLD_UNHOLD,\n    FILTER_LISTEN_IN,\n    FILTER_NEW_PARTY,\n    FILTER_TRANSFER,\n} from '../../store/constants/metrics-layers';\nimport { STATUS_OK } from '../../store/constants/data';\n\nclass StandardChannelEventsLayer extends Component {\n    static iconImage(flags, isStartIcon) {\n        const {\n            isHold,\n            isParkedTransfer,\n            isConferenceIn,\n            isRecordStart,\n            isRecordStop,\n            isChannelAnswer,\n            isChannelRing,\n            isCallStart,\n            isBridge,\n        } = flags;\n        switch (true) {\n            case isParkedTransfer && isStartIcon:\n            case isHold:\n                return iconOnHold;\n            case isConferenceIn:\n                return iconConference;\n            case isStartIcon && isRecordStop:\n                return iconPause;\n            case isChannelAnswer:\n                return iconAnswer;\n            case !isStartIcon && isChannelRing:\n                return iconWaiting;\n            case isBridge && !isStartIcon:\n                return iconTransfer;\n            // Do not display icon under these conditions\n            case !isStartIcon && isRecordStop:\n            case isStartIcon && isChannelRing:\n            case isCallStart && isStartIcon:\n            case isRecordStart:\n                return null;\n            default:\n                return null;\n        }\n    }\n\n    static iconLabel(flags) {\n        const {\n            isBridge,\n            isChannelStart,\n            isChannelRing,\n            isChannelAnswer,\n            isChannelEnd,\n            isChannelComplete,\n            isConferenceIn,\n            isConferenceOut,\n            isHold,\n            isListenIn,\n            isListenInBarge,\n            isListenInDisconnect,\n            isListenInWhisper,\n            isParkOtherForTransfer,\n            isParkedTransfer,\n            isQueuing,\n            isRecordStart,\n            isRecordStop,\n            isRequestOnHold,\n            isRequestUnHold,\n            isRouting,\n            isUnBridge,\n            isUnHold,\n        } = flags;\n        switch (true) {\n            case isChannelStart:\n                return 'Channel start';\n            case isChannelRing:\n                return 'Channel ring';\n            case isChannelAnswer:\n                return 'Channel answer';\n            case isChannelEnd:\n                return 'Channel end';\n            case isChannelComplete:\n                return 'Channel complete';\n\n            case isConferenceIn:\n                return 'Conference';\n            case isConferenceOut:\n                return 'Conference end';\n\n            case isHold:\n                return 'On Hold';\n            case isUnHold:\n                return 'Un-hold';\n            case isRequestOnHold:\n                return 'On hold';\n            case isRequestUnHold:\n                return 'Un-hold';\n\n            case isRecordStart:\n                return 'Un-pause';\n            case isRecordStop:\n                return 'Pause';\n\n            case isParkedTransfer:\n                return 'Start transfer';\n            case isParkOtherForTransfer:\n                return 'Start transfer';\n\n            case isBridge:\n                return 'Complete Transfer';\n            case isListenIn:\n                return 'Listen in';\n            case isListenInBarge:\n                return 'Barge';\n            case isListenInDisconnect:\n                return 'Listen in end';\n            case isListenInWhisper:\n                return 'Whisper';\n            case isQueuing:\n                return 'Queueing';\n            case isRouting:\n                return 'Routing';\n            case isUnBridge:\n                return 'Disconnect';\n\n            default:\n                return Object.keys(flags).join(' ');\n        }\n    }\n\n    static iconImageForEvent(event, isStartIcon) {\n        const flags = isStartIcon ? event.startFlags : event.endFlags;\n        return StandardChannelEventsLayer.iconImage(flags, isStartIcon);\n    }\n\n    static icon(event, isStartIcon, classes = {}, style = {}, shouldMicroCluster = false) {\n        const flags = isStartIcon ? event.startFlags : event.endFlags;\n        const className = classNames({\n            ...classes,\n            [styles.startIcon]: isStartIcon,\n            [styles.endIcon]: !isStartIcon && !shouldMicroCluster,\n            [styles.microClusteredEndIcon]: !isStartIcon && shouldMicroCluster,\n        });\n        const icon = StandardChannelEventsLayer.iconImage(flags, isStartIcon);\n        if (icon === null) {\n            return null;\n        }\n        let label = StandardChannelEventsLayer.iconLabel(flags, isStartIcon);\n        if (!shouldMicroCluster) {\n            return (\n                <img src={icon} className={className} style={style} data-tooltip={label} alt={label} />\n            );\n        }\n        const startLabel = StandardChannelEventsLayer.iconLabel(event.startFlags, true);\n        label = `${startLabel}<br/>${label}`;\n        const containerClassName = classNames({\n            [styles.microClusteredEndIconContainer]: true,\n        });\n        return (\n            <div className={containerClassName} style={style}>\n                <img src={icon} className={className} style={style} data-tooltip={label} alt={label} />\n            </div>\n        );\n    }\n\n    static markerLineClasses(event) {\n        const { startFlags, endFlags } = event;\n        return {\n            [styles.markerLines]: true,\n            [styles.leftLine]: startFlags.isParkedTransfer === true,\n            [styles.rightLine]: endFlags.isBridge === true,\n        };\n    }\n\n    static markerLineStyles(event, participant) {\n        const { startFlags, endFlags } = event;\n        return {\n            borderLeftColor: startFlags.isParkedTransfer === true ? participant.color : '#000',\n            borderRightColor: endFlags.isBridge === true ? participant.color : '#000',\n        };\n    }\n\n    static filterRoutingEvents(isDisplayingRouting) {\n        return (event) => {\n            if (isDisplayingRouting) {\n                return true;\n            }\n            return event.endFlags.isChannelAnswer !== true && event.endFlags.isChannelRing !== true;\n        };\n    }\n\n    static filterRequiredForEvent(event) {\n        const { startFlags } = event;\n        switch (true) {\n            case startFlags.isHold === true:\n                return FILTER_HOLD_UNHOLD;\n            case startFlags.isParkedTransfer === true:\n            case startFlags.isBridge === true:\n                return FILTER_TRANSFER;\n            case startFlags.isListenIn === true\n            || startFlags.isListenInBarge === true\n            || startFlags.isListenInWhisper === true:\n                return FILTER_LISTEN_IN;\n            case startFlags.isQueuing === true:\n                return FILTER_CALL_QUEUING;\n            case startFlags.isCsStateChange === true:\n                return FILTER_NEW_PARTY;\n            default:\n                return null;\n        }\n    }\n\n    static filterSelectedEvents(isAlwaysShown, activeLayers) {\n        return (event) => {\n            if (isAlwaysShown) {\n                return true;\n            }\n            const filter = StandardChannelEventsLayer.filterRequiredForEvent(event);\n            if (filter != null) {\n                return activeLayers.includes(StandardChannelEventsLayer.filterRequiredForEvent(event));\n            }\n            return true;\n        };\n    }\n\n    eventElements(participants, eventsByParticipants) {\n        const {\n            scrub,\n            timeline,\n            plotWholeTimeline,\n            activeLayers,\n            status: {\n                isDisplaying: {\n                    routing: isDisplayingRouting,\n                },\n            },\n        } = this.props;\n        const scrubAsTime = {\n            start: timeline.start + (timeline.range * scrub.start / 100),\n            end: timeline.start + (timeline.range * scrub.end / 100),\n        };\n        const scrubWidthAsTime = scrubAsTime.end - scrubAsTime.start;\n        const microClusterThreshold = scrubWidthAsTime * 0.02;\n        return Object.keys(participants).map(key => eventsByParticipants[key].events\n            .filter(StandardChannelEventsLayer.filterRoutingEvents(isDisplayingRouting))\n            .filter(StandardChannelEventsLayer.filterSelectedEvents(!plotWholeTimeline, activeLayers))\n            .map((event, index) => {\n                const {\n                    isHold,\n                    isBridge,\n                    isUnBridge,\n                    isRecordStop,\n                    isParkedTransfer,\n                    isRouting,\n                    isSecondary,\n                    isChannelStart,\n                    isChannelRing,\n                } = event.startFlags;\n                if (isUnBridge || isRouting) return null;\n                const isStartFullHeight = plotWholeTimeline || isHold || isRecordStop;\n                const isEndFullHeight = plotWholeTimeline || isHold || isRecordStop || isBridge;\n                const subHeightTop = isSecondary ? 55 : 18;\n                const containerClass = classNames({\n                    ...StandardChannelEventsLayer.markerLineClasses(event),\n                    [styles.small]: true,\n                    [styles.eventContainer]: true,\n                });\n                const leftMost = scrubAsTime.start;\n                const rightMost = scrubAsTime.end;\n                const left = event.start < leftMost && event.end > leftMost ? leftMost : event.start;\n                const right = event.end > rightMost && event.start < rightMost ? rightMost : event.end;\n                const containerStyle = {\n                    ...StandardChannelEventsLayer.markerLineStyles(event, participants[key]),\n                    left: calculatePositionPercentage(left, timeline),\n                    width: calculateWidthPercentage(left, right, timeline),\n                    textAlign: 'center',\n                };\n                const eventClass = classNames({\n                    [styles.event]: true,\n                    [styles.transfer]: isParkedTransfer,\n                    [styles.hold]: isHold,\n                    [styles.pause]: isRecordStop,\n                    [styles.start]: isChannelStart,\n                    [styles.ring]: isChannelRing,\n                    [styles.bridge]: isBridge,\n                    [styles.wholeTimeline]: plotWholeTimeline,\n                });\n                const eventStyle = {\n                    top: `${isStartFullHeight ? 0 : subHeightTop}%`,\n                    height: `${isStartFullHeight ? 100 : 28}%`,\n                    borderRadius: `${isStartFullHeight ? '0' : '4px'}`,\n                };\n                const startIconStyle = {\n                    top: `${isStartFullHeight ? 0 : subHeightTop + 8}%`,\n                };\n                const endIconStyle = {\n                    top: `${isEndFullHeight ? 0 : subHeightTop + 8}%`,\n                };\n                let shouldMicroCluster = event.duration > 0 && event.duration < microClusterThreshold;\n                if (!plotWholeTimeline && shouldMicroCluster) {\n                    const startIcon = StandardChannelEventsLayer.iconImageForEvent(event, true);\n                    const endIcon = StandardChannelEventsLayer.iconImageForEvent(event, false);\n                    if (startIcon === null || endIcon === null) {\n                        shouldMicroCluster = false; // Don't micro-cluster if only one icon is visible\n                    }\n                }\n                return (\n                    <div\n                        key={`container-${index}-${event.event}${event.start}${event.end}`}\n                        className={containerClass}\n                        style={containerStyle}\n                    >\n                        <div\n                            key={`event-${index}-${event.event}${event.start}${event.end}`}\n                            className={eventClass}\n                            style={eventStyle}\n                        />\n                        {!plotWholeTimeline && !shouldMicroCluster && StandardChannelEventsLayer.icon(\n                            event,\n                            true,\n                            { 'translate-r50': left === leftMost, [styles.iconLevel]: true },\n                            startIconStyle,\n                        )}\n                        {!plotWholeTimeline && StandardChannelEventsLayer.icon(\n                            event,\n                            false,\n                            { 'translate-l50': right === rightMost, [styles.iconLevel]: true },\n                            endIconStyle, shouldMicroCluster,\n                        )}\n                    </div>\n                );\n            }));\n    }\n\n    routingOverlay() {\n        const {\n            participants, eventsByParticipants, keyCallers, timeline,\n        } = this.props;\n        const primaryClass = classNames({\n            [styles.routing]: true,\n            [styles.primary]: true,\n        });\n        const secondaryClass = classNames({\n            [styles.routing]: true,\n            [styles.secondary]: true,\n        });\n        if (!participants || !eventsByParticipants) {\n            return null;\n        }\n        const primaryKey = Object.keys(participants).filter(key => participants[key].isPrimary).shift();\n        const { events } = eventsByParticipants[primaryKey];\n        const [firstEvent] = events.sort((event1, event2) => event1.start > event2.start);\n        if (!firstEvent) {\n            return null;\n        }\n        const position = firstEvent.start;\n        const overlayStyle = {\n            width: calculatePositionPercentageWithOffset(position, timeline),\n        };\n        const primaryChannelStyle = {\n            borderColor: keyCallers.colors ? keyCallers.colors[0] : '#000',\n        };\n        const secondaryChannelStyle = {\n            borderColor: keyCallers.colors ? keyCallers.colors[1] : '#000',\n        };\n        return (\n            <div className={styles.routingOverlay} style={overlayStyle}>\n                <div className={primaryClass} style={primaryChannelStyle} />\n                <div className={styles.unrecordedTimeLabel}>\n                    Unrecorded call time\n                </div>\n                <div className={secondaryClass} style={secondaryChannelStyle} />\n            </div>\n        );\n    }\n\n    render() {\n        const {\n            plotWholeTimeline,\n            scrub,\n            participants,\n            eventsByParticipants,\n            status: {\n                status,\n                isDisplaying: {\n                    routing: isDisplayRouting,\n                },\n            },\n        } = this.props;\n        if (status !== STATUS_OK) {\n            return null;\n        }\n        const eventElements = eventsByParticipants !== null\n            ? this.eventElements(participants, eventsByParticipants) : null;\n\n        const routingOverlay = !plotWholeTimeline && isDisplayRouting ? this.routingOverlay() : null;\n        return (\n            <div className={styles.LayerContent} style={layerStyleWithScrubBounds(plotWholeTimeline, scrub)}>\n                {eventElements}\n                {routingOverlay}\n            </div>\n        );\n    }\n}\n\nStandardChannelEventsLayer.propTypes = {\n    data: dataType.isRequired,\n    padding: PropTypes.number,\n    plotWholeTimeline: PropTypes.bool,\n    scrub: scrubType.isRequired,\n    timeline: timelineType.isRequired,\n    participants: participantsType.isRequired,\n    eventsByParticipants: eventsType,\n    status: statusType.isRequired,\n    keyCallers: keyCallersType,\n    activeLayers: activeLayersType,\n};\n\nStandardChannelEventsLayer.defaultProps = {\n    padding: 10,\n    plotWholeTimeline: false,\n    keyCallers: {},\n    activeLayers: [],\n};\n\nexport default StandardChannelEventsLayer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport {\n    dataType, eventsType,\n    participantsType,\n    scrubType,\n    timelineType,\n    statusType,\n    keyCallersType,\n    activeLayersType,\n} from '../shared/types';\nimport StandardChannelEventsLayer from '../components/StandardChannelEventsLayer/StandardChannelEventsLayer';\nimport { getTimeline } from '../store/selectors';\nimport { getEventsByParticipants, getKeyCallers, getParticipants } from '../store/selectors/common-selectors';\n\nfunction StandardChannelEventsLayerContainer(props) {\n    const {\n        data,\n        padding,\n        scrub,\n        status,\n        plotWholeTimeline,\n        timeline,\n        participants,\n        eventsByParticipants,\n        keyCallers,\n        activeLayers,\n    } = props;\n    return (\n        <StandardChannelEventsLayer\n            timeline={timeline}\n            data={data}\n            scrub={scrub}\n            status={status}\n            padding={padding}\n            plotWholeTimeline={plotWholeTimeline}\n            participants={participants}\n            eventsByParticipants={eventsByParticipants}\n            keyCallers={keyCallers}\n            activeLayers={activeLayers}\n        />\n    );\n}\n\nStandardChannelEventsLayerContainer.propTypes = {\n    data: dataType.isRequired,\n    padding: PropTypes.number,\n    plotWholeTimeline: PropTypes.bool,\n    scrub: scrubType.isRequired,\n    timeline: timelineType.isRequired,\n    participants: participantsType.isRequired,\n    eventsByParticipants: eventsType,\n    status: statusType.isRequired,\n    keyCallers: keyCallersType.isRequired,\n    activeLayers: activeLayersType,\n};\n\nStandardChannelEventsLayerContainer.defaultProps = {\n    padding: 10,\n    plotWholeTimeline: false,\n    eventsByParticipants: null,\n    activeLayers: [],\n};\n\nconst mapStateToProps = (state) => {\n    const {\n        data,\n        scrub,\n        status,\n        activeLayers,\n    } = state;\n\n    return {\n        data,\n        scrub,\n        status,\n        activeLayers,\n        timeline: getTimeline(state),\n        participants: getParticipants(state),\n        eventsByParticipants: getEventsByParticipants(state),\n        keyCallers: getKeyCallers(state),\n    };\n};\n\nexport default connect(mapStateToProps)(StandardChannelEventsLayerContainer);\n","import PropTypes from 'prop-types';\nimport React from 'react';\nimport EventTimelineContainer from '../../containers/EventTimelineContainer';\nimport MetricsTimelineLayerContainer from '../../containers/MetricsTimelineLayerContainer';\nimport ScrubberContainer from '../../containers/ScrubberContainer';\nimport { activeLayersType } from '../../shared/types';\nimport { BACKGROUND_NOISE_LEVEL, TRANSCRIPTION_CONFIDENCE } from '../../store/constants/metrics-layers';\nimport MetricsTimelineLayer from '../MetricsTimelineLayer/MetricsTimelineLayer';\nimport StandardChannelEventsLayerContainer from '../../containers/StandardChannelEventsLayerContainer';\n\nfunction AuxiliaryScrubbers(props) {\n    const {\n        activeLayers,\n        onScrubberMoved,\n    } = props;\n\n    const layers = [BACKGROUND_NOISE_LEVEL, TRANSCRIPTION_CONFIDENCE]\n        .filter(layer => activeLayers.includes(layer));\n    const scrubbers = layers.map(layer => (\n        <ScrubberContainer\n            key={layer}\n            id={`metrics-scrubber-${layer}`}\n            infoSection={MetricsTimelineLayer.scrubLegend(layer)}\n            time=\" \"\n            onScrubPositionChange={onScrubberMoved}\n        >\n            <EventTimelineContainer\n                plotWholeTimeline\n                hideSentenceLayer\n            >\n                <StandardChannelEventsLayerContainer plotWholeTimeline />\n                <MetricsTimelineLayerContainer plotWholeTimeline metricType={layer} />\n            </EventTimelineContainer>\n        </ScrubberContainer>\n    ));\n\n    return (\n        scrubbers\n    );\n}\n\nAuxiliaryScrubbers.propTypes = {\n    activeLayers: activeLayersType.isRequired,\n    onScrubberMoved: PropTypes.func.isRequired,\n};\n\nexport default AuxiliaryScrubbers;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport AuxiliaryScrubbers from '../components/AuxiliaryScrubbers/AuxiliaryScrubbers';\nimport { activeLayersType } from '../shared/types';\nimport { moveScrubber } from '../store/actions/actions';\n\nfunction AuxiliaryScrubbersContainer(props) {\n    const {\n        activeLayers,\n        onScrubberMoved,\n    } = props;\n    return (\n        <AuxiliaryScrubbers activeLayers={activeLayers} onScrubberMoved={onScrubberMoved} />\n    );\n}\n\nconst mapStateToProps = (state) => {\n    const {\n        activeLayers,\n    } = state;\n\n    return {\n        activeLayers,\n    };\n};\n\nconst mapDispatchToProps = dispatch => ({\n    onScrubberMoved: (scrub) => {\n        dispatch(moveScrubber(scrub));\n    },\n});\n\nAuxiliaryScrubbersContainer.propTypes = {\n    activeLayers: activeLayersType.isRequired,\n    onScrubberMoved: PropTypes.func.isRequired,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AuxiliaryScrubbersContainer);\n","import React, { Component } from 'react';\nimport Proptypes from 'prop-types';\nimport styles from './NoteModal.module.scss';\nimport { timeType } from '../../shared/types';\n\nclass TimeDropDown extends Component {\n    static handleKeyPress(event) {\n        if (event.key === 'Enter') {\n            event.target.blur();\n        }\n    }\n\n    static handleTextChange(event) {\n        const { target } = event;\n        target.value = target.value.replace(/\\D/, '');\n        if (target.value.length > 2) {\n            target.value = target.value.substr(0, 2);\n        }\n    }\n\n    constructor(props) {\n        super(props);\n        this.container = React.createRef();\n        const { time } = props;\n        this.state = {\n            dropDownOpen: false,\n            time,\n        };\n\n        this.timePickerConfig = [\n            {\n                id: 'hours',\n                ref: React.createRef(),\n                max: 23,\n                spacer: ':',\n            },\n            {\n                id: 'minutes',\n                ref: React.createRef(),\n                max: 59,\n                spacer: ':',\n            },\n            {\n                id: 'seconds',\n                ref: React.createRef(),\n                max: 59,\n                spacer: null,\n            },\n        ];\n        this.toggleDropDown.bind(this);\n        this.handleClickOutside = this.handleClickOutside.bind(this);\n    }\n\n    componentDidMount() {\n        document.addEventListener('mousedown', this.handleClickOutside);\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('mousedown', this.handleClickOutside);\n    }\n\n    handleClickOutside(event) {\n        if (this.container.current && !this.container.current.contains(event.target)) {\n            const { time, dropDownOpen } = this.state;\n            const { setTime } = this.props;\n            if (dropDownOpen) {\n                setTime(time);\n            }\n            this.setState({\n                dropDownOpen: false,\n            });\n        }\n    }\n\n    toggleDropDown() {\n        const { timeChecked, canEdit } = this.props;\n        if (timeChecked && canEdit) {\n            this.setState(prevState => ({\n                dropDownOpen: !prevState.dropDownOpen,\n            }));\n        } else {\n            this.setState({\n                dropDownOpen: false,\n            });\n        }\n    }\n\n    handleLoseFocus(config, event) {\n        const { id, ref, max } = config;\n        const { time } = this.state;\n        let newValue = event.target.value.replace(/\\D/, '');\n        if (newValue.length > 2) {\n            newValue = newValue.substr(0, 2);\n        }\n        newValue = Math.min(newValue, max);\n        newValue = Math.max(newValue, 0);\n\n        this.setState({ time: { ...time, [id]: String(newValue).padStart(2, 0) } });\n        ref.current.value = String(newValue).padStart(2, 0);\n    }\n\n    increment(config) {\n        const { id, ref, max } = config;\n        const { time } = this.state;\n        let value = parseInt(ref.current.value, 10) + 1;\n        if (value > max) {\n            value = 0;\n        }\n        const storedValue = String(value).padStart(2, 0);\n        this.setState({ time: { ...time, [id]: storedValue } });\n        ref.current.value = storedValue;\n    }\n\n    decrement(config) {\n        const { id, ref, max } = config;\n        const { time } = this.state;\n        let value = parseInt(ref.current.value, 10) - 1;\n        if (value < 0) {\n            value = max;\n        }\n        const storedValue = String(value).padStart(2, 0);\n        this.setState({ time: { ...time, [id]: storedValue } });\n        ref.current.value = storedValue;\n    }\n\n    render() {\n        const { time, dropDownOpen } = this.state;\n        const { timeChecked } = this.props;\n        const timeOfEvent = timeChecked ? `${time.hours} : ${time.minutes} : ${time.seconds}` : 'N/A';\n        return (\n            <div className={`${styles.dropdown} ${styles.timeDropdown}`} ref={this.container}>\n                <div onClick={() => this.toggleDropDown()}>\n                    <div>\n                        {timeOfEvent}\n                    </div>\n                </div>\n\n                {dropDownOpen && (\n                    <div key=\"timePickerContent\" className={styles.timePicker}>\n                        {this.timePickerConfig.map(config => (\n                            [\n                                <div key={`${config.id}Picker`} className={styles.numberPicker}>\n                                    <button\n                                        key={config.id}\n                                        type=\"button\"\n                                        className={styles.upButton}\n                                        onClick={this.increment.bind(this, config)}\n                                    />\n                                    <input\n                                        ref={config.ref}\n                                        key={`${config.id}Input`}\n                                        type=\"number\"\n                                        className={styles.numberInput}\n                                        defaultValue={time[config.id]}\n                                        onInput={TimeDropDown.handleTextChange.bind(this)}\n                                        onKeyDown={TimeDropDown.handleKeyPress.bind(this)}\n                                        onBlur={this.handleLoseFocus.bind(this, config)}\n                                    />\n                                    <button\n                                        key={`${config.id}Button`}\n                                        type=\"button\"\n                                        className={styles.downButton}\n                                        onClick={this.decrement.bind(this, config)}\n                                    />\n                                </div>,\n                                (config.spacer !== null) ? <div key={`${config.id}Spacer`}>{config.spacer}</div> : '',\n                            ]\n                        ))}\n                    </div>\n                )}\n            </div>\n        );\n    }\n}\n\nTimeDropDown.propTypes = {\n    time: timeType.isRequired,\n    timeChecked: Proptypes.bool.isRequired,\n    canEdit: Proptypes.bool.isRequired,\n    setTime: Proptypes.func.isRequired,\n};\n\nexport default TimeDropDown;\n","import React, { Component } from 'react';\nimport Proptypes from 'prop-types';\nimport styles from './NoteModal.module.scss';\nimport { userListType, userType } from '../../shared/types';\nimport Avatar from '../Avatar/Avatar';\n\nclass RelatingToDropdown extends Component {\n    static svgCircle(color, image) {\n        if (image !== 'undefined') {\n            return `<svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'>\\\n<circle fill='${color.replace(/#/, '%23')}' id='a' cx='12' cy='12' r='9' />\\\n<image width=\"24px\" height=\"24px\" x=\"6px\" y=\"4px\" href='${image}'/></svg>`;\n        }\n        return `<svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'>\\\n<circle fill='${color.replace(/#/, '%23')}' id='a' cx='12' cy='12' r='9' /></svg>`;\n    }\n\n    constructor(props) {\n        super(props);\n        this.container = React.createRef();\n        this.state = {\n            dropDownOpen: false,\n        };\n        this.toggleDropDown = this.toggleDropDown.bind(this);\n        this.handleClickOutside = this.handleClickOutside.bind(this);\n    }\n\n    componentDidMount() {\n        document.addEventListener('mousedown', this.handleClickOutside);\n    }\n\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\n        const { selectedUser } = this.props;\n        const { dropDownOpen } = this.state;\n        const nextSelectedUser = nextProps.selectedUser;\n        return selectedUser !== nextSelectedUser || dropDownOpen !== nextState.dropDownOpen;\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('mousedown', this.handleClickOutside);\n    }\n\n    handleClickOutside(event) {\n        if (this.container.current && !this.container.current.contains(event.target)) {\n            this.setState({\n                dropDownOpen: false,\n            });\n        }\n    }\n\n    handleUserClick(uuid) {\n        const { handleUserClick } = this.props;\n        this.toggleDropDown();\n        handleUserClick(uuid);\n    }\n\n    toggleDropDown() {\n        const { isShared, canEdit } = this.props;\n        if (isShared || canEdit) {\n            this.setState(prevState => ({\n                dropDownOpen: !prevState.dropDownOpen,\n            }));\n        } else {\n            this.setState({\n                dropDownOpen: false,\n            });\n        }\n    }\n\n    relatingToList() {\n        const { userList } = this.props;\n        return userList.map((user) => {\n            const image = (\n                <Avatar\n                    isAvatar={!!user.avatar}\n                    url={user.avatar || user.icon}\n                    color={user.color}\n                />\n            );\n            return (\n                <div\n                    key={user.uuid}\n                    className={`${styles.dropdownItem} ${styles.dropdownItemWithIcon}`}\n                    onClick={this.handleUserClick.bind(this, user)}\n                >\n                    <div className={styles.dropdownItemIcon}>\n                        {image}\n                    </div>\n                    {user.title}\n                </div>\n            );\n        });\n    }\n\n    createUserButton() {\n        const { selectedUser } = this.props;\n        let userButton;\n        if (selectedUser) {\n            const image = (\n                <Avatar\n                    isAvatar={!!selectedUser.avatar}\n                    url={selectedUser.avatar || selectedUser.icon}\n                    color={selectedUser.color}\n                />\n            );\n            userButton = (\n                <div\n                    className={styles.dropdownButtonWithIcon}\n                    onClick={() => this.toggleDropDown()}\n                >\n                    <div className={styles.dropdownButtonIcon}>\n                        {image}\n                    </div>\n                    {selectedUser.title}\n                </div>\n            );\n        } else {\n            userButton = (\n                <div className={styles.dropdownButton} onClick={() => this.toggleDropDown()}>\n                    Please choose\n                </div>\n            );\n        }\n        return userButton;\n    }\n\n    render() {\n        const userButton = this.createUserButton();\n        const { dropDownOpen } = this.state;\n        return (\n            <div className={styles.dropdown} ref={this.container}>\n                {userButton}\n                {dropDownOpen && (\n                    <div className={styles.dropdownContent}>\n                        {this.relatingToList()}\n                    </div>\n                )}\n            </div>\n        );\n    }\n}\n\nRelatingToDropdown.propTypes = {\n    selectedUser: userType,\n    userList: userListType.isRequired,\n    canEdit: Proptypes.bool.isRequired,\n    isShared: Proptypes.bool.isRequired,\n    handleUserClick: Proptypes.func.isRequired,\n};\n\nRelatingToDropdown.defaultProps = {\n    selectedUser: null,\n};\n\nexport default RelatingToDropdown;\n","import React, { Component } from 'react';\nimport Proptypes from 'prop-types';\nimport styles from './NoteModal.module.scss';\nimport { noteEventListType } from '../../shared/types';\n\nclass TypeDropdown extends Component {\n    constructor(props) {\n        super(props);\n        this.container = React.createRef();\n        this.state = {\n            dropDownOpen: false,\n        };\n\n        this.toggleDropDown = this.toggleDropDown.bind(this);\n        this.handleClickOutside = this.handleClickOutside.bind(this);\n    }\n\n    componentDidMount() {\n        document.addEventListener('mousedown', this.handleClickOutside);\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('mousedown', this.handleClickOutside);\n    }\n\n    handleClickOutside(event) {\n        if (this.container.current && !this.container.current.contains(event.target)) {\n            this.setState({\n                dropDownOpen: false,\n            });\n        }\n    }\n\n    handleTypeClick(typeId) {\n        const { handleTypeClicked } = this.props;\n        this.toggleDropDown();\n        handleTypeClicked(typeId);\n    }\n\n    toggleDropDown() {\n        const { canEdit } = this.props;\n        if (canEdit) {\n            this.setState(prevState => ({\n                dropDownOpen: !prevState.dropDownOpen,\n            }));\n        } else {\n            this.setState({\n                dropDownOpen: false,\n            });\n        }\n    }\n\n    createTypeButton() {\n        const { selectedTypeId, eventTypesList } = this.props;\n        let typeButton;\n        const selectedType = eventTypesList.find(element => element.id === selectedTypeId);\n        if (selectedType) {\n            const style = {\n                backgroundRepeat: 'no-repeat, no-repeat',\n                backgroundPosition: 'left 0px top 50%, right 8px top 50%, 0 0',\n                backgroundSize: '18px 18px',\n            };\n            typeButton = (\n                <div\n                    style={style}\n                    className={styles.dropdownButton}\n                    onClick={() => this.toggleDropDown()}\n                >\n                    {selectedType.text}\n                </div>\n            );\n        } else {\n            typeButton = (\n                <div\n                    className={styles.dropdownButton}\n                    onClick={() => this.toggleDropDown()}\n                >\n                    Please choose\n                </div>\n            );\n        }\n\n        return typeButton;\n    }\n\n    renderTypeList() {\n        const { eventTypesList } = this.props;\n        return eventTypesList.map((type) => {\n            const style = {\n                backgroundImage: `url(${type.icon})`,\n                backgroundRepeat: 'no-repeat, repeat',\n                backgroundPosition: 'right 8px top 50%, 0 0',\n            };\n            return (\n                <div\n                    style={style}\n                    className={styles.dropdownItem}\n                    key={type.id}\n                    onClick={this.handleTypeClick.bind(this, type.id)}\n                >\n                    {type.text}\n                </div>\n            );\n        });\n    }\n\n    render() {\n        const typeButton = this.createTypeButton();\n        const { dropDownOpen } = this.state;\n        return (\n            <div className={styles.dropdown} ref={this.container}>\n                {typeButton}\n                {dropDownOpen && (\n                    <div className={styles.dropdownContent}>\n                        {this.renderTypeList()}\n                    </div>\n                )}\n            </div>\n        );\n    }\n}\n\nTypeDropdown.propTypes = {\n    canEdit: Proptypes.bool.isRequired,\n    selectedTypeId: Proptypes.any,\n    eventTypesList: noteEventListType.isRequired,\n    handleTypeClicked: Proptypes.func.isRequired,\n};\n\nTypeDropdown.defaultProps = {\n    selectedTypeId: null,\n};\n\nexport default TypeDropdown;\n","/* eslint-disable react/jsx-one-expression-per-line */\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport styles from './NoteModal.module.scss';\nimport { participantsType, notesType, timelineType } from '../../shared/types';\nimport { uuidv4, decode } from '../../shared/utility/formatting';\nimport TimeDropDown from './TimeDropDown';\nimport RelatingToDropdown from './RelatingToDropdown';\nimport TypeDropdown from './TypeDropdown';\nimport { CUSTOMER_TITLE } from '../../routes/api/Environment';\nimport { NoteEditMode } from '../../store/actions/notes';\nimport { getItemWithUuidFromArray } from '../../store/selectors/common-selectors';\nimport TranscriptionNoteContainer from '../../containers/TranscriptionNoteContainer';\nimport { GENERAL_NOTE_UUID } from '../../store/constants/notes';\n\nclass NoteModal extends Component {\n    static createUserList(participants) {\n        const userList = [];\n        Object.keys(participants).forEach((key) => {\n            const participant = participants[key];\n            if (participant.title !== CUSTOMER_TITLE) {\n                userList.push({\n                    uuid: participant.relatedUuids[0],\n                    title: (participant.name) ? participant.name : participant.title,\n                    icon: participant.image,\n                    color: participant.color,\n                    userId: participant.userId,\n                    avatar: participant.photoUrl,\n                });\n            }\n        });\n        userList.push({\n            uuid: GENERAL_NOTE_UUID, title: 'General', icon: null, color: '#adb3b7', userId: GENERAL_NOTE_UUID,\n        });\n        return userList;\n    }\n\n    constructor(props) {\n        super(props);\n\n        const {\n            primaryUuid,\n            notes,\n            timeline,\n            playhead,\n            meId,\n            meName,\n            participants,\n        } = props;\n        const { editMode, commentToEdit: commentId } = notes;\n        const selectedNote = notes.notes.find(note => note.noteId === notes.noteToEdit);\n        const commentToEdit = selectedNote ? getItemWithUuidFromArray(selectedNote.thread, commentId) : null;\n        if (selectedNote && Number.isNaN(selectedNote.timestamp)) selectedNote.timestamp = null;\n        const timeInUSeconds = selectedNote ? selectedNote.timestamp : (timeline.range * playhead / 100);\n        const timeInSeconds = timeInUSeconds / 1000000;\n        const hours = Math.floor(timeInSeconds / 3600);\n        const minutes = Math.floor((timeInSeconds % 3600) / 60);\n        const seconds = Math.floor(timeInSeconds % 60);\n        this.userList = NoteModal.createUserList(participants);\n        let canEdit;\n        if (NoteEditMode.isNew(editMode)) {\n            canEdit = true;\n        } else if (NoteEditMode.isComment(editMode)) {\n            canEdit = commentToEdit.author.toString() === meId;\n        } else {\n            canEdit = selectedNote.author.toString() === meId;\n        }\n        if (NoteEditMode.isExistingItem(editMode)) {\n            this.state = {\n                noteId: selectedNote.noteId,\n                selectedUser: (selectedNote.uuid)\n                    ? this.userList.find(element => (element.uuid === selectedNote.uuid)) : null,\n                typeId: selectedNote.eventType,\n                text: NoteEditMode.isNote(editMode) ? selectedNote.text : commentToEdit.comment,\n                timestamp: timeInUSeconds,\n                time: {\n                    seconds: String(seconds).padStart(2, 0),\n                    minutes: String(minutes).padStart(2, 0),\n                    hours: String(hours).padStart(2, 0),\n                },\n                author: selectedNote.author,\n                authorName: selectedNote.authorName,\n                timeChecked: (timeInUSeconds !== null),\n                shareChecked: !!(selectedNote.isShared),\n                acknowledgeChecked: !!selectedNote.isAcknowledged,\n                canShare: selectedNote.canShare,\n                isAcknowledged: !!selectedNote.isAcknowledged,\n                canAcknowledge: selectedNote.canAcknowledge,\n                isShared: !!(selectedNote.isShared),\n                channelUuid: selectedNote.channelUuid,\n                canEdit: canEdit && !selectedNote.isAcknowledged,\n                thread: selectedNote.thread,\n                polarity: selectedNote.polarity,\n                userActivity: selectedNote.userActivity,\n                version: selectedNote.version,\n            };\n        } else {\n            this.state = {\n                noteId: uuidv4(),\n                selectedUser: null,\n                typeId: null,\n                text: '',\n                timestamp: timeInUSeconds,\n                canShare: notes.canShare,\n                shareChecked: true,\n                acknowledgeChecked: false,\n                isAcknowledged: false,\n                canAcknowledge: false,\n                isShared: false,\n                time: {\n                    seconds: String(seconds).padStart(2, 0),\n                    minutes: String(minutes).padStart(2, 0),\n                    hours: String(hours).padStart(2, 0),\n                },\n                author: meId,\n                authorName: meName,\n                timeChecked: true,\n                channelUuid: primaryUuid,\n                canEdit: true,\n                thread: [],\n                polarity: 'Neutral',\n                userActivity: [],\n                version: 1.0,\n            };\n        }\n\n        this.typeList = notes.eventTypes;\n        this.timePickerConfig = [\n            {\n                id: 'hours',\n                ref: React.createRef(),\n                max: 23,\n                spacer: ':',\n            },\n            {\n                id: 'minutes',\n                ref: React.createRef(),\n                max: 59,\n                spacer: ':',\n            },\n            {\n                id: 'seconds',\n                ref: React.createRef(),\n                max: 59,\n                spacer: null,\n            },\n        ];\n\n        this.handleAddNoteClicked = this.handleAddNoteClicked.bind(this);\n        this.handleDeleteNoteClicked = this.handleDeleteNoteClicked.bind(this);\n        this.setTime = this.setTime.bind(this);\n        this.handleUserClick = this.handleUserClick.bind(this);\n        this.handleTypeClick = this.handleTypeClick.bind(this);\n        this.handlePolarityClick = this.handlePolarityClick.bind(this);\n        this.handleSubmitClicked = this.handleSubmitClicked.bind(this);\n        this.handleAddCommentClicked = this.handleAddCommentClicked.bind(this);\n        this.handleDeleteCommentClicked = this.handleDeleteCommentClicked.bind(this);\n    }\n\n    setTime(time) {\n        this.setState({\n            time,\n        });\n    }\n\n    handleUserClick(user) {\n        this.setState({ selectedUser: user });\n    }\n\n    handleTypeClick(id) {\n        this.setState({ typeId: id });\n    }\n\n    handlePolarityClick(id) {\n        this.setState({ polarity: id });\n    }\n\n    handleTextUpdate(event) {\n        this.setState({ text: event.target.value });\n    }\n\n    handleEventTimeChecked(event) {\n        this.setState({ timeChecked: event.target.checked });\n    }\n\n    handleShareNote(event) {\n        this.setState({ shareChecked: event.target.checked });\n    }\n\n    handleAcknowledgeNote(event) {\n        this.setState({ acknowledgeChecked: event.target.checked });\n    }\n\n    handleSubmitClicked() {\n        const { notes: { editMode } } = this.props;\n        if (NoteEditMode.isNote(editMode)) {\n            this.handleAddNoteClicked();\n        } else if (NoteEditMode.isComment(editMode)) {\n            this.handleAddCommentClicked();\n        }\n    }\n\n    handleAddNoteClicked() {\n        const { onUpdateNote, timeline } = this.props;\n        const {\n            noteId,\n            selectedUser,\n            typeId,\n            text,\n            timestamp,\n            time,\n            author,\n            authorName,\n            timeChecked,\n            channelUuid,\n            shareChecked,\n            canShare,\n            thread,\n            polarity,\n            userActivity,\n            version,\n        } = this.state;\n\n        if (typeId === null) {\n            window.alert('You must specify an event type');\n            return;\n        }\n\n        if (selectedUser === null || selectedUser === undefined) {\n            window.alert('You must specify who the note relates to');\n            return;\n        }\n\n        let totalTime = null;\n        if (timeChecked) {\n            totalTime = timestamp % 1000000;\n            totalTime = Number(totalTime + time.hours * 3600000000 + time.minutes * 60000000 + time.seconds * 1000000);\n\n            if (totalTime > timeline.range) {\n                window.alert('The time is greater than the recording length');\n                return;\n            }\n        }\n        const editedNote = {\n            noteId,\n            uuid: selectedUser.uuid,\n            timestamp: totalTime,\n            eventType: typeId,\n            author,\n            authorName,\n            text,\n            isShared: (selectedUser.uuid === GENERAL_NOTE_UUID) ? false : shareChecked,\n            channelUuid,\n            canShare,\n            thread,\n            polarity,\n            userActivity,\n            version,\n        };\n        onUpdateNote(editedNote);\n    }\n\n    handleAddCommentClicked() {\n        const {\n            notes: {\n                editMode, notes, noteToEdit, commentToEdit,\n            }, onUpdateNote, meId, meName,\n        } = this.props;\n        const { text } = this.state;\n        const currentTime = (new Date()).toISOString();\n        const note = notes.find(obj => obj.noteId === noteToEdit);\n        if (!note) {\n            return;\n        }\n        const newThread = NoteEditMode.isNew(editMode)\n            ? [\n                ...note.thread, {\n                    uuid: uuidv4(),\n                    comment: text,\n                    created: currentTime,\n                    modified: currentTime,\n                    author: meId,\n                    authorName: meName,\n                }] : note.thread.map(comment => ({\n                ...comment,\n                ...(comment.uuid === commentToEdit ? { comment: text, modified: currentTime } : null),\n            }));\n        onUpdateNote({\n            ...note,\n            thread: newThread,\n        }, currentTime);\n    }\n\n    handleDeleteNoteClicked() {\n        const { noteId } = this.state;\n        const { onDeleteNote } = this.props;\n        onDeleteNote(noteId);\n    }\n\n    handleDeleteCommentClicked() {\n        const {\n            notes: {\n                noteToEdit,\n                commentToEdit,\n            },\n            onDeleteComment,\n        } = this.props;\n        onDeleteComment(noteToEdit, commentToEdit);\n    }\n\n    titleForEditMode(editMode) {\n        switch (editMode) {\n            case NoteEditMode.existingNote:\n                return 'Edit note';\n            case NoteEditMode.newComment:\n                return 'Replying to:';\n            case NoteEditMode.existingComment:\n                return 'Edit reply to:';\n            default:\n                return 'New note';\n        }\n    }\n\n    buttonTextForEditMode(editMode) {\n        switch (editMode) {\n            case NoteEditMode.existingNote:\n                return 'Update note';\n            case NoteEditMode.newComment:\n                return 'Add comment';\n            case NoteEditMode.existingComment:\n                return 'Update comment';\n            default:\n                return 'Add note';\n        }\n    }\n\n    commentToReplyTo(notes, getParticipantById) {\n        const { editMode, noteToEdit, commentToEdit: commentId } = notes;\n        const note = notes.notes.find(note => note.noteId === noteToEdit);\n        const commentToEdit = getItemWithUuidFromArray(note.thread, commentId);\n        const event = notes.eventTypes.find(obj => obj.id === note.eventType);\n        const { color } = getParticipantById(note.uuid);\n        const threadUpToCommentToEdit = editMode === NoteEditMode.newComment\n            ? note\n            : {\n                ...note,\n                thread: note.thread.filter((comment, index) => index < note.thread.indexOf(commentToEdit)),\n            };\n        return (\n            <div className={styles.threadContainer}>\n                <TranscriptionNoteContainer\n                    event={event}\n                    color={color}\n                    note={threadUpToCommentToEdit}\n                    id={noteToEdit}\n                    interactive={false}\n                />\n            </div>\n        );\n    }\n\n    render() {\n        const {\n            notes,\n            onCloseNoteEditor,\n            meId,\n            participants,\n            getParticipantById,\n        } = this.props;\n        const {\n            showEditModal,\n            editMode,\n        } = notes;\n        const {\n            selectedUser,\n            typeId,\n            polarity,\n            text,\n            time,\n            timeChecked,\n            shareChecked,\n            acknowledgeChecked,\n            canShare,\n            isAcknowledged,\n            isShared,\n            canAcknowledge,\n            canEdit,\n            authorName,\n        } = this.state;\n        const noteTitle = this.titleForEditMode(editMode);\n        const addNoteButton = this.buttonTextForEditMode(editMode);\n        const userName = authorName;\n        let canShareNote = canShare;\n        if (selectedUser) {\n            if (selectedUser.uuid === GENERAL_NOTE_UUID) {\n                canShareNote = false;\n            } else {\n                canShareNote = canShare && selectedUser && selectedUser.userId !== Number(meId);\n            }\n        } else {\n            canShareNote = false;\n        }\n        const placeholderText = 'Add a comment to this event...';\n        const disableStyle = [];\n        if (!canEdit) disableStyle.push(styles.modalBodyDisabled);\n        const maskClasses = classNames({\n            [styles.mask]: true,\n            'ignore-nodestack': true,\n        });\n        return (\n            <div className={maskClasses}>\n                <div\n                    className={styles.NoteModal}\n                    style={{\n                        opacity: showEditModal ? '1' : '0',\n                    }}\n                >\n                    <div className={styles.modalHeader}>\n                        <div className={styles.title}>{noteTitle}</div>\n                        {userName && <div>{`Added by ${userName}`}</div>}\n                    </div>\n                    <div className={styles.modalBody}>\n                        {NoteEditMode.isNote(editMode) && (\n                            <div className={[...disableStyle, styles.noteDetailsContainer].join(' ')}>\n                                <div className={styles.detailColumn} id={styles.timeDetailColumn}>\n                                    <div className={styles.checkboxContainer}>\n                                        <label className={styles.checkboxLabel} htmlFor=\"eventTimeCheckbox\">\n                                            Event time:\n                                            <input\n                                                className={styles.checkbox}\n                                                type=\"checkbox\"\n                                                id=\"eventTimeCheckbox\"\n                                                onChange={this.handleEventTimeChecked.bind(this)}\n                                                checked={timeChecked}\n                                                disabled={!canEdit}\n                                            />\n                                        </label>\n                                    </div>\n                                    <TimeDropDown\n                                        time={time}\n                                        timeChecked={timeChecked}\n                                        canEdit={canEdit}\n                                        setTime={this.setTime}\n                                    />\n                                </div>\n                                <div className={styles.detailColumn} id={styles.userDetailColumn}>\n                                    <div>Relating to:</div>\n                                    <RelatingToDropdown\n                                        participants={participants}\n                                        selectedUser={selectedUser}\n                                        canEdit={canEdit}\n                                        isShared={isShared}\n                                        handleUserClick={this.handleUserClick}\n                                        userList={this.userList}\n                                    />\n                                </div>\n                                <div className={styles.detailColumn} id={styles.relatingToDetailColumn}>\n                                    <div>Type of event:</div>\n                                    <TypeDropdown\n                                        selectedTypeId={typeId}\n                                        eventTypesList={this.typeList}\n                                        canEdit={canEdit}\n                                        handleTypeClicked={this.handleTypeClick}\n                                    />\n                                </div>\n                                <div className={styles.detailColumn} id={styles.polarityDetailColumn}>\n                                    <div>Polarity:</div>\n                                    <TypeDropdown\n                                        selectedTypeId={polarity}\n                                        eventTypesList={notes.polarityTypes}\n                                        canEdit={canEdit}\n                                        handleTypeClicked={this.handlePolarityClick}\n                                    />\n                                </div>\n                            </div>\n                        )}\n                        {NoteEditMode.isComment(editMode) && this.commentToReplyTo(notes, getParticipantById)}\n                        <div className={[...disableStyle, styles.noteTextContainer].join(' ')}>\n                            <textarea\n                                value={decode(text)}\n                                name=\"noteDetails\"\n                                className={styles.noteDetails}\n                                rows=\"5\"\n                                onChange={this.handleTextUpdate.bind(this)}\n                                placeholder={placeholderText}\n                                onFocus={(e) => {\n                                    e.target.placeholder = '';\n                                }}\n                                onBlur={(e) => {\n                                    e.target.placeholder = placeholderText;\n                                }}\n                                disabled={!canEdit}\n                            />\n                        </div>\n                        {canAcknowledge && (\n                            <div className={styles.shareContainer}>\n                                {!isAcknowledged ? (\n                                    <label className={styles.checkboxLabel} htmlFor=\"acknowledgeCheckbox\">\n                                        Acknowledge you have received this note\n                                        <input\n                                            className={[styles.checkbox, styles.checkbox2].join(' ')}\n                                            type=\"checkbox\"\n                                            id=\"acknowledgeCheckbox\"\n                                            onChange={this.handleAcknowledgeNote.bind(this)}\n                                            checked={acknowledgeChecked}\n                                        />\n                                    </label>\n                                ) : (\n                                    <p>\n                                        Note Acknowledged\n                                    </p>\n                                )}\n                            </div>\n                        )}\n                        {selectedUser && (\n                            <div className={styles.shareContainer}>\n                                {(canShareNote && !isShared) && (\n                                    <label className={styles.checkboxLabel} htmlFor=\"shareCheckbox\">\n                                        {`Share notes with ${selectedUser.title}?`}\n                                        <input\n                                            className={[styles.checkbox, styles.checkbox2].join(' ')}\n                                            type=\"checkbox\"\n                                            id=\"shareCheckbox\"\n                                            onChange={this.handleShareNote.bind(this)}\n                                            checked={shareChecked}\n                                        />\n                                    </label>\n                                )}\n                                {isShared && (\n                                    <p>\n                                        {`Note has been shared with ${selectedUser.title}`}\n                                        {(isAcknowledged) && ' and has been acknowledged'}\n                                    </p>\n                                )}\n                            </div>\n                        )}\n                    </div>\n                    <div className={styles.modalFooter}>\n                        {(NoteEditMode.isExistingItem(editMode) ? canEdit : false) && (\n                            <button\n                                type=\"button\"\n                                className={styles.deleteButton}\n                                onClick={\n                                    NoteEditMode.isComment(editMode)\n                                        ? this.handleDeleteCommentClicked\n                                        : this.handleDeleteNoteClicked\n                                }\n                            >\n                                DELETE { NoteEditMode.isComment(editMode) ? 'COMMENT' : 'NOTE' }\n                            </button>\n                        )}\n                        <button type=\"button\" className={styles.cancelButton} onClick={onCloseNoteEditor}>CANCEL</button>\n                        <button\n                            type=\"submit\"\n                            className={styles.addButton}\n                            disabled={this.state.text === ''}\n                            onClick={this.handleSubmitClicked}\n                        >\n                            {addNoteButton}\n                        </button>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nNoteModal.propTypes = {\n    primaryUuid: PropTypes.string.isRequired,\n    notes: notesType.isRequired,\n    onCloseNoteEditor: PropTypes.func.isRequired,\n    onDeleteNote: PropTypes.func.isRequired,\n    onDeleteComment: PropTypes.func.isRequired,\n    onUpdateNote: PropTypes.func.isRequired,\n    timeline: timelineType.isRequired,\n    playhead: PropTypes.number.isRequired,\n    participants: participantsType.isRequired,\n    getParticipantById: PropTypes.func.isRequired,\n    meId: PropTypes.string.isRequired,\n    meName: PropTypes.string.isRequired,\n};\n\nexport default NoteModal;\n","import { createSelector } from 'reselect';\nimport { getParticipants } from './common-selectors';\n\nconst getParticipantByIdSelector = createSelector(\n    [getParticipants],\n    participants => uuid => participants[\n        Object.keys(participants)\n            .find(key => participants[key].relatedUuids\n                .reduce((found, relativeUuid) => found || relativeUuid === uuid))\n    ],\n);\n\nexport default getParticipantByIdSelector;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport {\n    notesType,\n    timelineType,\n    participantsType,\n} from '../shared/types';\nimport NoteModal from '../components/NoteModal/NoteModal';\nimport { getTimeline } from '../store/selectors';\nimport getParticipantByIdSelector from '../store/selectors/participantSelectors';\nimport { updateNotes, onDeleteNote as deleteNote } from '../store/actions/salesforce';\nimport { getAuthenticatedUserId, getAuthenticatedUserName } from '../store/selectors/authSelectors';\nimport { closeNoteEditor, deleteComment } from '../store/actions/notes';\n\nconst NoteModalContainer = props => (<NoteModal {...props} />);\n\nNoteModalContainer.propTypes = {\n    primaryUuid: PropTypes.string.isRequired,\n    notes: notesType.isRequired,\n    onCloseNoteEditor: PropTypes.func.isRequired,\n    onDeleteNote: PropTypes.func.isRequired,\n    onDeleteComment: PropTypes.func.isRequired,\n    onUpdateNote: PropTypes.func.isRequired,\n    timeline: timelineType.isRequired,\n    playhead: PropTypes.number.isRequired,\n    participants: participantsType.isRequired,\n    getParticipantById: PropTypes.func.isRequired,\n    meId: PropTypes.string.isRequired,\n    meName: PropTypes.string.isRequired,\n};\n\nconst mapStateToProps = (state) => {\n    const {\n        primaryUuid, notes, participants, playback: { playhead },\n    } = state;\n    return {\n        primaryUuid,\n        notes,\n        playhead,\n        timeline: getTimeline(state),\n        participants,\n        getParticipantById: getParticipantByIdSelector(state),\n        meId: getAuthenticatedUserId(state),\n        meName: getAuthenticatedUserName(state),\n    };\n};\n\nconst mapDispatchToProps = dispatch => ({\n    onCloseNoteEditor: () => {\n        dispatch(closeNoteEditor());\n    },\n    onDeleteNote: (id) => {\n        dispatch(deleteNote(id));\n        dispatch(closeNoteEditor());\n    },\n    onDeleteComment: (noteId, commentId) => {\n        dispatch(deleteComment(noteId, commentId));\n        dispatch(closeNoteEditor());\n    },\n    onUpdateNote: (note, logTime) => {\n        dispatch(updateNotes(note, logTime));\n        dispatch(closeNoteEditor());\n    },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NoteModalContainer);\n","export default class NodeStack {\n    static filterElements(event) {\n        const position = {\n            x: event.pageX,\n            y: event.pageY,\n        };\n        let range;\n        return (element) => {\n            const rect = element.getBoundingClientRect();\n            range = {\n                x: [rect.left,\n                    rect.left + rect.width],\n                y: [rect.top,\n                    rect.top + rect.height],\n            };\n            return (position.x >= range.x[0] && position.x <= range.x[1])\n                && (position.y >= range.y[0] && position.y <= range.y[1]);\n        };\n    }\n\n    constructor(selector) {\n        this.selector = selector;\n        this.hover = {\n            duration: 1000,\n            action: null,\n            handler: null,\n        };\n        this.clear = {\n            action: null,\n            items: [],\n        };\n        this.click = {\n            action: null,\n        };\n        window.addEventListener('click', (event) => {\n            const elements = this.elementsMatchingSelectorAndEvent(this.selector, event);\n            if (typeof this.click.action === 'function' && elements.length > 0) {\n                this.click.action(elements);\n            }\n        });\n        window.addEventListener('mousemove', (event) => {\n            if (typeof this.clear.action === 'function' && this.clear.items.length > 0) {\n                this.clear.action(this.clear.items);\n                this.clear.items = [];\n            }\n            if (this.hover.handler !== null) {\n                clearTimeout(this.hover.handler);\n                this.hover.handler = null;\n            }\n            this.hover.handler = setTimeout(() => {\n                const elements = this.elementsMatchingSelectorAndEvent(this.selector, event);\n                if (typeof this.hover.action === 'function' && elements.length > 0) {\n                    this.clear.items = this.hover.action(elements) || elements;\n                }\n                this.hover.handler = null;\n            }, this.hover.duration);\n        });\n    }\n\n    elementsMatchingSelectorAndEvent(selector, event) {\n        const filterElements = NodeStack.filterElements(event);\n        const elements = document.querySelectorAll(this.selector);\n        const keys = Object.keys(elements);\n        if (keys.length === 0) {\n            return [];\n        }\n        const ignore = document.querySelectorAll('.ignore-nodestack');\n        if (ignore.length > 0) {\n            return [];\n        }\n        return keys\n            .map(key => elements[key])\n            .filter(filterElements);\n    }\n\n    onClick(action) {\n        this.click.action = action;\n        return this;\n    }\n\n    onHover(action) {\n        this.hover.action = action;\n        return this;\n    }\n\n    onClear(action) {\n        this.clear.action = action;\n        return this;\n    }\n\n    duration(duration) {\n        this.hover.duration = duration;\n        return this;\n    }\n}\n","export const CLASSIFICATION_TYPE_ALERT = 'Alert';\nexport const CLASSIFICATION_TYPE_CHECKPOINT = 'Checkpoint';\nexport const CLASSIFICATION_TYPE_CONCEPT = 'Concept';\n\n/**\n * A classification is \"positive\" if it was expected and did happen\n */\nexport function classificationIsPositive(category) {\n    return (category.Trigger.toUpperCase() === 'EXPECTED' && category.CategoryValue === 1);\n}\n\n/**\n * A classification is a warning if it was expected but didn't happen\n */\nexport function classificationIsWarning(category) {\n    return category.Trigger.toUpperCase() === 'EXPECTED' && category.CategoryValue === 0;\n}\n\n/**\n * A classification is negative if it was unexpected and did happen\n */\nexport function classificationIsNegative(category) {\n    return category.Trigger.toUpperCase() === 'UNEXPECTED' && category.CategoryValue === 1;\n}\n\n/**\n * A classification is an exception if it's either a warning or negative\n */\nexport function classificationIsException(category) {\n    return classificationIsWarning(category) || classificationIsNegative(category);\n}\n\n/**\n * A classification for information only (and it did happen)\n */\nexport function classificationIsInfoThatHappened(category) {\n    return category.Trigger.toUpperCase() === 'INFO' && category.CategoryValue === 1;\n}\n\n/**\n * A classification is \"triggered\" if it was either\n * - an exception, a positive classification or\n * - an info item that happened\n */\nexport function classificationIsTriggered(category) {\n    return classificationIsException(category) || classificationIsPositive(category)\n        || classificationIsInfoThatHappened(category);\n}\n\n/**\n * Defines the weighting of a classification to aid in sorting an array. The order is:\n * - Positive\n * - Negative\n * - Warning\n * - Info\n */\nexport function classificationWeighting(category) {\n    if (classificationIsPositive(category)) {\n        return 10;\n    }\n    if (classificationIsNegative(category)) {\n        return 20;\n    }\n    if (classificationIsWarning(category)) {\n        return 30;\n    }\n    return 40;\n}\n\nexport function classificationDescription(category) {\n    if (category.Trigger.toUpperCase() === 'EXPECTED') {\n        if (category.CategoryValue === 1) {\n            return 'This was expected to trigger and did';\n        }\n        return 'This was expected to trigger but did not';\n    }\n    if (category.Trigger.toUpperCase() === 'UNEXPECTED') {\n        if (category.CategoryValue === 1) {\n            return 'This was not expected to trigger but did';\n        }\n        return 'This was not expected to trigger and did not';\n    }\n    if (category.Trigger.toUpperCase() === 'INFO' && category.CategoryValue === 1) {\n        return 'This was triggered and was flagged as interesting to you';\n    }\n\n    return null;\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport styles from './KnowledgeClassificationPill.module.scss';\nimport {\n    classificationDescription,\n    classificationIsNegative,\n    classificationIsPositive,\n    classificationIsInfoThatHappened,\n    classificationIsWarning,\n} from '../../shared/utility/classifications';\n\nexport default function KnowledgeClassificationPill(props) {\n    const { category, isSelected, onClick } = props;\n    const classes = classNames({\n        [styles.classificationPill]: true,\n    });\n    const indicatorClasses = classNames({\n        [styles.classificationIndicator]: true,\n        [styles.positive]: classificationIsPositive(category),\n        [styles.negative]: classificationIsNegative(category),\n        [styles.warning]: classificationIsWarning(category),\n        [styles.info]: classificationIsInfoThatHappened(category),\n    });\n    const tooltip = classificationDescription(category);\n    const displayName = (category.DisplayName || '').replace(/_/g, ' ');\n    return (\n        <div\n            className={classes}\n            key={category.DisplayName}\n            data-metric={category.Name}\n            data-metric-selected={isSelected}\n            data-tooltip={tooltip}\n            onClick={onClick}\n            onKeyPress={onClick}\n            role=\"button\"\n            tabIndex=\"-1\"\n        >\n            <div className={indicatorClasses} />\n            <div className={styles.pillText}>{displayName}</div>\n        </div>\n    );\n}\n\nKnowledgeClassificationPill.propTypes = {\n    category: PropTypes.shape({\n        Name: PropTypes.string,\n        CategoryValue: PropTypes.number,\n        DisplayName: PropTypes.string,\n        Trigger: PropTypes.string,\n    }).isRequired,\n    isSelected: PropTypes.bool.isRequired,\n    onClick: PropTypes.func,\n};\n\nKnowledgeClassificationPill.defaultProps = {\n    onClick: null,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './KnowledgeKeywordTopicPill.module.scss';\n\nexport default function KnowledgeKeywordTopicPill(props) {\n    const {\n        colors,\n        isSelected,\n        onClick,\n        showLeftIndicator,\n        showRightIndicator,\n        text,\n        modalPill,\n        modalCategoryPill,\n    } = props;\n    let pillStyle = styles.pill;\n    if (modalPill) {\n        pillStyle = styles.pillModal;\n    } else if (modalCategoryPill) {\n        pillStyle = styles.pillCategoryModal;\n    }\n    return (\n        <div\n            onClick={onClick}\n            className={pillStyle}\n            role=\"button\"\n            onKeyPress={onClick}\n            tabIndex=\"-1\"\n            data-metric={text}\n            data-metric-selected={isSelected}\n        >\n            <div className={styles.pillText}>{text}</div>\n            <div className={styles.pillColourContainer}>\n                <div style={{ backgroundColor: colors[0], display: showLeftIndicator ? 'block' : 'none' }} />\n                <div style={{ backgroundColor: colors[1], display: showRightIndicator ? 'block' : 'none' }} />\n            </div>\n        </div>\n    );\n}\n\nKnowledgeKeywordTopicPill.propTypes = {\n    colors: PropTypes.arrayOf(PropTypes.string),\n    isSelected: PropTypes.bool.isRequired,\n    onClick: PropTypes.func,\n    showLeftIndicator: PropTypes.bool.isRequired,\n    showRightIndicator: PropTypes.bool.isRequired,\n    text: PropTypes.string.isRequired,\n    modalPill: PropTypes.bool,\n    modalCategoryPill: PropTypes.bool,\n};\n\nKnowledgeKeywordTopicPill.defaultProps = {\n    colors: ['#444', '#aaa'],\n    onClick: null,\n    modalPill: false,\n    modalCategoryPill: false,\n};\n","/* eslint-disable react/jsx-one-expression-per-line */\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport {\n    callSummaryType,\n    knowledgeSelectedItemType,\n    scrubType,\n    searchType,\n    timelineType,\n    transcriptionType,\n    viewportType,\n} from '../../shared/types';\nimport styles from './Knowledge.module.scss';\nimport {\n    classificationIsNegative,\n    classificationIsException,\n    classificationIsTriggered,\n    classificationIsWarning,\n    classificationWeighting,\n    classificationIsInfoThatHappened,\n} from '../../shared/utility/classifications';\nimport {\n    KNOWLEDGE_TYPE_CLASSIFICATION,\n    KNOWLEDGE_TYPE_KEYWORD,\n    KNOWLEDGE_TYPE_TOPIC,\n} from '../../store/constants/knowledge';\nimport KnowledgeClassificationPill from '../KnowledgeClassificationPill/KnowledgeClassificationPill';\nimport KnowledgeKeywordTopicPill from '../KnowledgeKeywordTopicPill/KnowledgeKeywordTopicPill';\nimport { STATUS_EMPTY, STATUS_LOADING } from '../../store/constants/data';\n\nclass Knowledge extends Component {\n    static generateClassifications(transcription, type, selectedItem, handleClick) {\n        const categories = transcription.Categories || [];\n        const items = categories.filter(item => item.Type.toUpperCase() === type.toUpperCase()\n            && (classificationIsWarning(item) || classificationIsNegative(item)));\n        if (items.length === 0) {\n            return [];\n        }\n        const handleClassificationClick = typeof handleClick === 'function' ? handleClick(KNOWLEDGE_TYPE_CLASSIFICATION) : null;\n        return Knowledge.processChannelClassifications(items, selectedItem, handleClassificationClick);\n    }\n\n    static generateAllClassifications(transcription, selectedItem, handleClick) {\n        const categories = transcription.Categories || [];\n        const items = categories.filter(item => classificationIsTriggered(item))\n            .sort((a, b) => {\n                const aWeighting = classificationWeighting(a);\n                const bWeighting = classificationWeighting(b);\n                return aWeighting - bWeighting;\n            });\n        if (items.length === 0) {\n            return [];\n        }\n        const handleClassificationClick = typeof handleClick === 'function' ? handleClick(KNOWLEDGE_TYPE_CLASSIFICATION) : null;\n        return Knowledge.processChannelClassifications(items, selectedItem, handleClassificationClick);\n    }\n\n    static generateKeywords(transcription, colors, selectedItem, handleClick) {\n        if (transcription['1'].Keywords.length === 0 && transcription['2'].Keywords.length === 0) {\n            return [];\n        }\n\n        const handleKeywordClick = typeof handleClick === 'function' ? handleClick(KNOWLEDGE_TYPE_KEYWORD) : null;\n        return Knowledge.processKeywordsTopics(\n            transcription,\n            'Keywords',\n            'Keyword',\n            KNOWLEDGE_TYPE_KEYWORD,\n            colors,\n            selectedItem,\n            handleKeywordClick,\n        );\n    }\n\n    static generateTopics(transcription, colors, selectedItem, handleClick) {\n        if (transcription['1'].Topics.length === 0 && transcription['2'].Topics.length === 0) {\n            return [];\n        }\n\n        const handleTopicClick = typeof handleClick === 'function' ? handleClick(KNOWLEDGE_TYPE_TOPIC) : null;\n        return Knowledge.processKeywordsTopics(\n            transcription,\n            'Topics',\n            'Topic',\n            KNOWLEDGE_TYPE_TOPIC,\n            colors,\n            selectedItem,\n            handleTopicClick,\n        );\n    }\n\n    static processChannelClassifications(classifications, selectedItem, handleClick) {\n        return classifications.map((item) => {\n            const isSelected = selectedItem.type === KNOWLEDGE_TYPE_CLASSIFICATION && selectedItem.identifier === item.Name;\n            return (\n                <KnowledgeClassificationPill\n                    key={item.Name}\n                    category={item}\n                    isSelected={isSelected}\n                    onClick={handleClick}\n                />\n            );\n        });\n    }\n\n    static processKeywordsTopics(transcription, outerKey, innerKey, type, colors, selectedItem, handleClick) {\n        const combined = {};\n        transcription['1'][outerKey].forEach((value) => {\n            const item = combined[value[innerKey]] || { ...value };\n            item['1'] = true;\n            combined[value[innerKey]] = item;\n        });\n        transcription['2'][outerKey].forEach((value) => {\n            const item = combined[value[innerKey]] || { ...value };\n            item['2'] = true;\n            combined[value[innerKey]] = item;\n        });\n\n        return Knowledge.generateMarkupForKeywordsTopics(\n            innerKey,\n            Object.values(combined),\n            type,\n            colors,\n            selectedItem,\n            handleClick,\n        );\n    }\n\n    static generateMarkupForKeywordsTopics(key, items, type, colors = ['#444', '#aaa'], selectedItem, handleClick) {\n        return items.map((item) => {\n            const isSelected = selectedItem.type === type && selectedItem.identifier === item[key];\n            return (\n                <KnowledgeKeywordTopicPill\n                    key={`${item[key]}`}\n                    colors={colors}\n                    isSelected={isSelected}\n                    onClick={handleClick}\n                    showLeftIndicator={item['1'] === true}\n                    showRightIndicator={item['2'] === true}\n                    text={item[key]}\n                />\n            );\n        });\n    }\n\n    static hasClassificationExceptionsOrInfo(transcription) {\n        const categories = transcription.Categories || [];\n        const items = categories.filter(item => classificationIsException(item) || classificationIsInfoThatHappened(item));\n        return items.length > 0;\n    }\n\n    constructor(props) {\n        super(props);\n        this.handleClick = this.handleClick.bind(this);\n        this.setPlayHeadPosition = this.setPlayHeadPosition.bind(this);\n    }\n\n    setPlayHeadPosition(position) {\n        const { onSetScrollToMatch, scrub, viewport } = this.props;\n        const { span } = viewport;\n\n        // Timeline\n        const scrubWidth = (scrub.end - scrub.start);\n        const scrubMiddle = scrub.start + (scrubWidth / 2);\n        const scrubDiff = position - scrubMiddle;\n        const scrubStart = Math.min(Math.max(0, scrub.start + scrubDiff), 100 - scrubWidth);\n        const scrubEnd = scrubStart + scrubWidth;\n\n        // Transcription\n        const vpMiddle = viewport.start + (span / 2);\n        const vpDiff = position - vpMiddle;\n        const vpStart = Math.min(Math.max(0, viewport.start + vpDiff), 100 - span);\n\n        onSetScrollToMatch(position, { start: scrubStart, end: scrubEnd }, { start: vpStart, span });\n    }\n\n    handleClick(type) {\n        return (event) => {\n            const { onClassificationSelected, onKeywordSelected, onTopicSelected } = this.props;\n            const filter = event.target.dataset.metric;\n            if (typeof filter === 'undefined') {\n                return;\n            }\n            if (type === KNOWLEDGE_TYPE_CLASSIFICATION) {\n                onClassificationSelected(filter);\n            } else if (type === KNOWLEDGE_TYPE_KEYWORD) {\n                onKeywordSelected(filter);\n            } else if (type === KNOWLEDGE_TYPE_TOPIC) {\n                onTopicSelected(filter);\n            }\n        };\n    }\n\n    loadingBar(show) {\n        const { loadProgress } = this.props;\n        const classes = classNames({\n            [styles.progressBarContainer]: true,\n            hidden: !show,\n        });\n        const style = {\n            width: `${loadProgress}%`,\n        };\n        return (\n            <div className={classes}>\n                <div className={styles.progressBarOuter}>\n                    {loadProgress > 0 && <div className={styles.progressBar} style={style} />}\n                </div>\n                <div>\n                    {loadProgress}\n                    %\n                </div>\n            </div>\n        );\n    }\n\n    render() {\n        const {\n            status: { status },\n            callSummary,\n            selectedItem,\n            onClickShowAllClassifications,\n            transcription,\n            onClickShowAllKeyWords,\n        } = this.props;\n\n        const isLoading = status === STATUS_LOADING;\n\n        if (status === STATUS_EMPTY || transcription[1] === null) {\n            return this.loadingBar(isLoading);\n        }\n\n        const allClassifications = Knowledge.generateAllClassifications(transcription, selectedItem, this.handleClick);\n        const keywords = Knowledge.generateKeywords(transcription, callSummary.keyCallers.colors, selectedItem, this.handleClick);\n        const topics = Knowledge.generateTopics(transcription, callSummary.keyCallers.colors, selectedItem, this.handleClick);\n        const totalClassifications = allClassifications.length;\n        const totalKeysAndTopics = keywords.length + topics.length;\n\n        return (\n            <div className={`column-container ${styles.content}`}>\n                <div className={`column ${styles.column} ${styles.classificationsExceptionColumn}`}>\n                    <div className={styles.classificationsExceptionHeader}>\n                        <p className={styles.title}>Keywords:</p>\n                        {totalKeysAndTopics > 0 && (\n                            <button\n                                type=\"button\"\n                                className={styles.showAll}\n                                onClick={onClickShowAllKeyWords}\n                            >\n                                View {totalKeysAndTopics > 1 ? 'All ' : ''}\n                                {totalKeysAndTopics} Item{totalKeysAndTopics === 1 ? '' : 's'}\n                            </button>\n                        )}\n                    </div>\n                    <hr />\n                    <div className={styles.pillContainer}>\n                        {keywords.length > 0 && keywords}\n                        {keywords.length === 0 && (<p className=\"text-grey-primary\">No keywords found</p>)}\n                    </div>\n                    {/*  commenting out topics UI for now */}\n                    {/* <p className={`${styles.title} ${styles.topics}`}>Topics:</p>\n                    <hr />\n                    <div className={styles.pillContainer}>\n                        {topics.length > 0 && topics}\n                        {topics.length === 0 && (<p className=\"text-grey-primary\">No topics found</p>)}\n                    </div> */}\n                </div>\n                <div className={styles.spacer} />\n                <div className={`column ${styles.column} ${styles.classificationsExceptionColumn}`}>\n                    <div className={styles.classificationsExceptionHeader}>\n                        <p className={styles.title}>Top Categories:</p>\n                        {totalClassifications > 0 && (\n                            <button\n                                type=\"button\"\n                                className={styles.showAll}\n                                onClick={onClickShowAllClassifications}\n                            >\n                                View {totalClassifications > 1 ? 'All ' : ''}\n                                {totalClassifications} Item{totalClassifications === 1 ? '' : 's'}\n                            </button>\n                        )}\n                    </div>\n                    <hr />\n                    {\n                        Knowledge.hasClassificationExceptionsOrInfo(transcription) && (\n                            <div className={styles.classificationContainer}>\n                                {allClassifications}\n                            </div>\n                        )\n                    }\n                    {\n                        !Knowledge.hasClassificationExceptionsOrInfo(transcription) && (\n                            <div className={styles.classificationsEmpty}>\n                                <div>\n                                    No categories were flagged for this call.\n                                </div>\n                            </div>\n                        )\n                    }\n                </div>\n            </div>\n        );\n    }\n}\n\nKnowledge.propTypes = {\n    callSummary: callSummaryType.isRequired,\n    onClassificationSelected: PropTypes.func.isRequired,\n    onKeywordSelected: PropTypes.func.isRequired,\n    onTopicSelected: PropTypes.func.isRequired,\n    onSetSearchMatch: PropTypes.func.isRequired,\n    onSetScrollToMatch: PropTypes.func.isRequired,\n    search: searchType.isRequired,\n    selectedItem: knowledgeSelectedItemType.isRequired,\n    transcription: transcriptionType.isRequired,\n    timeline: timelineType.isRequired,\n    scrub: scrubType.isRequired,\n    viewport: viewportType.isRequired,\n    onClickShowAllClassifications: PropTypes.func.isRequired,\n    onClickShowAllKeyWords: PropTypes.func.isRequired,\n};\n\nexport default Knowledge;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport Knowledge from '../components/Knowledge/Knowledge';\nimport {\n    activeLayersType,\n    callSummaryType,\n    knowledgeSelectedItemType,\n    searchType,\n    timelineType,\n    scrubType,\n    transcriptionType,\n    viewportType, statusType,\n} from '../shared/types';\nimport {\n    movePlayHead,\n    moveScrubber,\n    updateTranscriptionViewport,\n} from '../store/actions/actions';\nimport { setCurrentMatch } from '../store/actions/search';\nimport { getTimeline } from '../store/selectors';\nimport {\n    getRawDataFromTranscriptionState,\n    getLoadProgress,\n} from '../store/selectors/common-selectors';\nimport {\n    openClassificationsDialog,\n    selectKnowledgeClassification,\n    selectKnowledgeKeyword,\n    selectKnowledgeTopic,\n    openKeywordsTopicsDialog,\n} from '../store/actions/knowledge';\n\nfunction KnowledgeContainer(props) {\n    const {\n        status,\n        onClassificationSelected,\n        onKeywordSelected,\n        onTopicSelected,\n        activeLayers,\n        callSummary,\n        onSetSearchMatch,\n        search,\n        selectedItem,\n        transcription,\n        onSetScrollToMatch,\n        timeline,\n        scrub,\n        viewport,\n        onClickShowAllClassifications,\n        onClickShowAllKeyWords,\n        loadProgress,\n    } = props;\n    return (\n        <Knowledge\n            status={status}\n            onClassificationSelected={onClassificationSelected}\n            onKeywordSelected={onKeywordSelected}\n            onTopicSelected={onTopicSelected}\n            activeLayers={activeLayers}\n            callSummary={callSummary}\n            onSetSearchMatch={onSetSearchMatch}\n            selectedItem={selectedItem}\n            search={search}\n            transcription={transcription}\n            timeline={timeline}\n            scrub={scrub}\n            viewport={viewport}\n            onSetScrollToMatch={onSetScrollToMatch}\n            onClickShowAllClassifications={onClickShowAllClassifications}\n            onClickShowAllKeyWords={onClickShowAllKeyWords}\n            loadProgress={loadProgress}\n        />\n    );\n}\n\nKnowledgeContainer.propTypes = {\n    transcription: transcriptionType.isRequired,\n    activeLayers: activeLayersType.isRequired,\n    callSummary: callSummaryType.isRequired,\n    onClassificationSelected: PropTypes.func.isRequired,\n    onKeywordSelected: PropTypes.func.isRequired,\n    onTopicSelected: PropTypes.func.isRequired,\n    onSetSearchMatch: PropTypes.func.isRequired,\n    onSetScrollToMatch: PropTypes.func.isRequired,\n    onClickShowAllClassifications: PropTypes.func.isRequired,\n    onClickShowAllKeyWords: PropTypes.func.isRequired,\n    search: searchType.isRequired,\n    selectedItem: knowledgeSelectedItemType.isRequired,\n    timeline: timelineType.isRequired,\n    scrub: scrubType.isRequired,\n    viewport: viewportType.isRequired,\n    status: statusType.isRequired,\n    loadProgress: PropTypes.number,\n};\n\nconst mapStateToProps = (state) => {\n    const {\n        status,\n        activeLayers,\n        callSummary,\n        knowledge,\n        search,\n        scrub,\n        transcription: { viewport },\n    } = state;\n    return {\n        status,\n        activeLayers,\n        callSummary,\n        search,\n        scrub,\n        selectedItem: knowledge.selectedItem,\n        transcription: getRawDataFromTranscriptionState(state),\n        timeline: getTimeline(state),\n        viewport,\n        loadProgress: getLoadProgress(state),\n    };\n};\n\nconst mapDispatchToProps = dispatch => ({\n    onClassificationSelected: (item) => {\n        dispatch(selectKnowledgeClassification(item));\n    },\n    onKeywordSelected: (item) => {\n        dispatch(selectKnowledgeKeyword(item));\n    },\n    onTopicSelected: (item) => {\n        dispatch(selectKnowledgeTopic(item));\n    },\n    onSetSearchMatch: (match) => {\n        dispatch(setCurrentMatch(match));\n    },\n    onSetScrollToMatch: (position, scrub, viewport) => {\n        dispatch(movePlayHead(position));\n        dispatch(moveScrubber(scrub));\n        dispatch(updateTranscriptionViewport(viewport));\n    },\n    onClickShowAllClassifications: () => {\n        dispatch(openClassificationsDialog());\n    },\n    onClickShowAllKeyWords: () => {\n        dispatch(openKeywordsTopicsDialog());\n    },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(KnowledgeContainer);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport styles from './Insights.module.scss';\nimport {\n    FILTER_CALL_QUEUING, FILTER_HOLD_UNHOLD, FILTER_LISTEN_IN, FILTER_NEW_PARTY, FILTER_TRANSFER,\n    TRANSCRIPTION_CONFIDENCE,\n} from '../../store/constants/metrics-layers';\nimport { activeLayersType, callSummaryType, dataType, timelineType } from '../../shared/types';\nimport {\n    AFFIRMATION,\n    CLASH_WIN,\n    INTERRUPTION,\n    STEAL,\n} from '../../store/constants/audio-events';\nimport {\n    TOGGLE_ROUTING,\n} from '../../store/actions/status';\nimport { textColorForBackground } from '../../shared/utility/colors';\nimport { formatTime } from '../../shared/utility/formatting';\nimport { STATUS_EMPTY } from '../../store/constants/data';\n\nclass Insights extends Component {\n    static calculateStatistics(talkTime, id) {\n        if (talkTime === null) {\n            return {};\n        }\n\n        return {\n            clashWins: talkTime[id].filter(item => item.event === CLASH_WIN).length,\n            affirmations: talkTime[id].filter(item => item.event === AFFIRMATION).length,\n            interruptions: talkTime[id].filter(item => item.event === INTERRUPTION).length,\n            steals: talkTime[id].filter(item => item.event === STEAL).length,\n        };\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.handleInputChange = this.handleInputChange.bind(this);\n    }\n\n    handleInputChange(metric) {\n        return (event) => {\n            const { onToggleLayer, onToggleRouting } = this.props;\n            if (metric === TOGGLE_ROUTING) {\n                onToggleRouting();\n                return;\n            }\n            const { target } = event;\n            onToggleLayer(target.id);\n        };\n    }\n\n    renderMetrics(metrics, colors = []) {\n        const output = [];\n        Object.keys(metrics).forEach((metric) => {\n            const detail = metrics[metric];\n            const { checked, subtitle, disabled } = detail;\n            const isSubtitled = typeof subtitle === 'string' && subtitle.length > 0;\n            output.push(\n                <div key={metric} className={styles.formCheck}>\n                    <label htmlFor={metric}>\n                        <input\n                            type=\"checkbox\"\n                            id={metric}\n                            checked={checked}\n                            onChange={this.handleInputChange(metric)}\n                            disabled={disabled === true}\n                        />\n                        <span>{detail.title}</span>\n                        {isSubtitled && <span className={styles.subtitle}>{detail.subtitle}</span>}\n                    </label>\n                    {typeof detail.indicator !== 'undefined' && detail.indicator.total > 0 && (\n                        <div className={styles.indicator}>\n                            <div\n                                style={{\n                                    width: `${detail.indicator.left / detail.indicator.total * 100}%`,\n                                    backgroundColor: colors[0],\n                                }}\n                                className={textColorForBackground(colors[0], ['text-black', 'text-white'])}\n                            >\n                                {detail.indicator.left}\n                            </div>\n                            <div\n                                style={{\n                                    width: `${detail.indicator.right / detail.indicator.total * 100}%`,\n                                    backgroundColor: colors[1],\n                                }}\n                                className={textColorForBackground(colors[1], ['text-black', 'text-white'])}\n                            >\n                                {detail.indicator.right}\n                            </div>\n                        </div>\n                    )}\n                </div>,\n            );\n        });\n        return output;\n    }\n\n    render() {\n        const {\n            status: { status },\n            data,\n            callSummary,\n            isDisplayRouting,\n            timeline: {\n                unrecordedTime,\n            },\n            activeLayers,\n        } = this.props;\n        if (status === STATUS_EMPTY) {\n            return null;\n        }\n        const { talkTime } = data;\n        // TODO: Remove eslint-disable once correct data.\n        const summary = { // eslint-disable-line no-unused-vars\n            1: Insights.calculateStatistics(talkTime, 1),\n            2: Insights.calculateStatistics(talkTime, 2),\n        };\n\n        const hasUnrecordedTime = unrecordedTime > 0;\n        const formattedUnrecordedTime = hasUnrecordedTime ? formatTime(unrecordedTime / 1000000) : '--';\n        const eventMetrics = {\n            [FILTER_HOLD_UNHOLD]: {\n                title: 'Hold/Unhold',\n                checked: activeLayers.includes(FILTER_HOLD_UNHOLD),\n            },\n            [FILTER_TRANSFER]: {\n                title: 'Transfer',\n                checked: activeLayers.includes(FILTER_TRANSFER),\n            },\n            [FILTER_LISTEN_IN]: {\n                title: 'Listen In',\n                checked: activeLayers.includes(FILTER_LISTEN_IN),\n            },\n            [FILTER_CALL_QUEUING]: {\n                title: 'Call Queuing',\n                checked: activeLayers.includes(FILTER_CALL_QUEUING),\n            },\n            [FILTER_NEW_PARTY]: {\n                title: 'New Party Joins/Leaves',\n                checked: activeLayers.includes(FILTER_NEW_PARTY),\n            },\n        };\n\n        const leftMetrics = {\n            // TODO: Uncomment once correct data.\n            // [BACKGROUND_NOISE_LEVEL]: {\n            //     title: 'Background Noise Level',\n            // },\n            [TRANSCRIPTION_CONFIDENCE]: {\n                title: 'Transcription Confidence',\n            },\n            [TOGGLE_ROUTING]: {\n                title: 'View Full Call',\n                checked: isDisplayRouting,\n                subtitle: `${formattedUnrecordedTime} of additional unrecorded time is available`,\n                disabled: !hasUnrecordedTime,\n            },\n        };\n        const rightMetrics = {\n            // TODO: Uncomment once correct data.\n            // [CLASH_WINS]: {\n            //     title: 'Clash wins',\n            //     indicator: {\n            //         left: summary['1'].clashWins,\n            //         right: summary['2'].clashWins,\n            //         total: summary['1'].clashWins + summary['2'].clashWins,\n            //     },\n            // },\n            // [AFFIRMATIONS]: {\n            //     title: 'Affirmations',\n            //     indicator: {\n            //         left: summary['1'].affirmations,\n            //         right: summary['2'].affirmations,\n            //         total: summary['1'].affirmations + summary['2'].affirmations,\n            //     },\n            // },\n            // [INTERRUPTIONS]: {\n            //     title: 'Interruptions',\n            //     indicator: {\n            //         left: summary['1'].interruptions,\n            //         right: summary['2'].interruptions,\n            //         total: summary['1'].interruptions + summary['2'].interruptions,\n            //     },\n            // },\n            // [STEALS]: {\n            //     title: 'Steals',\n            //     indicator: {\n            //         left: summary['1'].steals,\n            //         right: summary['2'].steals,\n            //         total: summary['1'].steals + summary['2'].steals,\n            //     },\n            // },\n        };\n        const thirdWidthColumn = classNames({\n            [styles.thirdWidth]: true,\n        });\n        const halfWidthColumn = classNames({\n            [styles.halfWidth]: true,\n        });\n        return (\n            <div className={styles.container}>\n                <div className=\"column-container\">\n                    <div className={thirdWidthColumn}>\n                        <p className={styles.title}>Call Events on Scrubber</p>\n                        <hr className={styles.separator} />\n                        {this.renderMetrics(eventMetrics, callSummary.keyCallers.colors)}\n                    </div>\n                    <div className=\"vertical-spacer\" />\n                    <div className=\"column\">\n                        <p className={styles.title}>Additional Metrics</p>\n                        <hr className={styles.separator} />\n                        <div className=\"column-container\">\n                            <div className={halfWidthColumn}>\n                                {this.renderMetrics(leftMetrics, callSummary.keyCallers.colors)}\n                            </div>\n                            <div className={halfWidthColumn}>\n                                {this.renderMetrics(rightMetrics, callSummary.keyCallers.colors)}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nInsights.propTypes = {\n    data: dataType.isRequired,\n    onToggleLayer: PropTypes.func.isRequired,\n    onToggleRouting: PropTypes.func.isRequired,\n    isDisplayRouting: PropTypes.bool.isRequired,\n    callSummary: callSummaryType.isRequired,\n    timeline: timelineType.isRequired,\n    activeLayers: activeLayersType,\n};\n\nInsights.defaultProps = {\n    activeLayers: [],\n};\n\nexport default Insights;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport {\n    dataType, callSummaryType, timelineType, activeLayersType, statusType,\n} from '../shared/types';\nimport { pause, toggleMetricsLayer } from '../store/actions/actions';\nimport Insights from '../components/Insights/Insights';\nimport { toggleRouting } from '../store/actions/status';\nimport { getIsDisplayingRoutingState } from '../store/selectors/common-selectors';\nimport { getTimeline } from '../store/selectors';\nimport { createAudioEvents } from '../store/actions/audio';\n\nfunction InsightsContainer(props) {\n    const {\n        status,\n        data,\n        onToggleLayer,\n        onToggleRouting,\n        isDisplayRouting,\n        timeline,\n        callSummary,\n        activeLayers,\n    } = props;\n    return (\n        <Insights\n            status={status}\n            data={data}\n            onToggleLayer={onToggleLayer}\n            onToggleRouting={onToggleRouting}\n            isDisplayRouting={isDisplayRouting}\n            callSummary={callSummary}\n            timeline={timeline}\n            activeLayers={activeLayers}\n        />\n    );\n}\n\nInsightsContainer.propTypes = {\n    status: statusType.isRequired,\n    data: dataType.isRequired,\n    onToggleLayer: PropTypes.func.isRequired,\n    onToggleRouting: PropTypes.func.isRequired,\n    isDisplayRouting: PropTypes.bool.isRequired,\n    callSummary: callSummaryType.isRequired,\n    timeline: timelineType.isRequired,\n    activeLayers: activeLayersType,\n};\n\nInsightsContainer.defaultProps = {\n    activeLayers: [],\n};\n\nconst mapStateToProps = (state) => {\n    const {\n        status,\n        data,\n        callSummary,\n        activeLayers,\n    } = state;\n    return {\n        status,\n        data,\n        callSummary,\n        isDisplayRouting: getIsDisplayingRoutingState(state),\n        timeline: getTimeline(state),\n        activeLayers,\n    };\n};\n\nconst mapDispatchToProps = dispatch => ({\n    onToggleLayer: (position) => {\n        dispatch(toggleMetricsLayer(position));\n    },\n    onToggleRouting: () => {\n        dispatch(pause());\n        dispatch(toggleRouting());\n        dispatch(createAudioEvents());\n    },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(InsightsContainer);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './Dropdown.module.scss';\nimport { dropDownOptionsType } from '../../shared/types';\nimport Avatar from '../Avatar/Avatar';\n\n/* eslint-disable react/prefer-stateless-function */\n\nclass Dropdown extends Component {\n    optionsList() {\n        const { id, options, selection } = this.props;\n        return Object.keys(options).map((key) => {\n            const option = options[key];\n            return (\n                /* eslint-disable jsx-a11y/label-has-for */\n                <label\n                    className={`${styles.dropdownItem} ${key === selection ? styles.selected : ''}`}\n                    key={`focus-${key}`}\n                    htmlFor={id}\n                    onClick={this.handleChange(key)}\n                >\n                    <Avatar\n                        isAvatar={!!option.avatar}\n                        url={option.avatar || option.icon}\n                        color={option.color}\n                    />\n                    <div className={styles.viewName}>\n                        {option.viewName}\n                    </div>\n                </label>\n                /* eslint-enable jsx-a11y/label-has-for */\n            );\n        });\n    }\n\n    handleChange(selection) {\n        const { onChange } = this.props;\n        return () => {\n            onChange(selection);\n        };\n    }\n\n    render() {\n        const { id, selection, options } = this.props;\n        /* eslint-disable jsx-a11y/label-has-for, jsx-a11y/label-has-associated-control */\n        let dropdownHTML = (\n            <label className={styles.dropdownButton} htmlFor={id}>\n                {'Please select...'}\n            </label>\n        );\n        if (options[selection]) {\n            const option = options[selection];\n            dropdownHTML = (\n                <label className={styles.dropdownButton} htmlFor={id}>\n                    <Avatar\n                        isAvatar={!!option.avatar}\n                        url={option.avatar || option.icon}\n                        color={option.color}\n                    />\n                    <div className={styles.viewName}>\n                        {option.viewName}\n                    </div>\n                </label>\n            );\n        }\n        return (\n            <div className={styles.dropdown}>\n                <input className={styles.dropdownToggle} type=\"checkbox\" id={id} />\n                {dropdownHTML}\n                <label className={styles.dropdownBackground} htmlFor={id} />\n                <div className={styles.dropdownContent}>\n                    {this.optionsList()}\n                </div>\n            </div>\n        );\n        /* eslint-enable jsx-a11y/label-has-for, jsx-a11y/label-has-associated-control */\n    }\n}\n\n/* eslint-enable react/prefer-stateless-function */\n\nDropdown.propTypes = {\n    id: PropTypes.string.isRequired,\n    options: dropDownOptionsType.isRequired,\n    selection: PropTypes.string,\n    onChange: PropTypes.func,\n};\n\nDropdown.defaultProps = {\n    onChange: () => {\n    },\n    selection: '',\n};\n\nexport default Dropdown;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { dropDownOptionsType } from '../shared/types';\nimport Dropdown from '../components/Dropdown/Dropdown';\nimport { initialiseWithPrimaryUuid } from '../store/actions/actions';\n\nimport { getExperienceOptions } from '../store/selectors/common-selectors';\n\nfunction FocusSwitcherContainer(props) {\n    const { primaryUuid, onSetPrimaryUuid, options } = props;\n    const onChange = (newSelection) => {\n        onSetPrimaryUuid(newSelection);\n    };\n    return (\n        <Dropdown\n            id=\"focus-switcher-dropdown\"\n            selection={primaryUuid}\n            options={options}\n            onChange={onChange}\n        />\n    );\n}\n\nFocusSwitcherContainer.propTypes = {\n    primaryUuid: PropTypes.string,\n    onSetPrimaryUuid: PropTypes.func.isRequired,\n    options: dropDownOptionsType.isRequired,\n};\n\nFocusSwitcherContainer.defaultProps = {\n    primaryUuid: null,\n};\n\nconst mapStateToProps = (state) => {\n    const { primaryUuid } = state;\n    return {\n        primaryUuid, options: getExperienceOptions(state),\n    };\n};\n\nconst mapDispatchToProps = dispatch => ({\n    onSetPrimaryUuid: (uuid) => {\n        dispatch(initialiseWithPrimaryUuid(uuid));\n    },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FocusSwitcherContainer);\n","import React, { Component } from 'react';\nimport classNames from 'classnames';\nimport styles from './CallSummary.module.scss';\nimport {\n    callSummaryType, participantsType, sentencesType, statusType,\n} from '../../shared/types';\nimport { scale } from '../../shared/utility/timeline';\nimport { formatTime, displayTimeAndDate } from '../../shared/utility/formatting';\nimport { STATUS_OK } from '../../store/constants/data';\n\nclass CallSummary extends Component {\n    static labelTextForKey(key) {\n        switch (key) {\n            case 'talking':\n                return 'Talk Time';\n            case 'listening':\n                return 'Listen Time';\n            case 'silent':\n                return 'Silence';\n            case 'holding':\n                return 'On Hold';\n            case 'queuing':\n                return 'Queuing';\n            case 'ringing':\n                return 'Ringing';\n            case 'routing':\n                return 'Routing';\n            case 'overtalk':\n                return 'Over Talk';\n            default:\n                return key;\n        }\n    }\n\n    static proportionalWidths(values) {\n        const totalValue = Object.keys(values).map(key => values[key])\n            .reduce((total, value) => total + value, 0);\n        const proportionalValues = {};\n        Object.keys(values).forEach((key) => {\n            const value = values[key];\n            const factor = 100 / totalValue;\n            proportionalValues[key] = factor * value;\n        });\n        return proportionalValues;\n    }\n\n    static metricsHeader(colors) {\n        return [(\n            <div className={styles.rowTitle} key=\"titles-heading\" />\n        )].concat(colors.map((color, index) => (\n            // We're able to disable this lint because there is sometimes no difference with the data\n            /* eslint-disable react/no-array-index-key */\n            <div style={{ borderTop: `2px solid ${color}` }} key={`${color}-${index}-heading`} />\n            /* eslint-enable react/no-array-index-key */\n        )));\n    }\n\n    static metricsRow(title, values) {\n        return [(\n            <div className={styles.rowTitle} key={title}>\n                {title}\n            </div>\n        )].concat(// We're able to disable this lint because there is sometimes no difference with the data\n            /* eslint-disable react/no-array-index-key */\n            values.map((value, index) => (\n                <div className={styles.figure} key={`${index}-${value}`}>\n                    {value}\n                </div>\n            )),\n            /* eslint-enable react/no-array-index-key */\n        );\n    }\n\n    static turnSwaps(sentences) {\n        let swaps = 0;\n        let currentTalker;\n        if (sentences === null) {\n            return 0;\n        }\n        Object.keys(sentences).map(key => sentences[key])\n            .flat()\n            .sort((a, b) => {\n                if (a.Start < b.Start) {\n                    return -1;\n                }\n                if (a.Start > b.Start) {\n                    return 1;\n                }\n                return 0;\n            })\n            .forEach((sentence) => {\n                if (!currentTalker) {\n                    currentTalker = sentence.number;\n                } else if (sentence.number !== currentTalker) {\n                    swaps += 1;\n                    currentTalker = sentence.number;\n                }\n            });\n        return swaps;\n    }\n\n    static numberOfConversations(participants, sentences) {\n        const conversations = {};\n        Object.keys(participants)\n            .filter(key => participants[key].isPrimary)\n            .forEach((key) => {\n                sentences[key].forEach((sentence) => {\n                    conversations[`${sentence.number}:${sentence.opposing.number}`] = 1;\n                });\n            });\n        return Object.keys(conversations).length;\n    }\n\n    static talkAndListenTime(participants, sentences) {\n        const times = {\n            talkTime: 0,\n            listenTime: 0,\n        };\n        if (typeof participants !== 'undefined' && sentences !== null) {\n            Object.keys(participants)\n                .forEach((key) => {\n                    const { isPrimary } = participants[key];\n                    const timeKey = isPrimary ? 'talkTime' : 'listenTime';\n                    sentences[key].forEach((sentence) => {\n                        times[timeKey] += sentence.timelineEnd - sentence.timelineStart;\n                    });\n                });\n        }\n        return times;\n    }\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            isViewExpanded: false,\n        };\n        this.barRefs = {\n            container: null,\n            bars: [],\n            lines: [],\n            labels: [],\n        };\n        this.toggleExpandedView = this.toggleExpandedView.bind(this);\n    }\n\n    componentDidMount() {\n        window.addEventListener('resize', this.plotLabelLines.bind(this));\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        this.plotLabelLines();\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener('resize', this.plotLabelLines.bind(this));\n    }\n\n    bars(values = {}) {\n        const width = CallSummary.proportionalWidths(values);\n        const duration = CallSummary.callDurationFromSummary(values);\n        this.barRefs.bars = [];\n        return Object.keys(values)\n            .filter(key => values[key] > 0)\n            .map(key => (\n                <div\n                    className={styles[key]}\n                    style={{ width: `${width[key]}%` }}\n                    key={key}\n                    ref={element => this.barRefs.bars.push(element)}\n                    data-tooltip={\n                        `${(100 / duration * values[key]).toFixed(0)}%\n                        ${formatTime(values[key])}`\n                    }\n                />));\n    }\n\n    lines(values = {}) {\n        this.barRefs.lines = [];\n        return Object.keys(values)\n            .filter(key => values[key] > 0)\n            .map((key) => {\n                const classes = classNames({\n                    [styles.line]: true,\n                });\n                const lineClasses = classNames({\n                    [styles.group]: true,\n                });\n                const diagonalSize = 4;\n                const topKnee = 5 - (diagonalSize / 2);\n                const bottomKnee = 5 + (diagonalSize / 2);\n                return (\n                    <svg\n                        viewBox=\"0 0 10 10\"\n                        className={classes}\n                        key={key}\n                        ref={element => this.barRefs.lines.push(element)}\n                        preserveAspectRatio=\"none\"\n                    >\n                        <g className={lineClasses}>\n                            <line\n                                x1=\"0\"\n                                x2=\"0\"\n                                y1=\"0\"\n                                y2={topKnee}\n                                vectorEffect=\"non-scaling-stroke\"\n                                shapeRendering=\"crisp-edges\"\n                            />\n                            <line\n                                x1=\"0\"\n                                x2=\"10\"\n                                y1={topKnee}\n                                y2={bottomKnee}\n                                vectorEffect=\"non-scaling-stroke\"\n                                shapeRendering=\"geometric-precision\"\n                            />\n                            <line\n                                x1=\"10\"\n                                x2=\"10\"\n                                y1={bottomKnee}\n                                y2=\"10\"\n                                vectorEffect=\"non-scaling-stroke\"\n                                shapeRendering=\"crisp-edges\"\n                            />\n                        </g>\n                    </svg>\n                );\n            });\n    }\n\n    labels(values = {}) {\n        this.barRefs.labels = [];\n        const width = CallSummary.proportionalWidths(values);\n        const duration = CallSummary.callDurationFromSummary(values);\n        return Object.keys(values)\n            .filter(key => values[key] > 0)\n            .map((key, index, array) => {\n                const classes = classNames({\n                    [styles.label]: true,\n                });\n                return (\n                    <div\n                        className={classes}\n                        key={key}\n                        ref={element => this.barRefs.labels.push(element)}\n                        data-tooltip={\n                            `${(100 / duration * values[key]).toFixed(0)}%\n                        ${formatTime(values[key])}`\n                        }\n                        data-width={width[key]}\n                    >\n                        {CallSummary.labelTextForKey(key)}\n\n                    </div>\n                );\n            });\n    }\n\n    plotLabelLines() {\n        const {\n            bars, lines, labels, container,\n        } = this.barRefs;\n        if (!container || !Array.isArray(labels) || labels.length === 0) {\n            return;\n        }\n        const { x: leftOffset, width: containerWidth } = container.getBoundingClientRect();\n        const shrinkableLabels = [];\n        let overflow = 0;\n        labels.forEach((label, index) => {\n            if (label) {\n                label.style.width = null;\n                const bar = bars[index];\n                const { width: labelWidth } = label.getBoundingClientRect();\n                const { width: barWidth } = bar.getBoundingClientRect();\n                const barWidthAsPercentage = 100 / containerWidth * barWidth;\n                const labelWidthAsPercentage = 100 / containerWidth * labelWidth;\n                if (labelWidthAsPercentage >= barWidthAsPercentage) {\n                    label.style.width = `${labelWidthAsPercentage}%`;\n                    overflow += labelWidthAsPercentage - barWidthAsPercentage;\n                } else {\n                    shrinkableLabels.push({\n                        label,\n                        labelWidthAsPercentage,\n                        barWidthAsPercentage,\n                    });\n                }\n            }\n        });\n        shrinkableLabels.forEach((item) => {\n            const { label, barWidthAsPercentage, labelWidthAsPercentage } = item;\n            const useableOverflow = Math.max(Math.min(overflow, barWidthAsPercentage - labelWidthAsPercentage), 0);\n            label.style.width = `${barWidthAsPercentage - useableOverflow}%`;\n            overflow = Math.max(0, overflow - useableOverflow);\n        });\n        lines.forEach((line, index) => {\n            if (line) {\n                const label = labels[index];\n                const bar = bars[index];\n                const { x: leftBarPosition, width: barWidth } = bar.getBoundingClientRect();\n                const xLinePos = leftBarPosition - leftOffset + (barWidth / 2);\n                const { x: leftLabelPosition, width: labelWidth } = label.getBoundingClientRect();\n                const lineWidth = leftLabelPosition - leftOffset - xLinePos + (labelWidth / 2);\n                line.style.left = Math.min(xLinePos, xLinePos + lineWidth);\n                line.style.width = Math.max(1, Math.abs(lineWidth));\n                if (lineWidth < 0) {\n                    line.classList.add(styles.flip);\n                } else {\n                    line.classList.remove(styles.flip);\n                }\n            }\n        });\n    }\n\n    toggleExpandedView() {\n        const { isViewExpanded } = this.state;\n        this.setState({ isViewExpanded: !isViewExpanded });\n    }\n\n    static callDurationFromSummary(summary = {}) {\n        return Object.keys(summary).map(key => summary[key]).reduce((value, total) => total + value, 0);\n    }\n\n    showAlternativeStatus(status) {\n        return (\n            <div>\n                <div className={styles.section}>\n                    <div className={styles.header}>\n                        <div className={styles.headerItem}>\n                            Start time:\n                        </div>\n                        <div className={styles.headerItem}>\n                            Duration:\n                        </div>\n                        <div className={styles.headerItem}>\n                            Direction:\n                        </div>\n                        <div className={styles.headerItem}>\n                            <button className={styles.buttonShowMore} type=\"button\" disabled />\n                        </div>\n                    </div>\n                    <div className={styles.summaryBar}>\n                        {this.bars({})}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    render() {\n        const {\n            status, callSummary, participants, sentences,\n        } = this.props;\n        if (status.status !== STATUS_OK) {\n            return this.showAlternativeStatus(status.status);\n        }\n        const {\n            startTime, duration, direction, metrics, keyCallers, summary,\n        } = callSummary;\n        let conversations = 0;\n        if (typeof participants !== 'undefined' && sentences !== null && metrics !== null) {\n            conversations = CallSummary.numberOfConversations(participants, sentences);\n        }\n        let colors = [];\n        let keyTitles = [];\n        let holdEvents = [];\n        let pauseEvents = [];\n        let silenceDurations = [];\n        if (keyCallers != null) {\n            colors = keyCallers.colors.slice(0, 2);\n            keyTitles = keyCallers.titles;\n        }\n        if (metrics !== null) {\n            holdEvents = metrics.map(metric => metric.data.holdEvents);\n            pauseEvents = metrics.map(metric => metric.data.pauseEvents);\n            silenceDurations = metrics.map(metric => formatTime(duration * metric.data.SilenceRatio / 1000000));\n        }\n        const { isViewExpanded } = this.state;\n        const buttonStyle = isViewExpanded ? styles.buttonShowLess : styles.buttonShowMore;\n        return (\n            <div>\n                <div className={styles.section}>\n                    <div className={styles.header}>\n                        <div className={styles.headerItem}>\n                            Start time:\n                            {' '}\n                            {displayTimeAndDate(startTime)}\n                        </div>\n                        <div className={styles.headerItem}>\n                            Duration:\n                            {' '}\n                            {formatTime(duration / 1000000)}\n                        </div>\n                        <div className={styles.headerItem}>\n                            Direction:\n                            {' '}\n                            {direction}\n                        </div>\n                        <div className={styles.headerItem}>\n                            <button className={buttonStyle} onClick={this.toggleExpandedView} type=\"button\" />\n                        </div>\n                    </div>\n                    <div className={styles.summaryBar}>\n                        {this.bars(summary)}\n                    </div>\n                    <div className={styles.summaryLines} ref={element => this.barRefs.container = element}>\n                        {this.lines(summary)}\n                    </div>\n                    <div className={styles.summaryLabels}>\n                        {this.labels(summary)}\n                    </div>\n                </div>\n                {isViewExpanded\n                && (\n                    <div className={styles.section}>\n                        <div className={styles.metricsSection}>\n                            <div className={styles.metricsTable}>\n                                <div className={styles.sectionColumns}>\n                                    {CallSummary.metricsHeader(colors)}\n                                </div>\n                                <div className={styles.sectionColumns}>\n                                    {CallSummary.metricsRow('Hold Events', holdEvents)}\n                                </div>\n                                <div className={styles.sectionColumns}>\n                                    {CallSummary.metricsRow('Recording Paused', pauseEvents)}\n                                </div>\n                                <div className={styles.sectionColumns}>\n                                    {CallSummary.metricsRow('Silence Duration', silenceDurations)}\n                                </div>\n                            </div>\n                            <div className={styles.totals}>\n                                <div>Conversations held</div>\n                                <div className={styles.bigDigits}>\n                                    {conversations}\n                                </div>\n                            </div>\n                            <div className={styles.totals}>\n                                <div>Turn Swaps</div>\n                                <div className={styles.bigDigits}>\n                                    {CallSummary.turnSwaps(sentences)}\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                )\n                }\n            </div>\n        );\n    }\n}\n\nCallSummary.propTypes = {\n    status: statusType.isRequired,\n    callSummary: callSummaryType.isRequired,\n    participants: participantsType.isRequired,\n    sentences: sentencesType,\n};\n\nCallSummary.defaultProps = {\n    sentences: null,\n};\n\nexport default CallSummary;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport CallSummary from '../components/CallSummary/CallSummary';\nimport {\n    callSummaryType, participantsType, sentencesType, statusType,\n} from '../shared/types';\nimport { getParticipants, getSentencesFromTranscriptionState } from '../store/selectors/common-selectors';\n\nconst CallSummaryContainer = props => (<CallSummary {...props} />);\n\nCallSummaryContainer.propTypes = {\n    status: statusType.isRequired,\n    callSummary: callSummaryType.isRequired,\n    participants: participantsType.isRequired,\n    sentences: sentencesType,\n    isVisible: PropTypes.bool,\n};\n\nCallSummaryContainer.defaultProps = {\n    sentences: null,\n    isVisible: false,\n};\n\nconst mapStateToProps = (state) => {\n    const { status, callSummary } = state;\n    return {\n        status,\n        callSummary,\n        participants: getParticipants(state),\n        sentences: getSentencesFromTranscriptionState(state),\n    };\n};\n\nexport default connect(mapStateToProps)(CallSummaryContainer);\n","export default __webpack_public_path__ + \"static/media/up-chevron-white.b8709411.svg\";","export default __webpack_public_path__ + \"static/media/down-chevron-white.58efb287.svg\";","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './Search.module.scss';\nimport {\n    participantsType,\n    searchType,\n    sentencesType,\n    timelineType,\n    transcriptionType,\n} from '../../shared/types';\nimport upChevron from '../../assets/svgs/up-chevron-white.svg';\nimport downChevron from '../../assets/svgs/down-chevron-white.svg';\n\nclass Search extends Component {\n    constructor(props) {\n        super(props);\n        this.handleSearchInputChange = this.handleSearchInputChange.bind(this);\n        this.handlePreviousClicked = this.handlePreviousClicked.bind(this);\n        this.handleNextClicked = this.handleNextClicked.bind(this);\n        this.handleClearClicked = this.handleClearClicked.bind(this);\n    }\n\n    handleSearchInputChange(event) {\n        const { onSearchPhraseChanged } = this.props;\n        let text = event.currentTarget.value;\n        onSearchPhraseChanged(text);\n    }\n\n    handlePreviousClicked() {\n        const {\n            search: {\n                currentPositionIndex,\n                positionCount,\n            },\n            onSetMatchPositionIndex,\n        } = this.props;\n        const previous = currentPositionIndex > 0 ? currentPositionIndex - 1 : positionCount - 1;\n        onSetMatchPositionIndex(previous);\n    }\n\n    handleNextClicked() {\n        const {\n            search: {\n                currentPositionIndex,\n                positionCount,\n            },\n            onSetMatchPositionIndex,\n        } = this.props;\n        const next = currentPositionIndex < positionCount - 1 ? currentPositionIndex + 1 : 0;\n        onSetMatchPositionIndex(next);\n    }\n\n    handleClearClicked() {\n        const { onSearchPhraseChanged } = this.props;\n        onSearchPhraseChanged(null, []);\n    }\n\n    render() {\n        const { search } = this.props;\n        const placeholderText = 'Search Transcript...';\n        const phrase = search.searchPhrase !== null ? search.searchPhrase : '';\n        const { currentPositionIndex, positionCount } = search;\n        const showSearchNavigator = phrase.length > 0 && positionCount > 0;\n        return (\n            <div className={styles.Search}>\n                <input\n                    className={styles.searchTextBox}\n                    type=\"text\"\n                    value={phrase}\n                    onChange={this.handleSearchInputChange}\n                    placeholder={placeholderText}\n                    onFocus={(e) => { e.target.placeholder = ''; }}\n                    onBlur={(e) => { e.target.placeholder = placeholderText; }}\n                />\n                {\n                    showSearchNavigator && (\n                        <div className={styles.searchNavigation}>\n                            <div>{`${currentPositionIndex + 1} of ${positionCount}`}</div>\n                            <img\n                                className={styles.chevron}\n                                src={upChevron}\n                                alt=\"Previous match\"\n                                height=\"24\"\n                                width=\"24\"\n                                onMouseDown={this.handlePreviousClicked}\n                            />\n                            <img\n                                className={styles.chevron}\n                                src={downChevron}\n                                alt=\"Next match\"\n                                height=\"24\"\n                                width=\"24\"\n                                onMouseDown={this.handleNextClicked}\n                            />\n                            <div className={styles.spacer} />\n                            <button\n                                className={styles.clearButton}\n                                type=\"button\"\n                                onClick={this.handleClearClicked}\n                            >\n                                CLEAR\n                            </button>\n                        </div>\n                    )\n                }\n            </div>\n        );\n    }\n}\n\nSearch.propTypes = {\n    search: searchType.isRequired,\n    onSearchPhraseChanged: PropTypes.func.isRequired,\n    onSetMatchPositionIndex: PropTypes.func.isRequired,\n    participants: participantsType.isRequired,\n    sentences: sentencesType,\n    transcription: transcriptionType.isRequired,\n    onSetScrollToMatch: PropTypes.func.isRequired,\n    timeline: timelineType.isRequired,\n};\n\nSearch.defaultProps = {\n    sentences: null,\n};\n\nexport default Search;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport {\n    participantsType,\n    searchType,\n    sentencesType,\n    timelineType,\n    transcriptionType,\n} from '../shared/types';\nimport { focusOnPosition } from '../store/actions/actions';\nimport { setCurrentMatchPositionIndex, setPositionsFromSearchPhrase, setSearchPhrase } from '../store/actions/search';\nimport Search from '../components/Search/Search';\nimport { getTimeline } from '../store/selectors';\nimport {\n    getParticipants,\n    getRawDataFromTranscriptionState,\n    getSentencesFromTranscriptionState,\n} from '../store/selectors/common-selectors';\n\nfunction SearchContainer(props) {\n    const {\n        search,\n        onSearchPhraseChanged,\n        onSetMatchPositionIndex,\n        participants,\n        sentences,\n        transcription,\n        onSetScrollToMatch,\n        timeline,\n    } = props;\n    return (\n        <Search\n            search={search}\n            onSearchPhraseChanged={onSearchPhraseChanged}\n            onSetMatchPositionIndex={onSetMatchPositionIndex}\n            participants={participants}\n            sentences={sentences}\n            transcription={transcription}\n            onSetScrollToMatch={onSetScrollToMatch}\n            timeline={timeline}\n        />\n    );\n}\n\nSearchContainer.propTypes = {\n    search: searchType.isRequired,\n    onSearchPhraseChanged: PropTypes.func.isRequired,\n    onSetMatchPositionIndex: PropTypes.func.isRequired,\n    participants: participantsType.isRequired,\n    sentences: sentencesType,\n    transcription: transcriptionType.isRequired,\n    onSetScrollToMatch: PropTypes.func.isRequired,\n    timeline: timelineType.isRequired,\n};\n\nSearchContainer.defaultProps = {\n    sentences: null,\n};\n\nconst mapStateToProps = (state) => {\n    const {\n        search,\n    } = state;\n    return {\n        search,\n        participants: getParticipants(state),\n        sentences: getSentencesFromTranscriptionState(state),\n        transcription: getRawDataFromTranscriptionState(state),\n        timeline: getTimeline(state),\n    };\n};\n\nconst mapDispatchToProps = dispatch => ({\n    onSearchPhraseChanged: (phrase) => {\n        dispatch(setSearchPhrase(phrase));\n        dispatch(setPositionsFromSearchPhrase());\n    },\n    onSetMatchPositionIndex: (index) => {\n        dispatch(setCurrentMatchPositionIndex(index));\n    },\n    onSetScrollToMatch: (position) => {\n        dispatch(focusOnPosition(position));\n    },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchContainer);\n","export default __webpack_public_path__ + \"static/media/close.325eaabb.svg\";","export default __webpack_public_path__ + \"static/media/up-chevron-disabled.75e1dbee.svg\";","export default __webpack_public_path__ + \"static/media/down-chevron-disabled.50ca0970.svg\";","/* eslint-disable max-len */\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './ResultNavigator.module.scss';\nimport close from '../../assets/svgs/close.svg';\nimport upChevronGrey from '../../assets/svgs/up-chevron-disabled.svg';\nimport downChevronGrey from '../../assets/svgs/down-chevron-disabled.svg';\nimport {\n    callSummaryType,\n    knowledgeSelectedItemType,\n    participantsType,\n    sentencesType,\n    transcriptionType,\n    searchType,\n} from '../../shared/types';\nimport {\n    KNOWLEDGE_TYPE_KEYWORD,\n    KNOWLEDGE_TYPE_CLASSIFICATION,\n    KNOWLEDGE_TYPE_TOPIC,\n} from '../../store/constants/knowledge';\nimport KnowledgeClassificationPill from '../KnowledgeClassificationPill/KnowledgeClassificationPill';\nimport KnowledgeKeywordTopicPill from '../KnowledgeKeywordTopicPill/KnowledgeKeywordTopicPill';\n\nclass ResultNavigator extends Component {\n    static channelIndicatorsForPositions(positions) {\n        return {\n            showLeftIndicator: positions.filter(position => position.channel === 1).length > 0,\n            showRightIndicator: positions.filter(position => position.channel === 2).length > 0,\n        };\n    }\n\n    constructor(props) {\n        super(props);\n        this.onPreviousClicked = this.onPreviousClicked.bind(this);\n        this.onNextClicked = this.onNextClicked.bind(this);\n    }\n\n    onPreviousClicked() {\n        const {\n            search: {\n                currentPositionIndex,\n                positionCount,\n            },\n            onSetMatchPositionIndex,\n        } = this.props;\n        const previous = currentPositionIndex > 0 ? currentPositionIndex - 1 : positionCount - 1;\n        onSetMatchPositionIndex(previous);\n    }\n\n    onNextClicked() {\n        const {\n            search: {\n                currentPositionIndex,\n                positionCount,\n            },\n            onSetMatchPositionIndex,\n        } = this.props;\n        const next = currentPositionIndex < positionCount - 1 ? currentPositionIndex + 1 : 0;\n        onSetMatchPositionIndex(next);\n    }\n\n    render() {\n        const {\n            callSummary,\n            onClear,\n            selectedItem,\n            search,\n        } = this.props;\n        if (typeof selectedItem.identifier !== 'string' || selectedItem.identifier.length === 0) {\n            return null;\n        }\n\n        let pill;\n        if (selectedItem.type === KNOWLEDGE_TYPE_CLASSIFICATION) {\n            pill = <KnowledgeClassificationPill category={selectedItem.category} isSelected />;\n        } else if (selectedItem.type === KNOWLEDGE_TYPE_KEYWORD) {\n            const { positions } = search;\n            const { showLeftIndicator, showRightIndicator } = ResultNavigator.channelIndicatorsForPositions(positions);\n            pill = (\n                <KnowledgeKeywordTopicPill\n                    colors={callSummary.keyCallers.colors}\n                    isSelected\n                    text={selectedItem.identifier}\n                    showLeftIndicator={showLeftIndicator}\n                    showRightIndicator={showRightIndicator}\n                />);\n        } else if (selectedItem.type === KNOWLEDGE_TYPE_TOPIC) {\n            const { positions } = search;\n            const { showLeftIndicator, showRightIndicator } = ResultNavigator.channelIndicatorsForPositions(positions);\n            pill = (\n                <KnowledgeKeywordTopicPill\n                    colors={callSummary.keyCallers.colors}\n                    isSelected\n                    text={selectedItem.identifier}\n                    showLeftIndicator={showLeftIndicator}\n                    showRightIndicator={showRightIndicator}\n                />);\n        } else {\n            return null;\n        }\n\n        const { currentPositionIndex, positionCount } = search;\n        return (\n            <div className={styles.resultNavigator}>\n                <button type=\"button\" className={styles.button} onMouseDown={onClear}>\n                    <img\n                        src={close}\n                        alt=\"Clear\"\n                        height=\"18\"\n                        width=\"18\"\n                    />\n                </button>\n                <div className={styles.searchItemContainer}>{pill}</div>\n                <div>{`${currentPositionIndex + 1} of ${positionCount}`}</div>\n                <button type=\"button\" className={styles.button} onMouseDown={this.onPreviousClicked} disabled={positionCount === 0}>\n                    <img\n                        src={upChevronGrey}\n                        alt=\"Previous match\"\n                        height=\"24\"\n                        width=\"24\"\n                    />\n                </button>\n                <button\n                    type=\"button\"\n                    className={styles.button}\n                    onMouseDown={this.onNextClicked}\n                    disabled={positionCount === 0}\n                >\n                    <img\n                        src={downChevronGrey}\n                        alt=\"Next match\"\n                        height=\"24\"\n                        width=\"24\"\n                    />\n                </button>\n            </div>\n        );\n    }\n}\n\nResultNavigator.defaultProps = {\n    sentences: null,\n};\n\nResultNavigator.propTypes = {\n    callSummary: callSummaryType.isRequired,\n    onClear: PropTypes.func.isRequired,\n    onSetMatches: PropTypes.func.isRequired,\n    onSetMatch: PropTypes.func.isRequired,\n    onSetScrollToMatch: PropTypes.func.isRequired,\n    selectedItem: knowledgeSelectedItemType.isRequired,\n    participants: participantsType.isRequired,\n    sentences: sentencesType,\n    transcription: transcriptionType.isRequired,\n    onSetMatchPositions: PropTypes.func.isRequired,\n    onSetMatchPositionIndex: PropTypes.func.isRequired,\n    search: searchType.isRequired,\n};\n\nexport default ResultNavigator;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport ResultNavigator from '../components/ResultNavigator/ResultNavigator';\nimport {\n    callSummaryType,\n    knowledgeSelectedItemType,\n    participantsType,\n    sentencesType,\n    transcriptionType,\n    searchType,\n} from '../shared/types';\nimport {\n    getParticipants,\n    getRawDataFromTranscriptionState,\n    getSentencesFromTranscriptionState,\n} from '../store/selectors/common-selectors';\nimport { clearSelectedKnowledgeItem } from '../store/actions/knowledge';\nimport { focusOnPosition } from '../store/actions/actions';\nimport {\n    setCurrentMatch,\n    setMatches,\n    setCurrentMatchPositionIndex,\n    setMatchPositions,\n} from '../store/actions/search';\n\nfunction ResultNavigatorContainer(props) {\n    const {\n        callSummary,\n        onClear,\n        onSetMatches,\n        onSetMatch,\n        onSetScrollToMatch,\n        selectedItem,\n        transcription,\n        participants,\n        sentences,\n        onSetMatchPositions,\n        onSetMatchPositionIndex,\n        search,\n    } = props;\n    return (\n        <ResultNavigator\n            callSummary={callSummary}\n            onClear={onClear}\n            onSetMatches={onSetMatches}\n            onSetMatch={onSetMatch}\n            onSetScrollToMatch={onSetScrollToMatch}\n            selectedItem={selectedItem}\n            transcription={transcription}\n            participants={participants}\n            sentences={sentences}\n            onSetMatchPositions={onSetMatchPositions}\n            onSetMatchPositionIndex={onSetMatchPositionIndex}\n            search={search}\n        />\n    );\n}\n\nResultNavigatorContainer.defaultProps = {\n    sentences: null,\n};\n\nResultNavigatorContainer.propTypes = {\n    callSummary: callSummaryType.isRequired,\n    onClear: PropTypes.func.isRequired,\n    onSetMatches: PropTypes.func.isRequired,\n    onSetMatch: PropTypes.func.isRequired,\n    onSetScrollToMatch: PropTypes.func.isRequired,\n    selectedItem: knowledgeSelectedItemType.isRequired,\n    transcription: transcriptionType.isRequired,\n    participants: participantsType.isRequired,\n    sentences: sentencesType,\n    onSetMatchPositions: PropTypes.func.isRequired,\n    onSetMatchPositionIndex: PropTypes.func.isRequired,\n    search: searchType.isRequired,\n};\n\nconst mapStateToProps = (state) => {\n    const { callSummary, knowledge, search } = state;\n    return {\n        callSummary,\n        search,\n        selectedItem: knowledge.selectedItem,\n        participants: getParticipants(state),\n        sentences: getSentencesFromTranscriptionState(state),\n        transcription: getRawDataFromTranscriptionState(state),\n    };\n};\n\nconst mapDispatchToProps = dispatch => ({\n    onClear: () => {\n        dispatch(clearSelectedKnowledgeItem());\n        dispatch(setMatches([]));\n        dispatch(setMatchPositions([]));\n    },\n    onSetMatches: (matches) => {\n        dispatch(setMatches(matches));\n    },\n    onSetMatch: (match) => {\n        dispatch(setCurrentMatch(match));\n    },\n    onSetScrollToMatch: (position) => {\n        dispatch(focusOnPosition(position));\n    },\n    onSetMatchPositions: (positions) => {\n        dispatch(setMatchPositions(positions));\n    },\n    onSetMatchPositionIndex: (index) => {\n        dispatch(setCurrentMatchPositionIndex(index));\n    },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ResultNavigatorContainer);\n","/* eslint-disable react/jsx-one-expression-per-line */\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport KnowledgeContainer from '../../containers/KnowledgeContainer';\nimport styles from './SearchFilters.module.scss';\nimport InsightsContainer from '../../containers/InsightsContainer';\nimport FocusSwitcherContainer from '../../containers/FocusSwitcherContainer';\nimport CallSummaryContainer from '../../containers/CallSummaryContainer';\nimport {\n    AFFIRMATIONS,\n    BACKGROUND_NOISE_LEVEL,\n    CLASH_WINS,\n    INTERRUPTIONS,\n    STEALS,\n    TRANSCRIPTION_CONFIDENCE,\n} from '../../store/constants/metrics-layers';\nimport SearchContainer from '../../containers/SearchContainer';\nimport { activeLayersType, knowledgeSelectedItemType, searchType } from '../../shared/types';\nimport ResultNavigatorContainer from '../../containers/ResultNavigatorContainer';\n\nconst TAB_SEARCH = 'tab-search';\nconst TAB_CALL_SUMMARY = 'tab-call-summary';\nconst TAB_KNOWLEDGE = 'tab-knowledge';\nconst TAB_INSIGHTS = 'tab-insights';\n\nclass SearchFilters extends Component {\n    static knowledgeLayersInUse(selectedItem) {\n        return selectedItem.identifier != null;\n    }\n\n    static insightsLayersInUse(activeLayers) {\n        return [\n            BACKGROUND_NOISE_LEVEL,\n            TRANSCRIPTION_CONFIDENCE,\n            CLASH_WINS,\n            AFFIRMATIONS,\n            INTERRUPTIONS,\n            STEALS,\n        ].filter(layer => activeLayers.includes(layer)).length > 0;\n    }\n\n    constructor(props) {\n        super(props);\n        this.handleTabClick = this.handleTabClick.bind(this);\n    }\n\n    isValidSearchPhrase() {\n        const { search: { searchPhrase } } = this.props;\n        return typeof searchPhrase === 'string' && searchPhrase.length > 0;\n    }\n\n    handleTabClick(e) {\n        const { toggleTab } = this.props;\n        e.preventDefault();\n        const { currentTarget: { id: tab } } = e;\n        toggleTab(tab);\n        const {\n            knowledgeSelectedItem,\n            onSetPositionsFromSearchPhrase,\n            onSetPositionsFromKnowledgeSelectedItem,\n        } = this.props;\n        if (tab === TAB_SEARCH && this.isValidSearchPhrase()) {\n            onSetPositionsFromSearchPhrase();\n        } else if (tab === TAB_KNOWLEDGE) {\n            const { identifier } = knowledgeSelectedItem;\n            if (typeof identifier === 'string' && identifier.length > 0) {\n                onSetPositionsFromKnowledgeSelectedItem();\n            }\n        }\n    }\n\n    render() {\n        const { activeLayers, knowledgeSelectedItem, activeTab: tab } = this.props;\n        const searchTabClasses = classNames({\n            [styles.button]: true,\n            [styles.active]: tab === TAB_SEARCH,\n            [styles.inuse]: this.isValidSearchPhrase(),\n        });\n        const callSummaryTabClasses = classNames({\n            [styles.button]: true,\n            [styles.active]: tab === TAB_CALL_SUMMARY,\n        });\n        const knowledgeTabClasses = classNames({\n            [styles.button]: true,\n            [styles.active]: tab === TAB_KNOWLEDGE,\n            [styles.inuse]: SearchFilters.knowledgeLayersInUse(knowledgeSelectedItem),\n        });\n        const insightsTabClasses = classNames({\n            [styles.button]: true,\n            [styles.active]: tab === TAB_INSIGHTS,\n            [styles.inuse]: SearchFilters.insightsLayersInUse(activeLayers),\n        });\n        const searchContentStyle = {\n            display: tab === TAB_SEARCH ? 'block' : 'none',\n        };\n        const callSummaryContentStyle = {\n            display: tab === TAB_CALL_SUMMARY ? 'block' : 'none',\n        };\n        const knowledgeContentStyle = {\n            display: tab === TAB_KNOWLEDGE ? 'block' : 'none',\n        };\n        const insightsContentStyle = {\n            display: tab === TAB_INSIGHTS ? 'block' : 'none',\n        };\n        return (\n            <section className={styles.SearchFilters}>\n                <div className={styles.tabs}>\n                    <button type=\"button\" id={TAB_SEARCH} className={searchTabClasses} onClick={this.handleTabClick}>\n                        <span className={styles.chevron} />\n                    </button>\n                    <button type=\"button\" id={TAB_CALL_SUMMARY} className={callSummaryTabClasses} onClick={this.handleTabClick}>\n                        Call Summary <span className={styles.chevron} />\n                    </button>\n                    <button type=\"button\" id={TAB_KNOWLEDGE} className={knowledgeTabClasses} onClick={this.handleTabClick}>\n                        Knowledge <span className={styles.chevron} />\n                    </button>\n                    <button type=\"button\" id={TAB_INSIGHTS} className={insightsTabClasses} onClick={this.handleTabClick}>\n                        Timeline Options <span className={styles.chevron} />\n                    </button>\n                    <div className={styles.spacer} />\n                    {tab !== TAB_SEARCH && (<ResultNavigatorContainer />)}\n                    <FocusSwitcherContainer />\n                </div>\n                <div className={styles.search} style={searchContentStyle}>\n                    <SearchContainer />\n                </div>\n                <div className={styles.callSummary} style={callSummaryContentStyle}>\n                    <CallSummaryContainer isVisible={tab === TAB_CALL_SUMMARY} />\n                </div>\n                <div className={styles.knowledge} style={knowledgeContentStyle}>\n                    <KnowledgeContainer />\n                </div>\n                <div className={styles.insights} style={insightsContentStyle}>\n                    <InsightsContainer />\n                </div>\n            </section>\n        );\n    }\n}\n\nSearchFilters.propTypes = {\n    activeLayers: activeLayersType.isRequired,\n    search: searchType.isRequired,\n    knowledgeSelectedItem: knowledgeSelectedItemType.isRequired,\n    onSetPositionsFromSearchPhrase: PropTypes.func.isRequired,\n    onSetPositionsFromKnowledgeSelectedItem: PropTypes.func.isRequired,\n    activeTab: PropTypes.string.isRequired,\n    toggleTab: PropTypes.func.isRequired,\n};\n\nexport default SearchFilters;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport SearchFilters from '../components/SearchFilters/SearchFilters';\nimport { activeLayersType, knowledgeSelectedItemType, searchType } from '../shared/types';\nimport { setPositionsFromSearchPhrase } from '../store/actions/search';\nimport { setPositionsFromKnowledgeSelectedItem } from '../store/actions/knowledge';\nimport { getActiveTab } from '../store/selectors/common-selectors';\nimport { toggleTab } from '../store/actions/tabs';\n\nfunction SearchFiltersContainer(props) {\n    const {\n        activeLayers,\n        knowledgeSelectedItem,\n        search,\n        onSetPositionsFromSearchPhrase,\n        onSetPositionsFromKnowledgeSelectedItem,\n        activeTab,\n        onTabClicked,\n    } = props;\n    return (\n        <SearchFilters\n            activeLayers={activeLayers}\n            knowledgeSelectedItem={knowledgeSelectedItem}\n            search={search}\n            onSetPositionsFromSearchPhrase={onSetPositionsFromSearchPhrase}\n            onSetPositionsFromKnowledgeSelectedItem={onSetPositionsFromKnowledgeSelectedItem}\n            activeTab={activeTab}\n            toggleTab={onTabClicked}\n        />\n    );\n}\n\nSearchFiltersContainer.propTypes = {\n    activeLayers: activeLayersType,\n    search: searchType.isRequired,\n    knowledgeSelectedItem: knowledgeSelectedItemType.isRequired,\n    onSetPositionsFromSearchPhrase: PropTypes.func.isRequired,\n    onSetPositionsFromKnowledgeSelectedItem: PropTypes.func.isRequired,\n    activeTab: PropTypes.string.isRequired,\n    onTabClicked: PropTypes.func.isRequired,\n};\n\nSearchFiltersContainer.defaultProps = {\n    activeLayers: [],\n};\n\nconst mapStateToProps = (state) => {\n    const { activeLayers, knowledge, search } = state;\n    return {\n        activeLayers,\n        knowledgeSelectedItem: knowledge.selectedItem,\n        search,\n        activeTab: getActiveTab(state),\n    };\n};\n\nconst mapDispatchToProps = dispatch => ({\n    onSetPositionsFromSearchPhrase: () => {\n        dispatch(setPositionsFromSearchPhrase());\n    },\n    onSetPositionsFromKnowledgeSelectedItem: () => {\n        dispatch(setPositionsFromKnowledgeSelectedItem());\n    },\n    onTabClicked: (tab) => {\n        dispatch(toggleTab(tab));\n    },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchFiltersContainer);\n","/* eslint-disable jsx-a11y/label-has-associated-control, jsx-a11y/label-has-for */\nimport React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from '../CallRating.module.scss';\n\nconst RatingPicker = ({ name, onSelect, selectedIndex }) => {\n    const radioButtons = [\n        {\n            id: `pip1-${name}`, radioStyle: styles.radio1, pipStyle: styles.pip1, value: 5,\n        },\n        {\n            id: `pip2-${name}`, radioStyle: styles.radio2, pipStyle: styles.pip2, value: 4,\n        },\n        {\n            id: `pip3-${name}`, radioStyle: styles.radio3, pipStyle: styles.pip3, value: 3,\n        },\n        {\n            id: `pip4-${name}`, radioStyle: styles.radio4, pipStyle: styles.pip4, value: 2,\n        },\n        {\n            id: `pip5-${name}`, radioStyle: styles.radio5, pipStyle: styles.pip5, value: 1,\n        },\n    ];\n    const handleRadioSelected = (event) => {\n        const { currentTarget } = event;\n        onSelect(parseInt(currentTarget.value, 10));\n    };\n    return (\n        <div className={styles.pipRating}>\n            <div className={styles.rating}>\n                {radioButtons.map(item => (\n                    <Fragment key={item.id}>\n                        <input\n                            type=\"radio\"\n                            id={item.id}\n                            name={name}\n                            value={item.value}\n                            className={item.radioStyle}\n                            onChange={handleRadioSelected}\n                            checked={item.value === selectedIndex && selectedIndex > 0}\n                        />\n                        <label\n                            htmlFor={item.id}\n                            className={`${styles.pip} ${item.pipStyle}`}\n                            title={item.value}\n                        />\n                    </Fragment>\n                ))}\n            </div>\n        </div>\n    );\n};\nRatingPicker.defaultProps = {\n    selectedIndex: 0,\n};\n\nRatingPicker.propTypes = {\n    name: PropTypes.string.isRequired,\n    onSelect: PropTypes.func.isRequired,\n    selectedIndex: PropTypes.number,\n};\n\nexport default RatingPicker;\n","/* eslint-disable react/jsx-first-prop-new-line */\n/* eslint-disable react/jsx-closing-bracket-location */\n/* eslint-disable react/jsx-max-props-per-line */\n/* eslint-disable react/jsx-one-expression-per-line */\n/* eslint-disable react/jsx-indent-props */\n/* eslint-disable indent */\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport styles from './CallRating.module.scss';\nimport RatingPicker from './RatingPicker/RatingPicker';\n\nclass CallRating extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            rating: [],\n        };\n    }\n\n    componentDidMount() {\n        const { rating } = this.props;\n        this.setState({ rating });\n    }\n\n    handleFinishClicked() {\n        const { onRateCall, rating: oldRaing } = this.props;\n        const { rating: newRating } = this.state;\n        const isAllRated = !newRating.find(item => item.score === 0);\n        if (JSON.stringify(oldRaing) !== JSON.stringify(newRating) && isAllRated) {\n            // eslint-disable-next-line no-alert\n            onRateCall(newRating);\n        } else if (!isAllRated) {\n            // eslint-disable-next-line no-alert\n            window.alert('Please choose a rating for all categories.');\n        } else {\n            // eslint-disable-next-line no-alert\n            window.alert('No changes were made');\n        }\n    }\n\n    handleCancelClicked() {\n        const { onCancelRateCall, rating: oldRaing } = this.props;\n        const { rating: newRating } = this.state;\n        if (JSON.stringify(oldRaing) !== JSON.stringify(newRating)) {\n            // eslint-disable-next-line no-alert\n            if (window.confirm('Warning your changes will be lost.')) {\n                onCancelRateCall(newRating);\n            }\n        } else {\n            onCancelRateCall(newRating);\n        }\n    }\n\n    handleScoreChange(value, sfId) {\n        this.setState((prevState) => {\n            const newRating = prevState.rating.map((item) => {\n                let newScore = item.score;\n                if (item.salesforceId === sfId) {\n                    newScore = value;\n                }\n                return { ...item, score: newScore };\n            });\n            return { rating: newRating };\n        });\n    }\n\n    handleNoteChange(value, sfId) {\n        this.setState((prevState) => {\n            const newRating = prevState.rating.map((item) => {\n                let newNote = item.note;\n                if (item.salesforceId === sfId) {\n                    newNote = value;\n                }\n                return { ...item, note: newNote };\n            });\n            return { rating: newRating };\n        });\n    }\n\n    render() {\n        const { showCallRatingDialog } = this.props;\n        const { rating } = this.state;\n        const placeholderText = 'Add note... (optional)';\n        const maskClasses = classNames({\n            [styles.mask]: true,\n            'ignore-nodestack': true,\n        });\n        return (\n            <div className={maskClasses}>\n                <div\n                    className={styles.CallRating}\n                    style={{\n                        opacity: showCallRatingDialog ? '1' : '0',\n                    }}\n                >\n                    <div className={styles.modalHeader}>\n                        <div className={styles.title}>How would you rate this call?</div>\n                    </div>\n                    <div className={styles.modalBody}>\n                        <div>\n                            Completing this call rating helps our system to provide you with more accurate call\n                            metrics.\n                        </div>\n                        <div className={styles.ratingRow}>\n                            {rating.map(item => (\n                                <div key={item.salesforceId} className={styles.ratingContainer}>\n                                    <div className={styles.ratingTitle}>{item.type}</div>\n                                    <RatingPicker\n                                        name={item.salesforceId}\n                                        onSelect={value => this.handleScoreChange(value, item.salesforceId)}\n                                        selectedIndex={item.score}\n                                    />\n                                    <textarea\n                                        name={item.salesforceId}\n                                        className={styles.noteDetails}\n                                        rows=\"3\"\n                                        placeholder={placeholderText}\n                                        value={item.note}\n                                        onChange={evt => this.handleNoteChange(evt.target.value, item.salesforceId)}\n                                        onFocus={(e) => {\n                                            e.target.placeholder = '';\n                                        }}\n                                        onBlur={(e) => {\n                                            e.target.placeholder = placeholderText;\n                                        }}\n                                    />\n                                </div>\n                            ))}\n                        </div>\n                    </div>\n                    <div className={styles.modalFooter}>\n                        <button type=\"button\" className={styles.cancelButton}\n                                onClick={this.handleCancelClicked.bind(this)}>CANCEL\n                        </button>\n                        <button\n                            type=\"submit\"\n                            className={styles.finishButton}\n                            onClick={this.handleFinishClicked.bind(this)}\n                        >\n                            Finish\n                        </button>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nCallRating.defaultProps = {\n    rating: [],\n};\n\nCallRating.propTypes = {\n    rating: PropTypes.arrayOf(PropTypes.object),\n    showCallRatingDialog: PropTypes.bool.isRequired,\n    onCancelRateCall: PropTypes.func.isRequired,\n    onRateCall: PropTypes.func.isRequired,\n};\n\nexport default CallRating;\n","import { connect } from 'react-redux';\nimport { cancelRateCall } from '../store/actions/actions';\nimport { saveRatings } from '../store/actions/salesforce';\nimport CallRating from '../components/CallRating/CallRating';\n\nconst mapStateToProps = ({ callRating }) => {\n    const { showCallRatingDialog, rating } = callRating;\n    return {\n        showCallRatingDialog,\n        rating,\n    };\n};\n\nconst mapDispatchToProps = dispatch => ({\n    onCancelRateCall: () => {\n        dispatch(cancelRateCall());\n    },\n    onRateCall: (details) => {\n        dispatch(saveRatings(details));\n    },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CallRating);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './KnowledgeClassifications.module.scss';\nimport { callSummaryType, transcriptionType } from '../../shared/types';\nimport {\n    CLASSIFICATION_TYPE_ALERT,\n    CLASSIFICATION_TYPE_CHECKPOINT,\n    CLASSIFICATION_TYPE_CONCEPT,\n    classificationIsTriggered,\n    classificationWeighting,\n} from '../../shared/utility/classifications';\nimport KnowledgeClassificationPill from '../KnowledgeClassificationPill/KnowledgeClassificationPill';\nimport KnowledgeKeywordTopicPill from '../KnowledgeKeywordTopicPill/KnowledgeKeywordTopicPill';\n\nclass KnowledgeClassifications extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = { selectedItem: null, selectedItemName: null, selectedItemKeywords: null };\n        this.onClickClassification = this.onClickClassification.bind(this);\n        this.onClickClose = this.onClickClose.bind(this);\n    }\n\n    onClickClassification(e) {\n        const { transcription } = this.props;\n        const categories = transcription.Categories;\n        const selectedItem = categories.filter(item => item.Name === e.currentTarget.dataset.metric)[0];\n        const selectedItemKeywords = selectedItem.Keywords.map((item) => {\n            let showLeftIndicator = false;\n            let showRightIndicator = false;\n            for (let i = 0; i < item.Mentions.length; i++) {\n                showLeftIndicator = item.Mentions[i].Channel === '1';\n                showRightIndicator = item.Mentions[i].Channel === '2';\n            }\n            return {\n                keyword: item.Keyword,\n                showRightIndicator,\n                showLeftIndicator,\n            };\n        });\n        this.setState({\n            selectedItem: e.currentTarget.dataset.metric,\n            selectedItemName: selectedItem.DisplayName,\n            selectedItemKeywords,\n        });\n    }\n\n    onClickClose() {\n        const { onClose, onItemSelected } = this.props;\n        const { selectedItem } = this.state;\n        onItemSelected(selectedItem);\n        onClose();\n    }\n\n    generateClassifications(categories, type, handleClick) {\n        const items = categories\n            .filter(item => item.Type.toUpperCase() === type.toUpperCase() && classificationIsTriggered(item))\n            .sort((a, b) => {\n                const aWeighting = classificationWeighting(a);\n                const bWeighting = classificationWeighting(b);\n                return aWeighting - bWeighting;\n            });\n        if (items.length === 0) {\n            return null;\n        }\n\n        const { selectedItem } = this.state;\n        return items.map((item) => {\n            const isSelected = selectedItem === item.Name;\n            return (\n                <KnowledgeClassificationPill\n                    key={item.Name}\n                    category={item}\n                    isSelected={isSelected}\n                    onClick={handleClick}\n                />\n            );\n        });\n    }\n\n    renderKeyWordPills(selectedItemKeywords) {\n        const { callSummary } = this.props;\n        if (selectedItemKeywords === null) {\n            return null;\n        }\n        if (selectedItemKeywords.length === 0) {\n            return <span>No keywords found for this category</span>;\n        }\n        return selectedItemKeywords\n            .map(item => (\n                <KnowledgeKeywordTopicPill\n                    colors={callSummary.keyCallers.colors}\n                    isSelected={false}\n                    text={item.keyword}\n                    showLeftIndicator={item.showLeftIndicator}\n                    showRightIndicator={item.showRightIndicator}\n                    modalCategoryPill\n                />\n            ));\n    }\n\n    render() {\n        const { onClose, show, transcription } = this.props;\n        const { selectedItemName, selectedItemKeywords } = this.state;\n        if (!show) {\n            return null;\n        }\n\n        const categories = transcription.Categories || [];\n\n        const checkpoints = this.generateClassifications(categories, CLASSIFICATION_TYPE_CHECKPOINT, this.onClickClassification);\n        const alerts = this.generateClassifications(categories, CLASSIFICATION_TYPE_ALERT, this.onClickClassification);\n        const concepts = this.generateClassifications(categories, CLASSIFICATION_TYPE_CONCEPT, this.onClickClassification);\n        const keyWords = this.renderKeyWordPills(selectedItemKeywords);\n        const triggersTitle = selectedItemName !== null ? 'Triggers:' : null;\n        return (\n            <div className={styles.mask}>\n                <div className={styles.modal}>\n                    <div className={styles.modalHeader}>\n                        <div className={styles.title}>Categories</div>\n                    </div>\n                    <span className={styles.selectedItemName}>{selectedItemName}</span>\n                    <div className={styles.triggers}>\n                        <span>\n                            {triggersTitle}\n                        </span>\n                        <div className={styles.pillContainerKeywords}>\n                            {keyWords}\n                        </div>\n                    </div>\n                    <div className={styles.categoriesContainer}>\n                        <div className={styles.categoriesHeader}>\n                            <div className={styles.headerTitle}>\n                                <div className={styles.title}>CheckPoints</div>\n                                <hr />\n                            </div>\n                            <div className={styles.headerTitle}>\n                                <div className={styles.title}>Alerts</div>\n                                <hr />\n                            </div>\n                            <div className={styles.headerTitle}>\n                                <div className={styles.title}>Concepts</div>\n                                <hr />\n                            </div>\n                        </div>\n                        <div className={styles.categoriesBody}>\n                            <div className={styles.pillContainer}>\n                                {checkpoints}\n                            </div>\n                            <div className={styles.pillContainer}>\n                                {alerts}\n                            </div>\n                            <div className={styles.pillContainer}>\n                                {concepts}\n                            </div>\n                        </div>\n                    </div>\n                    <div className={styles.modalFooter}>\n                        <button type=\"button\" className={styles.cancelButton} onClick={onClose}>CANCEL</button>\n                        <button\n                            type=\"button\"\n                            className={styles.closeButton}\n                            onClick={this.onClickClose}\n                            disabled={selectedItemName === null}\n                        >\n                            View Selection On Timeline\n                        </button>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nKnowledgeClassifications.propTypes = {\n    callSummary: callSummaryType.isRequired,\n    onClose: PropTypes.func.isRequired,\n    onItemSelected: PropTypes.func.isRequired,\n    show: PropTypes.bool,\n    transcription: transcriptionType.isRequired,\n};\n\nKnowledgeClassifications.defaultProps = {\n    show: false,\n};\n\nexport default KnowledgeClassifications;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { callSummaryType, transcriptionType } from '../shared/types';\nimport { getRawDataFromTranscriptionState } from '../store/selectors/common-selectors';\nimport KnowledgeClassifications from '../components/KnowledgeClassifications/KnowledgeClassifications';\nimport { closeClassificationsDialog, selectKnowledgeClassification } from '../store/actions/knowledge';\n\nfunction KnowledgeClassificationsContainer(props) {\n    const {\n        onClose,\n        onItemSelected,\n        show,\n        transcription,\n        callSummary,\n    } = props;\n    return (\n        <KnowledgeClassifications\n            onClose={onClose}\n            onItemSelected={onItemSelected}\n            show={show}\n            transcription={transcription}\n            callSummary={callSummary}\n        />\n    );\n}\n\nKnowledgeClassificationsContainer.propTypes = {\n    callSummary: callSummaryType.isRequired,\n    onClose: PropTypes.func.isRequired,\n    onItemSelected: PropTypes.func.isRequired,\n    show: PropTypes.bool.isRequired,\n    transcription: transcriptionType.isRequired,\n};\n\nconst mapStateToProps = (state) => {\n    const { callSummary } = state;\n    return {\n        show: state.knowledge.showClassificationsDialog,\n        transcription: getRawDataFromTranscriptionState(state),\n        callSummary,\n    };\n};\n\nconst mapDispatchToProps = dispatch => ({\n    onClose: () => {\n        dispatch(closeClassificationsDialog());\n    },\n    onItemSelected: (layer) => {\n        dispatch(selectKnowledgeClassification(layer));\n    },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(KnowledgeClassificationsContainer);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { callSummaryType, transcriptionType } from '../../shared/types';\nimport styles from './KnowledgeKeywordsTopics.module.scss';\nimport { KNOWLEDGE_TYPE_KEYWORD, KNOWLEDGE_TYPE_TOPIC } from '../../store/constants/knowledge';\nimport KnowledgeKeywordTopicPill from '../KnowledgeKeywordTopicPill/KnowledgeKeywordTopicPill';\n\nclass KnowledgeKeywordsTopics extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = { selectedItem: null, keyword: false };\n        this.onClickKeyword = this.onClickKeyword.bind(this);\n        this.onClickClose = this.onClickClose.bind(this);\n        this.onClickTopic = this.onClickTopic.bind(this);\n        this.processKeywordsTopics = this.processKeywordsTopics.bind(this);\n        this.generateKeywords = this.generateKeywords.bind(this);\n        this.generateTopics = this.generateTopics.bind(this);\n        this.generateMarkupForKeywordsTopics = this.generateMarkupForKeywordsTopics.bind(this);\n    }\n\n    onClickKeyword(e) {\n        this.setState({\n            selectedItem: e.currentTarget.dataset.metric,\n            keyword: true,\n        });\n    }\n\n    onClickTopic(e) {\n        this.setState({\n            selectedItem: e.currentTarget.dataset.metric,\n            keyword: false,\n        });\n    }\n\n    processKeywordsTopics(transcription, outerKey, innerKey, type, colors, handleClick) {\n        const combined = {};\n        transcription['1'][outerKey].forEach((value) => {\n            const item = combined[value[innerKey]] || { ...value };\n            item['1'] = true;\n            combined[value[innerKey]] = item;\n        });\n        transcription['2'][outerKey].forEach((value) => {\n            const item = combined[value[innerKey]] || { ...value };\n            item['2'] = true;\n            combined[value[innerKey]] = item;\n        });\n        return this.generateMarkupForKeywordsTopics(\n            innerKey,\n            Object.values(combined),\n            type,\n            colors,\n            handleClick,\n        );\n    }\n\n    generateKeywords(transcription, colors, handleClick) {\n        if (transcription['1'].Keywords.length === 0 && transcription['2'].Keywords.length === 0) {\n            return (<p className=\"text-grey-primary\">No keywords found</p>);\n        }\n        return this.processKeywordsTopics(\n            transcription,\n            'Keywords',\n            'Keyword',\n            KNOWLEDGE_TYPE_KEYWORD,\n            colors,\n            handleClick,\n        );\n    }\n\n    generateTopics(transcription, colors, handleClick) {\n        if (transcription['1'].Keywords.length === 0 && transcription['2'].Keywords.length === 0) {\n            return (<p className=\"text-grey-primary\">No keywords found</p>);\n        }\n        return this.processKeywordsTopics(\n            transcription,\n            'Topics',\n            'Topic',\n            KNOWLEDGE_TYPE_TOPIC,\n            colors,\n            handleClick,\n        );\n    }\n\n    generateMarkupForKeywordsTopics(key, items, type, colors = ['#444', '#aaa'], handleClick) {\n        return items.map((item) => {\n            const { selectedItem } = this.state;\n            let isSelected = false;\n            if (selectedItem !== null) isSelected = selectedItem === item.Keyword || selectedItem === item.Topic;\n            return (\n                <KnowledgeKeywordTopicPill\n                    key={`${item[key]}`}\n                    colors={colors}\n                    isSelected={isSelected}\n                    onClick={handleClick}\n                    showLeftIndicator={item['1'] === true}\n                    showRightIndicator={item['2'] === true}\n                    text={item[key]}\n                    modalPill\n                />\n            );\n        });\n    }\n\n    onClickClose() {\n        const { onClose, onItemSelected } = this.props;\n        onItemSelected(this.state);\n        onClose();\n    }\n\n    render() {\n        const {\n            onClose, show, transcription, callSummary,\n        } = this.props;\n        const { selectedItem } = this.state;\n        if (!show) {\n            return null;\n        }\n        const keyWords = this.generateKeywords(\n            transcription,\n            callSummary.keyCallers.colors,\n            this.onClickKeyword,\n        );\n        const topics = this.generateTopics(\n            transcription,\n            callSummary.keyCallers.colors,\n            this.onClickTopic,\n        );\n        return (\n            <div className={styles.mask}>\n                <div className={styles.modal}>\n                    <div className={styles.modalHeader}>\n                        <div className={styles.title}>All Keywords & Topics</div>\n                    </div>\n                    <div className={styles.subtitle}>Keywords</div>\n                    <hr />\n                    <div className={styles.pillContainer}>\n                        {keyWords}\n                    </div>\n                    <div className={styles.subtitle}>Topics</div>\n                    <hr />\n                    <div className={styles.pillContainer}>\n                        {topics}\n                    </div>\n                    <div className={styles.modalFooter}>\n                        <button type=\"button\" className={styles.cancelButton} onClick={onClose}>CANCEL</button>\n                        <button\n                            type=\"button\"\n                            className={styles.closeButton}\n                            disabled={selectedItem === null}\n                            onClick={this.onClickClose}\n                        >\n                            View Selection On Timeline\n                        </button>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nKnowledgeKeywordsTopics.propTypes = {\n    onClose: PropTypes.func.isRequired,\n    show: PropTypes.bool,\n    onItemSelected: PropTypes.func.isRequired,\n    transcription: transcriptionType.isRequired,\n    callSummary: callSummaryType.isRequired,\n};\n\nKnowledgeKeywordsTopics.defaultProps = {\n    show: false,\n};\n\nexport default KnowledgeKeywordsTopics;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { callSummaryType, transcriptionType } from '../shared/types';\nimport { getRawDataFromTranscriptionState } from '../store/selectors/common-selectors';\nimport { closeKeywordsTopicsDialog, selectKnowledgeKeyword, selectKnowledgeTopic } from '../store/actions/knowledge';\nimport KnowledgeKeywordsTopics from '../components/KnowledgeKeywordsTopics/KnowledgeKeywordsTopics';\n\nfunction KnowledgeKeywordsTopicsContainer(props) {\n    const {\n        onClose,\n        onItemSelected,\n        show,\n        transcription,\n        callSummary,\n    } = props;\n    return (\n        <KnowledgeKeywordsTopics\n            onClose={onClose}\n            onItemSelected={onItemSelected}\n            show={show}\n            transcription={transcription}\n            callSummary={callSummary}\n        />\n    );\n}\n\nKnowledgeKeywordsTopicsContainer.propTypes = {\n    onClose: PropTypes.func.isRequired,\n    onItemSelected: PropTypes.func.isRequired,\n    show: PropTypes.bool.isRequired,\n    transcription: transcriptionType.isRequired,\n    callSummary: callSummaryType.isRequired,\n};\n\nconst mapStateToProps = state => ({\n    show: state.knowledge.showKeywordsTopicsDialog,\n    transcription: getRawDataFromTranscriptionState(state),\n    callSummary: state.callSummary,\n});\n\nconst mapDispatchToProps = dispatch => ({\n    onClose: () => {\n        dispatch(closeKeywordsTopicsDialog());\n    },\n    onItemSelected: (item) => {\n        if (item.keyword) {\n            dispatch(selectKnowledgeKeyword(item.selectedItem));\n        } else {\n            dispatch(selectKnowledgeTopic(item.selectedItem));\n        }\n    },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(KnowledgeKeywordsTopicsContainer);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './ErrorModal.module.scss';\n\nclass ErrorModal extends Component {\n    constructor(props) {\n        super(props);\n        this.handlePrimaryClick = this.handlePrimaryClick.bind(this);\n        this.handleSecondaryClick = this.handleSecondaryClick.bind(this);\n    }\n\n    handlePrimaryClick() {\n        const { closeModal, onPrimaryClicked } = this.props;\n        onPrimaryClicked();\n        closeModal();\n    }\n\n    handleSecondaryClick() {\n        const { closeModal } = this.props;\n        closeModal();\n    }\n\n    render() {\n        const {\n            show, title, message, primaryButtonText, secondaryButtonText,\n        } = this.props;\n        if (!show) {\n            return null;\n        }\n        return (\n            <div className={styles.mask}>\n                <div className={styles.modal}>\n                    <div className={styles.modalHeader}>\n                        <div data-testid=\"divTitle\" className={styles.title}>{title}</div>\n                    </div>\n                    <div data-testid=\"divMessage\" className={styles.message}>{message}</div>\n                    <div className={styles.modalFooter}>\n                        {secondaryButtonText\n                            && (\n                                <button type=\"button\" className={styles.secondaryButton} onClick={this.handleSecondaryClick}>\n                                    {secondaryButtonText.toUpperCase()}\n                                </button>\n                            )\n                        }\n                        <button type=\"button\" className={styles.primaryButton} onClick={this.handlePrimaryClick}>\n                            {primaryButtonText}\n                        </button>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nErrorModal.propTypes = {\n    show: PropTypes.bool.isRequired,\n    title: PropTypes.string.isRequired,\n    message: PropTypes.string.isRequired,\n    primaryButtonText: PropTypes.string.isRequired,\n    secondaryButtonText: PropTypes.string,\n    onPrimaryClicked: PropTypes.func.isRequired,\n    closeModal: PropTypes.func.isRequired,\n};\n\nexport default ErrorModal;\n","import { connect } from 'react-redux';\nimport ErrorModal from '../components/ErrorModal/ErrorModal';\nimport { getErrorModal } from '../store/selectors/common-selectors';\nimport { closeErrorModal } from '../store/actions/errorModal';\n\nconst mapStateToProps = (state) => {\n    const {\n        show,\n        title,\n        message,\n        primaryButtonText,\n        secondaryButtonText,\n        onPrimaryClicked,\n    } = getErrorModal(state);\n    return {\n        show,\n        title,\n        message,\n        primaryButtonText,\n        secondaryButtonText,\n        onPrimaryClicked,\n    };\n};\n\nconst mapDispatchToProps = dispatch => ({\n    closeModal: () => {\n        dispatch(closeErrorModal());\n    },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ErrorModal);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport './App.scss';\nimport './styles/_global.scss';\nimport Tooltip from 'tooltip.js';\nimport Header from './components/Header/Header';\nimport TranscriptionContainer from './containers/TranscriptionContainer';\nimport AuxiliaryScrubbersContainer from './containers/AuxiliaryScrubbersContainer';\nimport EventTimelineContainer from './containers/EventTimelineContainer';\nimport MetricsTimelineLayerContainer from './containers/MetricsTimelineLayerContainer';\nimport ScrubberContainer from './containers/ScrubberContainer';\nimport StandardChannelEventsLayerContainer from './containers/StandardChannelEventsLayerContainer';\nimport NoteModalContainer from './containers/NoteModalContainer';\nimport {\n    activeLayersType,\n    callSummaryType,\n    scrubType,\n    viewportType,\n} from './shared/types';\nimport {\n    moveScrubber,\n    updateTranscriptionViewport,\n    openRateCall,\n    initialiseWithPrimaryUuid,\n} from './store/actions/actions';\nimport { BACKGROUND_NOISE_LEVEL, TRANSCRIPTION_CONFIDENCE } from './store/constants/metrics-layers';\nimport { getTimeline } from './store/selectors';\nimport NodeStack from './shared/utility/NodeStack';\nimport SearchFiltersContainer from './containers/SearchFiltersContainer';\nimport CallRatingContainer from './containers/CallRatingContainer';\nimport KnowledgeClassificationsContainer from './containers/KnowledgeClassificationsContainer';\nimport KnowledgeKeywordsTopicsContainer from './containers/KnowledgeKeywordsTopicsContainer';\nimport { showErrorModal } from './store/selectors/common-selectors';\nimport ErrorModalContainer from './containers/ErrorModalContainer';\n\nexport class App extends Component {\n    componentDidMount() {\n        const { onSetFocus } = this.props;\n        new NodeStack('[data-tooltip]')\n            .onHover(elements => elements.map((element) => {\n                const tooltip = new Tooltip(element, {\n                    title: element.dataset.tooltip,\n                    html: true,\n                    placement: 'bottom',\n                    container: document.body,\n                    trigger: 'manual',\n                });\n                tooltip.show();\n                if (element.dataset.tooltipFixedWidth === 'true') {\n                    // eslint-disable-next-line no-underscore-dangle\n                    tooltip._tooltipNode.classList.add('fixed-width');\n                }\n                return tooltip;\n            }))\n            .onClear((tooltips) => {\n                tooltips.forEach((tooltip) => {\n                    tooltip.dispose();\n                });\n            });\n        new NodeStack('[data-set-focus]')\n            .onClick((elements) => {\n                const [element] = elements;\n                const { setFocus } = element.dataset;\n                onSetFocus(setFocus);\n            });\n    }\n\n    componentDidUpdate(previous) {\n        const {\n            isPlaying,\n            scrub,\n            playhead,\n            onScrubberMoved,\n        } = this.props;\n        if (playhead !== previous.playhead) {\n            if (isPlaying) {\n                if (scrub.isUserModified && previous.playhead <= scrub.end && playhead > scrub.end) {\n                    this.moveScrubToPlayheadArea(playhead);\n                }\n                this.moveScrubToKeepPlayheadCentral(playhead);\n                this.moveTranscriptionViewportToKeepPlayheadCentral(playhead);\n            } else {\n                onScrubberMoved({ ...scrub, isUserModified: false });\n            }\n        }\n    }\n\n    moveScrubToPlayheadArea(playhead) {\n        const { scrub, onScrubberMoved } = this.props;\n        const scrubWidth = scrub.end - scrub.start;\n        const start = Math.min(playhead, 100 - scrubWidth);\n        onScrubberMoved({\n            start,\n            end: start + scrubWidth,\n        });\n    }\n\n    moveScrubToKeepPlayheadCentral(playhead) {\n        const { scrub, onScrubberMoved } = this.props;\n        const scrubWidth = (scrub.end - scrub.start);\n        const scrubMiddle = scrub.start + (scrubWidth / 2);\n        const diff = playhead - scrubMiddle;\n        if (scrub.isUserModified && parseInt(diff * 100, 10) !== 0) {\n            return;\n        }\n        const start = Math.min(Math.max(0, scrub.start + diff), 100 - scrubWidth);\n        const end = start + scrubWidth;\n        onScrubberMoved({ start, end });\n    }\n\n    moveTranscriptionViewportToKeepPlayheadCentral(playhead) {\n        const { viewport, onViewportMoved } = this.props;\n        const { span } = viewport;\n        const viewportMiddle = viewport.start + (span / 2);\n        const diff = playhead - viewportMiddle;\n        const start = Math.min(Math.max(0, viewport.start + diff), 100 - span);\n        onViewportMoved({ start, span });\n    }\n\n    render() {\n        const {\n            activeLayers,\n            callSummary,\n            showEditModal,\n            showCallRatingDialog,\n            onFinishAndRateClicked,\n            showClassificationsDialog,\n            showKeywordsTopicsDialog,\n            jwtToken,\n            showRatingButton,\n            isRated,\n            showErrorModal,\n        } = this.props;\n        const { keyCallers } = callSummary;\n        const { colors } = keyCallers;\n        const activeGraphLayers = activeLayers\n            .filter(layer => [BACKGROUND_NOISE_LEVEL, TRANSCRIPTION_CONFIDENCE].includes(layer));\n        const graphLayers = activeGraphLayers.map(layer => (\n            <MetricsTimelineLayerContainer key={layer} metricType={layer} />\n        ));\n        return (\n            <div className=\"App\">\n                <Header\n                    onFinishAndRateClicked={onFinishAndRateClicked}\n                    showTransport\n                    jwtToken={jwtToken}\n                    showRatingButton={showRatingButton}\n                    isRated={isRated}\n                />\n                <div className=\"appContainer container\">\n                    <SearchFiltersContainer activeLayers={activeLayers} />\n                    <div className=\"hideableContainer\">\n                        <ScrubberContainer\n                            id=\"event-scrubber\"\n                        >\n                            <EventTimelineContainer\n                                plotWholeTimeline\n                                singleColor=\"#49535c\"\n                            >\n                                <StandardChannelEventsLayerContainer plotWholeTimeline />\n                            </EventTimelineContainer>\n                        </ScrubberContainer>\n                        <AuxiliaryScrubbersContainer />\n\n                        <EventTimelineContainer\n                            showTransport\n                            plotWholeTimeline={false}\n                            colors={colors}\n                            leftMargin={40}\n                        >\n                            {graphLayers}\n                            <StandardChannelEventsLayerContainer plotWholeTimeline={false} />\n\n                        </EventTimelineContainer>\n                    </div>\n                    <TranscriptionContainer canSetPlayHead plotWholeTimeline={false} />\n                </div>\n                {showEditModal && <NoteModalContainer />}\n                {showCallRatingDialog && <CallRatingContainer />}\n                {showClassificationsDialog && <KnowledgeClassificationsContainer />}\n                {showKeywordsTopicsDialog && <KnowledgeKeywordsTopicsContainer />}\n                {showErrorModal && <ErrorModalContainer />}\n            </div>\n        );\n    }\n}\nApp.defaultProps = {\n    jwtToken: null,\n    showRatingButton: false,\n    isRated: false,\n    showErrorModal: false,\n};\nApp.propTypes = {\n    activeLayers: activeLayersType.isRequired,\n    isPlaying: PropTypes.bool.isRequired,\n    playhead: PropTypes.number.isRequired,\n    scrub: scrubType.isRequired,\n    callSummary: callSummaryType.isRequired,\n    onScrubberMoved: PropTypes.func.isRequired,\n    onViewportMoved: PropTypes.func.isRequired,\n    onSetFocus: PropTypes.func.isRequired,\n    viewport: viewportType.isRequired,\n    showEditModal: PropTypes.bool.isRequired,\n    showCallRatingDialog: PropTypes.bool.isRequired,\n    showClassificationsDialog: PropTypes.bool.isRequired,\n    showKeywordsTopicsDialog: PropTypes.bool.isRequired,\n    onFinishAndRateClicked: PropTypes.func.isRequired,\n    jwtToken: PropTypes.shape({\n        token: PropTypes.string,\n        organisationId: PropTypes.string,\n    }),\n    showRatingButton: PropTypes.bool,\n    isRated: PropTypes.bool,\n    showErrorModal: PropTypes.bool,\n};\n\nconst mapStateToProps = (state) => {\n    const {\n        primaryUuid,\n        activeLayers,\n        scrub,\n        data,\n        callSummary,\n    } = state;\n\n    const {\n        isPlaying,\n        playhead,\n    } = state.playback;\n\n    const { viewport } = state.transcription;\n    const { showEditModal } = state.notes;\n    const { showCallRatingDialog, rating } = state.callRating;\n    const { showClassificationsDialog } = state.knowledge;\n    const { showKeywordsTopicsDialog } = state.knowledge;\n    const { jwtToken } = state.auth;\n    const showRatingButton = rating.length > 0;\n    const isRated = !!rating.find(item => item.score > 0);\n    return {\n        primaryUuid,\n        activeLayers,\n        isPlaying,\n        playhead,\n        scrub,\n        data,\n        callSummary,\n        timeline: getTimeline(state),\n        viewport,\n        showEditModal,\n        showCallRatingDialog,\n        showClassificationsDialog,\n        showKeywordsTopicsDialog,\n        jwtToken,\n        showRatingButton,\n        isRated,\n        showErrorModal: showErrorModal(state),\n    };\n};\n\nconst mapDispatchToProps = dispatch => ({\n    onScrubberMoved: (scrub) => {\n        dispatch(moveScrubber(scrub));\n    },\n    onViewportMoved: (port) => {\n        dispatch(updateTranscriptionViewport(port));\n    },\n    onFinishAndRateClicked: () => {\n        dispatch(openRateCall());\n    },\n    onSetFocus: (uuid) => {\n        dispatch(initialiseWithPrimaryUuid(uuid));\n    },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\n/* eslint-disable */\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","/* eslint-disable react/jsx-filename-extension */\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { applyMiddleware, createStore, compose } from 'redux';\nimport thunk from 'redux-thunk';\nimport rootReducer from './store/reducers';\nimport './index.scss';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n// import { getQuery } from './shared/utility/url';\n// import { initialiseWithPrimaryUuid } from './store/actions/actions';\nimport getAuthToken from './store/actions/auth';\n\n/* eslint-disable no-underscore-dangle */\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst store = createStore(\n    rootReducer,\n    composeEnhancers(\n        applyMiddleware(thunk),\n    ),\n);\n/* eslint-enable */\n// store.dispatch(initialiseWithPrimaryUuid(getQuery().uuid));\nstore.dispatch(getAuthToken());\n\n/* eslint-disable react/jsx-filename-extension */\nReactDOM.render(\n    <Provider store={store}>\n        <App />\n    </Provider>,\n    document.getElementById('root'),\n);\n/* eslint-enable */\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}